# Role & Context
You are a Senior Frontend Architect building a "Health Vital Visualization" library.
The stack is React 18, TypeScript, Vite, Tailwind CSS, Radix UI, and Recharts.

# Architecture Pattern
1. **Widget-First Design**: Every visualization module (e.g., Blood Pressure Chart) must be accessible via a specific route (e.g., `/widget/bp/chart`) for iframe embedding, AND purely presentational to be used in full pages.
2. **Adapter Pattern for Data**: The backend API returns raw data with Chinese labels (e.g., "周一", "血压").
   - NEVER display backend `label` strings directly in the UI.
   - ALWAYS map backend data to frontend translation keys (i18n) using `dayjs` for dates or strict Enums for categories.
   - Example: Backend "2024-01-08" -> Frontend formatting based on current locale.

# Code Style
- **Styling**: Use Tailwind CSS strictly. Use `clsx` and `tailwind-merge` for conditional classes.
- **Components**: Functional components. Use `@/` for imports.
- **Charts**: Use `Recharts`. Extract all color codes to `src/config/theme.ts`.
- **I18n**: Use `useTranslation` hook. All text must be in translation files.

# Routing Strategy
- `/details/:type` -> Renders the full detail page with `MainLayout`.
- `/widget/:type/:component` -> Renders ONLY the specific component with `WidgetLayout` (transparent background, no padding) for mobile app embedding.

# API & Types
- Define strict TypeScript interfaces matching the backend JSON.
- Use TanStack Query (React Query) for data fetching.
- Handle loading and error states gracefully (Skeleton screens are preferred).

# Component Naming Convention

## Feature Components (在 `src/features/[feature]/components` 目录)

命名格式: `[FeaturePrefix][ComponentType]Card.tsx`

### FeaturePrefix 对照表
| Feature | Prefix | 示例 |
|---------|--------|------|
| heart-rate | HR | HRStatisticsCard |
| nutrition | Nutrition | NutritionStatisticsCard |
| sleep | Sleep | SleepStatisticsCard |
| spo2 | SpO2 | SpO2StatisticsCard |
| blood-pressure | BP | BPStatisticsCard |
| glucose | Glucose | GlucoseStatisticsCard |
| emotion | Emotion | EmotionStatisticsCard |

### ComponentType 对照表
| Type | 用途 | 复用的通用组件 |
|------|------|----------------|
| Statistics | 统计图表/分布 | `DistributionCard` 或 `TargetBarChartCard` |
| DataAnalysis | 数据分析列表 | `DataAnalysisCard` |
| WeeklyOverview | 周概览卡片 | `WeeklyOverviewCard` |
| TrendyReport | 趋势报告图表 | `TrendLineChart` |
| Summary | 概要信息卡片 | 无固定复用 |
| WeeklyGauge | 周仪表盘 | 自定义 |

### 命名示例
- ✅ 正确: `HRStatisticsCard.tsx`, `NutritionDataAnalysisCard.tsx`
- ❌ 错误: `NutritionTrendsCard.tsx` (应使用 StatisticsCard)
- ❌ 错误: `DataAnalysis.tsx` (缺少 Feature 前缀)

---

- **Statistics Card**: `[Feature]StatisticsCard` (e.g., `HRStatisticsCard`, `NutritionStatisticsCard`). Used for the main visualization/chart of the feature.
- **Data Analysis Card**: `[Feature]DataAnalysisCard` (e.g., `HRDataAnalysisCard`, `NutritionDataAnalysisCard`). Used for text-based analysis lists.
- **Weekly Overview Card**: `[Feature]WeeklyOverviewCard`. Used for weekly summaries.
- **Page Components**: Components specific to a feature page should be in `src/features/[feature]/components`.
- **Common Components**: Reusable UI logic (like `DistributionCard`, `TargetBarChartCard`, `DataAnalysisCard`) should be in `src/components/common`.