export function __vite_legacy_guard(){import.meta.url,import(`_`).catch(()=>1),(async function*(){})().next()}import{it as t,n,nt as r,ot as i,t as a,tt as o}from"./vendor-i_a7m9KR.js";import{_ as s,a as c,c as l,d as u,f as d,g as f,h as p,i as m,l as h,m as g,n as _,o as v,p as y,r as b,s as x,t as S,u as C}from"./vendor-charts-uxJ0cBSP.js";import{A as w,C as T,D as E,E as D,M as O,N as k,O as A,P as j,S as M,T as N,_ as P,a as F,b as I,c as L,d as R,f as z,g as B,h as V,i as ee,j as te,k as ne,l as re,m as ie,n as ae,o as oe,p as se,r as ce,s as le,t as ue,u as de,v as fe,w as pe,x as H,y as me}from"./vendor-react-B6qGyndZ.js";import{t as he}from"./vendor-query-yIoHt1uW.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ge=j(),U=i();function W(...e){return o(r(e))}var _e=null;function ve(){if(_e!==null)return _e;let e=navigator.userAgent.toLowerCase(),t=/android/.test(e),n=/iphone|ipad|ipod/.test(e),r=/tbs|qqbrowser|mqqbrowser|micromessenger/.test(e),i=/webkit/.test(e)&&!/safari/.test(e);return _e=(t||n)&&(r||i),_e}function ye(e){return ve()?Math.min(e,300):e}var G=D();function be({startDate:e,endDate:t,onPrevious:n,onNext:r,disableNext:i=!1,className:a}){return(0,G.jsxs)(`div`,{className:W(`flex items-center justify-center gap-4 py-3 px-4 bg-white rounded-full shadow-sm border border-slate-100`,a),children:[(0,G.jsx)(`button`,{onClick:n,className:`p-1 text-slate-400 hover:text-slate-600 transition-colors`,"aria-label":`Previous period`,children:(0,G.jsx)(B,{className:`w-5 h-5`})}),(0,G.jsxs)(`span`,{className:`text-sm font-medium text-slate-700`,children:[e,` ---- `,t]}),i?(0,G.jsx)(`div`,{className:`w-7 h-7`}):(0,G.jsx)(`button`,{onClick:r,className:`p-1 text-slate-400 hover:text-slate-600 transition-colors`,"aria-label":`Next period`,children:(0,G.jsx)(V,{className:`w-5 h-5`})})]})}var K=(0,U.forwardRef)(({className:e,asChild:t=!1,...n},r)=>(0,G.jsx)(t?ue:`div`,{ref:r,className:W(`rounded-2xl shadow-sm bg-white px-5 py-4 border border-slate-100`,e),...n}));K.displayName=`Card`;var xe=(0,U.forwardRef)(({className:e,...t},n)=>(0,G.jsx)(`div`,{ref:n,className:W(`flex flex-col space-y-1.5 pb-4`,e),...t}));xe.displayName=`CardHeader`;var Se=(0,U.forwardRef)(({className:e,...t},n)=>(0,G.jsx)(`h3`,{ref:n,className:W(`text-lg font-semibold text-slate-800`,e),...t}));Se.displayName=`CardTitle`;var Ce=(0,U.forwardRef)(({className:e,...t},n)=>(0,G.jsx)(`p`,{ref:n,className:W(`text-sm text-slate-500`,e),...t}));Ce.displayName=`CardDescription`;var q=(0,U.forwardRef)(({className:e,...t},n)=>(0,G.jsx)(`div`,{ref:n,className:W(``,e),...t}));q.displayName=`CardContent`;var we=(0,U.forwardRef)(({className:e,...t},n)=>(0,G.jsx)(`div`,{ref:n,className:W(`flex items-center pt-4`,e),...t}));we.displayName=`CardFooter`;const J={bp:`#F4A261`,spo2:`#4CC9F0`,heartRate:`#F87171`,glucose:`#E9C46A`,sleep:`#A78BFA`},Y={bp:{primary:`#F4A261`,secondary:`#F4A26180`,gradient:{start:`#F4A261`,end:`#F4A26120`}},spo2:{primary:`#4CC9F0`,secondary:`#4CC9F080`,gradient:{start:`#4CC9F0`,end:`#4CC9F020`}},heartRate:{primary:`#F87171`,secondary:`#F8717180`,gradient:{start:`#F87171`,end:`#F8717120`}},glucose:{primary:`#E9C46A`,secondary:`#E9C46A80`,gradient:{start:`#E9C46A`,end:`#E9C46A20`}}},X={loadingOverlay:`rgba(0, 0, 0, 0.27)`},Te={card:{background:`#FFFFFF`,border:`#E5E7EB`},page:{background:`#F8F9FA`},text:{primary:`#1F2937`,secondary:`#6B7280`,muted:`#9CA3AF`},status:{normal:`#10B981`,warning:`#F59E0B`,danger:`#EF4444`},trend:{up:`#EF4444`,down:`#10B981`,stable:`#6B7280`}};function Ee({active:e,payload:t,label:n}){if(!e||!t||t.length===0)return null;let r=t.find(e=>e.dataKey===`systolic`&&e.name===`systolic`),i=t.find(e=>e.dataKey===`diastolic`&&e.name===`diastolic`);return(0,G.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,G.jsx)(`p`,{className:`font-medium mb-1`,children:n}),r&&(0,G.jsxs)(`p`,{className:`text-orange-300`,children:[`SBP: `,r.value]}),i&&(0,G.jsxs)(`p`,{className:`text-emerald-300`,children:[`DBP: `,i.value]})]})}const De=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:c}=M(),l=J.bp,d=[{name:`Mon`,systolic:120,diastolic:80},{name:`Tues`,systolic:118,diastolic:78},{name:`Wed`,systolic:122,diastolic:82},{name:`Thu`,systolic:119,diastolic:79},{name:`Fri`,systolic:121,diastolic:81},{name:`Sat`,systolic:117,diastolic:77},{name:`Sun`,systolic:120,diastolic:80}],f=(0,U.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],systolic:e.systolic,diastolic:e.diastolic})))==null?d:t},[e==null?void 0:e.chartData]),m=ye(800);return(0,G.jsxs)(K,{className:`${t} relative`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(ae,{className:`w-5 h-5`,style:{color:l}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`page.bloodPressure.trendyReport`)})]}),n&&(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,G.jsx)(L,{className:`w-3 h-3 animate-spin`}),(0,G.jsx)(`span`,{children:c(`common.loading`)})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-3 mb-5`,children:[(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,G.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:l},children:(r=e==null||(i=e.summary)==null?void 0:i.avgSystolic)==null?`--`:r}),(0,G.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`units.mmHg`)})]}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:c(`page.bloodPressure.weeksAverageSBP`)})]}),(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,G.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:l},children:(a=e==null||(o=e.summary)==null?void 0:o.avgDiastolic)==null?`--`:a}),(0,G.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`units.mmHg`)})]}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:c(`page.bloodPressure.weeksAverageDBP`)})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:l}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:c(`vitals.sbp`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full bg-emerald-400`}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:c(`vitals.dbp`)})]})]}),(0,G.jsx)(`div`,{className:`h-44 -mx-2`,children:(0,G.jsx)(s,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,G.jsxs)(S,{data:f,margin:{top:10,right:10,left:-15,bottom:0},children:[(0,G.jsxs)(`defs`,{children:[(0,G.jsxs)(`linearGradient`,{id:`sbpGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:l,stopOpacity:.4}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:l,stopOpacity:.05})]}),(0,G.jsxs)(`linearGradient`,{id:`dbpGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:`#10B981`,stopOpacity:.3}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:`#10B981`,stopOpacity:.05})]})]}),(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`name`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[60,160]}),(0,G.jsx)(p,{content:(0,G.jsx)(Ee,{})}),(0,G.jsx)(h,{type:`monotone`,dataKey:`systolic`,stroke:`transparent`,fill:`url(#sbpGradient)`,name:`systolic-area`,animationDuration:m}),(0,G.jsx)(h,{type:`monotone`,dataKey:`diastolic`,stroke:`transparent`,fill:`url(#dbpGradient)`,name:`diastolic-area`,animationDuration:m}),(0,G.jsx)(C,{type:`monotone`,dataKey:`systolic`,stroke:l,strokeWidth:2,dot:{fill:l,strokeWidth:0,r:4},activeDot:{r:6,stroke:l,strokeWidth:2,fill:`#fff`},name:`systolic`,animationDuration:m}),(0,G.jsx)(C,{type:`monotone`,dataKey:`diastolic`,stroke:`#10B981`,strokeWidth:2,dot:{fill:`#10B981`,strokeWidth:0,r:4},activeDot:{r:6,stroke:`#10B981`,strokeWidth:2,fill:`#fff`},name:`diastolic`,animationDuration:m})]})})})]})});var Oe={normal:`#91C6FF`,high_normal:`#B3EFB2`,low_bp:`#FF9393`,high_bp:`#FFD024`},ke={normal:`status.normal`,high_normal:`status.normalHighValue`,low_bp:`status.tooLow`,high_bp:`status.tooHigh`},Ae=[`normal`,`high_normal`,`low_bp`,`high_bp`];const je=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:c}=M(),l=J.bp,u=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,d=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,f=(0,U.useMemo)(()=>Ae.map(e=>{let t=u.find(t=>t.type===e);return{type:e,label:c(ke[e]),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Oe[e]}}),[u,c]),p=(0,U.useMemo)(()=>f.filter(e=>e.type===`normal`||e.type===`high_normal`).reduce((e,t)=>e+t.count,0),[f]),m=(0,U.useMemo)(()=>f.map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color})),[f]),h=ye(800);return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(H,{className:`w-5 h-5`,style:{color:l}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`page.bloodPressure.bpStatistics`)}),(0,G.jsx)(de,{className:`w-4 h-4 text-slate-400`})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,G.jsx)(`span`,{className:`text-4xl font-bold`,style:{color:l},children:p}),(0,G.jsxs)(`span`,{className:`text-base text-slate-400`,children:[`/ `,d,` `,c(`common.times`)]})]}),(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:c(`page.bloodPressure.normalResults`)})]}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 gap-x-4 gap-y-2`,children:f.map(e=>(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label})]}),(0,G.jsxs)(`span`,{className:`text-base font-semibold ml-[18px]`,style:{color:e.color},children:[e.count,` `,e.count===1?c(`common.time`):c(`common.times`)]})]},e.type))})]}),(0,G.jsxs)(`div`,{className:`w-40 h-40 relative flex-shrink-0 ml-2`,children:[(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsx)(b,{children:(0,G.jsx)(y,{data:m,cx:`50%`,cy:`50%`,innerRadius:50,outerRadius:72,paddingAngle:3,dataKey:`value`,startAngle:90,endAngle:-270,strokeWidth:0,animationDuration:h,children:m.map((e,t)=>(0,G.jsx)(g,{fill:e.color},`cell-${t}`))})})}),(0,G.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center`,children:[(0,G.jsx)(`span`,{className:`text-lg font-bold`,style:{color:l},children:c(`common.good`)}),(0,G.jsx)(`span`,{className:`text-xs text-slate-400`,children:c(`common.inAverage`)})]})]})]})]})}),Me=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=M(),o=J.bp,s=(r=e==null?void 0:e.comparison)==null?{current:{systolic:0,diastolic:0},previous:{systolic:0,diastolic:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{systolicChange:0,diastolicChange:0,systolicTrend:`stable`,diastolicTrend:`stable`}:i,l=(0,U.useMemo)(()=>e=>e===`up`?(0,G.jsx)(fe,{className:`w-4 h-4`}):e===`down`?(0,G.jsx)(me,{className:`w-4 h-4`}):null,[]),u=(0,U.useMemo)(()=>s.insight||a(`page.bloodPressure.defaultInsight`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),[s.insight,a]);return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(P,{className:`w-5 h-5`,style:{color:o}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.bloodPressure.compareWithLastWeek`)})]}),(0,G.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageSBP`)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.systolic:`--`}),(0,G.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.systolicChange!==0&&(0,G.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.systolicTrend),Math.abs(c.systolicChange)]})]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.systolic:`--`,a(`units.mmHg`)]})]}),(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageDBP`)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.diastolic:`--`}),(0,G.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.diastolicChange!==0&&(0,G.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.diastolicTrend),Math.abs(c.diastolicChange)]})]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.diastolic:`--`,a(`units.mmHg`)]})]})]}),(0,G.jsx)(`div`,{className:`p-4 rounded-2xl bg-sky-50`,children:(0,G.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:u})})]})}),Ne=(0,U.memo)(({data:e,weeklySummary:t,className:n,isLoading:r})=>{let{t:i}=M(),a=J.bp,o=(0,U.useMemo)(()=>(t==null?void 0:t.overview)||`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`,[t==null?void 0:t.overview]),s=(0,U.useMemo)(()=>(t==null?void 0:t.highlights)||`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`,[t==null?void 0:t.highlights]);return(0,G.jsxs)(K,{className:`${n} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${r?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(z,{className:`w-5 h-5`,style:{color:a}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`page.bloodPressure.weeklyOverview`)})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:a},children:i(`page.bloodPressure.overallSituation`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o})})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full bg-amber-400 text-white text-xs font-medium mb-2`,children:i(`page.bloodPressure.needsAttention`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:s})})]}),(t==null?void 0:t.suggestions)&&t.suggestions.length>0&&(0,G.jsx)(`div`,{className:`mt-4 pt-4 border-t border-slate-100`,children:(0,G.jsx)(`ul`,{className:`space-y-2`,children:t.suggestions.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,G.jsx)(`span`,{style:{color:a},children:`•`}),e]},t))})})]})}),Pe={baseURL:`https://test.fulai.tech`,auth:{deviceLogin:`/auth/device/login`},trendReview:{overview:`/trend-review/overview`,indicatorDetail:`/trend-review/indicator-detail`},device:{deviceId:`FL-DEVICE-001`,deviceSecret:`device_secret_key_123`}},Fe={accessToken:10080*60*1e3,refreshToken:720*60*60*1e3},Ie=`fulai_auth_data`,Le=new class{constructor(){this.authData=null,this.loadFromStorage()}loadFromStorage(){try{let e=localStorage.getItem(Ie);e&&(this.authData=JSON.parse(e))}catch(e){console.error(`Failed to load auth data from storage:`,e),this.authData=null}}saveToStorage(){try{this.authData?localStorage.setItem(Ie,JSON.stringify(this.authData)):localStorage.removeItem(Ie)}catch(e){console.error(`Failed to save auth data to storage:`,e)}}async login(e){let t=e||{deviceId:Pe.device.deviceId,deviceSecret:Pe.device.deviceSecret},r=await n.post(`${Pe.baseURL}${Pe.auth.deviceLogin}`,t,{headers:{"Content-Type":`application/json`,Accept:`application/json`}});if(r.data.code!==0)throw Error(r.data.msg||`Login failed`);let i=Date.now();return this.authData={user:r.data.data.user,accessToken:r.data.data.accessToken,refreshToken:r.data.data.refreshToken,accessTokenExpiry:i+Fe.accessToken,refreshTokenExpiry:i+Fe.refreshToken},this.saveToStorage(),this.authData}isAuthenticated(){return this.authData?Date.now()<this.authData.accessTokenExpiry-300*1e3:!1}canRefresh(){return this.authData?Date.now()<this.authData.refreshTokenExpiry:!1}getAccessToken(){return this.authData?this.authData.accessToken:null}getRefreshToken(){return this.authData?this.authData.refreshToken:null}getAuthData(){return this.authData}logout(){this.authData=null,this.saveToStorage()}async ensureAuthenticated(){return this.isAuthenticated()||await this.login(),this.authData.accessToken}};function Re(){let e=n.create({baseURL:Pe.baseURL,headers:{"Content-Type":`application/json`,Accept:`application/json`},timeout:3e4});return e.interceptors.request.use(async e=>{var t;try{let t=await Le.ensureAuthenticated();t&&(e.headers.Authorization=`Bearer ${t}`)}catch(e){console.error(`Failed to get auth token:`,e)}return console.log(`[API Request]`,(t=e.method)==null?void 0:t.toUpperCase(),e.url,e.data),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async t=>{var n;let r=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!r._retry){r._retry=!0;try{Le.logout();let t=await Le.ensureAuthenticated();return r.headers.Authorization=`Bearer ${t}`,e(r)}catch(e){return Promise.reject(e)}}return Promise.reject(t)}),e}const ze=Re();function Be(){let e=new Date,t=e.toISOString().split(`T`)[0],n=new Date(e);n.setDate(n.getDate()-6);let r=n.toISOString().split(`T`)[0];return console.log(`[DateRange]`,{start_date:r,end_date:t}),{start_date:r,end_date:t}}async function Ve(e,t){let n=t||Be(),r={type:e,start_date:n.start_date,end_date:n.end_date},i=await ze.post(Pe.trendReview.indicatorDetail,r);if(i.data.code!==200)throw Error(i.data.msg||`Failed to fetch indicator detail`);return i.data.data}async function He(e){return Ve(`blood_pressure`,e)}async function Ue(e){return Ve(`heart_rate`,e)}async function We(e){return Ve(`blood_glucose`,e)}async function Ge(e){return Ve(`blood_oxygen`,e)}async function Ke(e){return Ve(`sleep`,e)}var qe={周一:`weekdays.mon`,周二:`weekdays.tue`,周三:`weekdays.wed`,周四:`weekdays.thu`,周五:`weekdays.fri`,周六:`weekdays.sat`,周日:`weekdays.sun`},Je={正常血压:`normal`,正常:`normal`,正常高值:`high_normal`,低血压:`low_bp`,高血压:`high_bp`,过低:`low_bp`,过高:`high_bp`};function Ye(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Xe(e,t){return e<90||t<60?`low`:e<120&&t<80?`normal`:e<130&&t<80?`elevated`:`high`}function Ze(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:Ye(e.date),weekdayKey:qe[e.label]||`weekdays.mon`,systolic:e.systolic||0,diastolic:e.diastolic||0})),g=(e==null||(n=e.overview)==null?void 0:n.systolic_avg)||0,_=(e==null||(r=e.overview)==null?void 0:r.diastolic_avg)||0,v=Xe(g,_),y=(e==null?void 0:e.comparison)||{},b=((i=y.current)==null?void 0:i.systolic_avg)||g,x=((a=y.previous)==null?void 0:a.systolic_avg)||0,S=((o=y.current)==null?void 0:o.diastolic_avg)||_,C=((s=y.previous)==null?void 0:s.diastolic_avg)||0,w=b-x,T=S-C,E=w>0?`up`:w<0?`down`:`stable`,D=T>0?`up`:T<0?`down`:`stable`,O=Math.abs(w),k=Math.abs(T),A=h.length>0?{systolic:h[h.length-1].systolic,diastolic:h[h.length-1].diastolic,date:h[h.length-1].date}:null,j=((e==null||(c=e.statistics)==null?void 0:c.distribution)||[]).map(e=>({...e,type:Je[e.label]||e.type||`normal`}));return{chartData:h,yAxisRange:(e==null||(l=e.trend_chart)==null?void 0:l.y_axis_range)||{min:60,max:160},summary:{avgSystolic:g,avgDiastolic:_,status:v,statusKey:`status.${v}`,systolicTrend:E,diastolicTrend:D,systolicChange:O,diastolicChange:k,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:j},comparison:{current:{systolic:((d=y.current)==null?void 0:d.systolic_avg)||g,diastolic:((f=y.current)==null?void 0:f.diastolic_avg)||_},previous:{systolic:((p=y.previous)==null?void 0:p.systolic_avg)||0,diastolic:((m=y.previous)==null?void 0:m.diastolic_avg)||0},insight:y.insight||null},latestReading:A}}const Qe={all:[`blood-pressure`],trend:e=>[...Qe.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Qe.all,`details`]};function $e(e){return pe({queryKey:Qe.trend(e),queryFn:async()=>{console.log(`[BP API] Fetching with dateRange:`,e);let t=await He(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[BP API] Result:`,t),t},select:e=>Ze(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}const et={light:{mode:`light`,background:`#F1EFEE`,cardBackground:`#FFFFFF`,textPrimary:`#1E293B`,textSecondary:`#64748B`,border:`#E2E8F0`},dark:{mode:`dark`,background:`#0F172A`,cardBackground:`#1E293B`,textPrimary:`#F1F5F9`,textSecondary:`#94A3B8`,border:`#334155`}};function tt(){let[e]=k(),t=e.get(`theme`);return(0,U.useMemo)(()=>t===`dark`?et.dark:et.light,[t])}function nt(){let[e]=k(),{i18n:t}=M(),n=e.get(`lang`);return(0,U.useEffect)(()=>{n&&(n===`en`||n===`zh`)&&t.changeLanguage(n)},[n,t]),t.language}function rt(){return{theme:tt(),language:nt()}}function it(){let{t:e}=M(),{theme:t}=rt();return(0,G.jsx)(`div`,{className:`rounded-lg`,style:{backgroundColor:`transparent`,padding:`clamp(12px, 5vw, 20px)`,paddingLeft:`clamp(16px, 4vw, 24px)`,paddingRight:`clamp(16px, 4vw, 24px)`,fontSize:`clamp(12px, 3.5vw, 14px)`,lineHeight:`1.6`,color:t.textSecondary,textAlign:`center`},children:e(`common.disclaimer`)})}function at(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function ot(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function st(){let{t:e}=M(),{theme:t}=rt(),[n,r]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),i=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(n.end);return t.setHours(0,0,0,0),t<e},[n.end]),a=(0,U.useMemo)(()=>({startDate:at(n.start),endDate:at(n.end)}),[n]),o=(0,U.useMemo)(()=>({start:ot(n.start),end:ot(n.end)}),[n]),s=()=>{r(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},c=()=>{i&&r(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:l,isLoading:u,isFetching:d,error:f}=$e(a),[p,m]=(0,U.useState)(!1),h=(0,U.useRef)(null),g=(0,U.useRef)(0);return(0,U.useEffect)(()=>{if(d)m(!0),g.current=Date.now(),h.current&&(clearTimeout(h.current),h.current=null);else{let e=Date.now()-g.current,t=Math.max(0,1e3-e);h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(!1),h.current=null},t)}return()=>{h.current&&clearTimeout(h.current)}},[d]),f?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(f)})]})}):(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:o.start,endDate:o.end,onPrevious:s,onNext:c,disableNext:!i})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!l&&!u?(0,G.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,G.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(De,{data:l,isLoading:p||u}),(0,G.jsx)(je,{data:l,isLoading:p||u}),(0,G.jsx)(Me,{data:l,isLoading:p||u}),(0,G.jsx)(Ne,{data:l,isLoading:p||u}),(0,G.jsx)(it,{})]})})]})})}function ct({children:e,className:t}){return(0,G.jsx)(`div`,{className:W(`min-h-screen bg-transparent flex items-center justify-center`,t),children:e})}function lt({active:e,payload:t,label:n}){let{t:r}=M();if(!e||!t||t.length===0)return null;let i=t.filter(e=>e.dataKey!==`range`&&e.value!==void 0),a=e=>({high:r(`vitals.systolic`),low:r(`vitals.diastolic`),avg:r(`common.average`,`Avg`),max:r(`common.max`,`Max`),min:r(`common.min`,`Min`),value:r(`common.value`,`Value`)})[e]||e;return(0,G.jsxs)(`div`,{className:`bg-white/95 backdrop-blur-sm px-3 py-2 rounded-lg shadow-lg border border-slate-100`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:n}),i.map((e,t)=>(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-2 h-2 rounded-full`,style:{backgroundColor:e.color}}),(0,G.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[a(e.name),`: `,e.value]})]},t))]})}function ut({data:e,type:t=`line`,color:n,secondaryColor:r,height:i=200,className:a,showGrid:o=!0,animationDuration:d=800,domainPadding:f=5,yDomain:m}){let y=(0,U.useMemo)(()=>ye(d),[d]),b=(0,U.useMemo)(()=>({data:e,margin:{top:10,right:10,left:-20,bottom:0}}),[e]),w=(0,U.useMemo)(()=>({tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),[]),T=(0,U.useMemo)(()=>()=>m||[`dataMin - ${f}`,`dataMax + ${f}`],[m,f]);return(0,G.jsx)(`div`,{className:W(`w-full`,a),style:{height:i},children:(0,G.jsx)(s,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(()=>{if(t===`mixed`){let t=e.map(e=>{var t,n,r,i,a,o,s,c,l;return{...e,rangeBase:(t=(n=e.min)==null?(r=e.range)==null?void 0:r[0]:n)==null?0:t,rangeHeight:((i=(a=e.max)==null?(o=e.range)==null?void 0:o[1]:a)==null?0:i)-((s=(c=e.min)==null?(l=e.range)==null?void 0:l[0]:c)==null?0:s)}});return(0,G.jsxs)(S,{...b,data:t,children:[o&&(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`dateLabel`,...w}),(0,G.jsx)(v,{...w,domain:T()}),(0,G.jsx)(p,{content:(0,G.jsx)(lt,{})}),(0,G.jsx)(l,{dataKey:`rangeBase`,stackId:`range`,fill:`transparent`,animationDuration:y}),(0,G.jsx)(l,{dataKey:`rangeHeight`,stackId:`range`,fill:`${n}40`,radius:[4,4,4,4],animationDuration:y,children:t.map((e,t)=>(0,G.jsx)(g,{fill:`${n}40`},`cell-${t}`))}),(0,G.jsx)(C,{type:`monotone`,dataKey:`avg`,stroke:n,strokeWidth:2.5,dot:{fill:n,strokeWidth:0,r:4},activeDot:{r:6,stroke:n,strokeWidth:2,fill:`#fff`},animationDuration:y})]})}return t===`area`?(0,G.jsxs)(_,{...b,children:[o&&(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`dateLabel`,...w}),(0,G.jsx)(v,{...w,domain:T()}),(0,G.jsx)(p,{content:(0,G.jsx)(lt,{})}),(0,G.jsx)(`defs`,{children:(0,G.jsxs)(`linearGradient`,{id:`gradient-${n}`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:n,stopOpacity:.3}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:n,stopOpacity:0})]})}),(0,G.jsx)(h,{type:`monotone`,dataKey:`value`,stroke:n,strokeWidth:2,fill:`url(#gradient-${n})`,animationDuration:y})]}):t===`range`?(0,G.jsxs)(c,{...b,children:[o&&(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`dateLabel`,...w}),(0,G.jsx)(v,{...w,domain:T()}),(0,G.jsx)(p,{content:(0,G.jsx)(lt,{})}),(0,G.jsx)(C,{type:`monotone`,dataKey:`high`,stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:0,r:3},activeDot:{r:5,stroke:n,strokeWidth:2,fill:`#fff`},animationDuration:y}),(0,G.jsx)(C,{type:`monotone`,dataKey:`low`,stroke:r||n,strokeWidth:2,strokeDasharray:`5 5`,dot:{fill:r||n,strokeWidth:0,r:3},activeDot:{r:5,stroke:r||n,strokeWidth:2,fill:`#fff`},animationDuration:y})]}):(0,G.jsxs)(c,{...b,children:[o&&(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`dateLabel`,...w}),(0,G.jsx)(v,{...w,domain:T()}),(0,G.jsx)(p,{content:(0,G.jsx)(lt,{})}),(0,G.jsx)(C,{type:`monotone`,dataKey:`value`,stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:0,r:3},activeDot:{r:5,stroke:n,strokeWidth:2,fill:`#fff`},animationDuration:y})]})})()})})}const dt=(0,U.memo)(({showCard:e=!0,height:t=200,className:n})=>{let{t:r}=M(),{data:i,isLoading:a,isError:o,refetch:s}=$e();if(o||!i)return(0,G.jsx)(ft,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,G.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-bp rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=(0,U.useMemo)(()=>i.chartData.map(e=>({dateLabel:e.dateLabel,high:e.systolic,low:e.diastolic,date:e.date})),[i.chartData]),l=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:Y.bp.primary}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`vitals.systolic`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-0.5 rounded border-dashed`,style:{borderBottomWidth:2,borderColor:Y.bp.secondary}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`vitals.diastolic`)})]}),a&&(0,G.jsxs)(`div`,{className:`ml-auto flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,G.jsx)(L,{className:`w-3 h-3 animate-spin`}),(0,G.jsx)(`span`,{children:r(`common.loading`)})]})]}),(0,G.jsx)(ut,{data:c,type:`range`,color:Y.bp.primary,secondaryColor:Y.bp.secondary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,G.jsxs)(K,{className:n,children:[(0,G.jsx)(xe,{children:(0,G.jsx)(Se,{children:r(`page.bloodPressure.trendTitle`)})}),(0,G.jsx)(q,{children:l})]}):(0,G.jsx)(`div`,{className:n,children:l})});function ft({showCard:e,className:t,children:n}){return e?(0,G.jsx)(K,{className:t,children:(0,G.jsx)(q,{className:`py-4`,children:n})}):(0,G.jsx)(`div`,{className:W(`p-4`,t),children:n})}function pt({titleKey:e,value:t,unit:n,trend:r=`stable`,trendValue:i,subMetrics:a=[],accentColor:o,className:s,loadingIndicator:c}){let{t:l}=M(),u={up:ae,down:ce,stable:le}[r]||le,d={up:Te.trend.up,down:Te.trend.down,stable:Te.trend.stable}[r]||Te.trend.stable;return(0,G.jsxs)(K,{className:W(`relative overflow-hidden`,s),style:{borderLeftWidth:o?`4px`:void 0,borderLeftColor:o},children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsx)(`span`,{className:`text-sm font-medium text-slate-600`,children:l(e)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[c,(0,G.jsxs)(`div`,{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium`,style:{backgroundColor:`${d}15`,color:d},children:[(0,G.jsx)(u,{className:`w-3 h-3`}),i&&(0,G.jsx)(`span`,{children:i})]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-baseline gap-2 mb-4`,children:[(0,G.jsx)(`span`,{className:`text-4xl font-bold text-slate-900`,children:t}),(0,G.jsx)(`span`,{className:`text-lg text-slate-500`,children:n})]}),a.length>0&&(0,G.jsx)(`div`,{className:`flex gap-4 pt-3 border-t border-slate-100`,children:a.map((e,t)=>(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`div`,{className:`text-xs text-slate-500 mb-0.5`,children:l(e.labelKey)}),(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,G.jsx)(`span`,{className:`text-lg font-semibold text-slate-800`,children:e.value}),e.unit&&(0,G.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]})]},t))})]})}(0,U.memo)(({className:e})=>{let{t}=M(),{data:n,isLoading:r,isError:i}=$e();if(i||!n||!n.latestReading)return(0,G.jsx)(K,{className:e,children:(0,G.jsx)(q,{className:`py-8 text-center`,children:(0,G.jsx)(`p`,{className:`text-sm text-slate-500`,children:t(`common.noData`)})})});let{summary:a,latestReading:o}=n,s=(0,U.useMemo)(()=>a.systolicChange===0?void 0:`${a.systolicChange>0?`+`:``}${a.systolicChange}`,[a.systolicChange]),c=(0,U.useMemo)(()=>[{labelKey:`page.bloodPressure.averageReading`,value:`${a.avgSystolic}/${a.avgDiastolic}`,unit:t(`units.mmHg`)},{labelKey:`status.`+a.status,value:t(a.statusKey)}],[a.avgSystolic,a.avgDiastolic,a.status,a.statusKey,t]);return(0,G.jsx)(pt,{className:e,titleKey:`vitals.bloodPressure`,value:`${o.systolic}/${o.diastolic}`,unit:t(`units.mmHg`),trend:a.systolicTrend,trendValue:s,accentColor:J.bp,subMetrics:c,loadingIndicator:r&&(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,G.jsx)(L,{className:`w-3 h-3 animate-spin`}),(0,G.jsx)(`span`,{children:t(`common.loading`)})]})})});function mt(){return(0,G.jsx)(ct,{children:(0,G.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,G.jsx)(dt,{showCard:!1,height:200})})})}function ht({active:e,payload:t}){var n;let{t:r}=M();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,G.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,G.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,G.jsxs)(`p`,{className:`text-cyan-300`,children:[r(`common.max`),`: `,i.max,`%`]}),(0,G.jsxs)(`p`,{className:`text-cyan-200`,children:[r(`common.min`),`: `,i.min,`%`]})]}):null}function gt({data:e,className:t,isLoading:n}){var r,i,a,o,c,l,f,m,g,_,y,b,w,T,E;let{t:D}=M(),O=J.spo2,k=(r=e==null||(i=e.chartData)==null?void 0:i.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?[{name:`Mon`,weekdayKey:`weekday.mon`,range:[96,99],avg:97,max:99,min:96},{name:`Tues`,weekdayKey:`weekday.tue`,range:[95,98],avg:97,max:98,min:95},{name:`Wed`,weekdayKey:`weekday.wed`,range:[96,99],avg:98,max:99,min:96},{name:`Thu`,weekdayKey:`weekday.thu`,range:[95,98],avg:97,max:98,min:95},{name:`Fri`,weekdayKey:`weekday.fri`,range:[96,99],avg:97,max:99,min:96},{name:`Sat`,weekdayKey:`weekday.sat`,range:[97,99],avg:98,max:99,min:97},{name:`Sun`,weekdayKey:`weekday.sun`,range:[96,98],avg:97,max:98,min:96}]:r;return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(ae,{className:`w-5 h-5`,style:{color:O}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:D(`page.spo2.trendyReport`)})]}),(0,G.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:`#F8F8F8`},children:[(0,G.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:D(`page.spo2.weeksAverage`)}),(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,G.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:O},children:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),(0,G.jsx)(`span`,{className:`text-lg text-slate-500`,children:`%`}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,G.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#10B981`:`#EF4444`},children:[(0,G.jsx)(r?fe:me,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[D(`time.lastWeek`),`: `,(c=e==null||(l=e.summary)==null?void 0:l.previousAvg)==null?`--`:c,`%`]})]}),(0,G.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,G.jsxs)(`p`,{children:[D(`page.spo2.normalRange`),`: 95% - 100%`]})})]}),(0,G.jsxs)(`div`,{className:`flex gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[D(`common.max`),`(`,e?D(e.summary.maxWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:O},children:[(f=e==null||(m=e.summary)==null?void 0:m.maxValue)==null?`--`:f,` `,(0,G.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[D(`common.min`),`(`,e?D(e.summary.minWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(g=e==null||(_=e.summary)==null?void 0:_.minValue)==null?`--`:g,` `,(0,G.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${O}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:D(`page.spo2.range`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:O}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:D(`page.spo2.mean`)})]})]}),(0,G.jsx)(`div`,{className:`h-44 -mx-2`,children:(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsxs)(S,{data:k,margin:{top:10,right:10,left:-15,bottom:0},children:[(0,G.jsx)(`defs`,{children:(0,G.jsxs)(`linearGradient`,{id:`spo2RangeGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:O,stopOpacity:.3}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:O,stopOpacity:.1})]})}),(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`name`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[(y=e==null||(b=e.yAxisRange)==null?void 0:b.min)==null?90:y,(w=e==null||(T=e.yAxisRange)==null?void 0:T.max)==null?100:w]}),(0,G.jsx)(p,{content:(0,G.jsx)(ht,{})}),(0,G.jsx)(d,{y:(E=e==null?void 0:e.averageLine)==null?97:E,stroke:O,strokeDasharray:`4 4`,strokeWidth:1.5}),(0,G.jsx)(h,{type:`monotone`,dataKey:`range`,stroke:`transparent`,fill:`url(#spo2RangeGradient)`}),(0,G.jsx)(C,{type:`monotone`,dataKey:`avg`,stroke:Y.spo2.primary,strokeWidth:2,dot:{fill:Y.spo2.primary,strokeWidth:0,r:4},activeDot:{r:6,stroke:O,strokeWidth:2,fill:`#fff`}})]})})})]})}var _t={normal:`#4ADE80`,low:`#60A5FA`,too_low:`#F87171`},vt=[`normal`,`low`,`too_low`],yt={normal:`status.normal`,low:`status.low`,too_low:`status.tooLow`};function bt({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:c}=M(),l=J.spo2,u=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,d=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,f=vt.map(e=>{let t=u.find(t=>t.type===e);return{type:e,label:c(yt[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:_t[e]||`#94A3B8`}}),p=f.map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color}));return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(H,{className:`w-5 h-5`,style:{color:l}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`page.spo2.statistics`)}),(0,G.jsx)(de,{className:`w-4 h-4 text-slate-400`})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsx)(`div`,{className:`flex-1 min-w-0 space-y-3`,children:f.map(e=>(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600 w-16`,children:e.label}),(0,G.jsxs)(`span`,{className:`text-sm font-semibold w-12`,style:{color:e.color},children:[e.percent,`%`]}),(0,G.jsxs)(`span`,{className:`text-sm`,style:{color:e.color},children:[e.count,` `,c(`common.times`)]})]},e.type))}),(0,G.jsxs)(`div`,{className:`w-32 h-32 relative flex-shrink-0 ml-2`,children:[(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsx)(b,{children:(0,G.jsx)(y,{data:p,cx:`50%`,cy:`50%`,innerRadius:40,outerRadius:58,paddingAngle:3,dataKey:`value`,startAngle:90,endAngle:-270,strokeWidth:0,children:p.map((e,t)=>(0,G.jsx)(g,{fill:e.color},`cell-${t}`))})})}),(0,G.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center`,children:[(0,G.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:l},children:d}),(0,G.jsx)(`span`,{className:`text-xs text-slate-400`,children:c(`common.times`)})]})]})]})]})}function xt({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=M(),f=J.spo2,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=p.length>0?p:[{content:d(`page.spo2.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a})},{content:d(`page.spo2.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`})},{content:d(`page.spo2.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})}];return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(P,{className:`w-5 h-5`,style:{color:f}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:d(`page.spo2.dataAnalysis`)})]}),(0,G.jsx)(`ul`,{className:`space-y-3`,children:m.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-3 rounded-xl px-4 py-3`,style:{backgroundColor:`#F8F8F8`},children:[(0,G.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0`,style:{backgroundColor:f}}),(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e.content})]},t))})]})}function St({data:e,className:t,isLoading:n}){let{t:r}=M(),i=J.spo2,a=e==null?void 0:e.weeklySummary,o=(a==null?void 0:a.overview)||r(`page.spo2.defaultOverview`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),s=(a==null?void 0:a.highlights)||r(`page.spo2.defaultHighlights`,{defaultValue:`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`});return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(z,{className:`w-5 h-5`,style:{color:i}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`page.spo2.weeklyOverview`)})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:`#4ADE80`},children:r(`page.spo2.overallSituation`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o})})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full bg-amber-400 text-white text-xs font-medium mb-2`,children:r(`page.spo2.anomalyAlert`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:s})})]}),(a==null?void 0:a.suggestions)&&a.suggestions.length>0&&(0,G.jsx)(`div`,{className:`pt-4 border-t border-slate-100`,children:(0,G.jsx)(`ul`,{className:`space-y-2`,children:a.suggestions.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,G.jsx)(`span`,{style:{color:i},children:`•`}),e]},t))})})]})}var Ct={周一:`weekdays.mon`,周二:`weekdays.tue`,周三:`weekdays.wed`,周四:`weekdays.thu`,周五:`weekdays.fri`,周六:`weekdays.sat`,周日:`weekdays.sun`};function wt(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Tt(e){return e>=95?`normal`:e>=90?`low`:`too_low`}function Et(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function Dt(e){return e&&Ct[e]||`weekdays.mon`}function Ot(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h;console.log(`[SpO2 Adapter] Input:`,e);let g=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t;let n=new Date(e.date),r=(t=e.avg)==null?Math.round((e.max+e.min)/2):t;return{date:n,dateLabel:wt(e.date),weekdayKey:Ct[e.label]||`weekdays.mon`,max:e.max||0,min:e.min||0,avg:r,range:[e.min||0,e.max||0]}}),_=(e==null||(n=e.overview)==null?void 0:n.average)||0,v=(e==null||(r=e.overview)==null?void 0:r.min)||0,y=(e==null||(i=e.overview)==null?void 0:i.max)||0,b=Dt(e==null||(a=e.overview)==null?void 0:a.max_label),x=Dt(e==null||(o=e.overview)==null?void 0:o.min_label),S=Tt(_),C=(e==null?void 0:e.comparison)||{},w=C.changes||{},T=Et((s=w.average)==null?void 0:s.trend),E=((c=w.average)==null?void 0:c.value)||0,D=((l=C.previous)==null?void 0:l.average)||0,O=g.length>0?{avg:g[g.length-1].avg,min:g[g.length-1].min,max:g[g.length-1].max,date:g[g.length-1].date}:null,k=(e==null?void 0:e.weekly_summary)||{},A={overview:k.overview||null,highlights:k.highlights||null,suggestions:k.suggestions||[],dataAnalysis:(k.data_analysis||[]).map(e=>({content:e}))},j={chartData:g,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:85,max:100},averageLine:(e==null||(d=e.trend_chart)==null?void 0:d.average_line)||_,summary:{avgValue:_,minValue:v,maxValue:y,maxWeekdayKey:b,minWeekdayKey:x,status:S,statusKey:`status.${S}`,trend:T,changeValue:E,totalCount:(e==null||(f=e.statistics)==null?void 0:f.total_count)||0,distribution:(e==null||(p=e.statistics)==null?void 0:p.distribution)||[],previousAvg:D},comparison:{current:{average:((m=C.current)==null?void 0:m.average)||_},previous:{average:((h=C.previous)==null?void 0:h.average)||0},insight:C.insight||null},weeklySummary:A,latestReading:O};return console.log(`[SpO2 Adapter] Output:`,j),j}const kt={all:[`spo2`],trend:e=>[...kt.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...kt.all,`details`]};function At(e){return pe({queryKey:kt.trend(e),queryFn:async()=>{console.log(`[SpO2 API] Fetching with dateRange:`,e);let t=await Ge(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[SpO2 API] Result:`,t),t},select:e=>Ot(e),staleTime:300*1e3,gcTime:600*1e3})}function jt(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Mt(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Nt(){let{t:e}=M(),{theme:t}=rt(),[n,r]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),i=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(n.end);return t.setHours(0,0,0,0),t<e},[n.end]),a=(0,U.useMemo)(()=>({startDate:jt(n.start),endDate:jt(n.end)}),[n]),o=(0,U.useMemo)(()=>({start:Mt(n.start),end:Mt(n.end)}),[n]),s=()=>{r(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},c=()=>{i&&r(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:l,isLoading:u,isFetching:d,error:f}=At(a),[p,m]=(0,U.useState)(!1),h=(0,U.useRef)(null),g=(0,U.useRef)(0);return(0,U.useEffect)(()=>{if(d)m(!0),g.current=Date.now(),h.current&&(clearTimeout(h.current),h.current=null);else{let e=Date.now()-g.current,t=Math.max(0,1e3-e);h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(!1),h.current=null},t)}return()=>{h.current&&clearTimeout(h.current)}},[d]),f?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(f)})]})}):(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:o.start,endDate:o.end,onPrevious:s,onNext:c,disableNext:!i})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!l&&!u?(0,G.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,G.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(gt,{data:l,isLoading:p||u}),(0,G.jsx)(bt,{data:l,isLoading:p||u}),(0,G.jsx)(xt,{data:l,isLoading:p||u}),(0,G.jsx)(St,{data:l,isLoading:p||u}),(0,G.jsx)(it,{})]})})]})})}function Pt({showCard:e=!0,height:t=200,className:n}){let{t:r}=M(),{data:i,isLoading:a,isError:o,refetch:s}=At();if(a)return(0,G.jsx)(Ft,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`animate-pulse`,children:[(0,G.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,G.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,G.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,G.jsx)(Ft,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,G.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-spo2 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:e.range,date:e.date})),l=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${Y.spo2.primary}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.spo2.rangeToday`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:Y.spo2.primary}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,G.jsx)(ut,{data:c,type:`mixed`,color:Y.spo2.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,G.jsxs)(K,{className:n,children:[(0,G.jsx)(xe,{children:(0,G.jsx)(Se,{children:r(`page.spo2.trendTitle`)})}),(0,G.jsx)(q,{children:l})]}):(0,G.jsx)(`div`,{className:n,children:l})}function Ft({showCard:e,className:t,children:n}){return e?(0,G.jsx)(K,{className:t,children:(0,G.jsx)(q,{className:`py-4`,children:n})}):(0,G.jsx)(`div`,{className:W(`p-4`,t),children:n})}function It(){return(0,G.jsx)(ct,{children:(0,G.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,G.jsx)(Pt,{showCard:!1,height:200})})})}function Lt({active:e,payload:t}){var n;let{t:r}=M();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,G.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,G.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,G.jsxs)(`p`,{className:`text-red-300`,children:[r(`common.average`),`: `,i.avg]}),(0,G.jsxs)(`p`,{className:`text-red-200`,children:[r(`common.max`),`: `,i.max]}),(0,G.jsxs)(`p`,{className:`text-red-100`,children:[r(`common.min`),`: `,i.min]})]}):null}function Rt({data:e,className:t,isLoading:n}){var r,i,a,o,c,l,f,m,g,_,y,b,w,T,E;let{t:D}=M(),O=J.heartRate,k=(r=e==null||(i=e.chartData)==null?void 0:i.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?[{name:`Mon`,weekdayKey:`weekday.mon`,range:[60,85],avg:72,max:85,min:60},{name:`Tues`,weekdayKey:`weekday.tue`,range:[62,88],avg:75,max:88,min:62},{name:`Wed`,weekdayKey:`weekday.wed`,range:[58,82],avg:70,max:82,min:58},{name:`Thu`,weekdayKey:`weekday.thu`,range:[65,90],avg:78,max:90,min:65},{name:`Fri`,weekdayKey:`weekday.fri`,range:[60,84],avg:72,max:84,min:60},{name:`Sat`,weekdayKey:`weekday.sat`,range:[55,80],avg:68,max:80,min:55},{name:`Sun`,weekdayKey:`weekday.sun`,range:[58,83],avg:70,max:83,min:58}]:r;return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(ae,{className:`w-5 h-5`,style:{color:O}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:D(`page.heartRate.trendyReport`)})]}),(0,G.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:`#FFF5F5`},children:[(0,G.jsx)(`div`,{className:`flex items-start justify-between mb-4`,children:(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:D(`page.heartRate.weeksAverage`)}),(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,G.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:O},children:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),(0,G.jsxs)(`span`,{className:`text-lg text-slate-500`,children:[`/`,D(`units.minute`)]}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,G.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#EF4444`:`#10B981`},children:[(0,G.jsx)(r?fe:me,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[D(`time.lastWeek`),`: `,(c=e==null||(l=e.summary)==null?void 0:l.previousAvg)==null?`--`:c,`/`,D(`units.minute`)]})]})}),(0,G.jsxs)(`div`,{className:`flex gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[D(`common.max`),`(`,e?D(e.summary.maxWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:O},children:[(f=e==null||(m=e.summary)==null?void 0:m.maxValue)==null?`--`:f,` `,(0,G.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,D(`units.minute`)]})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[D(`common.min`),`(`,e?D(e.summary.minWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(g=e==null||(_=e.summary)==null?void 0:_.minValue)==null?`--`:g,` `,(0,G.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,D(`units.minute`)]})]})]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${O}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:D(`page.heartRate.range`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:O}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:D(`page.heartRate.mean`)})]})]}),(0,G.jsx)(`div`,{className:`h-44 -mx-2`,children:(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsxs)(S,{data:k,margin:{top:10,right:10,left:-15,bottom:0},children:[(0,G.jsx)(`defs`,{children:(0,G.jsxs)(`linearGradient`,{id:`hrRangeGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:O,stopOpacity:.3}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:O,stopOpacity:.1})]})}),(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`name`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[(y=e==null||(b=e.yAxisRange)==null?void 0:b.min)==null?50:y,(w=e==null||(T=e.yAxisRange)==null?void 0:T.max)==null?120:w]}),(0,G.jsx)(p,{content:(0,G.jsx)(Lt,{})}),(0,G.jsx)(d,{y:(E=e==null?void 0:e.averageLine)==null?72:E,stroke:O,strokeDasharray:`4 4`,strokeWidth:1.5}),(0,G.jsx)(h,{type:`monotone`,dataKey:`range`,stroke:`transparent`,fill:`url(#hrRangeGradient)`,name:`hr-range`}),(0,G.jsx)(C,{type:`monotone`,dataKey:`avg`,stroke:O,strokeWidth:2,dot:{fill:O,strokeWidth:0,r:4},activeDot:{r:6,stroke:O,strokeWidth:2,fill:`#fff`},name:`hr-avg`})]})})})]})}var zt={normal:`#4ADE80`,high:`#FBBF24`,too_high:`#F87171`,slow:`#60A5FA`,low:`#60A5FA`},Bt=[`too_high`,`high`,`normal`,`slow`],Vt={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,slow:`status.slow`,low:`status.low`};function Ht({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:c}=M(),l=J.heartRate,u=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,d=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,f=Bt.map(e=>{let t=u.find(t=>t.type===e);return{type:e,label:c(Vt[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:zt[e]||`#94A3B8`}}),p=f.filter(e=>e.count>0||e.type===`normal`).map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color}));return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(H,{className:`w-5 h-5`,style:{color:l}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`page.heartRate.statistics`)}),(0,G.jsx)(de,{className:`w-4 h-4 text-slate-400`})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsx)(`div`,{className:`flex-1 min-w-0 space-y-2`,children:f.map(e=>(0,G.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,G.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600 w-12`,children:e.label}),(0,G.jsxs)(`span`,{className:`text-sm font-semibold w-10`,style:{color:e.color},children:[e.percent,`%`]}),(0,G.jsxs)(`span`,{className:`text-sm`,style:{color:e.color},children:[e.count,` `,c(`common.times`)]})]},e.type))}),(0,G.jsxs)(`div`,{className:`w-32 h-32 relative flex-shrink-0 ml-2`,children:[(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsx)(b,{children:(0,G.jsx)(y,{data:p,cx:`50%`,cy:`50%`,innerRadius:40,outerRadius:58,paddingAngle:3,dataKey:`value`,startAngle:90,endAngle:-270,strokeWidth:0,children:p.map((e,t)=>(0,G.jsx)(g,{fill:e.color},`cell-${t}`))})})}),(0,G.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center`,children:[(0,G.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:l},children:d}),(0,G.jsx)(`span`,{className:`text-xs text-slate-400`,children:c(`page.heartRate.totalTests`)})]})]})]})]})}function Ut({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=M(),f=J.heartRate,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=p.length>0?p:[{content:d(`page.heartRate.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a})},{content:d(`page.heartRate.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`})},{content:d(`page.heartRate.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})}];return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(P,{className:`w-5 h-5`,style:{color:f}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:d(`page.heartRate.dataAnalysis`)})]}),(0,G.jsx)(`ul`,{className:`space-y-3`,children:m.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-3 rounded-xl px-4 py-3`,style:{backgroundColor:`#F8F8F8`},children:[(0,G.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0`,style:{backgroundColor:f}}),(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e.content})]},t))})]})}function Wt({data:e,className:t,isLoading:n}){let{t:r}=M(),i=J.heartRate,a=e==null?void 0:e.weeklySummary,o=(a==null?void 0:a.overview)||r(`page.heartRate.defaultOverview`,{defaultValue:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`}),s=(a==null?void 0:a.highlights)||r(`page.heartRate.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`});return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(z,{className:`w-5 h-5`,style:{color:i}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`page.heartRate.weeklyOverview`)})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:`#4ADE80`},children:r(`page.heartRate.overallSituation`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o})})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full bg-amber-400 text-white text-xs font-medium mb-2`,children:r(`page.heartRate.anomalyAlert`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:s})})]}),(a==null?void 0:a.suggestions)&&a.suggestions.length>0&&(0,G.jsx)(`div`,{className:`pt-4 border-t border-slate-100`,children:(0,G.jsx)(`ul`,{className:`space-y-2`,children:a.suggestions.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,G.jsx)(`span`,{style:{color:i},children:`•`}),e]},t))})})]})}var Gt={周一:`weekdays.mon`,周二:`weekdays.tue`,周三:`weekdays.wed`,周四:`weekdays.thu`,周五:`weekdays.fri`,周六:`weekdays.sat`,周日:`weekdays.sun`};function Kt(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function qt(e){return e<60?`low`:e<=100?`normal`:e<=120?`elevated`:`high`}function Jt(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function Yt(e){var t,n,r,i,a,o,s,c,l,u,d;let f=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t,n,r,i,a,o;let s=new Date(e.date),c=(t=(n=e.max)==null?e.value:n)==null?0:t,l=(r=(i=e.min)==null?e.value:i)==null?0:r,u=(a=(o=e.avg)==null?e.value:o)==null?Math.round((c+l)/2):a;return{date:s,dateLabel:Kt(e.date),weekdayKey:Gt[e.label]||`weekdays.mon`,max:c,min:l,avg:u}}),p=(e==null?void 0:e.overview)||{},m=p.average||0,h=(n=p.max)==null?f.length>0?Math.max(...f.map(e=>e.max)):0:n,g=(r=p.min)==null?f.length>0?Math.min(...f.map(e=>e.min)):0:r,_=p.max_label&&Gt[p.max_label]||`weekdays.mon`,v=p.min_label&&Gt[p.min_label]||`weekdays.mon`,y=p.resting_avg,b=qt(y||m),x=(e==null?void 0:e.comparison)||{},S=x.changes||{},C=Jt((i=S.average)==null?void 0:i.trend),w=((a=S.average)==null?void 0:a.value)||0,T=((o=x.previous)==null?void 0:o.average)||0,E=f.length>0?{value:f[f.length-1].avg,date:f[f.length-1].date}:null,D=(e==null?void 0:e.weekly_summary)||{};return{chartData:f,yAxisRange:(e==null||(s=e.trend_chart)==null?void 0:s.y_axis_range)||{min:40,max:160},averageLine:(e==null||(c=e.trend_chart)==null?void 0:c.average_line)||m,summary:{avgValue:m,minValue:g,maxValue:h,minWeekdayKey:v,maxWeekdayKey:_,previousAvg:T,avgResting:y,status:b,statusKey:`status.${b}`,trend:C,changeValue:w,totalCount:(e==null||(l=e.statistics)==null?void 0:l.total_count)||0,distribution:(e==null||(u=e.statistics)==null?void 0:u.distribution)||[]},comparison:{current:{average:((d=x.current)==null?void 0:d.average)||m},previous:{average:T},insight:x.insight||null},weeklySummary:{overview:D.overview||null,highlights:D.highlights||null,suggestions:D.suggestions||[],dataAnalysis:D.data_analysis||[]},latestReading:E}}const Xt={all:[`heart-rate`],trend:e=>[...Xt.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Xt.all,`details`]};function Zt(e){return pe({queryKey:Xt.trend(e),queryFn:async()=>{console.log(`[HR API] Fetching with dateRange:`,e);let t=await Ue(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[HR API] Result:`,t),t},select:e=>Yt(e),staleTime:300*1e3,gcTime:600*1e3})}function Qt(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function $t(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function en(){let{t:e}=M(),{theme:t}=rt(),[n,r]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),i=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(n.end);return t.setHours(0,0,0,0),t<e},[n.end]),a=(0,U.useMemo)(()=>({startDate:Qt(n.start),endDate:Qt(n.end)}),[n]),o=(0,U.useMemo)(()=>({start:$t(n.start),end:$t(n.end)}),[n]),s=()=>{r(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},c=()=>{i&&r(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:l,isLoading:u,isFetching:d,error:f}=Zt(a),[p,m]=(0,U.useState)(!1),h=(0,U.useRef)(null),g=(0,U.useRef)(0);return(0,U.useEffect)(()=>{if(d)m(!0),g.current=Date.now(),h.current&&(clearTimeout(h.current),h.current=null);else{let e=Date.now()-g.current,t=Math.max(0,1e3-e);h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(!1),h.current=null},t)}return()=>{h.current&&clearTimeout(h.current)}},[d]),f?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(f)})]})}):(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:o.start,endDate:o.end,onPrevious:s,onNext:c,disableNext:!i})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!l&&!u?(0,G.jsx)(`div`,{className:`text-center py-12`,children:(0,G.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(Rt,{data:l,isLoading:p||u}),(0,G.jsx)(Ht,{data:l,isLoading:p||u}),(0,G.jsx)(Ut,{data:l,isLoading:p||u}),(0,G.jsx)(Wt,{data:l,isLoading:p||u}),(0,G.jsx)(it,{})]})})]})})}function tn({showCard:e=!0,height:t=200,className:n}){let{t:r}=M(),{data:i,isLoading:a,isError:o,refetch:s}=Zt();if(a)return(0,G.jsx)(nn,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`animate-pulse`,children:[(0,G.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,G.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,G.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,G.jsx)(nn,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,G.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-red-400 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:[e.min,e.max],date:e.date})),l=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${Y.heartRate.primary}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.heartRate.rangeToday`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:Y.heartRate.primary}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,G.jsx)(ut,{data:c,type:`mixed`,color:Y.heartRate.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,G.jsxs)(K,{className:n,children:[(0,G.jsx)(xe,{children:(0,G.jsx)(Se,{children:r(`page.heartRate.trendTitle`)})}),(0,G.jsx)(q,{children:l})]}):(0,G.jsx)(`div`,{className:n,children:l})}function nn({showCard:e,className:t,children:n}){return e?(0,G.jsx)(K,{className:t,children:(0,G.jsx)(q,{className:`py-4`,children:n})}):(0,G.jsx)(`div`,{className:W(`p-4`,t),children:n})}function rn(){return(0,G.jsx)(ct,{children:(0,G.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,G.jsx)(tn,{showCard:!1,height:200})})})}function an({active:e,payload:t}){var n;let{t:r}=M();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,G.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,G.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,G.jsxs)(`p`,{className:`text-amber-300`,children:[r(`common.max`),`: `,i.max,` `,r(`units.mmolL`)]}),(0,G.jsxs)(`p`,{className:`text-amber-200`,children:[r(`common.min`),`: `,i.min,` `,r(`units.mmolL`)]})]}):null}function on({data:e,className:t,isLoading:n}){var r,i,a,o,c,l,f,m,g,_,y,b,w,T,E,D,O,k,A;let{t:j}=M(),N=J.glucose,P=(r=e==null||(i=e.chartData)==null?void 0:i.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?[{name:`Mon`,weekdayKey:`weekday.mon`,range:[4.5,6.5],avg:5.5,max:6.5,min:4.5},{name:`Tues`,weekdayKey:`weekday.tue`,range:[4.8,7],avg:5.8,max:7,min:4.8},{name:`Wed`,weekdayKey:`weekday.wed`,range:[4.6,6.8],avg:5.6,max:6.8,min:4.6},{name:`Thu`,weekdayKey:`weekday.thu`,range:[4.4,6.4],avg:5.4,max:6.4,min:4.4},{name:`Fri`,weekdayKey:`weekday.fri`,range:[4.7,6.9],avg:5.7,max:6.9,min:4.7},{name:`Sat`,weekdayKey:`weekday.sat`,range:[4.5,6.6],avg:5.5,max:6.6,min:4.5},{name:`Sun`,weekdayKey:`weekday.sun`,range:[4.6,6.7],avg:5.6,max:6.7,min:4.6}]:r;return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(ae,{className:`w-5 h-5`,style:{color:N}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:j(`page.glucose.trendyReport`)})]}),(0,G.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:`#FFF9E6`},children:[(0,G.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:j(`page.glucose.weeksAverage`)}),(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,G.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:N},children:(a=e==null||(o=e.summary)==null||(o=o.avgValue)==null?void 0:o.toFixed(1))==null?`--`:a}),(0,G.jsx)(`span`,{className:`text-lg text-slate-500`,children:j(`units.mmolL`)}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,G.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#EF4444`:`#10B981`},children:[(0,G.jsx)(r?fe:me,{className:`w-3 h-3`}),Math.abs(n).toFixed(1)]})})()]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[j(`time.lastWeek`),`: `,(c=e==null||(l=e.summary)==null||(l=l.previousAvg)==null?void 0:l.toFixed(1))==null?`--`:c,` `,j(`units.mmolL`)]})]}),(0,G.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,G.jsxs)(`p`,{children:[j(`page.glucose.normalRange`),`: `,(f=e==null||(m=e.normalRange)==null?void 0:m.min)==null?3.9:f,`-`,(g=e==null||(_=e.normalRange)==null?void 0:_.max)==null?6.1:g,` `,j(`units.mmolL`)]})})]}),(0,G.jsxs)(`div`,{className:`flex gap-6`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[j(`common.max`),`(`,e?j(e.summary.maxWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:N},children:[(y=e==null||(b=e.summary)==null||(b=b.maxValue)==null?void 0:b.toFixed(1))==null?`--`:y,` `,(0,G.jsx)(`span`,{className:`text-sm font-normal`,children:j(`units.mmolL`)})]})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[j(`common.min`),`(`,e?j(e.summary.minWeekdayKey):`--`,`)`]}),(0,G.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(w=e==null||(T=e.summary)==null||(T=T.minValue)==null?void 0:T.toFixed(1))==null?`--`:w,` `,(0,G.jsx)(`span`,{className:`text-sm font-normal`,children:j(`units.mmolL`)})]})]})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${N}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:j(`page.glucose.range`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:N}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:j(`page.glucose.mean`)})]})]}),(0,G.jsx)(`div`,{className:`h-44 -mx-2`,children:(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsxs)(S,{data:P,margin:{top:10,right:10,left:-15,bottom:0},children:[(0,G.jsx)(`defs`,{children:(0,G.jsxs)(`linearGradient`,{id:`glucoseRangeGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:N,stopOpacity:.3}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:N,stopOpacity:.1})]})}),(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`name`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[(E=e==null||(D=e.yAxisRange)==null?void 0:D.min)==null?3:E,(O=e==null||(k=e.yAxisRange)==null?void 0:k.max)==null?10:O]}),(0,G.jsx)(p,{content:(0,G.jsx)(an,{})}),(0,G.jsx)(d,{y:(A=e==null?void 0:e.averageLine)==null?5.5:A,stroke:N,strokeDasharray:`4 4`,strokeWidth:1.5}),(0,G.jsx)(h,{type:`monotone`,dataKey:`range`,stroke:`transparent`,fill:`url(#glucoseRangeGradient)`,name:`glucose-range`}),(0,G.jsx)(C,{type:`monotone`,dataKey:`avg`,stroke:N,strokeWidth:2,dot:{fill:N,strokeWidth:0,r:4},activeDot:{r:6,stroke:N,strokeWidth:2,fill:`#fff`},name:`glucose-avg`})]})})})]})}var sn={normal:`#4ADE80`,high:`#FBBF24`,too_high:`#F87171`,too_low:`#60A5FA`},cn=[`normal`,`high`,`too_high`,`too_low`],ln={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,too_low:`status.tooLow`};function un({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:c}=M(),l=J.glucose,u=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,d=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,f=cn.map(e=>{let t=u.find(t=>t.type===e);return{type:e,label:c(ln[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:sn[e]||`#94A3B8`}}).filter(e=>e.count>0||e.type===`normal`),p=f.map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color})),m=f.filter(e=>e.type===`normal`).reduce((e,t)=>e+t.count,0);return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(H,{className:`w-5 h-5`,style:{color:l}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`page.glucose.statistics`)}),(0,G.jsx)(de,{className:`w-4 h-4 text-slate-400`})]}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,G.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,G.jsxs)(`div`,{className:`mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,G.jsx)(`span`,{className:`text-4xl font-bold`,style:{color:l},children:m}),(0,G.jsxs)(`span`,{className:`text-base text-slate-400`,children:[`/ `,d,` `,c(`common.times`)]})]}),(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:c(`page.glucose.normalResults`)})]}),(0,G.jsx)(`div`,{className:`grid grid-cols-2 gap-x-4 gap-y-2`,children:f.map(e=>(0,G.jsxs)(`div`,{className:`flex flex-col`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label})]}),(0,G.jsxs)(`span`,{className:`text-base font-semibold ml-[18px]`,style:{color:e.color},children:[e.count,` `,e.count===1?c(`common.time`):c(`common.times`)]})]},e.type))})]}),(0,G.jsxs)(`div`,{className:`w-40 h-40 relative flex-shrink-0 ml-2`,children:[(0,G.jsx)(s,{width:`100%`,height:`100%`,children:(0,G.jsx)(b,{children:(0,G.jsx)(y,{data:p,cx:`50%`,cy:`50%`,innerRadius:50,outerRadius:72,paddingAngle:3,dataKey:`value`,startAngle:90,endAngle:-270,strokeWidth:0,children:p.map((e,t)=>(0,G.jsx)(g,{fill:e.color},`cell-${t}`))})})}),(0,G.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center`,children:[(0,G.jsx)(`span`,{className:`text-lg font-bold`,style:{color:l},children:c(`common.good`)}),(0,G.jsx)(`span`,{className:`text-xs text-slate-400`,children:c(`common.inAverage`)})]})]})]})]})}function dn({data:e,className:t,isLoading:n}){var r,i;let{t:a}=M(),o=J.glucose,s=(r=e==null?void 0:e.comparison)==null?{current:{average:0},previous:{average:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{changeValue:0,trend:`stable`,previousAvg:0,avgFasting:null,avgPostMeal:null}:i,l=e=>e===`up`?(0,G.jsx)(fe,{className:`w-4 h-4`}):e===`down`?(0,G.jsx)(me,{className:`w-4 h-4`}):null,u=e=>e===`up`?`#EF4444`:e===`down`?`#10B981`:o,d=s.insight||a(`page.glucose.defaultInsight`,{defaultValue:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`});return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(P,{className:`w-5 h-5`,style:{color:o}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.glucose.compareWithLastWeek`)})]}),(0,G.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.averageGlucose`)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.average.toFixed(1):`--`}),(0,G.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)}),c.changeValue!==0&&(0,G.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:u(c.trend)},children:[l(c.trend),Math.abs(c.changeValue).toFixed(1)]})]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?e.summary.previousAvg.toFixed(1):`--`,a(`units.mmolL`)]})]}),c.avgFasting&&(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.fastingLevel`)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgFasting.toFixed(1)}),(0,G.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.fastingNormal`),`: 3.9-6.1`]})]}),!c.avgFasting&&c.avgPostMeal&&(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.postMealLevel`)}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgPostMeal.toFixed(1)}),(0,G.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,G.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.postMealNormal`),`: <7.8`]})]})]}),(0,G.jsx)(`div`,{className:`p-4 rounded-2xl bg-amber-50`,children:(0,G.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:d})})]})}function fn({data:e,className:t,isLoading:n}){let{t:r}=M(),i=J.glucose,a=e==null?void 0:e.weeklySummary,o=(a==null?void 0:a.overview)||r(`page.glucose.defaultOverview`,{defaultValue:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`}),s=(a==null?void 0:a.highlights)||r(`page.glucose.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`});return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(z,{className:`w-5 h-5`,style:{color:i}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`page.glucose.weeklyOverview`)})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:`#4ADE80`},children:r(`page.glucose.overallSituation`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o})})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full bg-amber-400 text-white text-xs font-medium mb-2`,children:r(`page.glucose.needsAttention`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:s})})]}),(a==null?void 0:a.suggestions)&&a.suggestions.length>0&&(0,G.jsx)(`div`,{className:`pt-4 border-t border-slate-100`,children:(0,G.jsx)(`ul`,{className:`space-y-2`,children:a.suggestions.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,G.jsx)(`span`,{style:{color:i},children:`•`}),e]},t))})})]})}var pn={周一:`weekdays.mon`,周二:`weekdays.tue`,周三:`weekdays.wed`,周四:`weekdays.thu`,周五:`weekdays.fri`,周六:`weekdays.sat`,周日:`weekdays.sun`},mn={空腹:`vitals.fasting`,餐后:`vitals.postMeal`,随机:`common.value`};function hn(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function gn(e){return e<3.9?`low`:e<=6.1?`normal`:e<=7?`elevated`:`high`}function _n(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function vn(e){var t,n,r,i,a,o,s,c,l,u,d,f;console.log(`[Glucose Adapter] Input:`,e);let p=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t,n,r,i;let a=new Date(e.date),o=(t=(n=e.max)==null?e.value:n)==null?0:t,s=(r=(i=e.min)==null?e.value:i)==null?0:r;return{date:a,dateLabel:hn(e.date),weekdayKey:pn[e.label]||`weekdays.mon`,max:o,min:s,avg:(o+s)/2,typeKey:e.type?mn[e.type]:void 0}}),m=(e==null?void 0:e.overview)||{},h=m.average||0,g=(n=m.max)==null?p.length>0?Math.max(...p.map(e=>e.max)):0:n,_=(r=m.min)==null?p.length>0?Math.min(...p.map(e=>e.min)):0:r,v=m.max_label&&pn[m.max_label]||`weekdays.mon`,y=m.min_label&&pn[m.min_label]||`weekdays.mon`,b=m.fasting_avg,x=m.post_meal_avg,S=gn(b||h),C=(e==null?void 0:e.comparison)||{},w=C.changes||{},T=_n((i=w.average)==null?void 0:i.trend),E=((a=w.average)==null?void 0:a.value)||0,D=((o=C.previous)==null?void 0:o.average)||0,O=p.length>0?{value:p[p.length-1].avg,typeKey:p[p.length-1].typeKey,date:p[p.length-1].date}:null,k=(e==null?void 0:e.normal_range)||(e==null||(s=e.trend_chart)==null?void 0:s.normal_range)||{min:3.9,max:6.1},A=(e==null?void 0:e.weekly_summary)||{},j={chartData:p,yAxisRange:(e==null||(c=e.trend_chart)==null?void 0:c.y_axis_range)||{min:2,max:9},averageLine:(e==null||(l=e.trend_chart)==null?void 0:l.average_line)||h,normalRange:k,summary:{avgValue:h,minValue:_,maxValue:g,minWeekdayKey:y,maxWeekdayKey:v,previousAvg:D,avgFasting:b,avgPostMeal:x,status:S,statusKey:`status.${S}`,trend:T,changeValue:E,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:(e==null||(d=e.statistics)==null?void 0:d.distribution)||[]},comparison:{current:{average:((f=C.current)==null?void 0:f.average)||h},previous:{average:D},insight:C.insight||null},weeklySummary:{overview:A.overview||null,highlights:A.highlights||null,suggestions:A.suggestions||[],dataAnalysis:A.data_analysis||[]},latestReading:O};return console.log(`[Glucose Adapter] Output:`,j),j}const yn={all:[`glucose`],trend:e=>[...yn.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...yn.all,`details`]};function bn(e){return pe({queryKey:yn.trend(e),queryFn:async()=>{console.log(`[Glucose API] Fetching with dateRange:`,e);let t=await We(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Glucose API] Result:`,t),t},select:e=>vn(e),staleTime:300*1e3,gcTime:600*1e3})}function xn(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Sn(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Cn(){let{t:e}=M(),{theme:t}=rt(),[n,r]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),i=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(n.end);return t.setHours(0,0,0,0),t<e},[n.end]),a=(0,U.useMemo)(()=>({startDate:xn(n.start),endDate:xn(n.end)}),[n]),o=(0,U.useMemo)(()=>({start:Sn(n.start),end:Sn(n.end)}),[n]),s=()=>{r(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},c=()=>{i&&r(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:l,isLoading:u,isFetching:d,error:f}=bn(a),[p,m]=(0,U.useState)(!1),h=(0,U.useRef)(null),g=(0,U.useRef)(0);return(0,U.useEffect)(()=>{if(d)m(!0),g.current=Date.now(),h.current&&(clearTimeout(h.current),h.current=null);else{let e=Date.now()-g.current,t=Math.max(0,1e3-e);h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(!1),h.current=null},t)}return()=>{h.current&&clearTimeout(h.current)}},[d]),f?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(f)})]})}):(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:o.start,endDate:o.end,onPrevious:s,onNext:c,disableNext:!i})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!l&&!u?(0,G.jsx)(`div`,{className:`text-center py-12`,children:(0,G.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(on,{data:l,isLoading:p||u}),(0,G.jsx)(un,{data:l,isLoading:p||u}),(0,G.jsx)(dn,{data:l,isLoading:p||u}),(0,G.jsx)(fn,{data:l,isLoading:p||u}),(0,G.jsx)(it,{})]})})]})})}function wn({showCard:e=!0,height:t=200,className:n}){let{t:r}=M(),{data:i,isLoading:a,isError:o,refetch:s}=bn();if(a)return(0,G.jsx)(Tn,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`animate-pulse`,children:[(0,G.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,G.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,G.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,G.jsx)(Tn,{showCard:e,className:n,children:(0,G.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,G.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,G.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-amber-400 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:[e.min,e.max],date:e.date})),l=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${Y.glucose.primary}40`}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.glucose.rangeToday`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:Y.glucose.primary}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,G.jsx)(ut,{data:c,type:`mixed`,color:Y.glucose.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,G.jsxs)(K,{className:n,children:[(0,G.jsx)(xe,{children:(0,G.jsx)(Se,{children:r(`page.glucose.trendTitle`)})}),(0,G.jsx)(q,{children:l})]}):(0,G.jsx)(`div`,{className:n,children:l})}function Tn({showCard:e,className:t,children:n}){return e?(0,G.jsx)(K,{className:t,children:(0,G.jsx)(q,{className:`py-4`,children:n})}):(0,G.jsx)(`div`,{className:W(`p-4`,t),children:n})}function En(){return(0,G.jsx)(ct,{children:(0,G.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,G.jsx)(wn,{showCard:!1,height:200})})})}function Dn(e){return[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`][new Date(e).getDay()]||e}function On(e){return e.split(` `)[1]||e}function kn(e){return e?e.trend===`up`?`up`:e.trend===`down`?`down`:`stable`:`stable`}function An(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,k;let{overview:A,indicators:j}=e.data,M=A.chart_data.filter(e=>e.score!==null).map(e=>{var t;return{day:e.label,score:(t=e.score)==null?0:t,date:new Date(e.date)}}),N=M.length>0?M:void 0,P=j[0],F=j[1],I=j[2],L=j[3],R=j[4],z=j[5],B=j[6],V=(P==null||(t=P.chart)==null?void 0:t.map(e=>({day:On(e.time),systolic:e.systolic,diastolic:e.diastolic})))||[],ee=(F==null||(n=F.chart)==null?void 0:n.map((e,t)=>({x:t,value:e.value})))||[],te=ee.length>0?ee:void 0,ne=(I==null||(r=I.chart)==null?void 0:r.map((e,t)=>({x:t,value:e.value})))||[],re=ne.length>0?ne:void 0,ie=(L==null||(i=L.chart)==null?void 0:i.map(e=>({day:On(e.time),value:e.value})))||[],ae=ie.length>0?ie:void 0,oe=(R==null||(a=R.chart_data)==null?void 0:a.map(e=>({day:Dn(e.date),hours:e.total_minutes/60,quality:(e.deep_sleep_percent+e.rem_percent)*100,deepPercent:e.deep_sleep_percent,lightPercent:e.light_sleep_percent,awakePercent:e.awake_percent,remPercent:e.rem_percent})))||[],se=oe.length>0?oe:void 0,ce=(z==null||(o=z.chart_data)==null?void 0:o.map(e=>({day:Dn(e.date),positive:e.positive,neutral:e.neutral,negative:e.negative})))||[],le=ce.length>0?ce:void 0,ue=(B==null||(s=B.chart_data)==null?void 0:s.map((e,t)=>({x:t,value:e.value})))||[],de=ue.length>0?ue:void 0,fe=(c=R==null||(l=R.statistic)==null?void 0:l.average)==null?0:c,pe=Math.floor(fe/60),H=Math.round(fe%60);return{comprehensiveHealth:{chartData:N,weeklyAverage:(u=A.average_score)==null?0:u,aiSummary:A.ai_insight||``,targetScore:60,trend:kn(P==null?void 0:P.change)},bloodPressure:{avgSystolic:(d=P==null||(f=P.avg)==null?void 0:f.systolic)==null?0:d,avgDiastolic:(p=P==null||(m=P.avg)==null?void 0:m.diastolic)==null?0:p,latestSystolic:P==null||(h=P.latest)==null?void 0:h.systolic,latestDiastolic:P==null||(g=P.latest)==null?void 0:g.diastolic,maxSystolic:P==null||(_=P.max)==null?void 0:_.systolic,maxDiastolic:P==null||(v=P.max)==null?void 0:v.diastolic,minSystolic:P==null||(y=P.min)==null?void 0:y.systolic,minDiastolic:P==null||(b=P.min)==null?void 0:b.diastolic,reference:P==null?void 0:P.reference,status:P==null?void 0:P.status,periodDescription:`12 weeks`,chartData:V},heartRate:{avgHeartRate:(x=F==null?void 0:F.avg)==null?0:x,latestValue:F==null?void 0:F.latest,maxValue:F==null?void 0:F.max,minValue:F==null?void 0:F.min,reference:F==null?void 0:F.reference,status:F==null?void 0:F.status,periodDescription:`12 weeks`,chartData:te,referenceLine:(S=F==null?void 0:F.avg)==null?70:S},bloodSugar:{poctValue:(C=I==null?void 0:I.latest)==null?0:C,avgValue:I==null?void 0:I.avg,maxValue:I==null?void 0:I.max,minValue:I==null?void 0:I.min,reference:I==null?void 0:I.reference,status:I==null?void 0:I.status,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:re},bloodOxygen:{avgSpO2:(w=L==null?void 0:L.avg)==null?0:w,latestValue:L==null?void 0:L.latest,maxValue:L==null?void 0:L.max,minValue:L==null?void 0:L.min,reference:L==null?void 0:L.reference,status:L==null?void 0:L.status,periodDescription:`12 weeks`,chartData:ae,referenceLine:95},sleep:{avgSleepTime:{hours:pe,minutes:H},label:R==null||(T=R.statistic)==null?void 0:T.label,periodDescription:`12 weeks`,chartData:se},emotion:{dominantEmotion:`positive`,label:z==null||(E=z.statistic)==null?void 0:E.label,periodDescription:`12 weeks`,chartData:le},nutrition:{avgValue:(D=B==null||(O=B.statistic)==null?void 0:O.average)==null?0:D,label:B==null||(k=B.statistic)==null?void 0:k.label,unit:`/ minute`,periodDescription:`12 weeks`,chartData:de,referenceLine:70}}}function jn(){let e=[{day:`Mon`,score:52,date:new Date},{day:`Tue`,score:78,date:new Date},{day:`Wed`,score:48,date:new Date},{day:`Thu`,score:92,date:new Date},{day:`Fri`,score:68,date:new Date},{day:`Sat`,score:45,date:new Date},{day:`Sun`,score:28,date:new Date}],t=Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:120+Math.random()*30,diastolic:75+Math.random()*15})),n=Array.from({length:12},(e,t)=>({x:t,value:74+Math.sin(t*.6)*30+Math.random()*20})),r=Array.from({length:12},(e,t)=>({x:t,value:6.5+Math.sin(t*.5)*2.5+Math.random()*1.5})),i=Array.from({length:12},(e,t)=>({day:`D${t+1}`,value:95+Math.sin(t*.5)*3+Math.random()*2})),a=Array.from({length:12},(e,t)=>({day:`D${t+1}`,hours:7+Math.sin(t*.4)*2+Math.random()*1.5,quality:65+Math.sin(t*.4)*20+Math.random()*15})),o=Array.from({length:12},(e,t)=>({day:`D${t+1}`,positive:35+Math.sin(t*.5)*25+Math.random()*15,neutral:25+Math.random()*20,negative:15+Math.random()*15})),s=Array.from({length:12},(e,t)=>({x:t,value:75+Math.sin(t*.4)*25+Math.random()*20}));return{comprehensiveHealth:{chartData:e,weeklyAverage:72,aiSummary:`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`,targetScore:60,trend:`up`},bloodPressure:{avgSystolic:136,avgDiastolic:86,periodDescription:`12 weeks`,chartData:t},heartRate:{avgHeartRate:74,periodDescription:`12 weeks`,chartData:n,referenceLine:70},bloodSugar:{poctValue:7.4,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:r},bloodOxygen:{avgSpO2:94.9,periodDescription:`12 weeks`,chartData:i,referenceLine:95},sleep:{avgSleepTime:{hours:7,minutes:11},periodDescription:`12 weeks`,chartData:a},emotion:{dominantEmotion:`positive`,periodDescription:`12 weeks`,chartData:o},nutrition:{avgValue:74,unit:`/ minute`,periodDescription:`12 weeks`,chartData:s,referenceLine:70}}}const Mn={all:[`healthy`],data:e=>[...Mn.all,`data`,e]};async function Nn(e){try{let t=await ze.post(`/trend-review/overview`,{view_type:e});if(console.log(`[Healthy API] Response code:`,t.data.code,`msg:`,t.data.msg),t.data.code!==200)throw console.error(`[Healthy API] Unexpected code:`,t.data.code),Error(t.data.msg||`Failed to fetch healthy data`);return An(t.data)}catch(e){return console.error(`[Healthy API] Failed to fetch healthy data:`,e),console.warn(`[Healthy API] Using mock data as fallback`),jn()}}function Pn(e=`day`){return pe({queryKey:Mn.data(e),queryFn:()=>Nn(e),staleTime:300*1e3,gcTime:600*1e3})}function Fn(e={}){let{threshold:t=.1,rootMargin:n=`50px`,root:r=null,triggerOnce:i=!0}=e,a=(0,U.useRef)(null),[o,s]=(0,U.useState)(!1),[c,l]=(0,U.useState)(!1);return(0,U.useEffect)(()=>{let e=a.current;if(!e||i&&c)return;let o=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.isIntersecting;s(t),t&&!c&&l(!0),i&&t&&o.disconnect()})},{threshold:t,rootMargin:n,root:r});return o.observe(e),()=>{o.disconnect()}},[t,n,r,i,c]),{ref:a,isInViewport:o,hasBeenInViewport:c}}var In=({height:e})=>(0,G.jsx)(`div`,{className:`animate-pulse bg-gradient-to-r from-slate-100 via-slate-50 to-slate-100 rounded-lg`,style:{height:typeof e==`number`?`${e}px`:e,backgroundSize:`200% 100%`,animation:`shimmer 1.5s infinite`},children:(0,G.jsx)(`style`,{children:`
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
    `})});function Z({children:e,height:t=200,className:n=``,skeleton:r,threshold:i=.1,rootMargin:a=`100px`}){let{ref:o,hasBeenInViewport:s}=Fn({threshold:i,rootMargin:a,triggerOnce:!0});return(0,G.jsx)(`div`,{ref:o,className:n,style:{height:typeof t==`number`?`${t}px`:t,position:`relative`},children:s?e:r||(0,G.jsx)(In,{height:t})})}const Ln={animationDuration:400,animationEasing:`ease-out`,isAnimationActive:!0},Rn={animationDuration:800,animationEasing:`ease-in-out`,isAnimationActive:!0};function zn(){if(typeof navigator>`u`)return!1;let e=navigator.hardwareConcurrency||4,t=/WebView|wv/.test(navigator.userAgent);return e<=4||t}function Bn(){return zn()?Ln:Rn}const Q={defaultMargin:{top:5,right:15,left:0,bottom:5},gridStyle:{strokeDasharray:`4 4`,stroke:`#E5E7EB`},axisStyle:{fontSize:12,fill:`#94a3b8`},animation:Bn()};var Vn=`#FB923D`,Hn=`#FB923D`,Un=()=>(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,G.jsx)(`rect`,{x:`4`,y:`4`,width:`6`,height:`16`,rx:`1`,fill:Vn}),(0,G.jsx)(`rect`,{x:`14`,y:`8`,width:`6`,height:`12`,rx:`1`,fill:Vn,opacity:`0.6`})]});const Wn=(0,U.memo)(({data:e,period:t=`weekly`,onPeriodChange:n,className:r,isLoading:i})=>{var a,o;let{t:c}=M(),f=[{day:`Mon`,score:52},{day:`Tues`,score:78},{day:`Wed`,score:48},{day:`Thur`,score:92},{day:`Fri`,score:68},{day:`Sat`,score:45},{day:`Sun`,score:28}],p=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?f:t},[e==null?void 0:e.chartData]),h=(a=e==null?void 0:e.weeklyAverage)==null?72:a,_=(o=e==null?void 0:e.aiSummary)==null?`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`:o;e?!e.chartData||e.chartData.length===0?console.log(`⚠️ ComprehensiveHealthCard: Empty chartData from API, using placeholder`):console.log(`✅ ComprehensiveHealthCard: Using API data, points:`,e.chartData.length):console.log(`⚠️ ComprehensiveHealthCard: No data provided, using dummy data`);let y=()=>{if(!h||!_)return _;let e=String(h),t=_.split(e);return t.length===1?_:t.map((n,r)=>(0,G.jsxs)(`span`,{children:[n,r<t.length-1&&(0,G.jsx)(`span`,{style:{color:Vn,fontWeight:600},children:e})]},r))};return(0,G.jsxs)(K,{className:`${r} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${i?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(Un,{}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`healthy.comprehensiveHealth`,`Comprehensive health data`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center bg-slate-100 rounded-full p-0.5`,children:[(0,G.jsx)(`button`,{onClick:()=>n==null?void 0:n(`daily`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`daily`?`text-slate-800`:`text-slate-400 hover:text-slate-600`}`,children:c(`common.daily`,`Daily`)}),(0,G.jsx)(`button`,{onClick:()=>n==null?void 0:n(`weekly`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`weekly`?`text-white`:`text-slate-400 hover:text-slate-600`}`,style:t===`weekly`?{backgroundColor:Vn}:{},children:c(`common.weekly`,`Weekly`)})]})]}),(0,G.jsx)(`div`,{className:`text-xs text-slate-400 mb-1 ml-1`,children:`Score`}),(0,G.jsx)(`div`,{className:`-mx-1 mb-5`,children:(0,G.jsx)(Z,{height:176,children:(0,G.jsx)(s,{width:`100%`,height:176,children:(0,G.jsxs)(m,{data:p,margin:{top:5,right:15,left:0,bottom:5},barCategoryGap:`25%`,children:[(0,G.jsx)(u,{horizontal:!0,vertical:!1,strokeDasharray:`4 4`,stroke:`#E5E7EB`}),(0,G.jsx)(x,{dataKey:`day`,tick:{fontSize:12,fill:`#94a3b8`},tickLine:!1,axisLine:!1,dy:8}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[0,100],ticks:[0,20,40,60,80,100],width:30}),(0,G.jsx)(l,{dataKey:`score`,radius:[20,20,4,4],maxBarSize:36,...Q.animation,children:p.map((e,t)=>(0,G.jsx)(g,{fill:Vn},`cell-${t}`))}),(0,G.jsx)(d,{y:h,stroke:Hn,strokeDasharray:`6 4`,strokeWidth:1.5,label:{position:`left`,value:`▶`,fill:Hn,fontSize:10,dx:-5}})]})})})}),(0,G.jsxs)(`div`,{className:`rounded-xl p-4 relative`,style:{backgroundColor:`#ECFDF5`},children:[(0,G.jsx)(`div`,{className:`absolute -top-3 right-4`,children:(0,G.jsx)(`span`,{className:`px-3 py-1.5 text-xs font-medium text-white rounded-full shadow-sm`,style:{background:`linear-gradient(90deg, #FFCC2B 0%, #FEA80D 100%)`},children:c(`healthy.aiGenerated`,`AI Generated`)})}),(0,G.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed pt-1`,children:y()})]})]})});var Gn=`#F97316`,Kn=`#4ADE80`,qn=`#E2E8F0`;const Jn=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:c}=M(),u=Gn,d=Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:100+Math.random()*60,diastolic:60+Math.random()*40})),f=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?d:t},[e==null?void 0:e.chartData]),p=(i=e==null?void 0:e.avgSystolic)==null?136:i,h=(a=e==null?void 0:e.avgDiastolic)==null?86:a,_=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`⚠️ HealthBloodPressureCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(R,{className:`w-5 h-5`,style:{color:u}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.bloodPressure`,`Blood pressure`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[c(`healthy.bpDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:_}),(0,G.jsxs)(`span`,{style:{color:Gn,fontWeight:600},children:[p,` mmHg`]}),c(`healthy.bpDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsxs)(`span`,{style:{color:Gn,fontWeight:600},children:[h,` mmHg`]}),`.`]})}),(0,G.jsxs)(Z,{height:224,children:[(0,G.jsx)(s,{width:`100%`,height:224,children:(0,G.jsxs)(m,{data:f,margin:{top:10,right:10,left:10,bottom:0},barGap:2,barCategoryGap:`30%`,children:[(0,G.jsx)(x,{dataKey:`day`,hide:!0}),(0,G.jsx)(v,{domain:[40,180],hide:!0}),(0,G.jsx)(l,{dataKey:`systolic`,radius:[4,4,4,4],maxBarSize:16,...Q.animation,children:f.map((e,t)=>(0,G.jsx)(g,{fill:qn},`systolic-${t}`))}),(0,G.jsx)(l,{dataKey:`diastolic`,radius:[4,4,4,4],maxBarSize:16,...Q.animation,children:f.map((e,t)=>(0,G.jsx)(g,{fill:qn},`diastolic-${t}`))})]})}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`35%`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Gn}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Gn}}),(0,G.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Gn},children:[`SBP: `,p,`mmHg`]}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Gn}`}})]}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`65%`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Kn}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Kn}}),(0,G.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Kn},children:[`DBP: `,h,`mmHg`]}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Kn}`}})]})]})]})});var Yn=`#F87171`;const Xn=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=M(),l=[{x:0,value:68},{x:1,value:70},{x:2,value:76},{x:3,value:78},{x:4,value:88},{x:5,value:90},{x:6,value:85},{x:7,value:75},{x:8,value:68}],u=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?l:t},[e==null?void 0:e.chartData]),d=(i=e==null?void 0:e.avgHeartRate)==null?74:i,f=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e?!e.chartData||e.chartData.length===0?console.log(`⚠️ HealthHeartRateCard: Empty chartData from API, using placeholder`):console.log(`✅ HealthHeartRateCard: Using API data, points:`,e.chartData.length):console.log(`⚠️ HealthHeartRateCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(R,{className:`w-5 h-5`,style:{color:Yn}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.heartRate`,`Heart rate`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[o(`healthy.hrDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:f}),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),o(`healthy.hrDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,G.jsxs)(Z,{height:208,children:[(0,G.jsx)(s,{width:`100%`,height:208,children:(0,G.jsxs)(c,{data:u,margin:{top:20,right:10,left:10,bottom:20},children:[(0,G.jsx)(v,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,G.jsx)(C,{type:`linear`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:Yn},...Q.animation})]})}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`40%`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Yn}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Yn}}),(0,G.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Yn},children:[o(`healthy.heartRateLabel`,`Heart rate`),`: `,d,` / minute`]}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Yn}`}})]})]})]})});var Zn=`#F59E0B`;const Qn=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:c}=M(),l=[{x:0,value:5.2},{x:1,value:4.8},{x:2,value:8.5},{x:3,value:9.2},{x:4,value:7.8},{x:5,value:6.5},{x:6,value:5.8},{x:7,value:4.2},{x:8,value:3.8},{x:9,value:5.5},{x:10,value:6.8},{x:11,value:8.2},{x:12,value:9.5},{x:13,value:8.8},{x:14,value:7.2}],u=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?l:t},[e==null?void 0:e.chartData]),d=(i=e==null?void 0:e.poctValue)==null?7.4:i,f=(a=e==null?void 0:e.unit)==null?`mmol/L`:a,p=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`⚠️ HealthBloodSugarCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(ie,{className:`w-5 h-5`,style:{color:Zn}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.bloodSugar`,`Blood Sugar`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[c(`healthy.bsDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:p}),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),c(`healthy.bsDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,G.jsxs)(Z,{height:208,children:[(0,G.jsx)(s,{width:`100%`,height:208,children:(0,G.jsxs)(_,{data:u,margin:{top:20,right:10,left:10,bottom:20},children:[(0,G.jsx)(`defs`,{children:(0,G.jsxs)(`linearGradient`,{id:`bloodSugarGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,G.jsx)(`stop`,{offset:`5%`,stopColor:`#CBD5E1`,stopOpacity:.5}),(0,G.jsx)(`stop`,{offset:`95%`,stopColor:`#CBD5E1`,stopOpacity:.05})]})}),(0,G.jsx)(v,{hide:!0,domain:[2,12]}),(0,G.jsx)(h,{type:`monotone`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,fill:`url(#bloodSugarGradient)`,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:Zn},...Q.animation})]})}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`46%`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Zn}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Zn}}),(0,G.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Zn},children:[`POCT: `,d,` `,f]}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Zn}`}})]})]})]})});var $n=()=>(0,G.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:[(0,G.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`4`,stroke:`#A78BFA`,strokeWidth:`2`,fill:`none`}),(0,G.jsx)(`text`,{x:`12`,y:`15`,textAnchor:`middle`,fill:`#A78BFA`,fontSize:`8`,fontWeight:`600`,children:`O₂`})]});const er=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=M(),c=J.spo2,u=Array.from({length:20},(e,t)=>({day:`D${t+1}`,value:94+Math.random()*4})),d=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?u:t},[e==null?void 0:e.chartData]),f=(i=e==null?void 0:e.avgSpO2)==null?94.9:i;e==null||e.referenceLine;let p=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`⚠️ HealthBloodOxygenCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)($n,{}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.bloodOxygen`,`Blood Oxygen`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.spo2Description`,`Your average systolic blood pressure over the past {{period}} was `,{period:p}),(0,G.jsx)(`span`,{style:{color:c,fontWeight:600},children:`136 mmHg`}),o(`healthy.spo2DescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:c,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(Z,{height:112,children:(0,G.jsx)(s,{width:`100%`,height:112,children:(0,G.jsxs)(m,{data:d,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,G.jsx)(v,{hide:!0,domain:[90,100]}),(0,G.jsx)(l,{dataKey:`value`,radius:[3,3,0,0],maxBarSize:12,...Q.animation,children:d.map((e,t)=>(0,G.jsx)(g,{fill:`#D1D5DB`},`cell-${t}`))})]})})}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.5)`},children:[(0,G.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #A78BFA`,marginLeft:`4px`}}),(0,G.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #A78BFA 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,G.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #A78BFA`,marginRight:`4px`}})]}),(0,G.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.5 - 14px)`},children:(0,G.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:`#A78BFA`},children:[`SpO2: `,f,`%`]})})]})]})});var tr=`#818CF8`;const nr=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=M(),c=Array.from({length:14},(e,t)=>({day:`D${t+1}`,hours:6+Math.random()*3,quality:60+Math.random()*30})),u=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),d=(i=e==null?void 0:e.avgSleepTime)==null?{hours:7,minutes:11}:i,f=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`⚠️ HealthSleepCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(oe,{className:`w-5 h-5`,style:{color:tr}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.sleep`,`Sleep`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.sleepDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:f}),(0,G.jsx)(`span`,{style:{color:tr,fontWeight:600},children:`136 mmHg`}),o(`healthy.sleepDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:tr,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(Z,{height:112,children:(0,G.jsx)(s,{width:`100%`,height:112,children:(0,G.jsxs)(m,{data:u,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,G.jsx)(v,{hide:!0,domain:[0,12]}),(0,G.jsx)(l,{dataKey:`hours`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Q.animation,children:u.map((e,t)=>(0,G.jsx)(g,{fill:`#9CA3AF`},`cell-${t}`))}),(0,G.jsx)(l,{dataKey:`quality`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Q.animation,children:u.map((e,t)=>(0,G.jsx)(g,{fill:`#D1D5DB`},`cell-light-${t}`))})]})})}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.45)`},children:[(0,G.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #818CF8`,marginLeft:`4px`}}),(0,G.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #818CF8 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,G.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #818CF8`,marginRight:`4px`}})]}),(0,G.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.45 - 14px)`},children:(0,G.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:tr},children:[o(`healthy.sleepTime`,`Sleep time`),`: `,d.hours,` hours `,d.minutes,` minutes`]})})]})]})});var $={positive:`#FBBF24`,neutral:`#93C5FD`,negative:`#3B82F6`};const rr=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i;let{t:a}=M(),o=[{day:`D1`,positive:35,neutral:45,negative:20},{day:`D2`,positive:30,neutral:50,negative:20},{day:`D3`,positive:40,neutral:40,negative:20},{day:`D4`,positive:25,neutral:55,negative:20},{day:`D5`,positive:45,neutral:40,negative:15},{day:`D6`,positive:35,neutral:45,negative:20},{day:`D7`,positive:30,neutral:45,negative:25},{day:`D8`,positive:40,neutral:40,negative:20},{day:`D9`,positive:35,neutral:45,negative:20},{day:`D10`,positive:45,neutral:40,negative:15},{day:`D11`,positive:38,neutral:42,negative:20},{day:`D12`,positive:32,neutral:48,negative:20},{day:`D13`,positive:28,neutral:52,negative:20},{day:`D14`,positive:50,neutral:35,negative:15}],s=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?o:t},[e==null?void 0:e.chartData]),c=(i=e==null?void 0:e.periodDescription)==null?`12 weeks`:i;return e||console.log(`⚠️ HealthEmotionCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(ee,{className:`w-5 h-5`,style:{color:$.positive}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`vitals.emotion`,`Emotion`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[a(`healthy.emotionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:c}),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),a(`healthy.emotionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,G.jsxs)(Z,{height:224,children:[(0,G.jsx)(`div`,{className:`absolute left-0 right-0 flex items-center justify-between px-4`,style:{top:`8px`,height:`180px`},children:s.map((e,t)=>(0,G.jsxs)(`div`,{className:`flex flex-col gap-1`,style:{height:`100%`,width:`3%`},children:[(0,G.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:$.positive,flex:e.positive}}),(0,G.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:$.neutral,flex:e.neutral}}),(0,G.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:$.negative,flex:e.negative}})]},t))}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.18)`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${$.positive}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:$.positive}}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${$.positive}`}})]}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.52)`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${$.neutral}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:$.neutral}}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${$.neutral}`}})]}),(0,G.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.85)`},children:[(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${$.negative}`}}),(0,G.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:$.negative}}),(0,G.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${$.negative}`}})]}),(0,G.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 flex justify-center gap-6`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:$.positive}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.positive`,`积极`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:$.neutral}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.neutral`,`中性`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:$.negative}}),(0,G.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.negative`,`消极`)})]})]})]})]})});var ir=J.heartRate;const ar=(0,U.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o,l;let{t:u}=M(),f=Array.from({length:15},(e,t)=>({x:t,value:70+Math.sin(t*.3)*20+Math.random()*10})),p=(0,U.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?f:t},[e==null?void 0:e.chartData]),m=(i=e==null?void 0:e.avgValue)==null?74:i,h=(a=e==null?void 0:e.unit)==null?`/ minute`:a,g=(o=e==null?void 0:e.referenceLine)==null?70:o,_=(l=e==null?void 0:e.periodDescription)==null?`12 weeks`:l;return e||console.log(`⚠️ HealthNutritionCard: No data provided, using dummy data`),(0,G.jsxs)(K,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(I,{className:`w-5 h-5`,style:{color:ir}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:u(`vitals.nutrition`,`Nutrition`)})]}),(0,G.jsx)(V,{className:`w-5 h-5 text-slate-400`})]}),(0,G.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[u(`healthy.nutritionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:_}),(0,G.jsx)(`span`,{style:{color:ir,fontWeight:600},children:`136 mmHg`}),u(`healthy.nutritionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,G.jsx)(`span`,{style:{color:ir,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,G.jsxs)(`div`,{className:`relative`,children:[(0,G.jsx)(Z,{height:80,children:(0,G.jsx)(s,{width:`100%`,height:80,children:(0,G.jsxs)(c,{data:p,margin:{top:10,right:10,left:10,bottom:10},children:[(0,G.jsx)(v,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,G.jsx)(d,{y:g,stroke:ir,strokeDasharray:`4 4`,strokeWidth:1,strokeOpacity:.5}),(0,G.jsx)(C,{type:`monotone`,dataKey:`value`,stroke:ir,strokeWidth:2,dot:!1,activeDot:{r:4,fill:ir},...Q.animation})]})})}),(0,G.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,G.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium`,style:{backgroundColor:ir},children:[u(`healthy.heartRateLabel`,`Heart rate`),`: `,m,` `,h]})})]})]})});function or(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function sr(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function cr(){let{t:e}=M(),t=O(),{theme:n}=rt(),[r,i]=(0,U.useState)(`weekly`),a=r===`daily`?`day`:`week`,[o,s]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),c=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(o.end);return t.setHours(0,0,0,0),t<e},[o.end]);(0,U.useMemo)(()=>({startDate:or(o.start),endDate:or(o.end)}),[o]);let l=(0,U.useMemo)(()=>({start:sr(o.start),end:sr(o.end)}),[o]),u=()=>{s(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},d=()=>{c&&s(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:f,isLoading:p,isFetching:m,error:h}=Pn(a),[g,_]=(0,U.useState)(!1),v=(0,U.useRef)(null),y=(0,U.useRef)(0);if((0,U.useEffect)(()=>{if(m)_(!0),y.current=Date.now(),v.current&&(clearTimeout(v.current),v.current=null);else{let e=Date.now()-y.current,t=Math.max(0,1e3-e);v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{_(!1),v.current=null},t)}return()=>{v.current&&clearTimeout(v.current)}},[m]),h)return(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:n.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:n.textSecondary},children:String(h)})]})});let b=g||p;return(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:n.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:n.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:l.start,endDate:l.end,onPrevious:u,onNext:d,disableNext:!c})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,G.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,G.jsx)(`p`,{style:{color:n.textSecondary},children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(Wn,{data:f==null?void 0:f.comprehensiveHealth,period:r,onPeriodChange:i,isLoading:b}),(0,G.jsx)(Jn,{data:f==null?void 0:f.bloodPressure,isLoading:b,onClick:()=>t(`/details/blood-pressure`)}),(0,G.jsx)(Xn,{data:f==null?void 0:f.heartRate,isLoading:b,onClick:()=>t(`/details/heart-rate`)}),(0,G.jsx)(Qn,{data:f==null?void 0:f.bloodSugar,isLoading:b,onClick:()=>t(`/details/glucose`)}),(0,G.jsx)(er,{data:f==null?void 0:f.bloodOxygen,isLoading:b,onClick:()=>t(`/details/spo2`)}),(0,G.jsx)(nr,{data:f==null?void 0:f.sleep,isLoading:b,onClick:()=>console.log(`Navigate to sleep details`)}),(0,G.jsx)(rr,{data:f==null?void 0:f.emotion,isLoading:b,onClick:()=>console.log(`Navigate to emotion details`)}),(0,G.jsx)(ar,{data:f==null?void 0:f.nutrition,isLoading:b,onClick:()=>console.log(`Navigate to nutrition details`)}),(0,G.jsx)(it,{})]})})]})})}function lr({active:e,payload:t,label:n}){let{t:r}=M();if(!e||!t||t.length===0)return null;let i=t.find(e=>e.dataKey===`deep`),a=t.find(e=>e.dataKey===`light`),o=t.find(e=>e.dataKey===`rem`),s=t.find(e=>e.dataKey===`awake`),c=e=>{let t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`};return(0,G.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,G.jsx)(`p`,{className:`font-medium mb-1`,children:n}),i&&(0,G.jsxs)(`p`,{style:{color:i.fill},children:[r(`page.sleep.deepSleep`),`: `,c(i.value)]}),a&&(0,G.jsxs)(`p`,{style:{color:a.fill},children:[r(`page.sleep.lightSleep`),`: `,c(a.value)]}),o&&(0,G.jsxs)(`p`,{style:{color:o.fill},children:[r(`page.sleep.remSleep`),`: `,c(o.value)]}),s&&(0,G.jsxs)(`p`,{style:{color:s.fill},children:[r(`page.sleep.awake`),`: `,c(s.value)]})]})}var ur=`#A78BFA`,dr=e=>{let{fill:t,x:n,y:r,width:i,height:a,payload:o,dataKey:s}=e,c=[`deep`,`light`,`rem`,`awake`],l=null;for(let e=c.length-1;e>=0;e--){let t=c[e];if(o[t]&&o[t]>0){l=t;break}}let u=s===l?[3,3,0,0]:[0,0,0,0];return(0,G.jsx)(f,{...e,radius:u})};const fr=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,c;let{t:d}=M(),f=(e==null?void 0:e.stageColors)||{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},m=[{name:`Mon`,deep:60,light:180,rem:90,awake:10},{name:`Tue`,deep:50,light:190,rem:100,awake:15},{name:`Wed`,deep:70,light:170,rem:80,awake:10},{name:`Thu`,deep:55,light:185,rem:95,awake:12},{name:`Fri`,deep:65,light:175,rem:85,awake:8},{name:`Sat`,deep:80,light:160,rem:110,awake:20},{name:`Sun`,deep:60,light:180,rem:90,awake:10}],h=(0,U.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map(e=>({name:d(e.weekdayKey),deep:e.deep,light:e.light,rem:e.rem,awake:e.awake,total:e.total})))==null?m:t},[e==null?void 0:e.chartData,d]),g=ye(800),_=e=>e===`up`?(0,G.jsx)(ae,{className:`w-4 h-4`}):e===`down`?(0,G.jsx)(ce,{className:`w-4 h-4`}):(0,G.jsx)(le,{className:`w-4 h-4`}),y=Math.max(...h.map(e=>(e.deep||0)+(e.light||0)+(e.rem||0)+(e.awake||0))),b=Math.ceil(y/60)+1;return(0,G.jsxs)(K,{className:`${t} relative`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(oe,{className:`w-5 h-5`,style:{color:ur}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:d(`page.sleep.trendyReport`)})]}),n&&(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,G.jsx)(L,{className:`w-3 h-3 animate-spin`}),(0,G.jsx)(`span`,{children:d(`common.loading`)})]})]}),(0,G.jsxs)(`div`,{className:`flex gap-3 mb-5`,children:[(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-purple-50`,children:[(0,G.jsx)(`div`,{className:`flex items-baseline gap-1`,children:(0,G.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:ur},children:(r=e==null||(i=e.summary)==null?void 0:i.avgDurationText)==null?`--`:r})}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:d(`page.sleep.weeksAverageSleep`)})]}),(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-purple-50`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,G.jsx)(`span`,{className:`text-lg font-bold`,style:{color:ur},children:(e==null||(a=e.summary)==null?void 0:a.trend)&&_(e.summary.trend)}),(0,G.jsx)(`span`,{className:`text-lg font-semibold text-slate-700`,children:(o=e==null||(c=e.summary)==null?void 0:c.durationChangeText)==null?`--`:o})]}),(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:d(`time.lastWeek`)})]})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-4 mb-2 flex-wrap`,children:[(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:f.deep}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:d(`page.sleep.deepSleep`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:f.light}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:d(`page.sleep.lightSleep`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:f.rem}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:d(`page.sleep.remSleep`)})]}),(0,G.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,G.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:f.awake}}),(0,G.jsx)(`span`,{className:`text-xs text-slate-500`,children:d(`page.sleep.awake`)})]})]}),(0,G.jsx)(`div`,{className:`h-44 -mx-2`,children:(0,G.jsx)(s,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,G.jsxs)(S,{data:h,margin:{top:10,right:10,left:-15,bottom:0},barCategoryGap:`40%`,children:[(0,G.jsx)(u,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,G.jsx)(x,{dataKey:`name`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,G.jsx)(v,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[0,b*60],tickFormatter:e=>`${Math.round(e/60)}h`}),(0,G.jsx)(p,{content:(0,G.jsx)(lr,{})}),(0,G.jsx)(l,{dataKey:`deep`,stackId:`sleep`,fill:f.deep,barSize:12,shape:(0,G.jsx)(dr,{}),animationDuration:g}),(0,G.jsx)(l,{dataKey:`light`,stackId:`sleep`,fill:f.light,barSize:12,shape:(0,G.jsx)(dr,{}),animationDuration:g}),(0,G.jsx)(l,{dataKey:`rem`,stackId:`sleep`,fill:f.rem,barSize:12,shape:(0,G.jsx)(dr,{}),animationDuration:g}),(0,G.jsx)(l,{dataKey:`awake`,stackId:`sleep`,fill:f.awake,barSize:12,shape:(0,G.jsx)(dr,{}),animationDuration:g})]})})})]})});var pr={deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},mr=`#A78BFA`;const hr=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=M(),o=(r=e==null||(i=e.sleepStructure)==null?void 0:i.stages)==null?[]:r,s=e=>{switch(e){case`deep`:return a(`page.sleep.deepSleep`);case`light`:return a(`page.sleep.lightSleep`);case`rem`:return a(`page.sleep.remSleep`);case`awake`:return a(`page.sleep.awake`);default:return e}},c=e=>{switch(e){case`deep`:return pr.deep;case`light`:return pr.light;case`rem`:return pr.rem;case`awake`:return pr.awake;default:return`#94a3b8`}},l=e=>{switch(e){case`high`:case`low`:return`#F97316`;default:return`#64748b`}};return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(H,{className:`w-5 h-5`,style:{color:mr}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.sleep.sleepStructure`)})]}),(0,G.jsxs)(`div`,{className:`space-y-3`,children:[o.map(e=>{let t=c(e.type),n=l(e.status),r=e.status!==`normal`&&e.statusText;return(0,G.jsxs)(`div`,{className:`p-4 rounded-xl`,style:{backgroundColor:`#F8F9FA`},children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,G.jsxs)(`span`,{className:`font-semibold text-sm text-slate-800`,children:[s(e.type),` (`,e.percent,`%)`]}),(0,G.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[a(`page.sleep.standard`),`: `,e.reference]})]}),(0,G.jsx)(`div`,{className:`relative h-2.5 bg-slate-200 rounded-full overflow-hidden mb-2`,children:(0,G.jsx)(`div`,{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(e.percent,100)}%`,backgroundColor:t}})}),r&&(0,G.jsxs)(`div`,{className:`flex items-start gap-1.5`,children:[(0,G.jsx)(`p`,{className:`text-xs font-medium flex-1`,style:{color:n},children:e.statusText}),(0,G.jsx)(de,{className:`w-3.5 h-3.5 flex-shrink-0 mt-0.5`,style:{color:n}})]}),e.status===`normal`&&(0,G.jsx)(`p`,{className:`text-xs text-slate-500`,children:`Normal`})]},e.type)}),o.length===0&&(0,G.jsx)(`p`,{className:`text-center text-slate-400 py-4`,children:a(`common.noData`)})]})]})});var gr=`#A78BFA`;const _r=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=M(),o=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,s=[a(`page.sleep.defaultAnalysis1`,{defaultValue:`The average blood oxygen saturation this week was 97%, the same as last week.`}),a(`page.sleep.defaultAnalysis2`,{defaultValue:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`}),a(`page.sleep.defaultAnalysis3`,{defaultValue:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`})],c=o.length>0?o:s;return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(se,{className:`w-5 h-5`,style:{color:gr}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.sleep.dataAnalysis`)})]}),(0,G.jsx)(`div`,{className:`space-y-3`,children:c.map((e,t)=>(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e},t))})]})});var vr=`#A78BFA`;const yr=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=M(),a=(r=e==null?void 0:e.routine)==null?{hasData:!1,avgSleepTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},avgWakeTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},insight:null}:r,o=(0,U.useMemo)(()=>a.insight||i(`page.sleep.defaultInsight`,{defaultValue:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`}),[a.insight,i]);return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(P,{className:`w-5 h-5`,style:{color:vr}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`page.sleep.compareWithLastWeek`)})]}),(0,G.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgSleepTime`)}),(0,G.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:vr},children:a.avgSleepTime.text})}),(0,G.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgSleepTime.changeText||i(`page.sleep.sameAsLastWeek`)})]}),(0,G.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,G.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgWakeTime`)}),(0,G.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,G.jsx)(`span`,{className:`text-xl font-bold`,style:{color:vr},children:a.avgWakeTime.text})}),(0,G.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgWakeTime.changeText||i(`page.sleep.sameAsLastWeek`)})]})]}),(0,G.jsx)(`div`,{className:`p-4 rounded-2xl bg-purple-50`,children:(0,G.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:o})})]})});var br=`#A78BFA`;const xr=(0,U.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=M(),a=(r=e==null?void 0:e.weeklySummary)==null?{overview:null,highlights:null,suggestions:[],dataAnalysis:[]}:r,o=(0,U.useMemo)(()=>a.overview||i(`page.sleep.defaultOverview`,{defaultValue:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`}),[a.overview,i]),s=(0,U.useMemo)(()=>a.highlights||i(`page.sleep.defaultHighlights`,{defaultValue:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`}),[a.highlights,i]);return(0,G.jsxs)(K,{className:`${t} relative overflow-hidden`,children:[(0,G.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:X.loadingOverlay},children:(0,G.jsx)(L,{className:`w-8 h-8 text-white animate-spin`})}),(0,G.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,G.jsx)(z,{className:`w-5 h-5`,style:{color:br}}),(0,G.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`page.sleep.weeklyOverview`)})]}),(0,G.jsxs)(`div`,{className:`mb-5`,children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:br},children:i(`page.sleep.overallSituation`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o})})]}),(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full bg-amber-400 text-white text-xs font-medium mb-2`,children:i(`page.sleep.needsAttention`)}),(0,G.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,G.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:s})})]}),a.suggestions&&a.suggestions.length>0&&(0,G.jsx)(`div`,{className:`mt-4 pt-4 border-t border-slate-100`,children:(0,G.jsx)(`ul`,{className:`space-y-2`,children:a.suggestions.map((e,t)=>(0,G.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,G.jsx)(`span`,{style:{color:br},children:`•`}),e]},t))})})]})});var Sr={周一:`weekdays.mon`,周二:`weekdays.tue`,周三:`weekdays.wed`,周四:`weekdays.thu`,周五:`weekdays.fri`,周六:`weekdays.sat`,周日:`weekdays.sun`},Cr={deep:`page.sleep.deepSleep`,light:`page.sleep.lightSleep`,rem:`page.sleep.remSleep`,awake:`page.sleep.awake`};function wr(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Tr(e){switch(e){case`up`:return`up`;case`dn`:case`down`:return`down`;default:return`stable`}}function Er(e){switch(e){case`high`:return`high`;case`low`:return`low`;default:return`normal`}}function Dr(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:wr(e.date),weekdayKey:Sr[e.label]||`weekdays.mon`,total:e.total||0,totalText:e.total_text||``,deep:e.deep||0,light:e.light||0,rem:e.rem||0,awake:e.awake||0})),g=(e==null?void 0:e.overview)||{},_=g.change||{},v=(e==null?void 0:e.sleep_structure)||{has_data:!1,stages:[]},y=(v.stages||[]).map(e=>({type:e.type,labelKey:Cr[e.type]||e.label,percent:e.percent||0,reference:e.reference||``,status:Er(e.evaluation),statusText:e.evaluation_text||``,color:e.color||`#ccc`})),b=(e==null?void 0:e.sleep_routine)||{has_data:!1},x={hasData:b.has_data||!1,avgSleepTime:{text:((n=b.avg_sleep_time)==null?void 0:n.time_text)||`--:--`,changeValue:((r=b.avg_sleep_time)==null||(r=r.change)==null?void 0:r.value)||0,trend:Tr(((i=b.avg_sleep_time)==null||(i=i.change)==null?void 0:i.trend)||`same`),changeText:((a=b.avg_sleep_time)==null||(a=a.change)==null?void 0:a.text)||``},avgWakeTime:{text:((o=b.avg_wake_time)==null?void 0:o.time_text)||`--:--`,changeValue:((s=b.avg_wake_time)==null||(s=s.change)==null?void 0:s.value)||0,trend:Tr(((c=b.avg_wake_time)==null||(c=c.change)==null?void 0:c.trend)||`same`),changeText:((l=b.avg_wake_time)==null||(l=l.change)==null?void 0:l.text)||``},insight:b.insight||null};return{chartData:h,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:0,max:10},stageColors:{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},summary:{avgDuration:g.average||0,avgDurationText:g.average_text||`--`,durationChange:_.value||0,durationChangeText:_.value_text||``,trend:Tr(_.trend),maxDurationText:g.max_text||`--`,maxDay:g.max_label||``,minDurationText:g.min_text||`--`,minDay:g.min_label||``},sleepStructure:{hasData:v.has_data||!1,stages:y},routine:x,weeklySummary:{overview:(e==null||(d=e.weekly_summary)==null?void 0:d.overview)||null,highlights:(e==null||(f=e.weekly_summary)==null?void 0:f.highlights)||null,suggestions:(e==null||(p=e.weekly_summary)==null?void 0:p.suggestions)||[],dataAnalysis:(e==null||(m=e.weekly_summary)==null?void 0:m.data_analysis)||[]}}}const Or={all:[`sleep`],trend:e=>[...Or.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Or.all,`details`]};function kr(e){return pe({queryKey:Or.trend(e),queryFn:async()=>{console.log(`[Sleep API] Fetching with dateRange:`,e);let t=await Ke(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Sleep API] Result:`,t),t},select:e=>Dr(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function Ar(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function jr(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Mr(){let{t:e}=M(),{theme:t}=rt(),[n,r]=(0,U.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),i=(0,U.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(n.end);return t.setHours(0,0,0,0),t<e},[n.end]),a=(0,U.useMemo)(()=>({startDate:Ar(n.start),endDate:Ar(n.end)}),[n]),o=(0,U.useMemo)(()=>({start:jr(n.start),end:jr(n.end)}),[n]),s=()=>{r(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},c=()=>{i&&r(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:l,isLoading:u,isFetching:d,error:f}=kr(a),[p,m]=(0,U.useState)(!1),h=(0,U.useRef)(null),g=(0,U.useRef)(0);return(0,U.useEffect)(()=>{if(d)m(!0),g.current=Date.now(),h.current&&(clearTimeout(h.current),h.current=null);else{let e=Date.now()-g.current,t=Math.max(0,1e3-e);h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m(!1),h.current=null},t)}return()=>{h.current&&clearTimeout(h.current)}},[d]),f?(0,G.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`text-center`,children:[(0,G.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,G.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(f)})]})}):(0,G.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,G.jsx)(`div`,{className:`flex justify-center`,children:(0,G.jsx)(be,{startDate:o.start,endDate:o.end,onPrevious:s,onNext:c,disableNext:!i})})}),(0,G.jsx)(`div`,{className:`px-4 space-y-4`,children:!l&&!u?(0,G.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,G.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,G.jsxs)(`div`,{className:`space-y-4`,children:[(0,G.jsx)(fr,{data:l,isLoading:p||u}),(0,G.jsx)(hr,{data:l,isLoading:p||u}),(0,G.jsx)(_r,{data:l,isLoading:p||u}),(0,G.jsx)(yr,{data:l,isLoading:p||u}),(0,G.jsx)(xr,{data:l,isLoading:p||u}),(0,G.jsx)(it,{})]})})]})})}var Nr=[{category:`Details Pages`,items:[{path:`/details/healthy`,label:`Healthy Dashboard`,icon:re,color:`#10B981`},{path:`/details/blood-pressure`,label:`Blood Pressure`,icon:R,color:J.bp},{path:`/details/spo2`,label:`Blood Oxygen (SpO2)`,icon:ie,color:J.spo2},{path:`/details/heart-rate`,label:`Heart Rate`,icon:H,color:J.heartRate},{path:`/details/glucose`,label:`Blood Glucose`,icon:F,color:J.glucose},{path:`/details/sleep`,label:`Sleep`,icon:oe,color:J.sleep}]},{category:`Widget Pages (for iframe embedding)`,items:[{path:`/widget/blood-pressure/trend`,label:`BP Trend Widget`,icon:R,color:J.bp},{path:`/widget/spo2/trend`,label:`SpO2 Trend Widget`,icon:ie,color:J.spo2},{path:`/widget/heart-rate/trend`,label:`HR Trend Widget`,icon:H,color:J.heartRate},{path:`/widget/glucose/trend`,label:`Glucose Trend Widget`,icon:F,color:J.glucose}]}];function Pr(){let{t:e,i18n:t}=M();return(0,G.jsx)(`div`,{className:`min-h-screen bg-[#F1EFEE] p-6`,children:(0,G.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,G.jsxs)(`div`,{className:`flex items-center justify-between mb-8`,children:[(0,G.jsxs)(`div`,{children:[(0,G.jsx)(`h1`,{className:`text-3xl font-bold text-slate-800`,children:`Health Vitals`}),(0,G.jsx)(`p`,{className:`text-slate-500 mt-1`,children:`Visualization Library`})]}),(0,G.jsx)(`button`,{onClick:()=>{t.changeLanguage(t.language===`en`?`zh`:`en`)},className:`px-4 py-2 bg-white rounded-xl shadow-sm text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors`,children:t.language===`en`?`中文`:`English`})]}),Nr.map(e=>(0,G.jsxs)(`div`,{className:`mb-8`,children:[(0,G.jsx)(`h2`,{className:`text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4`,children:e.category}),(0,G.jsx)(`div`,{className:`grid gap-3`,children:e.items.map(e=>{let t=e.icon;return(0,G.jsxs)(A,{to:e.path,className:`flex items-center gap-4 p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all group`,children:[(0,G.jsx)(`div`,{className:`w-12 h-12 rounded-xl flex items-center justify-center`,style:{backgroundColor:`${e.color}20`},children:(0,G.jsx)(t,{className:`w-6 h-6`,style:{color:e.color}})}),(0,G.jsxs)(`div`,{className:`flex-1`,children:[(0,G.jsx)(`p`,{className:`font-medium text-slate-800 group-hover:text-slate-900`,children:e.label}),(0,G.jsx)(`p`,{className:`text-sm text-slate-400 font-mono`,children:e.path})]}),(0,G.jsx)(`svg`,{className:`w-5 h-5 text-slate-300 group-hover:text-slate-400 transition-colors`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,G.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})})]},e.path)})})]},e.category)),(0,G.jsxs)(`div`,{className:`p-4 bg-white/50 rounded-2xl border border-slate-200`,children:[(0,G.jsx)(`h3`,{className:`text-sm font-semibold text-slate-600 mb-2`,children:`URL Parameters`}),(0,G.jsxs)(`div`,{className:`text-sm text-slate-500 space-y-1 font-mono`,children:[(0,G.jsx)(`p`,{children:`?lang=en | ?lang=zh`}),(0,G.jsx)(`p`,{children:`?theme=light | ?theme=dark`})]})]})]})})}t.use(a).use(T).init({resources:{en:{translation:{nav:{bloodPressure:`Blood Pressure`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`},home:{title:`Health Vital Visualization`,subtitle:`Health Data Visualization Library`,detailPages:`Detail Pages`,widgetPages:`Widget Components`},common:{loading:`Loading...`,error:`An error occurred`,retry:`Retry`,noData:`No data available`,average:`Average`,max:`Max`,min:`Min`,value:`Value`,times:`times`,time:`time`,good:`Good`,inAverage:`in average`,daily:`Daily`,weekly:`Weekly`,disclaimer:`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`},vitals:{bloodPressure:`Blood Pressure`,systolic:`Systolic`,diastolic:`Diastolic`,sbp:`SBP`,dbp:`DBP`,pulse:`Pulse`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`,fasting:`Fasting`,postMeal:`Post-meal`,bloodSugar:`Blood Sugar`,bloodOxygen:`Blood Oxygen`,sleep:`Sleep`,emotion:`Emotion`,nutrition:`Nutrition`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`bpm`,minute:`minute`},status:{normal:`Normal`,elevated:`Elevated`,high:`High`,low:`Low`,slow:`Slow`,good:`Good`,warning:`Warning`,danger:`Danger`,normalHighValue:`Normal high value`,tooLow:`Too low`,tooHigh:`Too High`},trend:{up:`Increased`,down:`Decreased`,stable:`Stable`},time:{week:`Week`,month:`Month`,year:`Year`,today:`Today`,yesterday:`Yesterday`,lastWeek:`Last week`},weekdays:{mon:`Mon`,tue:`Tue`,wed:`Wed`,thu:`Thu`,fri:`Fri`,sat:`Sat`,sun:`Sun`},page:{bloodPressure:{title:`Blood Pressure Details`,trendyReport:`Trendy Report`,weeksAverageSBP:`Week's average SBP`,weeksAverageDBP:`Week's average DBP`,bpStatistics:`BP Statistics`,normalResults:`normal blood pressure results`,compareWithLastWeek:`Compare With Last Week`,averageSBP:`Average SBP`,averageDBP:`Average diastolic blood pressure`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`},spo2:{title:`Blood Oxygen Details`,trendTitle:`SpO2 Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average SpO2`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`SpO2 Statistics`,totalTests:`Total test times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,rangeToday:`Today's Range`,defaultAnalysis1:`The average blood oxygen saturation this week was {{avg}}%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level ({{max}}%) from {{maxDay}}.`,defaultAnalysis3:`On {{minDay}}, a blood oxygen level of {{min}}% was recorded, slightly below the lower limit of the normal range.`,defaultOverview:`Your blood oxygen is generally within the ideal range. Although it has fluctuated slightly compared to last week, it remains within the normal fluctuation range.`,defaultHighlights:`The trend chart shows that your blood oxygen fluctuated significantly during the week. Meanwhile, the statistics show that your blood oxygen measurements varied across different levels. We will continue to monitor your condition and help you identify any possible causes for the low blood oxygen.`},heartRate:{title:`Heart Rate Details`,trendTitle:`Heart Rate Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average heart rate`,range:`Range`,mean:`Mean`,statistics:`Heart Rate Distribution`,totalTests:`Total test times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,restingHR:`Resting HR`,maxHR:`Max HR`,defaultAnalysis1:`The average heart rate this week was {{avg}} bpm.`,defaultAnalysis2:`Your heart rate reached a peak of {{max}} bpm on {{maxDay}}.`,defaultAnalysis3:`The lowest heart rate of {{min}} bpm was recorded on {{minDay}}.`,defaultOverview:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`,defaultHighlights:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`},glucose:{title:`Blood Glucose Details`,trendTitle:`Blood Glucose Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average glucose`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`Glucose Statistics`,normalResults:`normal glucose results`,compareWithLastWeek:`Compare With Last Week`,averageGlucose:`Average glucose`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,fastingLevel:`Fasting Level`,postMealLevel:`Post-meal Level`,fastingNormal:`Fasting normal`,postMealNormal:`Post-meal normal`,defaultInsight:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`,defaultOverview:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`,defaultHighlights:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`},sleep:{title:`Sleep Details`,trendyReport:`Trendy Report`,weeksAverageSleep:`Week's average sleep`,sleepStructure:`Sleep Structure`,deepSleep:`Deep Sleep`,lightSleep:`Light Sleep`,remSleep:`REM Sleep`,awake:`Awake`,standard:`Standard`,dataAnalysis:`Data Analysis`,compareWithLastWeek:`Compare With Last Week`,avgSleepTime:`Avg. sleep time`,avgWakeTime:`Avg. wake time`,sameAsLastWeek:`Same as last week`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`,defaultOverview:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`,defaultHighlights:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`,defaultAnalysis1:`The average blood oxygen saturation this week was 97%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`,defaultAnalysis3:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`}},healthy:{comprehensiveHealth:`Comprehensive health data`,aiGenerated:`AI Generated`,bpDescription:`Your average systolic blood pressure over the past {{period}} was `,bpDescriptionCont:`, and your average diastolic blood pressure was `,hrDescription:`Your average heart rate over the past {{period}} was `,hrDescriptionCont:`, with normal resting heart rate patterns.`,heartRateLabel:`Heart rate`,bsDescription:`Your average blood sugar over the past {{period}} was `,bsDescriptionCont:`, within the normal range.`,spo2Description:`Your average blood oxygen over the past {{period}} was `,spo2DescriptionCont:`, maintaining healthy oxygen levels.`,sleepDescription:`Your average sleep duration over the past {{period}} was `,sleepDescriptionCont:`, with good sleep quality.`,sleepTime:`Sleep time`,emotionDescription:`Your emotional state over the past {{period}} was `,emotionDescriptionCont:`, showing positive trends.`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,nutritionDescription:`Your nutrition intake over the past {{period}} was `,nutritionDescriptionCont:`, within recommended levels.`}}},zh:{translation:{nav:{bloodPressure:`血压`,spo2:`血氧`,heartRate:`心率`,glucose:`血糖`},home:{title:`健康数据可视化`,subtitle:`Health Vital Visualization 组件库`,detailPages:`详情页面`,widgetPages:`Widget 组件`},common:{loading:`加载中...`,error:`发生错误`,retry:`重试`,noData:`暂无数据`,average:`平均`,max:`最高`,min:`最低`,value:`数值`,times:`次`,time:`次`,good:`良好`,inAverage:`平均`,daily:`每日`,weekly:`每周`,disclaimer:`本产品的监测结果仅供参考。部分内容由 AI 生成，请仔细核实。不应用于医疗诊断。如果您感到不适，请及时就医。`},vitals:{bloodPressure:`血压`,systolic:`收缩压`,diastolic:`舒张压`,sbp:`高压`,dbp:`低压`,pulse:`脉搏`,spo2:`血氧`,heartRate:`心率`,glucose:`血糖`,fasting:`空腹`,postMeal:`餐后`,bloodSugar:`血糖`,bloodOxygen:`血氧`,sleep:`睡眠`,emotion:`情绪`,nutrition:`营养`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`次/分`,minute:`分钟`},status:{normal:`正常`,elevated:`偏高`,high:`过高`,low:`偏低`,slow:`过缓`,good:`良好`,warning:`警告`,danger:`危险`,normalHighValue:`正常高值`,tooLow:`过低`,tooHigh:`过高`},trend:{up:`上升`,down:`下降`,stable:`平稳`},time:{week:`周`,month:`月`,year:`年`,today:`今天`,yesterday:`昨天`,lastWeek:`上周`},weekdays:{mon:`周一`,tue:`周二`,wed:`周三`,thu:`周四`,fri:`周五`,sat:`周六`,sun:`周日`},page:{bloodPressure:{title:`血压详情`,trendyReport:`趋势报告`,weeksAverageSBP:`本周平均高压`,weeksAverageDBP:`本周平均低压`,bpStatistics:`血压统计`,normalResults:`次正常血压结果`,compareWithLastWeek:`与上周对比`,averageSBP:`平均高压`,averageDBP:`平均舒张压`,weeklyOverview:`周报概览`,overallSituation:`整体情况`,needsAttention:`需要注意`,defaultInsight:`您的血压整体处于理想范围内。虽然与上周相比，收缩压略有上升，但仍处于正常波动范围内。`},spo2:{title:`血氧详情`,trendTitle:`血氧趋势`,trendyReport:`趋势报告`,weeksAverage:`本周平均血氧`,normalRange:`正常范围`,range:`范围`,mean:`均值`,statistics:`血氧统计`,totalTests:`次数`,dataAnalysis:`数据分析`,weeklyOverview:`周报概览`,overallSituation:`整体情况`,anomalyAlert:`异常警报`,weeklyComparison:`本周对比`,averageReading:`平均血氧`,lastReading:`最近读数`,rangeToday:`今日范围`,defaultAnalysis1:`本周平均血氧饱和度为 {{avg}}%，与上周持平。`,defaultAnalysis2:`血氧水平在{{maxDay}}保持较高水平（{{max}}%）。`,defaultAnalysis3:`{{minDay}}记录到血氧水平为 {{min}}%，略低于正常范围下限。`,defaultOverview:`您的血氧整体处于理想范围内。虽然与上周相比略有波动，但仍处于正常波动范围内。`,defaultHighlights:`趋势图显示您的血氧在本周中有明显波动。统计数据显示您的血氧测量值在不同水平间有一定变化。我们将继续监测您的状况，并帮助您识别任何可能导致血氧偏低的原因。`},heartRate:{title:`心率详情`,trendTitle:`心率趋势`,trendyReport:`趋势报告`,weeksAverage:`本周平均心率`,range:`范围`,mean:`均值`,statistics:`心率统计`,totalTests:`次数`,dataAnalysis:`数据分析`,weeklyOverview:`周报概览`,overallSituation:`整体情况`,anomalyAlert:`异常警报`,weeklyComparison:`本周对比`,averageReading:`平均心率`,lastReading:`最近读数`,restingHR:`静息心率`,maxHR:`最高心率`,defaultAnalysis1:`本周平均心率为 {{avg}} 次/分。`,defaultAnalysis2:`心率在{{maxDay}}达到峰值 {{max}} 次/分。`,defaultAnalysis3:`{{minDay}}记录到最低心率 {{min}} 次/分。`,defaultOverview:`您的心率本周整体处于正常范围内。继续保持常规的运动习惯！`,defaultHighlights:`趋势图显示您的心率在本周中有一些波动。这是正常的，可能会受到体力活动、压力水平和睡眠质量的影响。`},glucose:{title:`血糖详情`,trendTitle:`血糖趋势`,trendyReport:`趋势报告`,weeksAverage:`本周平均血糖`,normalRange:`正常范围`,range:`范围`,mean:`均值`,statistics:`血糖统计`,normalResults:`次正常血糖结果`,compareWithLastWeek:`与上周对比`,averageGlucose:`平均血糖`,weeklyOverview:`周报概览`,overallSituation:`整体情况`,needsAttention:`需要注意`,weeklyComparison:`本周对比`,averageReading:`平均血糖`,lastReading:`最近读数`,fastingLevel:`空腹血糖`,postMealLevel:`餐后血糖`,fastingNormal:`空腹正常值`,postMealNormal:`餐后正常值`,defaultInsight:`您的血糖水平整体处于正常范围内。请继续保持均衡的饮食和规律的运动习惯，以维持稳定的血糖水平。`,defaultOverview:`本周您的血糖水平整体处于正常范围内。继续保持良好的饮食和运动习惯！`,defaultHighlights:`趋势图显示您的血糖在本周中有一些波动。请注意饮食，尤其是餐后，以保持血糖水平稳定。`},sleep:{title:`睡眠详情`,trendyReport:`趋势报告`,weeksAverageSleep:`本周平均睡眠`,sleepStructure:`睡眠结构`,deepSleep:`深度睡眠`,lightSleep:`浅睡眠`,remSleep:`快速眼动`,awake:`清醒`,standard:`标准`,dataAnalysis:`数据分析`,compareWithLastWeek:`与上周对比`,avgSleepTime:`平均入睡时间`,avgWakeTime:`平均起床时间`,sameAsLastWeek:`与上周持平`,weeklyOverview:`周报概览`,overallSituation:`整体情况`,needsAttention:`需要注意`,defaultInsight:`本周您的睡眠作息比较规律。保持规律的睡眠习惯对您的整体健康非常有益。`,defaultOverview:`本周您的睡眠质量整体良好。您保持了较为规律的睡眠作息，这对您的整体健康非常有益。`,defaultHighlights:`趋势图显示您本周的睡眠模式相对稳定。但请注意您的快速眼动睡眠比例，这可能会影响您的睡眠质量和梦境模式。`,defaultAnalysis1:`本周平均血氧饱和度为 97%，与上周持平。`,defaultAnalysis2:`血氧水平在本周二至周四保持较高水平（98%）。`,defaultAnalysis3:`周五记录到血氧水平为 94%，略低于正常范围下限。`}},healthy:{comprehensiveHealth:`综合健康数据`,aiGenerated:`AI 生成`,bpDescription:`过去{{period}}您的平均收缩压为 `,bpDescriptionCont:`，平均舒张压为 `,hrDescription:`过去{{period}}您的平均心率为 `,hrDescriptionCont:`，静息心率模式正常。`,heartRateLabel:`心率`,bsDescription:`过去{{period}}您的平均血糖为 `,bsDescriptionCont:`，处于正常范围内。`,spo2Description:`过去{{period}}您的平均血氧为 `,spo2DescriptionCont:`，保持健康的氧气水平。`,sleepDescription:`过去{{period}}您的平均睡眠时长为 `,sleepDescriptionCont:`，睡眠质量良好。`,sleepTime:`睡眠时长`,emotionDescription:`过去{{period}}您的情绪状态为 `,emotionDescriptionCont:`，呈现积极趋势。`,positive:`积极`,neutral:`中性`,negative:`消极`,nutritionDescription:`过去{{period}}您的营养摄入为 `,nutritionDescriptionCont:`，处于推荐水平内。`}}}},fallbackLng:`zh`,debug:!1,interpolation:{escapeValue:!1},detection:{order:[`querystring`,`localStorage`,`navigator`],lookupQuerystring:`lang`,lookupLocalStorage:`i18nextLng`,caches:[`localStorage`]}});var Fr=new he({defaultOptions:{queries:{retry:2,refetchOnWindowFocus:!1}}});function Ir(){return(0,G.jsx)(N,{client:Fr,children:(0,G.jsx)(E,{children:(0,G.jsxs)(te,{children:[(0,G.jsx)(w,{path:`/`,element:(0,G.jsx)(Pr,{})}),(0,G.jsx)(w,{path:`/details/blood-pressure`,element:(0,G.jsx)(st,{})}),(0,G.jsx)(w,{path:`/details/spo2`,element:(0,G.jsx)(Nt,{})}),(0,G.jsx)(w,{path:`/details/heart-rate`,element:(0,G.jsx)(en,{})}),(0,G.jsx)(w,{path:`/details/glucose`,element:(0,G.jsx)(Cn,{})}),(0,G.jsx)(w,{path:`/details/healthy`,element:(0,G.jsx)(cr,{})}),(0,G.jsx)(w,{path:`/details/sleep`,element:(0,G.jsx)(Mr,{})}),(0,G.jsx)(w,{path:`/widget/blood-pressure/trend`,element:(0,G.jsx)(mt,{})}),(0,G.jsx)(w,{path:`/widget/spo2/trend`,element:(0,G.jsx)(It,{})}),(0,G.jsx)(w,{path:`/widget/heart-rate/trend`,element:(0,G.jsx)(rn,{})}),(0,G.jsx)(w,{path:`/widget/glucose/trend`,element:(0,G.jsx)(En,{})}),(0,G.jsx)(w,{path:`*`,element:(0,G.jsx)(ne,{to:`/`,replace:!0})})]})})})}var Lr=Ir;(0,ge.createRoot)(document.getElementById(`root`)).render((0,G.jsx)(Lr,{}));