import{at as e,rt as t}from"./vendor-DxyDeVV0.js";import"./vendor-charts-B__IZl80.js";import"./vendor-router-DvVHskPP.js";import"./vendor-query-BzUZE9-d.js";import{n}from"./vendor-i18n-BSzAmJZ7.js";import"./theme-XEO8amRP.js";import"./card-DR_iUne-.js";import{n as r,t as i}from"./useUrlParams-CgNyaJcn.js";import"./client-CzSh7g6B.js";import"./DistributionCard-D_3pQ4Tr.js";import"./useChartAnimation-DiAB65-P.js";import"./TrendLineChart-B7CWIoTy.js";import"./WeeklyOverviewCard-DICJkH00.js";import"./usePrefetchData-Dtc8Q6b7.js";import{t as a}from"./DisclaimerBox-CmM1idpz.js";import"./DataAnalysisCard-C8_RImdq.js";import{a as o,i as s,n as c,o as l,r as u,t as d}from"./api-Brh3hgxE.js";var f=e(),p=t();function m(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function h(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function g(){let{t:e}=n(),{theme:t}=i(),{prefetchPreviousWeeks:g}=d(),[_,v]=(0,f.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,f.useEffect)(()=>{g(_.end,3)},[_.end,g]);let y=(0,f.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(_.end);return t.setHours(0,0,0,0),t<e},[_.end]),b=(0,f.useMemo)(()=>({startDate:m(_.start),endDate:m(_.end)}),[_]),x=(0,f.useMemo)(()=>({start:h(_.start),end:h(_.end)}),[_]),S=()=>{v(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},C=()=>{y&&v(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:w,isLoading:T,isFetching:E,error:D}=c(b);return D?(0,p.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,p.jsxs)(`div`,{className:`text-center`,children:[(0,p.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,p.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(D)})]})}):(0,p.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,p.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,p.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,p.jsx)(`div`,{className:`flex justify-center`,children:(0,p.jsx)(r,{startDate:x.start,endDate:x.end,onPrevious:S,onNext:C,disableNext:!y})})}),(0,p.jsx)(`div`,{className:`px-4 space-y-4`,children:!w&&!T?(0,p.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,p.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,p.jsxs)(`div`,{className:`space-y-4`,children:[(0,p.jsx)(l,{data:w}),(0,p.jsx)(o,{data:w}),(0,p.jsx)(s,{data:w}),(0,p.jsx)(u,{data:w}),(0,p.jsx)(a,{})]})})]})})}export{g as SpO2Page};