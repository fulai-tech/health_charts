import{S as e,at as t,d as n,h as r,n as i,r as a,rt as o,u as s,y as c}from"./vendor-DxyDeVV0.js";import{c as l,d as u,i as d,m as f,o as p,p as m,r as h,s as g,v as _}from"./vendor-charts-B__IZl80.js";import"./vendor-router-DvVHskPP.js";import{n as v}from"./vendor-i18n-BSzAmJZ7.js";import{c as y}from"./theme-XEO8amRP.js";import{t as b}from"./card-DR_iUne-.js";import{n as x,t as S}from"./useUrlParams-CgNyaJcn.js";var C=t(),w={weeklyManagement:{currentCal:4350,targetCal:2350,remainingCal:2350,percentage:75,status:`good`},metabolismTrend:[{date:`Mon`,value:1800,target:2e3},{date:`Tue`,value:2100,target:2e3},{date:`Wed`,value:2200,target:2e3},{date:`Thu`,value:1700,target:2e3},{date:`Fri`,value:2400,target:2e3},{date:`Sat`,value:2300,target:2e3},{date:`Sun`,value:1900,target:2e3}],nutrientStructure:[{label:`Carb`,current:300,total:400,unit:`g`,color:`#86EFAC`},{label:`Fat`,current:62.3,total:80,unit:`g`,color:`#FB923D`},{label:`Protein`,current:130,total:150,unit:`g`,color:`#93C5FD`}],microElements:[{name:`Ca`,value:721,unit:`mg`,range:[800,1200],status:`low`},{name:`Na`,value:1743,unit:`mg`,range:[1e3,2e3],status:`normal`},{name:`Fe`,value:13,unit:`mg`,range:[10,20],status:`normal`},{name:`Zn`,value:12,unit:`g`,range:[10,15],status:`normal`},{name:`Vitamin A`,value:113,unit:`Î¼g`,range:[600,900],status:`low`},{name:`Vitamin C`,value:9,unit:`mg`,range:[60,100],status:`low`}],recipes:[{id:`1`,title:`Barbecue`,calories:334,imageUrl:`https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=800&q=80`,tags:[`High Protein`,`Lunch`]},{id:`2`,title:`Salmon Salad`,calories:250,imageUrl:`https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80`,tags:[`Healthy`,`Dinner`]}],analysis:{score:85,summary:`Your diet structure is good, but you need to pay attention to Vitamin intake.`,details:[`Carbohydrate intake is within the normal range.`,`Fat intake is slightly high, consider reducing oil usage.`,`Protein intake is good, keep it up.`,`Micro-elements Calcium and Vitamin A are insufficient.`]}};const T=async()=>new Promise(e=>{setTimeout(()=>{e(w)},500)}),E=e=>e;var D=o();const O=({data:e,className:t})=>{if(!e)return null;let n=3500,r=[{name:`Low`,value:n*.33,color:`#93C5FD`},{name:`Normal`,value:n*.33,color:`#86EFAC`},{name:`Excess`,value:n*.34,color:`#FB923D`}];return 180-Math.min(n,Math.max(0,e.currentCal))/n*180,(0,D.jsxs)(b,{className:`${t} p-5 relative overflow-hidden`,children:[(0,D.jsx)(`div`,{className:`flex items-center justify-between mb-2`,children:(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(a,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Weekly average report`})]})}),(0,D.jsxs)(`div`,{className:`flex justify-between items-center text-xs text-slate-400 mb-4`,children:[(0,D.jsx)(`span`,{children:`Weekly intake report`}),e.status===`alert`&&(0,D.jsxs)(`span`,{className:`flex items-center gap-1 text-orange-500`,children:[(0,D.jsx)(c,{className:`w-3 h-3`}),`Excessive intake`]})]}),(0,D.jsxs)(`div`,{className:`h-48 relative -mt-4`,children:[(0,D.jsx)(_,{width:`100%`,height:`100%`,children:(0,D.jsx)(h,{children:(0,D.jsx)(m,{data:r,cx:`50%`,cy:`70%`,startAngle:180,endAngle:0,innerRadius:`75%`,outerRadius:`100%`,paddingAngle:2,dataKey:`value`,stroke:`none`,cornerRadius:5,children:r.map((e,t)=>(0,D.jsx)(f,{fill:e.color},`cell-${t}`))})})}),(0,D.jsx)(`div`,{className:`absolute inset-x-0 bottom-[30%] flex justify-center items-end pointer-events-none`,children:(0,D.jsx)(`div`,{className:`relative w-full max-w-[220px]`,style:{height:0},children:(0,D.jsxs)(`div`,{className:`absolute bottom-0 left-1/2 w-[50%] h-0 origin-left flex items-center justify-start transition-transform duration-1000 ease-out`,style:{transform:`rotate(${-180+Math.min(e.currentCal,n)/n*180}deg)`},children:[(0,D.jsx)(`div`,{className:`w-[90%] h-3 bg-orange-500 rounded-r-full relative shadow-sm`}),(0,D.jsx)(`div`,{className:`absolute -left-3 top-1/2 -translate-y-1/2 w-6 h-6 bg-orange-500 rounded-full border-[3px] border-white shadow-md z-10 box-content`})]})})}),(0,D.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center pt-[35%] pointer-events-none`,children:[(0,D.jsx)(`span`,{className:`text-4xl font-bold text-orange-500`,children:e.currentCal}),(0,D.jsx)(`span`,{className:`text-sm font-medium text-slate-400`,children:`kcal`}),(0,D.jsxs)(`span`,{className:`text-xs text-slate-400 mt-1`,children:[`Target: `,e.targetCal,` kcal`]})]})]}),(0,D.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 mt-2`,children:[(0,D.jsxs)(`div`,{className:`bg-slate-50 rounded-2xl p-3 flex flex-col items-center justify-center`,children:[(0,D.jsx)(`span`,{className:`text-xs text-slate-400 mb-1`,children:`Calorie intake`}),(0,D.jsxs)(`span`,{className:`text-xl font-bold text-orange-500`,children:[`+`,e.remainingCal,` `,(0,D.jsx)(`span`,{className:`text-xs font-normal text-slate-500`,children:`kcal`})]})]}),(0,D.jsxs)(`div`,{className:`bg-slate-50 rounded-2xl p-3 flex flex-col items-center justify-center`,children:[(0,D.jsx)(`span`,{className:`text-xs text-slate-400 mb-1`,children:`Average consumption`}),(0,D.jsxs)(`span`,{className:`text-xl font-bold text-orange-400`,children:[`--- `,(0,D.jsx)(`span`,{className:`text-xs font-normal text-slate-500`,children:`kcal`})]})]})]})]})},k=({data:e,className:t})=>e?(0,D.jsxs)(b,{className:`${t} p-5`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,D.jsx)(a,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Basal metabolism trend`}),(0,D.jsx)(`span`,{className:`ml-auto flex items-center gap-1 text-xs text-slate-500 bg-white border border-slate-200 px-2 py-1 rounded-full shadow-sm`,children:`Avg 2100 kcal`})]}),(0,D.jsx)(`div`,{className:`h-48 w-full`,children:(0,D.jsx)(_,{width:`100%`,height:`100%`,children:(0,D.jsxs)(d,{data:e,margin:{top:10,right:0,left:-20,bottom:0},barSize:12,children:[(0,D.jsx)(u,{strokeDasharray:`3 3`,vertical:!1,stroke:`#F1F5F9`}),(0,D.jsx)(g,{dataKey:`date`,axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`},dy:10}),(0,D.jsx)(p,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`}}),(0,D.jsx)(l,{dataKey:`value`,radius:[6,6,6,6],children:e.map((e,t)=>(0,D.jsx)(f,{fill:e.value>e.target?`#FB923D`:e.value<e.target*.8?`#93C5FD`:`#86EFAC`},`cell-${t}`))})]})})}),(0,D.jsxs)(`div`,{className:`flex justify-center gap-6 mt-2`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`span`,{className:`w-2 h-2 rounded-full bg-green-300`}),(0,D.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Meet`})]}),(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`span`,{className:`w-2 h-2 rounded-full bg-blue-300`}),(0,D.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Insufficient`})]}),(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`span`,{className:`w-2 h-2 rounded-full bg-orange-400`}),(0,D.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Excess`})]})]})]}):null,A=({data:e,className:t})=>e?(0,D.jsxs)(b,{className:`${t} p-5`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,D.jsx)(r,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Diet analysis`})]}),(0,D.jsxs)(`div`,{className:`space-y-4`,children:[(0,D.jsxs)(`div`,{className:`bg-orange-50 rounded-xl p-4 border border-orange-100`,children:[(0,D.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,D.jsx)(`span`,{className:`text-sm font-semibold text-orange-800`,children:`Health Score`}),(0,D.jsx)(`span`,{className:`text-2xl font-bold text-orange-500`,children:e.score})]}),(0,D.jsx)(`p`,{className:`text-sm text-orange-700 leading-relaxed`,children:e.summary})]}),(0,D.jsx)(`div`,{className:`space-y-2`,children:e.details.map((e,t)=>(0,D.jsxs)(`div`,{className:`flex items-start gap-2`,children:[(0,D.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full bg-orange-300 mt-2 flex-shrink-0`}),(0,D.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e})]},t))})]})]}):null,j=({data:t,className:n})=>t?(0,D.jsxs)(b,{className:`${n} p-5`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,D.jsx)(e,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Micro-element structure`})]}),(0,D.jsx)(`div`,{className:`flex flex-col gap-4`,children:t.map((e,t)=>(0,D.jsxs)(`div`,{children:[(0,D.jsxs)(`div`,{className:`flex justify-between items-baseline mb-1`,children:[(0,D.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:e.label}),(0,D.jsxs)(`div`,{children:[(0,D.jsx)(`span`,{className:`text-lg font-bold text-slate-800`,style:{color:e.color},children:e.current}),(0,D.jsx)(`span`,{className:`text-xs text-slate-400 ml-1`,children:e.unit}),(0,D.jsxs)(`span`,{className:`text-xs text-slate-400 ml-2`,children:[`Target: `,e.total]})]})]}),(0,D.jsx)(`div`,{className:`h-2 w-full bg-slate-100 rounded-full overflow-hidden`,children:(0,D.jsx)(`div`,{className:`h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(100,e.current/e.total*100)}%`,backgroundColor:e.color}})})]},t))}),(0,D.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-xs text-slate-600 leading-relaxed`,children:`Your intake of carbohydrates, protein, and fat is relatively balanced. Keep focusing on Vitamin intake.`})]}):null,M=({data:e,className:t})=>e?(0,D.jsxs)(b,{className:`${t} p-5`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,D.jsx)(n,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Micro-element status`})]}),(0,D.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,t)=>{let n=e.status===`normal`?`bg-green-100 text-green-600`:e.status===`low`?`bg-blue-100 text-blue-600`:`bg-orange-100 text-orange-600`,r=e.status===`normal`?`Normal`:e.status===`low`?`Insufficient`:`Excess`,i=e.status===`normal`?`#86EFAC`:e.status===`low`?`#93C5FD`:`#FB923D`,a=e.status===`low`?`30%`:e.status===`normal`?`60%`:`90%`;return(0,D.jsxs)(`div`,{className:`bg-slate-50 p-3 rounded-xl border border-slate-100`,children:[(0,D.jsxs)(`div`,{className:`flex justify-between items-start mb-2`,children:[(0,D.jsx)(`span`,{className:`text-sm font-semibold text-slate-700`,children:e.name}),(0,D.jsx)(`span`,{className:`text-[10px] px-1.5 py-0.5 rounded-md font-medium ${n}`,children:r})]}),(0,D.jsxs)(`div`,{className:`flex items-baseline gap-1 mb-2`,children:[(0,D.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:e.value}),(0,D.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]}),(0,D.jsx)(`div`,{className:`relative h-1.5 bg-slate-200 rounded-full w-full overflow-hidden`,children:(0,D.jsx)(`div`,{className:`absolute h-full rounded-full`,style:{width:a,backgroundColor:i}})}),(0,D.jsxs)(`div`,{className:`flex justify-between text-[10px] text-slate-400 mt-1`,children:[(0,D.jsx)(`span`,{children:`Range`}),(0,D.jsxs)(`span`,{children:[e.range[0],`-`,e.range[1]]})]})]},t)})}),(0,D.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-center text-sm font-medium text-blue-600`,children:`View all elements >`})]}):null;var N=`#FB923D`,P=`#D1D5DB`,F=({total:e,current:t,onSelect:n,activeColor:r=N,inactiveColor:i=P})=>e<=1?null:(0,D.jsx)(`div`,{className:`flex justify-center items-center gap-2 mt-4`,children:Array.from({length:e}).map((e,a)=>(0,D.jsx)(`button`,{onClick:()=>n(a),className:`transition-all duration-300`,style:{width:a===t?24:8,height:8,borderRadius:4,backgroundColor:a===t?r:i},"aria-label":`Go to slide ${a+1}`},a))});const I=({items:e,renderItem:t,className:n,isLoading:r,header:i,emptyMessage:a=`No data available`,indicatorActiveColor:o,indicatorInactiveColor:c})=>{let[l,u]=(0,C.useState)(0),d=(0,C.useRef)(null),f=(0,C.useRef)(0),p=(0,C.useRef)(0),m=(0,C.useRef)(0),h=(0,C.useRef)(!1),[g,_]=(0,C.useState)(0);(0,C.useEffect)(()=>{u(0)},[e.length]);let v=(0,C.useCallback)(e=>{f.current=e.touches[0].clientX,p.current=e.touches[0].clientY,h.current=!1,_(0)},[]),x=(0,C.useCallback)(t=>{let n=t.touches[0].clientX,r=t.touches[0].clientY,i=n-f.current,a=r-p.current;if(Math.abs(i)>Math.abs(a)&&Math.abs(i)>10){h.current=!0;let t=i;(l===0&&i>0||l===e.length-1&&i<0)&&(t=i*.3),_(t)}m.current=n},[l,e.length]),S=(0,C.useCallback)(()=>{let t=m.current-f.current;h.current&&(t>50&&l>0?u(e=>e-1):t<-50&&l<e.length-1&&u(e=>e+1)),_(0),h.current=!1,f.current=0,m.current=0},[l,e.length]),w=(0,C.useCallback)(e=>{u(e)},[]),T=-l*100;return(0,D.jsxs)(b,{className:`${n} relative overflow-hidden`,children:[(0,D.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${r?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:y.loadingOverlay},children:(0,D.jsx)(s,{className:`w-8 h-8 text-white animate-spin`})}),i&&(0,D.jsx)(`div`,{className:`mb-4`,children:i}),e.length>0?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(`div`,{ref:d,className:`relative overflow-hidden touch-pan-y`,onTouchStart:v,onTouchMove:x,onTouchEnd:S,style:{touchAction:`pan-y pinch-zoom`},children:(0,D.jsx)(`div`,{className:`flex`,style:{transform:`translateX(calc(${T}% + ${g}px))`,transition:g===0?`transform 0.3s ease-out`:`none`},children:e.map((e,n)=>(0,D.jsx)(`div`,{className:`w-full flex-shrink-0 px-1`,children:t(e,n)},n))})}),(0,D.jsx)(F,{total:e.length,current:l,onSelect:w,activeColor:o,inactiveColor:c})]}):(0,D.jsx)(`div`,{className:`text-center py-8 text-slate-400 text-sm`,children:a})]})},L=({data:e,className:t})=>{if(!e)return null;let n=(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(i,{className:`w-5 h-5 text-orange-500`}),(0,D.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:`Complicated recipes`})]});return(0,D.jsx)(I,{className:t,items:e,renderItem:e=>(0,D.jsxs)(`div`,{className:`bg-orange-50 rounded-2xl p-4 flex gap-4 items-center`,children:[(0,D.jsx)(`div`,{className:`w-20 h-20 rounded-xl overflow-hidden flex-shrink-0 bg-gray-200`,children:(0,D.jsx)(`img`,{src:e.imageUrl,alt:e.title,className:`w-full h-full object-cover`})}),(0,D.jsxs)(`div`,{className:`flex-1`,children:[(0,D.jsx)(`h4`,{className:`text-base font-bold text-slate-800 mb-1`,children:e.title}),(0,D.jsx)(`div`,{className:`flex gap-2 mb-2`,children:e.tags.map(e=>(0,D.jsx)(`span`,{className:`text-[10px] bg-white text-orange-600 px-2 py-0.5 rounded-full border border-orange-100`,children:e},e))}),(0,D.jsxs)(`div`,{className:`text-lg font-bold text-orange-500`,children:[`+`,e.calories,` `,(0,D.jsx)(`span`,{className:`text-xs font-normal text-slate-500`,children:`kcal`})]})]}),(0,D.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white shadow-md shadow-orange-200`,children:`>`})]}),header:n,indicatorActiveColor:`#FB923D`,indicatorInactiveColor:`#FED7AA`})};function R(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}const z=()=>{let{t:e}=v(),{theme:t}=S(),[n,r]=(0,C.useState)(null),[i,a]=(0,C.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),o=(0,C.useMemo)(()=>({start:R(i.start),end:R(i.end)}),[i]);return(0,C.useEffect)(()=>{(async()=>{try{r(E(await T()))}catch(e){console.error(`Failed to load nutrition data`,e)}})()},[i]),(0,D.jsxs)(`div`,{className:`min-h-screen bg-[#F1EFEE] pb-20`,children:[` `,(0,D.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4 bg-[#F1EFEE]`,children:(0,D.jsx)(`div`,{className:`flex justify-center`,children:(0,D.jsx)(x,{startDate:o.start,endDate:o.end,onPrevious:()=>{a(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},onNext:()=>{let e=new Date;i.end>=e||a(t=>{let n=new Date(t.start),r=new Date(t.end);if(n.setDate(n.getDate()+7),r.setDate(r.getDate()+7),r>e){let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}return{start:n,end:r}})},disableNext:i.end>=new Date(new Date().setHours(0,0,0,0))})})}),(0,D.jsx)(`div`,{className:`flex justify-center px-4`,children:(0,D.jsxs)(`div`,{className:`w-full ${y.pageMaxWidth} space-y-4`,children:[(0,D.jsx)(O,{data:n==null?void 0:n.weeklyManagement}),(0,D.jsx)(k,{data:n==null?void 0:n.metabolismTrend}),(0,D.jsx)(A,{data:n==null?void 0:n.analysis}),(0,D.jsx)(j,{data:n==null?void 0:n.nutrientStructure}),(0,D.jsx)(M,{data:n==null?void 0:n.microElements}),(0,D.jsx)(L,{data:n==null?void 0:n.recipes})]})})]})};export{z as NutritionPage};