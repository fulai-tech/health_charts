import{at as e,p as t,rt as n}from"./vendor-DxyDeVV0.js";import{g as r,m as i,p as a,r as o,v as s}from"./vendor-charts-B__IZl80.js";import{n as c}from"./vendor-i18n-BSzAmJZ7.js";import{c as l}from"./theme-XEO8amRP.js";import{o as u,t as d}from"./card-DR_iUne-.js";var f=e(),p=n();const m=(0,f.memo)(({data:e,innerRadius:t,outerRadius:n,paddingAngle:c=0,startAngle:l=90,endAngle:d=-270,children:f,widthClass:m=`w-full`,heightClass:h=`h-full`,animationProps:g=u(),className:_=``,useCornerRadius:v=!0,smallSectorThreshold:y=.02})=>(0,p.jsxs)(`div`,{className:`relative transform-gpu will-change-transform ${m} ${h} ${_}`,children:[(0,p.jsx)(s,{width:`100%`,height:`100%`,children:(0,p.jsx)(o,{margin:{top:0,right:0,bottom:0,left:0},children:(0,p.jsx)(a,{data:e,cx:`50%`,cy:`50%`,innerRadius:t,outerRadius:n,paddingAngle:c,dataKey:`value`,startAngle:l,endAngle:d,strokeWidth:0,shape:e=>{let{cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:o,endAngle:s,fill:c}=e,l=(i+a)/2,u=Math.abs(s-o)*Math.PI/180*l;if(v&&u<14){let e=(o+s)/2,r=Math.PI/180,u=t+l*Math.cos(-e*r),d=n+l*Math.sin(-e*r),f=a-i;return(0,p.jsx)(`circle`,{cx:u,cy:d,r:Math.min(f/2,5),fill:c})}return(0,p.jsx)(r,{...e,cornerRadius:v?5:0,strokeWidth:0})},...g,children:e.map((e,t)=>(0,p.jsx)(i,{fill:e.color,style:{outline:`none`}},`cell-${t}`))})})}),f&&(0,p.jsx)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center pointer-events-none`,children:f})]})),h=(0,f.memo)(({title:e,icon:n,iconElement:r,themeColor:i,items:a,centerValue:o,centerLabel:s,centerValueColor:h,showCount:g=!0,columns:_=1,gridColumns:v=1,highlightValue:y,highlightLabel:b,highlightDescription:x,itemLayout:S=`default`,pieChartSize:C=`auto`,donutThickness:w=12,className:T=``,isLoading:E=!1,showInfo:D=!0,infoContent:O})=>{let{t:k}=c(),A=u(),[j,M]=(0,f.useState)(!1),N=(0,f.useCallback)(()=>{M(!0)},[]),P=(0,f.useCallback)(()=>{M(!1)},[]),F=(0,f.useMemo)(()=>{let e=a.filter(e=>e.percent>0||e.count!==void 0&&e.count>0).map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color,count:e.count}));return e.length===0?[{name:`No Data`,value:100,color:`#E5E7EB`}]:e},[a]),I=(()=>C===`small`?`w-32 h-32`:C===`medium`?`w-40 h-40`:C===`large`||_===2||y!==void 0?`w-48 h-48`:`w-32 h-32`)(),{innerRadius:L,outerRadius:R}=(()=>_===2||y!==void 0||S===`grid-2col`?{innerRadius:`${98-w}%`,outerRadius:`98%`}:{innerRadius:`${80-(w||20)}%`,outerRadius:`80%`})();return(0,p.jsxs)(d,{className:`${T} relative overflow-hidden`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,p.jsxs)(`div`,{className:`flex-1 min-w-0 flex flex-col`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[r||n&&(0,p.jsx)(n,{className:`w-5 h-5`,style:{color:i}}),(0,p.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e}),D&&(0,p.jsx)(t,{className:`w-4 h-4 text-slate-400 cursor-pointer hover:text-slate-600 transition-colors`,onClick:N})]}),(0,p.jsx)(`div`,{className:`flex-1`,children:y===void 0?S===`with-duration`?(0,p.jsx)(`div`,{className:`space-y-2`,children:a.map(e=>(0,p.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,p.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,p.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,p.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]}),(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.duration&&(0,p.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.duration}),e.status&&(0,p.jsx)(`span`,{className:`text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-600`,children:e.status})]})]},e.type))}):S===`grid-2col`?(0,p.jsx)(`div`,{className:`grid grid-cols-2 gap-x-4 gap-y-2`,children:a.slice(0,8).map(e=>(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,p.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,p.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,p.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]},e.type))}):_===2?(0,p.jsx)(`div`,{className:`grid grid-cols-2 gap-x-6 gap-y-3`,children:a.map(e=>(0,p.jsxs)(`div`,{className:`flex items-center gap-2 min-w-0`,children:[(0,p.jsx)(`span`,{className:`w-3 h-3 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,p.jsx)(`span`,{className:`text-sm text-slate-700 flex-shrink-0`,children:e.label}),(0,p.jsxs)(`span`,{className:`text-sm font-medium ml-auto flex-shrink-0`,style:{color:e.color},children:[e.percent,`%`]})]},e.type))}):(0,p.jsx)(`div`,{className:`space-y-2`,children:a.map(e=>{var t;return(0,p.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,p.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,p.jsx)(`span`,{className:`text-sm text-slate-600 w-14`,children:e.label}),(0,p.jsxs)(`span`,{className:`text-sm font-semibold w-10`,style:{color:e.color},children:[e.percent,`%`]}),g&&(0,p.jsxs)(`span`,{className:`text-sm`,style:{color:e.color},children:[(t=e.count)==null?0:t,` `,k(`common.times`)]})]},e.type)})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(`div`,{className:`mb-4`,children:[(0,p.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,p.jsx)(`span`,{className:`text-4xl font-bold`,style:{color:i},children:y}),b&&(0,p.jsx)(`span`,{className:`text-base text-slate-400`,children:b})]}),x&&(0,p.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:x})]}),(0,p.jsx)(`div`,{className:`grid ${v===2?`grid-cols-2`:`grid-cols-1`} gap-x-4 gap-y-2`,children:a.map(e=>(0,p.jsxs)(`div`,{className:`flex flex-col`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,p.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,p.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label})]}),(0,p.jsxs)(`span`,{className:`text-base font-semibold ml-[18px]`,style:{color:e.color},children:[e.count,` `,e.count===1?k(`common.time`):k(`common.times`)]})]},e.type))})]})})]}),(0,p.jsxs)(m,{data:F,innerRadius:L,outerRadius:R,paddingAngle:_===2?2:y===void 0?3:2,widthClass:I,heightClass:``,animationProps:A,children:[(0,p.jsx)(`span`,{className:`text-2xl font-bold text-center px-2`,style:{color:h||i},children:o}),s&&(0,p.jsx)(`span`,{className:`text-xs text-slate-400 mt-1`,children:s})]})]}),j&&(0,p.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4`,style:{backgroundColor:`rgba(0, 0, 0, 0.5)`},onClick:P,children:(0,p.jsxs)(`div`,{className:`bg-white shadow-2xl max-w-md w-full mx-4 overflow-hidden`,style:{borderRadius:l.cardBorderRadius},onClick:e=>e.stopPropagation(),children:[(0,p.jsx)(`div`,{className:`px-6 pt-6 pb-4`,children:(0,p.jsx)(`h3`,{className:`text-xl font-bold text-slate-800 text-center`,children:k(`common.illustrate`)})}),(0,p.jsx)(`div`,{className:`px-6 pb-6 max-h-96 overflow-y-auto`,children:(0,p.jsx)(`div`,{className:`bg-slate-50 rounded-2xl p-4`,children:O?typeof O==`string`?(0,p.jsx)(`div`,{className:`text-sm text-slate-700 whitespace-pre-line leading-relaxed`,children:O}):O:(0,p.jsx)(`div`,{className:`space-y-3`,children:a.map(e=>(0,p.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,p.jsx)(`span`,{className:`w-4 h-4 rounded-full flex-shrink-0 mt-0.5`,style:{backgroundColor:e.color}}),(0,p.jsxs)(`div`,{className:`flex-1`,children:[(0,p.jsx)(`p`,{className:`text-sm font-medium text-slate-800`,children:e.label}),(0,p.jsxs)(`p`,{className:`text-xs text-slate-500 mt-0.5`,children:[e.percent,`% (`,e.count||0,` `,k(`common.times`),`)`]})]})]},e.type))})})}),(0,p.jsx)(`div`,{className:`px-6 pb-6`,children:(0,p.jsx)(`button`,{onClick:P,className:`w-full py-3 rounded-full font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-95`,style:{backgroundColor:i},children:k(`common.close`)})})]})})]})});export{h as t};