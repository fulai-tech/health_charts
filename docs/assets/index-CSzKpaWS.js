const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SuperPanel-i-fLg_G9.js","assets/vendor-C8v92PJx.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/vendor-react-9LuqdP--.js","assets/vendor-query-CFE8onx5.js","assets/vendor-charts-DMuidav9.js"])))=>i.map(i=>d[i]);
export function __vite_legacy_guard(){import.meta.url,import(`_`).catch(()=>1),(async function*(){})().next()}import{a as t}from"./rolldown-runtime-Cn8xt2Gj.js";import{Mt as n,Pt as r,c as i,d as a,dt as o,i as s,jt as c,n as l,r as u,t as d,u as f,ut as p}from"./vendor-C8v92PJx.js";import{_ as m,a as h,b as g,c as _,d as v,f as y,g as b,h as x,i as S,l as C,m as w,n as T,o as E,p as D,r as O,s as k,t as ee,u as A,v as te,x as ne,y as j}from"./vendor-charts-DMuidav9.js";import{$ as M,A as N,At as re,B as ie,Ct as ae,D as oe,Dt as se,E as ce,Et as P,G as le,H as ue,J as de,K as fe,L as F,M as pe,N as me,Ot as he,P as ge,Q as _e,R as ve,St as ye,Tt as be,U as xe,V as Se,W as Ce,X as we,Y as Te,Z as Ee,_ as De,_t as Oe,a as ke,at as Ae,b as je,bt as Me,c as Ne,ct as Pe,dt as Fe,f as Ie,ft as Le,gt as Re,ht as ze,i as Be,it as Ve,jt as He,k as Ue,kt as We,lt as Ge,m as Ke,mt as qe,n as Je,nt as Ye,o as Xe,ot as Ze,p as Qe,pt as $e,r as et,s as tt,st as nt,t as rt,tt as it,u as at,ut as ot,vt as I,w as st,wt as ct,x as lt,xt as ut,y as dt,yt as ft,z as pt}from"./vendor-react-9LuqdP--.js";import{a as mt,t as ht}from"./vendor-query-CFE8onx5.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var gt=He(),L=r();const _t={animationDuration:300,animationEasing:`linear`,isAnimationActive:!0,animationBegin:0},vt={animationDuration:200,animationEasing:`linear`,isAnimationActive:!0},yt={animationDuration:800,animationEasing:`ease-in-out`,isAnimationActive:!0};function bt(){return!0}function xt(){if(typeof navigator>`u`)return!1;let e=navigator.hardwareConcurrency||4,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e<=4||t}function St(){return bt()?(console.log(`ðŸ“Š Chart config: WebView mode [true] - simplified animations (300ms)`),_t):xt()?(console.log(`ðŸ“Š Chart config: Low-end device - minimal animations (200ms)`),vt):(console.log(`ðŸ“Š Chart config: Standard device - full animations (800ms)`),yt)}const Ct={defaultMargin:{top:5,right:15,left:0,bottom:5},gridStyle:{strokeDasharray:`4 4`,stroke:`#E5E7EB`},axisStyle:{fontSize:12,fill:`#94a3b8`},animation:St()};function R(...e){return p(o(e))}function wt(){return Ct.animation}function Tt(e=`data`){if(typeof window>`u`)return null;let t=new URLSearchParams(window.location.search).get(e);if(!t)return null;try{return JSON.parse(decodeURIComponent(t))}catch(t){return console.error(`[parseUrlJsonData] Failed to parse JSON from parameter "${e}":`,t),null}}function Et(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Dt(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Ot(e){let t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date(t,n,r,0,0,0,0),a=i.getDay(),o=a===0?-6:1-a,s=new Date(i);s.setDate(i.getDate()+o);let c=new Date(s);return c.setDate(s.getDate()+6),{monday:s,sunday:c}}function kt(){let e=new Date,{monday:t,sunday:n}=Ot(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0));return{start:t,end:n}}function At(e){let t=e.getFullYear(),n=e.getMonth(),r=e.getDate();return{start:new Date(t,n,r-7,0,0,0,0),end:new Date(t,n,r-1,0,0,0,0)}}function jt(e){let t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),r=e.getFullYear(),i=e.getMonth(),a=e.getDate(),o=new Date(r,i,a+7,0,0,0,0);return o>n?null:{start:o,end:new Date(r,i,a+13,0,0,0,0)}}function Mt(e){let t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),{sunday:r}=Ot(e);return r<n}const Nt=[`weekdays.mon`,`weekdays.tue`,`weekdays.wed`,`weekdays.thu`,`weekdays.fri`,`weekdays.sat`,`weekdays.sun`],Pt={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`,Mon:`weekdays.mon`,Tue:`weekdays.tue`,Wed:`weekdays.wed`,Thu:`weekdays.thu`,Fri:`weekdays.fri`,Sat:`weekdays.sat`,Sun:`weekdays.sun`,Monday:`weekdays.mon`,Tuesday:`weekdays.tue`,Wednesday:`weekdays.wed`,Thursday:`weekdays.thu`,Friday:`weekdays.fri`,Saturday:`weekdays.sat`,Sunday:`weekdays.sun`};function Ft(){let e=new Date().getDay();return e===0?6:e-1}function It(e,t){let n=new Map;for(let t of e)n.set(t.weekdayKey,t);return Nt.map((e,r)=>n.get(e)||t(e,r))}function Lt(e,t){let n=new Date(e);return n.setDate(e.getDate()+t),n}var z=n();function Rt(e,t){let n=e.split(`/`);if(n.length!==3)return e;let[r,i,a]=n.map(Number),o=new Date(r,i-1,a),s=t.startsWith(`zh`)?`zh-CN`:`en-US`;return o.toLocaleDateString(s,{month:`short`,day:`2-digit`})}function zt(e,t){let n=new Date(e,t,1),r=new Date(e,t+1,0),{monday:i}=Ot(n),a=[],o=new Date(i);for(;o<=r||o.getDay()!==1;){let e=[];for(let t=0;t<7;t++)e.push(new Date(o)),o.setDate(o.getDate()+1);if(a.push(e),o>r&&o.getDay()===1||a.length>6)break}return a}function Bt({startDate:e,endDate:t,onPrevious:n,onNext:r,disableNext:i=!1,onSelectWeek:a,className:o}){let{i18n:s,t:c}=I(),[l,u]=(0,L.useState)(!1),[d,f]=(0,L.useState)(()=>{let t=e.split(`/`);if(t.length===3){let[e,n]=t.map(Number);return new Date(e,n-1,1)}return new Date}),p=s.resolvedLanguage||s.language||`zh`,m=Rt(e,p),h=Rt(t,p),g=(0,L.useMemo)(()=>{let n=e.split(`/`),r=t.split(`/`);if(n.length===3&&r.length===3){let[e,t,i]=n.map(Number),[a,o,s]=r.map(Number);return{start:new Date(e,t-1,i),end:new Date(a,o-1,s)}}return null},[e,t]),_=(0,L.useMemo)(()=>zt(d.getFullYear(),d.getMonth()),[d]),v=(0,L.useMemo)(()=>p.startsWith(`zh`)?`zh-CN`:`en-US`,[p]),y=(0,L.useMemo)(()=>d.toLocaleDateString(v,{year:`numeric`,month:`long`}),[d,v]),b=[c(`weekdays.mon`),c(`weekdays.tue`),c(`weekdays.wed`),c(`weekdays.thu`),c(`weekdays.fri`),c(`weekdays.sat`),c(`weekdays.sun`)],x=()=>{f(e=>new Date(e.getFullYear(),e.getMonth()-1,1))},S=()=>{let e=new Date(d.getFullYear(),d.getMonth()+1,1),t=new Date;e>new Date(t.getFullYear(),t.getMonth(),1)||f(e)},C=(0,L.useMemo)(()=>{let e=new Date(d.getFullYear(),d.getMonth()+1,1),t=new Date;return e<=new Date(t.getFullYear(),t.getMonth(),1)},[d]),w=(0,L.useRef)(0),T=(0,L.useRef)(0),E=(0,L.useRef)(0),D=(0,L.useRef)(0),O=(0,L.useRef)(!1),k=1.2,ee=(0,L.useCallback)(e=>{let t=e.touches[0];w.current=t.clientX,T.current=t.clientY,E.current=t.clientX,D.current=t.clientY,O.current=!1},[]),A=(0,L.useCallback)(e=>{let t=e.touches[0];E.current=t.clientX,D.current=t.clientY;let n=Math.abs(t.clientX-w.current);n>Math.abs(t.clientY-T.current)*k&&n>10&&(O.current=!0)},[]),te=(0,L.useCallback)(()=>{if(!O.current)return;let e=E.current-w.current,t=Math.abs(D.current-T.current),n=Math.abs(e);n>=50&&n>t*k&&f(e>0?e=>new Date(e.getFullYear(),e.getMonth()-1,1):e=>{let t=new Date(e.getFullYear(),e.getMonth()+1,1),n=new Date;return t>new Date(n.getFullYear(),n.getMonth(),1)?e:t}),O.current=!1,w.current=0,T.current=0,E.current=0,D.current=0},[]),ne=e=>{if(a&&e.length===7){let t=e[0],n=e[6],r=new Date;if(r.setHours(0,0,0,0),t>r)return;a(t,n),u(!1)}},j=e=>{if(!g)return!1;let t=e.getTime();return t>=g.start.getTime()&&t<=g.end.getTime()},M=e=>e.getMonth()===d.getMonth(),N=e=>{let t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},re=e=>{let t=e[0],n=new Date;return n.setHours(0,0,0,0),t>n};return(0,L.useEffect)(()=>{if(!l)return;let e=()=>{u(!1)};return window.addEventListener(`scroll`,e,!0),()=>{window.removeEventListener(`scroll`,e,!0)}},[l]),(0,z.jsxs)(`div`,{className:R(`group relative inline-flex items-center gap-0.5 flex-shrink-0`,`bg-white rounded-full p-1.5`,`shadow-[0_2px_16px_-4px_rgba(0,0,0,0.08),0_0_0_1px_rgba(0,0,0,0.02)]`,`border border-slate-200`,`transition-all duration-300 ease-out`,l&&`shadow-[0_12px_40px_-8px_rgba(0,0,0,0.25),0_0_0_1px_rgba(0,0,0,0.06)]`,o),children:[(0,z.jsx)(`button`,{onClick:n,className:R(`relative z-10 flex items-center justify-center w-9 h-9 rounded-full`,`transition-all duration-200 ease-out`,`text-slate-500 hover:text-slate-700`,`hover:bg-slate-100 hover:shadow-sm`,`active:scale-95 active:shadow-inner`,`focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/40 focus-visible:ring-offset-1`),"aria-label":c(`datePicker.previousWeek`),children:(0,z.jsx)(nt,{className:`w-5 h-5`,strokeWidth:2.5})}),(0,z.jsxs)(Xe,{open:l,onOpenChange:u,children:[(0,z.jsx)(tt,{asChild:!0,children:(0,z.jsxs)(`button`,{className:R(`relative z-10 flex items-center justify-center gap-2.5 px-4 py-2 mx-0.5 rounded-full`,`w-[200px]`,`transition-all duration-200 ease-out`,`hover:bg-slate-50`,`focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/40 focus-visible:ring-offset-1`),children:[(0,z.jsxs)(`span`,{className:`text-[15px] font-semibold text-slate-700 tabular-nums tracking-tight whitespace-nowrap flex-1 text-center`,children:[m,(0,z.jsx)(`span`,{className:`mx-1.5 text-slate-400 font-normal`,children:`â€“`}),h]}),(0,z.jsx)(Fe,{className:R(`w-[18px] h-[18px] transition-all duration-300 flex-shrink-0`,l?`rotate-12 text-blue-500`:`text-slate-400`),strokeWidth:2})]})}),(0,z.jsx)(ke,{children:(0,z.jsxs)(Be,{className:R(`date-range-picker-popover`,`z-50 w-[340px] bg-white rounded-3xl p-5`,`shadow-[0_20px_60px_-12px_rgba(0,0,0,0.15),0_0_0_1px_rgba(0,0,0,0.03)]`,`border border-slate-200`),sideOffset:12,align:`center`,"data-swipe-ignore":!0,onTouchStart:ee,onTouchMove:A,onTouchEnd:te,children:[(0,z.jsxs)(`div`,{className:`relative flex items-center justify-between mb-5`,children:[(0,z.jsx)(`button`,{onClick:x,"aria-label":c(`datePicker.previousMonth`),className:R(`flex items-center justify-center w-8 h-8 rounded-lg`,`text-slate-600 hover:text-slate-800`,`hover:bg-slate-100/70 transition-all duration-150`,`active:scale-95`),children:(0,z.jsx)(nt,{className:`w-4 h-4`,strokeWidth:2.5})}),(0,z.jsx)(`span`,{className:`text-sm font-bold text-slate-800 tracking-tight`,children:y}),(0,z.jsx)(`button`,{onClick:S,disabled:!C,"aria-label":c(`datePicker.nextMonth`),className:R(`flex items-center justify-center w-8 h-8 rounded-lg`,`transition-all duration-150`,C?[`text-slate-600 hover:text-slate-800`,`hover:bg-slate-100/70`,`active:scale-95`]:[`text-slate-300 cursor-not-allowed opacity-50`]),children:(0,z.jsx)(Ze,{className:`w-4 h-4`,strokeWidth:2.5})})]}),(0,z.jsx)(`div`,{className:`relative grid grid-cols-7 gap-1 mb-3`,children:b.map((e,t)=>(0,z.jsx)(`div`,{className:`text-center text-[11px] font-bold text-slate-400 uppercase tracking-wider py-1.5`,children:e},t))}),(0,z.jsx)(`div`,{className:`relative space-y-1`,children:_.map((e,t)=>{let n=e.some(e=>j(e)),r=re(e);return(0,z.jsx)(`button`,{onClick:()=>!r&&ne(e),disabled:r,className:R(`w-full grid grid-cols-7 gap-1 py-1.5 px-1 rounded-xl`,`transition-all duration-200 ease-out`,!r&&`hover:bg-blue-50/60 cursor-pointer hover:shadow-sm`,r&&`opacity-35 cursor-not-allowed`,n&&[`bg-blue-100/80`,`shadow-sm`,`hover:bg-blue-100`]),children:e.map((e,t)=>{let n=M(e),r=N(e),i=j(e);return(0,z.jsx)(`div`,{className:R(`relative text-center text-sm py-1.5 rounded-lg tabular-nums`,`transition-all duration-150`,n?`text-slate-700 font-medium`:`text-slate-300 font-normal`,r&&!i&&[`font-bold text-blue-600`,`after:absolute after:bottom-0.5 after:left-1/2 after:-translate-x-1/2`,`after:w-1 after:h-1 after:rounded-full after:bg-blue-500`],i&&n&&`text-blue-600 font-bold`,i&&!n&&`text-blue-400/60`),children:e.getDate()},t)})},t)})}),(0,z.jsxs)(`div`,{className:`relative flex items-center justify-center gap-2 mt-5 pt-4 border-t border-slate-100/80`,children:[(0,z.jsx)(`div`,{className:`w-1.5 h-1.5 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 animate-pulse`}),(0,z.jsx)(`p`,{className:`text-xs font-medium text-slate-400 tracking-wide`,children:c(`datePicker.selectWeek`)})]}),(0,z.jsx)(et,{className:`fill-white drop-shadow-sm`,width:16,height:8})]})})]}),(0,z.jsx)(`button`,{onClick:r,disabled:i,className:R(`relative z-10 flex items-center justify-center w-9 h-9 rounded-full`,`transition-all duration-200 ease-out`,i?[`text-slate-300 cursor-not-allowed`,`opacity-50`]:[`text-slate-500 hover:text-slate-700`,`hover:bg-slate-100 hover:shadow-sm`,`active:scale-95 active:shadow-inner`,`focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/40 focus-visible:ring-offset-1`]),"aria-label":c(`datePicker.nextWeek`),children:(0,z.jsx)(Ze,{className:`w-5 h-5`,strokeWidth:2.5})})]})}const Vt=`transparent`,Ht=`#FFE8C7`,B={bp:`rgb(244, 162, 97)`,spo2:`rgb(76, 201, 240)`,heartRate:`rgb(248, 113, 113)`,glucose:`rgb(233, 196, 106)`,sleep:`rgb(167, 139, 250)`,nutrition:`rgb(251, 146, 61)`},Ut={bp:`rgba(244, 162, 97, 0.125)`,spo2:`rgba(76, 201, 240, 0.125)`,heartRate:`rgba(248, 113, 113, 0.125)`,glucose:`rgba(233, 196, 106, 0.125)`,sleep:`rgba(167, 139, 250, 0.125)`,nutrition:`rgba(251, 146, 61, 0.125)`},Wt={primary:`rgb(16, 185, 129)`,alpha:`rgba(16, 185, 129, 0.125)`},V={loadingOverlay:`rgba(0, 0, 0, 0)`,cardBorderRadius:`30px`,cardPaddingX:`25px`,pageMaxWidth:`max-w-xl`},H={card:{background:`rgb(255, 255, 255)`,border:`rgb(229, 231, 235)`},page:{background:`rgb(248, 249, 250)`},text:{primary:`rgb(31, 41, 55)`,secondary:`rgb(107, 114, 128)`,muted:`rgb(156, 163, 175)`},status:{normal:`rgb(16, 185, 129)`,warning:`rgb(245, 158, 11)`,danger:`rgb(239, 68, 68)`},trend:{up:`rgb(239, 68, 68)`,down:`rgb(16, 185, 129)`,stable:`rgb(107, 114, 128)`},background:{gray:`rgb(248, 248, 248)`,warning:`rgb(248, 248, 248)`,neutral:`rgb(248, 248, 248)`,summaryBox:`rgb(248, 248, 248)`},chart:{grid:`rgb(226, 232, 240)`,tick:`rgb(148, 163, 184)`,activeDot:{fill:`rgb(255, 255, 255)`}}},Gt={spo2:{normal:`rgb(178, 238, 177)`,low:`rgb(105, 218, 252)`,too_low:`rgb(248, 113, 113)`},bp:{normal:`rgb(145, 198, 255)`,high_normal:`rgb(178, 238, 177)`,low_bp:`rgb(255, 147, 147)`,high_bp:`rgb(255, 208, 36)`},glucose:{normal:`rgb(178, 238, 177)`,high:`rgb(251, 191, 36)`,too_high:`rgb(248, 113, 113)`,too_low:`rgb(96, 165, 250)`},heartRate:{normal:`rgb(95, 228, 143)`,high:`rgb(251, 191, 36)`,too_high:`rgb(248, 113, 113)`,slow:`rgb(96, 165, 250)`,low:`rgb(96, 165, 250)`}},U={deep:`rgb(162, 126, 253)`,light:`rgb(217, 203, 254)`,rem:`rgb(236, 229, 254)`,awake:`rgb(249, 147, 59)`},W={primary:`rgb(251, 146, 61)`,alpha:`rgba(251, 146, 61, 0.125)`,positive:`rgb(251, 146, 60)`,neutral:`rgb(178, 237, 181)`,negative:`rgb(87, 158, 255)`,happy:`rgb(251, 211, 77)`,surprised:`rgb(251, 146, 60)`,calm:`rgb(178, 237, 181)`,sad:`rgb(148, 163, 184)`,angry:`rgb(87, 158, 255)`,fearful:`rgb(34, 211, 238)`,disgusted:`rgb(167, 139, 250)`},Kt={systolic:`rgb(249, 115, 22)`,diastolic:`rgb(74, 222, 128)`,bar:`rgb(226, 232, 240)`},qt={primary:`rgb(251, 146, 61)`,targetLine:`rgb(251, 146, 61)`,weeklyScoreHeader:`rgb(251, 146, 61)`,weeklyScoreButtonBg:`rgba(255, 255, 255, 0.35)`,weeklyScoreButtonText:`rgb(194, 95, 30)`};var G=(0,L.forwardRef)(({className:e,asChild:t=!1,...n},r)=>(0,z.jsx)(t?Je:`div`,{ref:r,className:R(`shadow-sm bg-white py-4 border border-slate-100`,e),style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,...n.style},...n}));G.displayName=`Card`;var Jt=(0,L.forwardRef)(({className:e,...t},n)=>(0,z.jsx)(`div`,{ref:n,className:R(`flex flex-col space-y-1.5 pb-4`,e),...t}));Jt.displayName=`CardHeader`;var Yt=(0,L.forwardRef)(({className:e,...t},n)=>(0,z.jsx)(`h3`,{ref:n,className:R(`text-lg font-semibold text-slate-800`,e),...t}));Yt.displayName=`CardTitle`;var Xt=(0,L.forwardRef)(({className:e,...t},n)=>(0,z.jsx)(`p`,{ref:n,className:R(`text-sm text-slate-500`,e),...t}));Xt.displayName=`CardDescription`;var Zt=(0,L.forwardRef)(({className:e,...t},n)=>(0,z.jsx)(`div`,{ref:n,className:R(``,e),...t}));Zt.displayName=`CardContent`;var Qt=(0,L.forwardRef)(({className:e,...t},n)=>(0,z.jsx)(`div`,{ref:n,className:R(`flex items-center pt-4`,e),...t}));Qt.displayName=`CardFooter`;const $t=(e=100)=>{let[t,n]=(0,L.useState)(!1);(0,L.useEffect)(()=>{let t=setTimeout(()=>{n(!0)},e);return()=>clearTimeout(t)},[e]);let r=wt();return{...r,isAnimationActive:r.isAnimationActive&&t}};function en(){let e=(0,L.useRef)(null),t=(0,L.useCallback)(()=>{if(e.current){let t=new MouseEvent(`mouseout`,{bubbles:!0,cancelable:!0,view:window,relatedTarget:document.body}),n=new MouseEvent(`mouseleave`,{bubbles:!1,cancelable:!0,view:window}),r=e.current.querySelector(`.recharts-wrapper`);r&&(r.dispatchEvent(t),r.dispatchEvent(n));let i=e.current.querySelector(`.recharts-surface`);i&&(i.dispatchEvent(t),i.dispatchEvent(n))}},[]);return(0,L.useEffect)(()=>{let e=()=>{t()};return window.addEventListener(`scroll`,e,!0),window.addEventListener(`touchmove`,e,!0),window.addEventListener(`wheel`,e,!0),()=>{window.removeEventListener(`scroll`,e,!0),window.removeEventListener(`touchmove`,e,!0),window.removeEventListener(`wheel`,e,!0)}},[t]),e}var tn=({containerRef:e,className:t=``})=>((0,L.useEffect)(()=>{let t=t=>{var n;let r=(n=e.current)==null?void 0:n.querySelector(`.recharts-wrapper`);r&&e.current&&!e.current.contains(t.target)&&(r.dispatchEvent(new MouseEvent(`mouseleave`,{bubbles:!1,view:window})),r.dispatchEvent(new MouseEvent(`mouseout`,{bubbles:!0,relatedTarget:document.body,view:window})))};return document.addEventListener(`click`,t),()=>document.removeEventListener(`click`,t)},[e]),(0,z.jsx)(`div`,{className:`absolute inset-0 cursor-pointer ${t}`.trim(),style:{pointerEvents:`auto`},onClick:t=>{var n;let r=(n=e.current)==null?void 0:n.querySelector(`.recharts-wrapper`);r&&r.dispatchEvent(new MouseEvent(`mousemove`,{clientX:t.clientX,clientY:t.clientY,bubbles:!0,cancelable:!0,view:window}))},"aria-hidden":!0}));tn.displayName=`ChartClickTooltipOverlay`;const nn=(0,L.memo)(tn);var rn=(e,t)=>`gradient-${e}-${t}`,an=({data:e,lines:t,xAxisKey:n,yAxisDomain:r,yAxisFormatter:i,height:a=224,className:o=``,renderTooltip:s,referenceLine:c,showLegend:l=!0,chartMargin:u={top:10,right:10,left:-15,bottom:0}})=>{let d=$t(),f=en(),p=t.map((e,t)=>{var n;return{...e,gradientId:e.gradientId||rn(e.dataKey,t),legendShape:e.legendShape||`circle`,strokeWidth:(n=e.strokeWidth)==null?2:n}}),h=e=>{let{legendShape:t,color:n}=e;return t===`circle`?(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:n}}):t===`square`?(0,z.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${n}40`}}):t===`line`?(0,z.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:n}}):null};return(0,z.jsxs)(`div`,{className:`w-full transform-gpu will-change-transform ${o}`,children:[l&&(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2 flex-wrap`,children:p.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[h(e),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,z.jsxs)(`div`,{ref:f,style:{height:a},className:`-mx-2 relative`,children:[(0,z.jsx)(g,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,z.jsxs)(ee,{data:e,margin:u,children:[(0,z.jsx)(`defs`,{children:p.filter(e=>e.showArea).map(e=>(0,z.jsxs)(`linearGradient`,{id:e.gradientId,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,z.jsx)(`stop`,{offset:`5%`,stopColor:e.color,stopOpacity:.3}),(0,z.jsx)(`stop`,{offset:`95%`,stopColor:e.color,stopOpacity:.1})]},e.gradientId))}),(0,z.jsx)(y,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,z.jsx)(_,{dataKey:n,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,z.jsx)(k,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:i}),s&&(0,z.jsx)(m,{content:s,wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),c&&c.show!==!1&&(0,z.jsx)(D,{y:c.value,stroke:c.color,strokeDasharray:c.strokeDasharray||`4 4`,strokeWidth:c.strokeWidth||1.5}),p.filter(e=>e.showArea).map(e=>(0,z.jsx)(A,{type:`monotone`,dataKey:e.areaDataKey||e.dataKey,stroke:`transparent`,fill:`url(#${e.gradientId})`,name:`${e.dataKey}-area`,...d},`area-${e.dataKey}`)),p.map(e=>(0,z.jsx)(v,{type:`monotone`,dataKey:e.dataKey,stroke:e.color,strokeWidth:e.strokeWidth,dot:{fill:e.color,strokeWidth:0,r:4},activeDot:{r:6,stroke:e.color,strokeWidth:2,fill:`#fff`},name:e.dataKey,...d},`line-${e.dataKey}`))]})}),(0,z.jsx)(nn,{containerRef:f})]})]})};an.displayName=`TrendLineChart`,console.log(`TrendLineChart module loaded`);const on=(0,L.memo)(an);var sn=(0,L.memo)(({active:e,payload:t,label:n})=>{if(!e||!t||t.length===0)return null;let r=t.find(e=>e.dataKey===`systolic`&&e.name===`systolic`),i=t.find(e=>e.dataKey===`diastolic`&&e.name===`diastolic`);return(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:n}),r&&(0,z.jsxs)(`p`,{className:`text-orange-300`,children:[`SBP: `,r.value]}),i&&(0,z.jsxs)(`p`,{className:`text-emerald-300`,children:[`DBP: `,i.value]})]})});const cn=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=I(),c=B.bp,l=(0,L.useMemo)(()=>{let e=Ft(),t=[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],n=[{systolic:120,diastolic:80},{systolic:118,diastolic:78},{systolic:122,diastolic:82},{systolic:119,diastolic:79},{systolic:121,diastolic:81},{systolic:117,diastolic:77},{systolic:120,diastolic:80}];return t.map((t,r)=>({name:t,systolic:r<=e?n[r].systolic:0,diastolic:r<=e?n[r].diastolic:0}))},[]),u=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],systolic:e.systolic,diastolic:e.diastolic})))==null?l:t},[e==null?void 0:e.chartData,l]);return(0,z.jsxs)(G,{className:`${t} relative`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5`,style:{color:c}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`page.bloodPressure.trendyReport`)})]}),n&&(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,z.jsx)(F,{className:`w-3 h-3 animate-spin`}),(0,z.jsx)(`span`,{children:s(`common.loading`)})]})]}),(0,z.jsxs)(`div`,{className:`flex gap-3 mb-5`,children:[(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:c},children:(r=e==null||(i=e.summary)==null?void 0:i.avgSystolic)==null?`--`:r}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:s(`units.mmHg`)})]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:s(`page.bloodPressure.weeksAverageSBP`)})]}),(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:c},children:(a=e==null||(o=e.summary)==null?void 0:o.avgDiastolic)==null?`--`:a}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:s(`units.mmHg`)})]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:s(`page.bloodPressure.weeksAverageDBP`)})]})]}),(0,z.jsx)(on,{data:u,lines:[{dataKey:`systolic`,color:c,label:s(`vitals.sbp`),showArea:!0,gradientId:`sbpGradient`,legendShape:`circle`},{dataKey:`diastolic`,color:`#10B981`,label:s(`vitals.dbp`),showArea:!0,gradientId:`dbpGradient`,legendShape:`circle`}],xAxisKey:`name`,yAxisDomain:[50,150],renderTooltip:e=>(0,z.jsx)(sn,{...e}),height:224})]})}),ln=(0,L.memo)(({data:e,innerRadius:t,outerRadius:n,paddingAngle:r=0,startAngle:i=90,endAngle:a=-270,children:o,widthClass:s=`w-full`,heightClass:c=`h-full`,animationProps:l=wt(),className:u=``,useCornerRadius:d=!0,smallSectorThreshold:f=.02})=>(0,z.jsxs)(`div`,{className:`relative transform-gpu will-change-transform ${s} ${c} ${u}`,children:[(0,z.jsx)(g,{width:`100%`,height:`100%`,children:(0,z.jsx)(S,{margin:{top:0,right:0,bottom:0,left:0},children:(0,z.jsx)(x,{data:e,cx:`50%`,cy:`50%`,innerRadius:t,outerRadius:n,paddingAngle:r,dataKey:`value`,startAngle:i,endAngle:a,strokeWidth:0,shape:e=>{let{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o,fill:s}=e,c=(r+i)/2,l=Math.abs(o-a)*Math.PI/180*c;if(d&&l<14){let e=(a+o)/2,l=Math.PI/180,u=t+c*Math.cos(-e*l),d=n+c*Math.sin(-e*l),f=i-r;return(0,z.jsx)(`circle`,{cx:u,cy:d,r:Math.min(f/2,5),fill:s})}return(0,z.jsx)(te,{...e,cornerRadius:d?5:0,strokeWidth:0})},...l,children:e.map((e,t)=>(0,z.jsx)(b,{fill:e.color,style:{outline:`none`}},`cell-${t}`))})})}),o&&(0,z.jsx)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center pointer-events-none`,children:o})]})),un=(0,L.memo)(({title:e,icon:t,iconElement:n,themeColor:r,items:i,centerValue:a,centerLabel:o,centerValueColor:s,showCount:c=!0,columns:l=1,gridColumns:u=1,highlightValue:d,highlightLabel:f,highlightDescription:p,itemLayout:m=`default`,pieChartSize:h=`auto`,donutThickness:g=12,className:_=``,isLoading:v=!1,showInfo:y=!0,infoContent:b})=>{let{t:x}=I(),S=wt(),[C,w]=(0,L.useState)(!1),T=(0,L.useCallback)(()=>{w(!0)},[]),E=(0,L.useCallback)(()=>{w(!1)},[]),D=(0,L.useMemo)(()=>{let e=i.filter(e=>e.percent>0||e.count!==void 0&&e.count>0).map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color,count:e.count}));return e.length===0?[{name:`No Data`,value:100,color:`#E5E7EB`}]:e},[i]),O=(()=>h===`small`?`w-32 h-32`:h===`medium`?`w-40 h-40`:h===`large`||l===2||d!==void 0?`w-48 h-48`:`w-32 h-32`)(),{innerRadius:k,outerRadius:ee}=(()=>l===2||d!==void 0||m===`grid-2col`?{innerRadius:`${98-g}%`,outerRadius:`98%`}:{innerRadius:`${80-(g||20)}%`,outerRadius:`80%`})();return(0,z.jsxs)(G,{className:`${_} relative overflow-hidden`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,z.jsxs)(`div`,{className:`flex-1 min-w-0 flex flex-col`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[n||t&&(0,z.jsx)(t,{className:`w-5 h-5`,style:{color:r}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e}),y&&(0,z.jsx)(Se,{className:`w-4 h-4 text-slate-400 cursor-pointer hover:text-slate-600 transition-colors`,onClick:T})]}),(0,z.jsx)(`div`,{className:`flex-1`,children:d===void 0?m===`with-duration`?(0,z.jsx)(`div`,{className:`space-y-2`,children:i.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,z.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.duration&&(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.duration}),e.status&&(0,z.jsx)(`span`,{className:`text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-600`,children:e.status})]})]},e.type))}):m===`grid-2col`?(0,z.jsx)(`div`,{className:`grid grid-cols-2 gap-x-4 gap-y-2`,children:i.slice(0,8).map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,z.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]},e.type))}):l===2?(0,z.jsx)(`div`,{className:`grid grid-cols-2 gap-x-6 gap-y-3`,children:i.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-2 min-w-0`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-700 flex-shrink-0`,children:e.label}),(0,z.jsxs)(`span`,{className:`text-sm font-medium ml-auto flex-shrink-0`,style:{color:e.color},children:[e.percent,`%`]})]},e.type))}):(0,z.jsx)(`div`,{className:`space-y-2`,children:i.map(e=>{var t;return(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600 w-14`,children:e.label}),(0,z.jsxs)(`span`,{className:`text-sm font-semibold w-10`,style:{color:e.color},children:[e.percent,`%`]}),c&&(0,z.jsxs)(`span`,{className:`text-sm`,style:{color:e.color},children:[(t=e.count)==null?0:t,` `,x(`common.times`)]})]},e.type)})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(`div`,{className:`mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-4xl font-bold`,style:{color:r},children:d}),f&&(0,z.jsx)(`span`,{className:`text-base text-slate-400`,children:f})]}),p&&(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:p})]}),(0,z.jsx)(`div`,{className:`grid ${u===2?`grid-cols-2`:`grid-cols-1`} gap-x-4 gap-y-2`,children:i.map(e=>(0,z.jsxs)(`div`,{className:`flex flex-col`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label})]}),(0,z.jsxs)(`span`,{className:`text-base font-semibold ml-[18px]`,style:{color:e.color},children:[e.count,` `,e.count===1?x(`common.time`):x(`common.times`)]})]},e.type))})]})})]}),(0,z.jsxs)(ln,{data:D,innerRadius:k,outerRadius:ee,paddingAngle:l===2?2:d===void 0?3:2,widthClass:O,heightClass:``,animationProps:S,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold text-center px-2`,style:{color:s||r},children:a}),o&&(0,z.jsx)(`span`,{className:`text-xs text-slate-400 mt-1`,children:o})]})]}),C&&(0,z.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4`,style:{backgroundColor:`rgba(0, 0, 0, 0.5)`},onClick:E,children:(0,z.jsxs)(`div`,{className:`bg-white shadow-2xl max-w-md w-full mx-4 overflow-hidden`,style:{borderRadius:V.cardBorderRadius},onClick:e=>e.stopPropagation(),children:[(0,z.jsx)(`div`,{className:`px-6 pt-6 pb-4`,children:(0,z.jsx)(`h3`,{className:`text-xl font-bold text-slate-800 text-center`,children:x(`common.illustrate`)})}),(0,z.jsx)(`div`,{className:`px-6 pb-6 max-h-96 overflow-y-auto`,children:(0,z.jsx)(`div`,{className:`bg-slate-50 rounded-2xl p-4`,children:b?typeof b==`string`?(0,z.jsx)(`div`,{className:`text-sm text-slate-700 whitespace-pre-line leading-relaxed`,children:b}):b:(0,z.jsx)(`div`,{className:`space-y-3`,children:i.map(e=>(0,z.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,z.jsx)(`span`,{className:`w-4 h-4 rounded-full flex-shrink-0 mt-0.5`,style:{backgroundColor:e.color}}),(0,z.jsxs)(`div`,{className:`flex-1`,children:[(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-800`,children:e.label}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-500 mt-0.5`,children:[e.percent,`% (`,e.count||0,` `,x(`common.times`),`)`]})]})]},e.type))})})}),(0,z.jsx)(`div`,{className:`px-6 pb-6`,children:(0,z.jsx)(`button`,{onClick:E,className:`w-full py-3 rounded-full font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-95`,style:{backgroundColor:r},children:x(`common.close`)})})]})})]})});var dn={normal:`status.normal`,high_normal:`status.normalHighValue`,low_bp:`status.tooLow`,high_bp:`status.tooHigh`},fn=[`normal`,`high_normal`,`low_bp`,`high_bp`];const pn=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=I(),c=B.bp,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=(0,L.useMemo)(()=>fn.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(dn[e]),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Gt.bp[e]||`#94A3B8`}}),[l,s]),f=(0,L.useMemo)(()=>d.filter(e=>e.type===`normal`||e.type===`high_normal`).reduce((e,t)=>e+(t.count||0),0),[d]),p=(0,L.useMemo)(()=>s(`page.bloodPressure.bpClassification`),[s]);return(0,z.jsx)(un,{title:s(`page.bloodPressure.bpStatistics`),icon:Oe,themeColor:c,pieChartSize:`medium`,items:d,centerValue:s(`common.good`),centerLabel:s(`common.inAverage`),highlightValue:f,highlightLabel:`/ ${u} ${s(`common.times`)}`,highlightDescription:s(`page.bloodPressure.normalResults`),gridColumns:2,infoContent:p,className:t,isLoading:n})}),mn=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=I(),o=B.bp,s=(r=e==null?void 0:e.comparison)==null?{current:{systolic:0,diastolic:0},previous:{systolic:0,diastolic:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{systolicChange:0,diastolicChange:0,systolicTrend:`stable`,diastolicTrend:`stable`}:i,l=(0,L.useMemo)(()=>e=>e===`up`?(0,z.jsx)($e,{className:`w-4 h-4`}):e===`down`?(0,z.jsx)(ze,{className:`w-4 h-4`}):null,[]),u=(0,L.useMemo)(()=>s.insight||a(`page.bloodPressure.defaultInsight`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),[s.insight,a]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(ot,{className:`w-5 h-5`,style:{color:o}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.bloodPressure.compareWithLastWeek`)})]}),(0,z.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageSBP`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.systolic:`--`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.systolicChange!==0&&(0,z.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.systolicTrend),Math.abs(c.systolicChange)]})]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.systolic:`--`,a(`units.mmHg`)]})]}),(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageDBP`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.diastolic:`--`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.diastolicChange!==0&&(0,z.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.diastolicTrend),Math.abs(c.diastolicChange)]})]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.diastolic:`--`,a(`units.mmHg`)]})]})]}),(0,z.jsx)(`div`,{className:`p-4 rounded-2xl bg-sky-50`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:u})})]})}),hn=(0,L.memo)(({titleKey:e=`common.weeklyOverview`,Icon:t,overallText:n,highlightText:r,highlightLabelKey:i=`page.sleep.needsAttention`,highlightColor:a=`#FBBF24`,suggestions:o=[],themeColor:s,className:c,isLoading:l})=>{let{t:u}=I();return(0,z.jsxs)(G,{className:`${c} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${l?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(t,{className:`w-5 h-5`,style:{color:s}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:u(e)})]}),(0,z.jsxs)(`div`,{className:`mb-5`,children:[(0,z.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:s},children:u(`page.bloodPressure.overallSituation`)}),(0,z.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,z.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:n})})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:a},children:u(i)}),(0,z.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,z.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:r})})]})]})}),gn=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a;let{t:o}=I(),s=B.bp;return(0,z.jsx)(hn,{titleKey:`page.bloodPressure.weeklyOverview`,Icon:we,overallText:(0,L.useMemo)(()=>{var t;return(e==null||(t=e.weeklySummary)==null?void 0:t.overview)||o(`page.bloodPressure.defaultOverview`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`})},[e==null||(r=e.weeklySummary)==null?void 0:r.overview,o]),highlightText:(0,L.useMemo)(()=>{var t;return(e==null||(t=e.weeklySummary)==null?void 0:t.highlights)||o(`page.bloodPressure.defaultHighlights`,{defaultValue:`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`})},[e==null||(i=e.weeklySummary)==null?void 0:i.highlights,o]),highlightLabelKey:`page.bloodPressure.needsAttention`,highlightColor:`#FBBF24`,suggestions:e==null||(a=e.weeklySummary)==null?void 0:a.suggestions,themeColor:s,className:t,isLoading:n})}),_n={baseURL:`https://test.fulai.tech`,auth:{deviceLogin:`/auth/app/login`},trendReview:{overview:`/trend-review/overview`,indicatorDetail:`/trend-review/indicator-detail`},currentStatus:{dimensionDetail:`/current-status/dimension-detail`},weeklyReport:`/trend-review/weekly-report`,device:{username:`ceshi003`,password:`ceshi003`}},vn={accessToken:10080*60*1e3,refreshToken:720*60*60*1e3},yn=`fulai_auth_data`,bn=!0,xn=60*1e3;var K={AUTH:`fulai_auth_data`,THEME:`app_theme`,LANGUAGE:`app_language`,IS_TEST_ENV:`app_is_test_env`},Sn=()=>({isAuthenticated:!1,accessToken:null,username:null,source:null});const q=new class{constructor(){this.auth=Sn(),this.theme=`light`,this.language=`zh`,this.isTestEnv=!0,i(this,{},{autoBind:!0}),this.loadFromStorage(),this.setupStorageListener()}setupStorageListener(){window.addEventListener(`storage`,e=>{e.key===K.AUTH?this.syncAuthFromStorage():e.key===K.THEME?this.syncThemeFromStorage():e.key===K.LANGUAGE?this.syncLanguageFromStorage():e.key===K.IS_TEST_ENV&&this.syncIsTestEnvFromStorage()})}loadFromStorage(){try{let e=localStorage.getItem(K.AUTH);if(e){let t=JSON.parse(e);t.accessToken&&f(()=>{var e,n,r;this.auth={isAuthenticated:!0,accessToken:t.accessToken,username:(e=(n=t.username)==null?(r=t.user)==null?void 0:r.deviceId:n)==null?null:e,source:`storage`}})}let t=localStorage.getItem(K.THEME);t===`light`||t===`dark`?f(()=>{this.theme=t}):typeof window<`u`&&window.matchMedia(`(prefers-color-scheme: dark)`).matches&&f(()=>{this.theme=`dark`});let n=localStorage.getItem(K.LANGUAGE);(n===`en`||n===`zh`)&&f(()=>{this.language=n});let r=localStorage.getItem(K.IS_TEST_ENV);r!==null&&f(()=>{this.isTestEnv=r===`true`})}catch(e){console.error(`[GlobalStore] Failed to load from storage:`,e)}}syncAuthFromStorage(){try{let t=localStorage.getItem(K.AUTH);if(t){var e;let n=JSON.parse(t),r=(e=n.accessToken)==null?null:e;r!==this.auth.accessToken&&f(()=>{var e,t,i;this.auth={isAuthenticated:!!r,accessToken:r,username:(e=(t=n.username)==null?(i=n.user)==null?void 0:i.deviceId:t)==null?null:e,source:`storage`}})}else this.auth.isAuthenticated&&f(()=>{this.auth=Sn()})}catch(e){}}syncThemeFromStorage(){let e=localStorage.getItem(K.THEME);(e===`light`||e===`dark`)&&e!==this.theme&&f(()=>{this.theme=e})}syncLanguageFromStorage(){let e=localStorage.getItem(K.LANGUAGE);(e===`en`||e===`zh`)&&e!==this.language&&f(()=>{this.language=e})}syncIsTestEnvFromStorage(){let e=localStorage.getItem(K.IS_TEST_ENV);if(e!==null){let t=e===`true`;t!==this.isTestEnv&&f(()=>{this.isTestEnv=t})}}setAuthFromUrl(e){this.logout();let t={user:{id:`android`,type:`device`,deviceId:`Android`,permissions:[]},accessToken:e,refreshToken:e,accessTokenExpiry:Date.now()+10080*60*1e3,refreshTokenExpiry:Date.now()+720*60*60*1e3,username:`Android`};localStorage.setItem(K.AUTH,JSON.stringify(t)),f(()=>{this.auth={isAuthenticated:!0,accessToken:e,username:`Android`,source:`url`}})}setAuthFromApi(e,t){f(()=>{this.auth={isAuthenticated:!0,accessToken:e,username:t,source:`api`}})}logout(){localStorage.removeItem(K.AUTH),f(()=>{this.auth=Sn()})}setTheme(e){localStorage.setItem(K.THEME,e);let t=document.documentElement;e===`dark`?t.classList.add(`dark`):t.classList.remove(`dark`),f(()=>{this.theme=e})}toggleTheme(){let e=this.theme===`light`?`dark`:`light`;return this.setTheme(e),e}setLanguage(e){localStorage.setItem(K.LANGUAGE,e),f(()=>{this.language=e})}setIsTestEnv(e){localStorage.setItem(K.IS_TEST_ENV,String(e)),f(()=>{this.isTestEnv=e})}toggleIsTestEnv(){let e=!this.isTestEnv;return this.setIsTestEnv(e),e}};function Cn(){return{...q.auth,setAuthFromUrl:q.setAuthFromUrl,setAuthFromApi:q.setAuthFromApi,logout:q.logout}}function wn(){return{language:q.language,setLanguage:q.setLanguage}}function Tn(){return{isTestEnv:q.isTestEnv,setIsTestEnv:q.setIsTestEnv,toggleIsTestEnv:q.toggleIsTestEnv}}var En=class{constructor(){this.authData=null,this.loadFromStorage()}loadFromStorage(){try{let e=localStorage.getItem(yn);e&&(this.authData=JSON.parse(e))}catch(e){console.error(`Failed to load auth data from storage:`,e),this.authData=null}}saveToStorage(){try{this.authData?localStorage.setItem(yn,JSON.stringify(this.authData)):localStorage.removeItem(yn),q.syncAuthFromStorage()}catch(e){console.error(`Failed to save auth data to storage:`,e)}}async login(e){let t=e||{username:_n.device.username,password:_n.device.password},n=await a.post(`${_n.baseURL}${_n.auth.deviceLogin}`,t,{headers:{"Content-Type":`application/json`,Accept:`application/json`}});if(n.data.code!==0)throw Error(n.data.msg||`Login failed`);let r=Date.now();return this.authData={user:n.data.data.user,accessToken:n.data.data.accessToken,refreshToken:n.data.data.refreshToken,accessTokenExpiry:r+vn.accessToken,refreshTokenExpiry:r+vn.refreshToken,username:t.username},this.saveToStorage(),this.authData}isAuthenticated(){return this.authData?Date.now()<this.authData.accessTokenExpiry-300*1e3:!1}canRefresh(){return this.authData?Date.now()<this.authData.refreshTokenExpiry:!1}getAccessToken(){return this.authData?this.authData.accessToken:null}getRefreshToken(){return this.authData?this.authData.refreshToken:null}getAuthData(){return this.authData}setTokenFromUrl(e){if(!e)return;this.logout(),console.log(`ðŸ”„ [AuthService] Clearing old auth state for new URL token`);let t=Date.now();this.authData={user:{id:`android`,type:`device`,deviceId:`Android`,permissions:[]},accessToken:e,refreshToken:e,accessTokenExpiry:t+vn.accessToken,refreshTokenExpiry:t+vn.refreshToken,username:`Android`},this.saveToStorage()}logout(){this.authData=null,this.saveToStorage()}async ensureAuthenticated(){let e=Dn();if(e){this.setTokenFromUrl(e),this.loadFromStorage();let t=this.getAccessToken();if(t)return t}return this.loadFromStorage(),this.isAuthenticated()||await this.login(),this.authData.accessToken}};function Dn(){var e,t;if(typeof window>`u`)return null;let n=new URLSearchParams(window.location.search),r=window.location.hash||``,i=r.includes(`?`)?new URLSearchParams(r.slice(r.indexOf(`?`)+1)):null;return(e=(t=n.get(`token`))==null?i==null?void 0:i.get(`token`):t)==null?null:e}const On=new En;function kn(){let e=a.create({baseURL:_n.baseURL,headers:{"Content-Type":`application/json`,Accept:`application/json`},timeout:3e4});return e.interceptors.request.use(async e=>{var t;try{let t=await On.ensureAuthenticated();t&&(e.headers.Authorization=`Bearer ${t}`)}catch(e){console.error(`Failed to get auth token:`,e)}return console.log(`[API Request]`,(t=e.method)==null?void 0:t.toUpperCase(),e.url,e.data),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async t=>{var n;let r=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!r._retry){r._retry=!0;try{On.logout();let t=await On.ensureAuthenticated();return r.headers.Authorization=`Bearer ${t}`,e(r)}catch(e){return Promise.reject(e)}}return Promise.reject(t)}),e}const An=kn();function jn(){let e=new Date,t=e.toISOString().split(`T`)[0],n=new Date(e);n.setDate(n.getDate()-6);let r=n.toISOString().split(`T`)[0];return console.log(`[DateRange]`,{start_date:r,end_date:t}),{start_date:r,end_date:t}}async function Mn(e,t){let n=t||jn(),r={type:e,start_date:n.start_date,end_date:n.end_date},i=await An.post(_n.trendReview.indicatorDetail,r);if(i.data.code!==200)throw Error(i.data.msg||`Failed to fetch indicator detail`);return i.data.data}async function Nn(e){return Mn(`blood_pressure`,e)}async function Pn(e){return Mn(`heart_rate`,e)}async function Fn(e){return Mn(`blood_glucose`,e)}async function In(e){return Mn(`blood_oxygen`,e)}async function Ln(e){return Mn(`sleep`,e)}function Rn(e){return`${e.min}-${e.max}`}function zn(e){var t,n;return{value:(t=e==null?void 0:e.value)==null?null:t,trend:(n=e==null?void 0:e.trend)==null?null:n}}function Bn(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v;let{data:y}=e;if(!y)return null;let b=y.indicators.blood_pressure,x=y.indicators.heart_rate,S=y.indicators.blood_glucose,C=y.indicators.blood_oxygen;return{score:y.health_score.score,level:y.health_score.level,percentile:y.health_score.percentile,percentileMessage:y.health_score.message,aiTags:y.ai_analysis||[],indicators:{bloodPressure:{latest:b.latest?{systolic:b.latest.systolic,diastolic:b.latest.diastolic}:null,change:zn((t=b.latest)==null?void 0:t.change),avg:b.today_avg?{systolic:b.today_avg.systolic,diastolic:b.today_avg.diastolic}:null,reference:{systolic:Rn(b.reference.systolic),diastolic:Rn(b.reference.diastolic)},status:null,chart:(((n=b.chart)==null?void 0:n.data)||[]).map(e=>({time:e.time,systolic:e.systolic,diastolic:e.diastolic})),yAxisRange:(r=b.chart)!=null&&r.y_axis_range?{min:b.chart.y_axis_range.min,max:b.chart.y_axis_range.max}:void 0},heartRate:{latest:(i=(a=x.latest)==null?void 0:a.value)==null?null:i,change:zn((o=x.latest)==null?void 0:o.change),avg:x.avg,max:x.max,min:x.min,reference:Rn(x.reference),status:null,chart:(((s=x.chart)==null?void 0:s.data)||[]).map(e=>({time:e.time,avg:e.avg,max:e.max,min:e.min})),yAxisRange:(c=x.chart)!=null&&c.y_axis_range?{min:x.chart.y_axis_range.min,max:x.chart.y_axis_range.max}:void 0},bloodGlucose:{latest:(l=(u=S.latest)==null?void 0:u.value)==null?null:l,change:zn((d=S.latest)==null?void 0:d.change),avg:S.avg,max:S.max,min:S.min,reference:Rn(S.reference),status:S.status_label,chart:(((f=S.chart)==null?void 0:f.data)||[]).map(e=>({time:e.time,value:e.avg})),yAxisRange:(p=S.chart)!=null&&p.y_axis_range?{min:S.chart.y_axis_range.min,max:S.chart.y_axis_range.max}:void 0},bloodOxygen:{latest:(m=(h=C.latest)==null?void 0:h.value)==null?null:m,change:zn((g=C.latest)==null?void 0:g.change),avg:C.avg,max:C.max,min:C.min,reference:Rn(C.reference),status:null,chart:(((_=C.chart)==null?void 0:_.data)||[]).map(e=>({time:e.time,value:e.avg})),yAxisRange:(v=C.chart)!=null&&v.y_axis_range?{min:C.chart.y_axis_range.min,max:C.chart.y_axis_range.max}:void 0}},aiInsights:y.ai_insights||[],suggestions:(y.suggestions||[]).map((e,t)=>({icon:e.icon||`/images/daily_report/${t+1}.webp`,title:e.title||``,description:e.description||``}))}}function Vn(){return{score:82,level:`good`,percentile:99,percentileMessage:`Exceeding 99% people with same age!`,aiTags:[`Physical health`,`Needs attention`,`Maintain schedule`],indicators:{bloodPressure:{latest:{systolic:136,diastolic:95},change:{value:2,trend:`up`},avg:{systolic:126,diastolic:76},reference:{systolic:`90-129`,diastolic:`60-89`},status:`high_normal`,chart:[{time:`01:00`,systolic:136,diastolic:95},{time:`08:00`,systolic:125,diastolic:78},{time:`14:00`,systolic:130,diastolic:82},{time:`20:00`,systolic:128,diastolic:80}]},heartRate:{latest:84,change:{value:2,trend:`up`},avg:73,max:111,min:63,reference:`60-100`,status:`normal`,chart:[{time:`00:00`,avg:65,max:70,min:60},{time:`04:00`,avg:72,max:85,min:65},{time:`08:00`,avg:88,max:103,min:75},{time:`16:00`,avg:75,max:88,min:68}]},bloodGlucose:{latest:8.5,change:{value:3.1,trend:`up`},avg:5.4,max:7.6,min:4.6,reference:`3.9-6.1`,status:`åé«˜`,chart:[{time:`08:00`,value:5.2},{time:`12:00`,value:7.8},{time:`18:00`,value:6.1}]},bloodOxygen:{latest:94,change:{value:5,trend:`down`},avg:96,max:99,min:96,reference:`93-100`,status:`normal`,chart:[{time:`01:00`,value:98},{time:`08:00`,value:97},{time:`14:00`,value:96},{time:`20:00`,value:97}]}},aiInsights:[`The average blood oxygen saturation this week was 94.9%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`Deep breath for 5 minutes`,description:`Relieve current anxiety and lower heart rate.`},{icon:`/images/daily_report/2.webp`,title:`Today's nap suggestion`,description:`Rest and recover with a short nap.`},{icon:`/images/daily_report/3.webp`,title:`Drink water`,description:`The recent water intake is lower than usual.`}]}}function Hn(e){var t,n,r;let{data:i}=e;return{score:i.emotion_score.score,level:i.emotion_score.level,levelLabel:i.emotion_score.level_label,percentile:i.emotion_score.percentile,percentileMessage:i.emotion_score.message,aiTags:i.ai_analysis||[],chart:i.chart||[],distribution:{mainEmotion:((t=i.emotion_distribution)==null?void 0:t.main_emotion)||``,mainEmotionLabel:((n=i.emotion_distribution)==null?void 0:n.main_emotion_label)||``,items:((r=i.emotion_distribution)==null?void 0:r.distribution)||[]},aiInsights:i.ai_insights||[],suggestions:(i.suggestions||[]).map((e,t)=>({icon:`/images/daily_report/${t+1}.webp`,title:e.title||``,description:e.description||``}))}}function Un(){return{score:88,level:`good`,levelLabel:`Good`,percentile:95,percentileMessage:`Exceeding 95% people with same age!`,aiTags:[`Strong self-regulation`,`Large mood swings`,`Afternoon Anxiety`],chart:[{hour:`08:00`,label:`08:00-09:00`,positive:60,neutral:30,negative:10},{hour:`10:00`,label:`10:00-11:00`,positive:50,neutral:40,negative:10},{hour:`12:00`,label:`12:00-13:00`,positive:40,neutral:60,negative:0},{hour:`14:00`,label:`14:00-15:00`,positive:30,neutral:50,negative:20},{hour:`16:00`,label:`16:00-17:00`,positive:20,neutral:65,negative:15},{hour:`18:00`,label:`18:00-19:00`,positive:35,neutral:50,negative:15},{hour:`20:00`,label:`20:00-21:00`,positive:45,neutral:45,negative:10},{hour:`22:00`,label:`22:00-23:00`,positive:55,neutral:40,negative:5}],distribution:{mainEmotion:`HAPPY`,mainEmotionLabel:`Happy`,items:[{type:`HAPPY`,label:`Happy`,count:42,percent:42},{type:`CALM`,label:`Calm`,count:30,percent:30},{type:`SURPRISED`,label:`Surprise`,count:10,percent:10},{type:`SAD`,label:`Sad`,count:8,percent:8},{type:`ANGRY`,label:`Angry`,count:5,percent:5},{type:`FEARFUL`,label:`Fear`,count:2,percent:2},{type:`DISGUSTED`,label:`Hate`,count:3,percent:3}]},aiInsights:[`The average blood oxygen saturation this week was 94.9%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`4-6-4 breathing method`,description:`Relieve current anxiety and lower heart rate.`}]}}function Wn(e){var t,n,r,i,a,o,s,c;let{data:l}=e;return{score:l.sleep_score.score,level:l.sleep_score.level,levelLabel:l.sleep_score.level_label,percentile:l.sleep_score.percentile,percentileMessage:l.sleep_score.message,aiTags:l.ai_analysis||[],structureChart:{totalDuration:(t=(n=l.structure_chart.total_duration)==null?void 0:n.formatted)==null?`--`:t,totalMinutes:(r=(i=l.structure_chart.total_duration)==null?void 0:i.total_minutes)==null?0:r,deepDuration:(a=(o=l.structure_chart.deep_duration)==null?void 0:o.formatted)==null?`--`:a,deepMinutes:(s=(c=l.structure_chart.deep_duration)==null?void 0:c.total_minutes)==null?0:s,segments:l.structure_chart.chart||[]},structureAnalysis:l.structure_analysis||[],qualityIndicators:{bedTime:l.quality_indicators.bed_time,sleepTime:l.quality_indicators.sleep_time,wakeTime:l.quality_indicators.wake_time,getUpTime:l.quality_indicators.get_up_time,sleepLatency:l.quality_indicators.sleep_latency,sleepEfficiency:l.quality_indicators.sleep_efficiency},aiInsights:l.ai_insights||[],suggestions:(l.suggestions||[]).map((e,t)=>({icon:`/images/daily_report/${t+1}.webp`,title:e.title||``,description:e.description||``}))}}function Gn(){return{score:88,level:`fair`,levelLabel:`Fair`,percentile:85,percentileMessage:`Your rating is lower than 85% of users`,aiTags:[`Excellent deep sleep`,`Time to bed late`,`Normal fragmented sleep`],structureChart:{totalDuration:`7h 11min`,totalMinutes:431,deepDuration:`4h 8min`,deepMinutes:248,segments:[{stage:`light`,start:`23:30`,end:`00:30`},{stage:`deep`,start:`00:30`,end:`02:00`},{stage:`light`,start:`02:00`,end:`03:00`},{stage:`rem`,start:`03:00`,end:`04:00`},{stage:`deep`,start:`04:00`,end:`05:30`},{stage:`light`,start:`05:30`,end:`06:30`},{stage:`awake`,start:`06:30`,end:`06:45`},{stage:`light`,start:`06:45`,end:`07:30`}]},structureAnalysis:[{type:`awake`,label:`Awake`,percent:4,duration:`2 times`,status:`Good`},{type:`rem`,label:`REM`,percent:19,duration:`0 times`,status:`Good`},{type:`light`,label:`Light sleep`,percent:62,duration:`0 times`,status:`Good`},{type:`deep`,label:`Deep sleep`,percent:4,duration:`0 times`,status:`Good`}],qualityIndicators:{bedTime:{value:`20:55`,reference:`22:00`,label:`Bed rest time`},sleepTime:{value:`23:42`,reference:`23:00`,label:`Time to fall asleep`},wakeTime:{value:`07:15`,reference:`7:00`,label:`Post-awake time`},getUpTime:{value:`09:03`,reference:`8:00`,label:`Wake-up time`},sleepLatency:{value:`45`,reference:`<30min`,label:`Falling asleep takes time`,unit:`min`},sleepEfficiency:{value:`85`,reference:`>85%`,label:`Sleep efficiency`,unit:`%`}},aiInsights:[`The average blood oxygen saturation this week was 94.0%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`Soaking feet before bed`,description:`Relieve current anxiety and lower heart rate.`},{icon:`/images/daily_report/2.webp`,title:`Today's nap suggestion`,description:`Relieve current anxiety and lower heart rate.`}]}}async function Kn(e,t){return(await An.post(_n.currentStatus.dimensionDetail,{type:e,date:t})).data}async function qn(e){console.log(`[Daily Service] Fetching healthy daily data for:`,e);let t=await Kn(`fitness`,e);if(t.code!==200)throw Error(t.msg||`Failed to fetch healthy daily data`);return Bn(t)}async function Jn(e){console.log(`[Daily Service] Fetching emotion daily data for:`,e);let t=await Kn(`emotion`,e);if(t.code!==200)throw Error(t.msg||`Failed to fetch emotion daily data`);return Hn(t)}async function Yn(e){console.log(`[Daily Service] Fetching sleep daily data for:`,e);let t=await Kn(`sleep`,e);if(t.code!==200)throw Error(t.msg||`Failed to fetch sleep daily data`);return Wn(t)}var Xn={æ­£å¸¸è¡€åŽ‹:`normal`,æ­£å¸¸:`normal`,æ­£å¸¸é«˜å€¼:`high_normal`,ä½Žè¡€åŽ‹:`low_bp`,é«˜è¡€åŽ‹:`high_bp`,è¿‡ä½Ž:`low_bp`,è¿‡é«˜:`high_bp`};function Zn(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Qn(e,t){return e<90||t<60?`low`:e<120&&t<80?`normal`:e<130&&t<80?`elevated`:`high`}function $n(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:g}=kt(),_=It(h.map(e=>({date:new Date(e.date),dateLabel:Zn(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,systolic:e.systolic||0,diastolic:e.diastolic||0})),(e,t)=>({date:Lt(g,t),dateLabel:``,weekdayKey:e,systolic:0,diastolic:0})),v=(e==null||(n=e.overview)==null?void 0:n.systolic_avg)||0,y=(e==null||(r=e.overview)==null?void 0:r.diastolic_avg)||0,b=Qn(v,y),x=(e==null?void 0:e.comparison)||{},S=((i=x.current)==null?void 0:i.systolic_avg)||v,C=((a=x.previous)==null?void 0:a.systolic_avg)||0,w=((o=x.current)==null?void 0:o.diastolic_avg)||y,T=((s=x.previous)==null?void 0:s.diastolic_avg)||0,E=S-C,D=w-T,O=E>0?`up`:E<0?`down`:`stable`,k=D>0?`up`:D<0?`down`:`stable`,ee=Math.abs(E),A=Math.abs(D),te=_.length>0?{systolic:_[_.length-1].systolic,diastolic:_[_.length-1].diastolic,date:_[_.length-1].date}:null,ne=((e==null||(c=e.statistics)==null?void 0:c.distribution)||[]).map(e=>({...e,type:Xn[e.label]||e.type||`normal`})),j=(e==null?void 0:e.weekly_summary)||{};return{chartData:_,yAxisRange:(e==null||(l=e.trend_chart)==null?void 0:l.y_axis_range)||{min:60,max:160},summary:{avgSystolic:v,avgDiastolic:y,status:b,statusKey:`status.${b}`,systolicTrend:O,diastolicTrend:k,systolicChange:ee,diastolicChange:A,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:ne},comparison:{current:{systolic:((d=x.current)==null?void 0:d.systolic_avg)||v,diastolic:((f=x.current)==null?void 0:f.diastolic_avg)||y},previous:{systolic:((p=x.previous)==null?void 0:p.systolic_avg)||0,diastolic:((m=x.previous)==null?void 0:m.diastolic_avg)||0},insight:x.insight||null},weeklySummary:{overview:j.overview||null,highlights:j.highlights||null,suggestions:j.suggestions||[],dataAnalysis:[]},latestReading:te}}var er=`MEMBRANE`,tr=2;function nr(e,t){let n=(typeof e==`string`?e:JSON.stringify(e))+t.toString(36)+er+tr.toString(16),r=5381;for(let e=0;e<n.length;e++)r=(r<<5)+r+n.charCodeAt(e)>>>0;return r.toString(16).padStart(8,`0`)}function rr(e,t){let n=Date.now(),r=nr(t,n);return Object.freeze({payload:Object.freeze(t),signature:r,epoch:n})}function ir(e){return!e||typeof e.signature!=`string`?!1:nr(e.payload,e.epoch)===e.signature}function ar(e){if(!ir(e))throw Error(`[Membrane:unseal] Integrity violation at epoch ${e.epoch}`);return e.payload}function or(e,t){return rr(e,t)}function sr(e){let{domainKey:t,queryKey:n,queryFn:r,select:i,staleTime:a,gcTime:o,enabled:s,keepPrevious:c}=e,l=Me({queryKey:n,queryFn:r,select:i,staleTime:a,gcTime:o,enabled:s,placeholderData:c?mt:void 0}),u=(0,L.useMemo)(()=>{if(l.data===void 0)return{data:void 0,sealed:null,integrityOk:!1};let e=or(t,l.data),n=ir(e);return{data:ar(e),sealed:e,integrityOk:n}},[l.data,t]);return(0,L.useMemo)(()=>({data:u.data,sealed:u.sealed,integrityOk:u.integrityOk,isLoading:l.isLoading,isFetching:l.isFetching,isError:l.isError,error:l.error,refetch:l.refetch}),[u,l.isLoading,l.isFetching,l.isError,l.error,l.refetch])}const J={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16,LOCK_TIMEOUT:17,WORKER_NOT_READY:18};J.OK,J.CANCELLED,J.UNKNOWN,J.INVALID_ARGUMENT,J.DEADLINE_EXCEEDED,J.NOT_FOUND,J.ALREADY_EXISTS,J.PERMISSION_DENIED,J.RESOURCE_EXHAUSTED,J.FAILED_PRECONDITION,J.ABORTED,J.OUT_OF_RANGE,J.UNIMPLEMENTED,J.INTERNAL,J.UNAVAILABLE,J.DATA_LOSS,J.UNAUTHENTICATED,J.LOCK_TIMEOUT,J.WORKER_NOT_READY,new TextEncoder,new TextDecoder(`utf-8`);const Y={KEEPALIVE:0,WORKER_READY:4294901761,WORKER_SHUTDOWN:4294901762,DIAGNOSTIC_PING:4294901776,DIAGNOSTIC_METRICS:4294901777,AUTH_LOGIN:65537,AUTH_LOGIN_FROM_URL:65538,AUTH_LOGOUT:65539,AUTH_IS_AUTHENTICATED:65540,AUTH_GET_TOKEN:65541,AUTH_ENSURE_AUTH:65542,AUTH_SET_TOKEN_FROM_URL:65543,AUTH_REFRESH_TOKEN:65544,AUTH_GET_AUTH_DATA:65545,STORAGE_GET:131073,STORAGE_SET:131074,STORAGE_REMOVE:131075,STORAGE_CLEAR:131076,STORAGE_KEYS:131077,STORAGE_HAS:131078,STORAGE_GET_BATCH:131079,STORAGE_SET_BATCH:131080,STORAGE_SUBSCRIBE:131081,STORAGE_UNSUBSCRIBE:131082,PREFETCH_WEEKS:196609,PREFETCH_SINGLE:196610,PREFETCH_INVALIDATE:196611,PREFETCH_STATUS:196612,PREFETCH_CANCEL:196613,PREFETCH_WARMUP:196614,PIPELINE_EXECUTE:262145,PIPELINE_EXECUTE_BATCH:262146,PIPELINE_REGISTER:262147,PIPELINE_TRANSDUCE:262148,PIPELINE_SEAL:262149,PIPELINE_UNSEAL:262150,PIPELINE_VERIFY:262151,MUTEX_ACQUIRE:327681,MUTEX_RELEASE:327682,MUTEX_TRY_ACQUIRE:327683,MUTEX_STATUS:327684,RWLOCK_READ_ACQUIRE:327697,RWLOCK_READ_RELEASE:327698,RWLOCK_WRITE_ACQUIRE:327699,RWLOCK_WRITE_RELEASE:327700};var cr=new Map;function X(e,t,n,r=!1,i=1e4,a=!1){cr.set(e,Object.freeze({id:e,name:n,service:t,requiresLock:r,deadlineMs:i,idempotent:a}))}X(Y.KEEPALIVE,`System`,`Keepalive`,!1,1e3,!0),X(Y.WORKER_READY,`System`,`WorkerReady`,!1,5e3,!0),X(Y.WORKER_SHUTDOWN,`System`,`WorkerShutdown`,!1,5e3,!1),X(Y.DIAGNOSTIC_PING,`System`,`DiagnosticPing`,!1,2e3,!0),X(Y.DIAGNOSTIC_METRICS,`System`,`DiagnosticMetrics`,!1,5e3,!0),X(Y.AUTH_LOGIN,`Auth`,`Login`,!0,3e4,!1),X(Y.AUTH_LOGIN_FROM_URL,`Auth`,`LoginFromUrl`,!0,1e4,!1),X(Y.AUTH_LOGOUT,`Auth`,`Logout`,!0,5e3,!1),X(Y.AUTH_IS_AUTHENTICATED,`Auth`,`IsAuthenticated`,!1,2e3,!0),X(Y.AUTH_GET_TOKEN,`Auth`,`GetToken`,!1,2e3,!0),X(Y.AUTH_ENSURE_AUTH,`Auth`,`EnsureAuth`,!0,3e4,!1),X(Y.AUTH_SET_TOKEN_FROM_URL,`Auth`,`SetTokenFromUrl`,!0,5e3,!1),X(Y.AUTH_REFRESH_TOKEN,`Auth`,`RefreshToken`,!0,15e3,!1),X(Y.AUTH_GET_AUTH_DATA,`Auth`,`GetAuthData`,!1,2e3,!0),X(Y.STORAGE_GET,`Storage`,`Get`,!1,2e3,!0),X(Y.STORAGE_SET,`Storage`,`Set`,!0,2e3,!1),X(Y.STORAGE_REMOVE,`Storage`,`Remove`,!0,2e3,!1),X(Y.STORAGE_CLEAR,`Storage`,`Clear`,!0,5e3,!1),X(Y.STORAGE_KEYS,`Storage`,`Keys`,!1,2e3,!0),X(Y.STORAGE_HAS,`Storage`,`Has`,!1,2e3,!0),X(Y.STORAGE_GET_BATCH,`Storage`,`GetBatch`,!1,5e3,!0),X(Y.STORAGE_SET_BATCH,`Storage`,`SetBatch`,!0,5e3,!1),X(Y.STORAGE_SUBSCRIBE,`Storage`,`Subscribe`,!1,2e3,!1),X(Y.STORAGE_UNSUBSCRIBE,`Storage`,`Unsubscribe`,!1,2e3,!1),X(Y.PREFETCH_WEEKS,`Prefetch`,`PrefetchWeeks`,!1,6e4,!0),X(Y.PREFETCH_SINGLE,`Prefetch`,`PrefetchSingle`,!1,3e4,!0),X(Y.PREFETCH_INVALIDATE,`Prefetch`,`Invalidate`,!0,5e3,!1),X(Y.PREFETCH_STATUS,`Prefetch`,`Status`,!1,2e3,!0),X(Y.PREFETCH_CANCEL,`Prefetch`,`Cancel`,!1,5e3,!1),X(Y.PREFETCH_WARMUP,`Prefetch`,`Warmup`,!1,3e4,!0),X(Y.PIPELINE_EXECUTE,`Pipeline`,`Execute`,!0,3e4,!1),X(Y.PIPELINE_EXECUTE_BATCH,`Pipeline`,`ExecuteBatch`,!0,6e4,!1),X(Y.PIPELINE_REGISTER,`Pipeline`,`Register`,!0,5e3,!1),X(Y.PIPELINE_TRANSDUCE,`Pipeline`,`Transduce`,!1,1e4,!0),X(Y.PIPELINE_SEAL,`Pipeline`,`Seal`,!1,5e3,!0),X(Y.PIPELINE_UNSEAL,`Pipeline`,`Unseal`,!1,5e3,!0),X(Y.PIPELINE_VERIFY,`Pipeline`,`Verify`,!1,2e3,!0),X(Y.MUTEX_ACQUIRE,`Mutex`,`Acquire`,!1,1e4,!1),X(Y.MUTEX_RELEASE,`Mutex`,`Release`,!1,2e3,!1),X(Y.MUTEX_TRY_ACQUIRE,`Mutex`,`TryAcquire`,!1,2e3,!1),X(Y.MUTEX_STATUS,`Mutex`,`Status`,!1,2e3,!0),X(Y.RWLOCK_READ_ACQUIRE,`Mutex`,`RWReadAcquire`,!1,1e4,!1),X(Y.RWLOCK_READ_RELEASE,`Mutex`,`RWReadRelease`,!1,2e3,!1),X(Y.RWLOCK_WRITE_ACQUIRE,`Mutex`,`RWWriteAcquire`,!1,1e4,!1),X(Y.RWLOCK_WRITE_RELEASE,`Mutex`,`RWWriteRelease`,!1,2e3,!1);function lr(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function ur(e){let t=ye(),{featureName:n,queryKeyFn:r,fetchFn:i,staleTime:a=300*1e3}=e;return{prefetchPreviousWeeks:(0,L.useCallback)((e,o=3)=>{console.log(`[${n} Prefetch] Starting prefetch of ${o} previous weeks from ${e}`);let s=e;for(let e=1;e<=o;e++){let{start:o,end:c}=At(s),l={startDate:lr(o),endDate:lr(c)};console.log(`[${n} Prefetch] Week -${e}: ${l.startDate} to ${l.endDate}`),t.prefetchQuery({queryKey:r(l),queryFn:()=>i(l),staleTime:a}),s=o}},[t,n,r,i,a])}}const dr={all:[`pipeline`,`bp`],trend:e=>[...dr.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...dr.all,`details`]};function fr(e){return sr({domainKey:`bp`,queryKey:dr.trend(e),queryFn:async()=>Nn(e?{start_date:e.startDate,end_date:e.endDate}:void 0),select:e=>$n(e),staleTime:5*6e4,gcTime:10*6e4,keepPrevious:!0})}function pr(){return ur({featureName:`BP`,queryKeyFn:dr.trend,fetchFn:e=>Nn({start_date:e.startDate,end_date:e.endDate})})}function mr(e){return{ok:!0,value:e}}function hr(e){return{ok:!1,error:e}}function gr(){{let e={BASE_URL:`/`,DEV:!1,LEGACY:!1,MODE:`production`,PROD:!0,SSR:!1};return e.DEV===!0||e.MODE===`development`}try{let e=(typeof globalThis<`u`?globalThis:typeof window<`u`?window:{}).process;if(e!=null&&e.env)return e.env.NODE_ENV===`development`||e.env.MODE===`development`}catch(e){}return!1}var _r=/^\d{4}-\d{2}-\d{2}$/;function vr(e,t,n){let r=Number(e);return Number.isNaN(r)?hr(`expected number`):r<t||r>n?hr(`expected number in [${t}, ${n}]`):mr(r)}function yr(e){return vr(e,0,1)}function br(e){if(typeof e!=`string`)return hr(`expected date string`);let t=e.trim();if(!_r.test(t))return hr(`expected YYYY-MM-DD format`);let n=new Date(t);return Number.isNaN(n.getTime())?hr(`invalid date`):mr(t)}function xr(){try{return new Date().toISOString().split(`T`)[0]}catch(e){return`1970-01-01`}}var Sr=new class{constructor(){this.strategy=gr()?`warn`:`silent`}setStrategy(e){this.strategy=e}getStrategy(){return this.strategy}assert(e,t){if(!e){if(this.strategy===`throw`)throw Error(`[Assert] ${t}`);this.strategy===`warn`&&console.warn(`[Assert] ${t}`)}}assertDateRange(e,t,n){let r=e.getTime(),i=t.getTime();this.assert(r<=i,n?`Date range invalid: start <= end (${n})`:`Date range invalid: start must be <= end`)}};function Cr(e,t){Sr.assert(e,t)}function wr(e,t,n){Sr.assertDateRange(e,t,n)}function Tr(e){let t={};return e.forEach((e,n)=>{t[n]=e}),t}function Er(){let[e]=We();return(0,L.useMemo)(()=>Tr(e),[e])}function Dr(e){let t=Er();if(!(typeof e!=`string`||e.trim()===``))return t[e]}const Or={light:{mode:`light`,background:`#F1EFEE`,cardBackground:`#FFFFFF`,textPrimary:`#1E293B`,textSecondary:`#64748B`,border:`#E2E8F0`},dark:{mode:`dark`,background:`#0F172A`,cardBackground:`#1E293B`,textPrimary:`#F1F5F9`,textSecondary:`#94A3B8`,border:`#334155`}};function kr(){let e=Dr(`theme`);return(0,L.useMemo)(()=>e===`dark`?Or.dark:Or.light,[e])}function Ar(){let[e,t]=(0,L.useState)(()=>kt()),n=(0,L.useMemo)(()=>Mt(e.start),[e.start]);return{dateRange:e,apiDateRange:(0,L.useMemo)(()=>({startDate:Et(e.start),endDate:Et(e.end)}),[e]),displayDateRange:(0,L.useMemo)(()=>({start:Dt(e.start),end:Dt(e.end)}),[e]),canGoNext:n,goToPreviousWeek:(0,L.useCallback)(()=>{t(e=>At(e.start))},[]),goToNextWeek:(0,L.useCallback)(()=>{t(e=>Mt(e.start)&&jt(e.start)||e)},[]),setWeek:(0,L.useCallback)((e,n)=>{Cr(e instanceof Date&&!Number.isNaN(e.getTime()),`setWeek: start must be a valid Date`),Cr(n instanceof Date&&!Number.isNaN(n.getTime()),`setWeek: end must be a valid Date`);let r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0);wr(r,i,`setWeek`),t({start:r,end:i})},[])}}var jr=50,Mr=1.2,Nr=`data-swipe-ignore`;function Pr(e){return!e||!(e instanceof Element)?!1:e.closest(`[${Nr}]`)!==null}function Fr({onSwipeLeft:e,onSwipeRight:t,canSwipeLeft:n=!0,canSwipeRight:r=!0}={}){let i=(0,L.useRef)(null),a=(0,L.useRef)(0),o=(0,L.useRef)(0),s=(0,L.useRef)(0),c=(0,L.useRef)(0),l=(0,L.useRef)(!1),u=(0,L.useRef)(!1);return{containerRef:i,swipeHandlers:{onTouchStart:(0,L.useCallback)(e=>{if(u.current=Pr(e.target),u.current)return;let t=e.touches[0];a.current=t.clientX,o.current=t.clientY,s.current=t.clientX,c.current=t.clientY,l.current=!1},[]),onTouchMove:(0,L.useCallback)(e=>{if(u.current)return;let t=e.touches[0];s.current=t.clientX,c.current=t.clientY;let n=Math.abs(t.clientX-a.current);n>Math.abs(t.clientY-o.current)*Mr&&n>10&&(l.current=!0)},[]),onTouchEnd:(0,L.useCallback)(()=>{if(u.current){u.current=!1;return}if(!l.current)return;let i=s.current-a.current,d=Math.abs(c.current-o.current),f=Math.abs(i);f>=jr&&f>d*Mr&&(i>0&&r?t==null||t():i<0&&n&&(e==null||e())),l.current=!1,a.current=0,o.current=0,s.current=0,c.current=0},[e,t,n,r])}}}function Ir(){let{t:e}=I();return(0,z.jsx)(`div`,{className:`rounded-lg`,style:{backgroundColor:`transparent`,padding:`clamp(12px, 5vw, 20px)`,paddingLeft:`clamp(16px, 4vw, 24px)`,paddingRight:`clamp(16px, 4vw, 24px)`,fontSize:`clamp(12px, 3.5vw, 14px)`,lineHeight:`1.6`,color:kr().textSecondary,textAlign:`center`},children:e(`common.disclaimer`)})}function Lr(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=pr(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=fr(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,z.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(cn,{data:f}),(0,z.jsx)(pn,{data:f}),(0,z.jsx)(mn,{data:f}),(0,z.jsx)(gn,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}function Z({children:e,className:t,style:n,align:r=`center`}){return(0,z.jsx)(`div`,{className:R(`min-h-screen bg-transparent flex`,r===`left`?`items-start justify-start`:`items-center justify-center`,t),style:n,children:e})}function Rr({titleKey:e,value:t,unit:n,trend:r=`stable`,trendValue:i,subMetrics:a=[],accentColor:o,className:s,loadingIndicator:c}){let{t:l}=I(),u={up:Qe,down:Ke,stable:me}[r]||me,d={up:H.trend.up,down:H.trend.down,stable:H.trend.stable}[r]||H.trend.stable;return(0,z.jsxs)(G,{className:R(`relative overflow-hidden`,s),style:{borderLeftWidth:o?`4px`:void 0,borderLeftColor:o},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-600`,children:l(e)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[c,(0,z.jsxs)(`div`,{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium`,style:{backgroundColor:`${d}15`,color:d},children:[(0,z.jsx)(u,{className:`w-3 h-3`}),i&&(0,z.jsx)(`span`,{children:i})]})]})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-2 mb-4`,children:[(0,z.jsx)(`span`,{className:`text-4xl font-bold text-slate-900`,children:t}),(0,z.jsx)(`span`,{className:`text-lg text-slate-500`,children:n})]}),a.length>0&&(0,z.jsx)(`div`,{className:`flex gap-4 pt-3 border-t border-slate-100`,children:a.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex-1`,children:[(0,z.jsx)(`div`,{className:`text-xs text-slate-500 mb-0.5`,children:l(e.labelKey)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-lg font-semibold text-slate-800`,children:e.value}),e.unit&&(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]})]},t))})]})}(0,L.memo)(({className:e})=>{let{t}=I(),{data:n,isLoading:r,isError:i}=fr();if(i||!n||!n.latestReading)return(0,z.jsx)(G,{className:e,children:(0,z.jsx)(Zt,{className:`py-8 text-center`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:t(`common.noData`)})})});let{summary:a,latestReading:o}=n,s=(0,L.useMemo)(()=>a.systolicChange===0?void 0:`${a.systolicChange>0?`+`:``}${a.systolicChange}`,[a.systolicChange]),c=(0,L.useMemo)(()=>[{labelKey:`page.bloodPressure.averageReading`,value:`${a.avgSystolic}/${a.avgDiastolic}`,unit:t(`units.mmHg`)},{labelKey:`status.`+a.status,value:t(a.statusKey)}],[a.avgSystolic,a.avgDiastolic,a.status,a.statusKey,t]);return(0,z.jsx)(Rr,{className:e,titleKey:`vitals.bloodPressure`,value:`${o.systolic}/${o.diastolic}`,unit:t(`units.mmHg`),trend:a.systolicTrend,trendValue:s,accentColor:B.bp,subMetrics:c,loadingIndicator:r&&(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,z.jsx)(F,{className:`w-3 h-3 animate-spin`}),(0,z.jsx)(`span`,{children:t(`common.loading`)})]})})});function zr(){return(0,z.jsx)(Z,{children:(0,z.jsx)(`div`,{className:`w-full max-w-md p-2`,children:(0,z.jsx)(cn,{data:Tt(`data`)||void 0})})})}var Br=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,z.jsxs)(`p`,{className:`text-cyan-300`,children:[r(`common.max`),`: `,i.max,`%`]}),(0,z.jsxs)(`p`,{className:`text-cyan-200`,children:[r(`common.min`),`: `,i.min,`%`]})]}):null});function Vr({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u,d,f,p,m,h;let{t:g}=I(),_=B.spo2,v=(0,L.useMemo)(()=>{let e=Ft(),t=[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],n=[`weekday.mon`,`weekday.tue`,`weekday.wed`,`weekday.thu`,`weekday.fri`,`weekday.sat`,`weekday.sun`],r=[{range:[96,99],avg:97,max:99,min:96},{range:[95,98],avg:97,max:98,min:95},{range:[96,99],avg:98,max:99,min:96},{range:[95,98],avg:97,max:98,min:95},{range:[96,99],avg:97,max:99,min:96},{range:[97,99],avg:98,max:99,min:97},{range:[96,98],avg:97,max:98,min:96}];return t.map((t,i)=>({name:t,weekdayKey:n[i],range:i<=e?r[i].range:[0,0],avg:i<=e?r[i].avg:0,max:i<=e?r[i].max:0,min:i<=e?r[i].min:0}))},[]),y=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?v:t},[e==null?void 0:e.chartData,v]),b=(0,L.useMemo)(()=>()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`,i=r?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?H.trend.down:H.trend.up},children:[(0,z.jsx)(i,{className:`w-3 h-3`}),Math.abs(n)]})},[e]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5`,style:{color:_}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:g(`page.spo2.trendyReport`)})]}),(0,z.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:H.background.summaryBox},children:[(0,z.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:g(`page.spo2.weeksAverage`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:_},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,z.jsx)(`span`,{className:`text-lg text-slate-500`,children:`%`}),b()]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[g(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,`%`]})]}),(0,z.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,z.jsxs)(`p`,{children:[g(`page.spo2.normalRange`),`: 95% - 100%`]})})]}),(0,z.jsxs)(`div`,{className:`flex gap-6`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.max`),`(`,e?g(e.summary.maxWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:_},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.min`),`(`,e?g(e.summary.minWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]})]})]}),(0,z.jsx)(on,{data:y,lines:[{dataKey:`avg`,areaDataKey:`range`,color:_,label:g(`page.spo2.mean`),showArea:!0,gradientId:`spo2RangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?90:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?100:p],renderTooltip:e=>(0,z.jsx)(Br,{...e}),referenceLine:{value:(h=e==null?void 0:e.averageLine)==null?97:h,color:_},height:224})]})}var Hr=[`normal`,`low`,`too_low`],Ur={normal:`status.normal`,low:`status.low`,too_low:`status.tooLow`};function Wr({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=I(),c=B.spo2,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=Hr.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(Ur[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Gt.spo2[e]||`#94A3B8`}});return(0,z.jsx)(un,{title:s(`page.spo2.statistics`),icon:Oe,themeColor:c,donutThickness:12,pieChartSize:`small`,items:d,centerValue:u,centerLabel:s(`common.times`),showCount:!0,columns:1,className:t,isLoading:n})}const Gr=(0,L.memo)(({titleKey:e=`dataAnalysis`,Icon:t,items:n,themeColor:r,className:i,isLoading:a,topContent:o})=>{let{t:s}=I();return(0,z.jsxs)(G,{className:`${i} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${a?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(t,{className:`w-5 h-5`,style:{color:r}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(e)})]}),o&&(0,z.jsx)(`div`,{className:`mb-4`,children:o}),(0,z.jsx)(`div`,{className:`space-y-3`,children:n.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex items-start gap-3 rounded-xl px-4 py-3`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0`,style:{backgroundColor:r}}),(0,z.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e})]},t))})]})});function Kr({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=I(),f=B.spo2,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=[d(`page.spo2.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),d(`page.spo2.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`}),d(`page.spo2.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})];return(0,z.jsx)(Gr,{titleKey:`page.spo2.dataAnalysis`,Icon:ot,items:(p.length>0?p:m).map(e=>{var t;return typeof e==`string`?e:(t=e.content)==null?``:t}).filter(e=>e!==``),themeColor:f,className:t,isLoading:n})}function qr({data:e,className:t,isLoading:n}){let{t:r}=I(),i=B.spo2,a=e==null?void 0:e.weeklySummary;return(0,z.jsx)(hn,{titleKey:`page.spo2.weeklyOverview`,Icon:we,overallText:(a==null?void 0:a.overview)||r(`page.spo2.defaultOverview`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),highlightText:(a==null?void 0:a.highlights)||r(`page.spo2.defaultHighlights`,{defaultValue:`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`}),highlightLabelKey:`page.spo2.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}function Jr(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Yr(e){return e>=95?`normal`:e>=90?`low`:`too_low`}function Xr(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function Zr(e){return e&&Pt[e]||`weekdays.mon`}function Qr(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h;console.log(`[SpO2 Adapter] Input:`,e);let g=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:_}=kt(),v=It(g.map(e=>{var t;let n=new Date(e.date),r=(t=e.avg)==null?Math.round((e.max+e.min)/2):t;return{date:n,dateLabel:Jr(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,max:e.max||0,min:e.min||0,avg:r,range:[e.min||0,e.max||0]}}),(e,t)=>({date:Lt(_,t),dateLabel:``,weekdayKey:e,max:0,min:0,avg:0,range:[0,0]})),y=(e==null||(n=e.overview)==null?void 0:n.average)||0,b=(e==null||(r=e.overview)==null?void 0:r.min)||0,x=(e==null||(i=e.overview)==null?void 0:i.max)||0,S=Zr(e==null||(a=e.overview)==null?void 0:a.max_label),C=Zr(e==null||(o=e.overview)==null?void 0:o.min_label),w=Yr(y),T=(e==null?void 0:e.comparison)||{},E=T.changes||{},D=Xr((s=E.average)==null?void 0:s.trend),O=((c=E.average)==null?void 0:c.value)||0,k=((l=T.previous)==null?void 0:l.average)||0,ee=v.length>0?{avg:v[v.length-1].avg,min:v[v.length-1].min,max:v[v.length-1].max,date:v[v.length-1].date}:null,A=(e==null?void 0:e.weekly_summary)||{},te={overview:A.overview||null,highlights:A.highlights||null,suggestions:A.suggestions||[],dataAnalysis:(A.data_analysis||[]).map(e=>({content:e}))},ne={chartData:v,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:85,max:100},averageLine:(e==null||(d=e.trend_chart)==null?void 0:d.average_line)||y,summary:{avgValue:y,minValue:b,maxValue:x,maxWeekdayKey:S,minWeekdayKey:C,status:w,statusKey:`status.${w}`,trend:D,changeValue:O,totalCount:(e==null||(f=e.statistics)==null?void 0:f.total_count)||0,distribution:(e==null||(p=e.statistics)==null?void 0:p.distribution)||[],previousAvg:k},comparison:{current:{average:((m=T.current)==null?void 0:m.average)||y},previous:{average:((h=T.previous)==null?void 0:h.average)||0},insight:T.insight||null},weeklySummary:te,latestReading:ee};return console.log(`[SpO2 Adapter] Output:`,ne),ne}const $r={all:[`spo2`],trend:e=>[...$r.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...$r.all,`details`]};function ei(e){return Me({queryKey:$r.trend(e),queryFn:async()=>{console.log(`[SpO2 API] Fetching with dateRange:`,e);let t=await In(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[SpO2 API] Result:`,t),t},select:e=>Qr(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function ti(){return ur({featureName:`SpO2`,queryKeyFn:$r.trend,fetchFn:e=>In({start_date:e.startDate,end_date:e.endDate})})}function ni(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=ti(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=ei(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,z.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(Vr,{data:f}),(0,z.jsx)(Wr,{data:f}),(0,z.jsx)(Kr,{data:f}),(0,z.jsx)(qr,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}function ri(){return(0,z.jsx)(Z,{children:(0,z.jsx)(`div`,{className:`w-full max-w-md p-2`,children:(0,z.jsx)(Vr,{data:Tt(`data`)||void 0})})})}var ii=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,z.jsxs)(`p`,{className:`text-red-300`,children:[r(`common.average`),`: `,i.avg]}),(0,z.jsxs)(`p`,{className:`text-red-200`,children:[r(`common.max`),`: `,i.max]}),(0,z.jsxs)(`p`,{className:`text-red-100`,children:[r(`common.min`),`: `,i.min]})]}):null});const ai=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h;let{t:g}=I(),_=B.heartRate,v=(0,L.useMemo)(()=>{let e=Ft(),t=[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],n=[`weekday.mon`,`weekday.tue`,`weekday.wed`,`weekday.thu`,`weekday.fri`,`weekday.sat`,`weekday.sun`],r=[{range:[60,85],avg:72,max:85,min:60},{range:[62,88],avg:75,max:88,min:62},{range:[58,82],avg:70,max:82,min:58},{range:[65,90],avg:78,max:90,min:65},{range:[60,84],avg:72,max:84,min:60},{range:[55,80],avg:68,max:80,min:55},{range:[58,83],avg:70,max:83,min:58}];return t.map((t,i)=>({name:t,weekdayKey:n[i],range:i<=e?r[i].range:[0,0],avg:i<=e?r[i].avg:0,max:i<=e?r[i].max:0,min:i<=e?r[i].min:0}))},[]),y=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?v:t},[e==null?void 0:e.chartData,v]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5`,style:{color:_}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:g(`page.heartRate.trendyReport`)})]}),(0,z.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:H.background.summaryBox},children:[(0,z.jsx)(`div`,{className:`flex items-start justify-between mb-4`,children:(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:g(`page.heartRate.weeksAverage`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:_},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,z.jsxs)(`span`,{className:`text-lg text-slate-500`,children:[`/`,g(`units.minute`)]}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`,i=r?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?H.trend.up:H.trend.down},children:[(0,z.jsx)(i,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[g(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,`/`,g(`units.minute`)]})]})}),(0,z.jsxs)(`div`,{className:`flex gap-6`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.max`),`(`,e?g(e.summary.maxWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:_},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,z.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,g(`units.minute`)]})]})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.min`),`(`,e?g(e.summary.minWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,z.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,g(`units.minute`)]})]})]})]})]}),(0,z.jsx)(on,{data:y,lines:[{dataKey:`avg`,areaDataKey:`range`,color:_,label:g(`page.heartRate.mean`),showArea:!0,gradientId:`hrRangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?50:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?120:p],renderTooltip:e=>(0,z.jsx)(ii,{...e}),referenceLine:{value:(h=e==null?void 0:e.averageLine)==null?72:h,color:_},height:224})]})});var oi=[`too_high`,`high`,`normal`,`slow`],si={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,slow:`status.slow`,low:`status.low`};function ci({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=I(),c=B.heartRate,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=oi.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(si[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Gt.heartRate[e]||`#94A3B8`}});return(0,z.jsx)(un,{title:s(`page.heartRate.statistics`),icon:Oe,themeColor:c,pieChartSize:`medium`,donutThickness:12,items:d,centerValue:u,centerLabel:s(`page.heartRate.totalTests`),showCount:!0,columns:1,className:t,isLoading:n})}function li({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=I(),f=B.heartRate,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=[d(`page.heartRate.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),d(`page.heartRate.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`}),d(`page.heartRate.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})];return(0,z.jsx)(Gr,{titleKey:`page.heartRate.dataAnalysis`,Icon:ot,items:(p.length>0?p:m).map(e=>typeof e==`string`?e:e.content),themeColor:f,className:t,isLoading:n})}function ui({data:e,className:t,isLoading:n}){let{t:r}=I(),i=B.heartRate,a=e==null?void 0:e.weeklySummary;return(0,z.jsx)(hn,{titleKey:`page.heartRate.weeklyOverview`,Icon:we,overallText:(a==null?void 0:a.overview)||r(`page.heartRate.defaultOverview`,{defaultValue:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`}),highlightText:(a==null?void 0:a.highlights)||r(`page.heartRate.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`}),highlightLabelKey:`page.heartRate.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}function di(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function fi(e){return e<60?`low`:e<=100?`normal`:e<=120?`elevated`:`high`}function pi(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function mi(e){var t,n,r,i,a,o,s,c,l,u,d;let f=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:p}=kt(),m=It(f.map(e=>{var t,n,r,i,a,o;let s=new Date(e.date),c=(t=(n=e.max)==null?e.value:n)==null?0:t,l=(r=(i=e.min)==null?e.value:i)==null?0:r,u=(a=(o=e.avg)==null?e.value:o)==null?Math.round((c+l)/2):a;return{date:s,dateLabel:di(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,max:c,min:l,avg:u}}),(e,t)=>({date:Lt(p,t),dateLabel:``,weekdayKey:e,max:0,min:0,avg:0})),h=(e==null?void 0:e.overview)||{},g=h.average||0,_=(n=h.max)==null?m.length>0?Math.max(...m.map(e=>e.max)):0:n,v=(r=h.min)==null?m.length>0?Math.min(...m.map(e=>e.min)):0:r,y=h.max_label&&Pt[h.max_label]||`weekdays.mon`,b=h.min_label&&Pt[h.min_label]||`weekdays.mon`,x=h.resting_avg,S=fi(x||g),C=(e==null?void 0:e.comparison)||{},w=C.changes||{},T=pi((i=w.average)==null?void 0:i.trend),E=((a=w.average)==null?void 0:a.value)||0,D=((o=C.previous)==null?void 0:o.average)||0,O=m.length>0?{value:m[m.length-1].avg,date:m[m.length-1].date}:null,k=(e==null?void 0:e.weekly_summary)||{};return{chartData:m,yAxisRange:(e==null||(s=e.trend_chart)==null?void 0:s.y_axis_range)||{min:40,max:160},averageLine:(e==null||(c=e.trend_chart)==null?void 0:c.average_line)||g,summary:{avgValue:g,minValue:v,maxValue:_,minWeekdayKey:b,maxWeekdayKey:y,previousAvg:D,avgResting:x,status:S,statusKey:`status.${S}`,trend:T,changeValue:E,totalCount:(e==null||(l=e.statistics)==null?void 0:l.total_count)||0,distribution:(e==null||(u=e.statistics)==null?void 0:u.distribution)||[]},comparison:{current:{average:((d=C.current)==null?void 0:d.average)||g},previous:{average:D},insight:C.insight||null},weeklySummary:{overview:k.overview||null,highlights:k.highlights||null,suggestions:k.suggestions||[],dataAnalysis:k.data_analysis||[]},latestReading:O}}const hi={all:[`heart-rate`],trend:e=>[...hi.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...hi.all,`details`]};function gi(e){return Me({queryKey:hi.trend(e),queryFn:async()=>{console.log(`[HR API] Fetching with dateRange:`,e);let t=await Pn(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[HR API] Result:`,t),t},select:e=>mi(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function _i(){return ur({featureName:`HR`,queryKeyFn:hi.trend,fetchFn:e=>Pn({start_date:e.startDate,end_date:e.endDate})})}function vi(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=_i(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=gi(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`text-center py-12`,children:(0,z.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(ai,{data:f}),(0,z.jsx)(ci,{data:f}),(0,z.jsx)(li,{data:f}),(0,z.jsx)(ui,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}function yi(){return(0,z.jsx)(Z,{children:(0,z.jsx)(`div`,{className:`w-full max-w-md p-2`,children:(0,z.jsx)(ai,{data:Tt(`data`)||void 0})})})}var bi=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,z.jsxs)(`p`,{className:`text-amber-300`,children:[r(`common.max`),`: `,i.max,` `,r(`units.mmolL`)]}),(0,z.jsxs)(`p`,{className:`text-amber-200`,children:[r(`common.min`),`: `,i.min,` `,r(`units.mmolL`)]})]}):null});const xi=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y;let{t:b}=I(),x=B.glucose,S=(0,L.useMemo)(()=>{let e=Ft(),t=[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],n=[`weekday.mon`,`weekday.tue`,`weekday.wed`,`weekday.thu`,`weekday.fri`,`weekday.sat`,`weekday.sun`],r=[{range:[4.5,6.5],avg:5.5,max:6.5,min:4.5},{range:[4.8,7],avg:5.8,max:7,min:4.8},{range:[4.6,6.8],avg:5.6,max:6.8,min:4.6},{range:[4.4,6.4],avg:5.4,max:6.4,min:4.4},{range:[4.7,6.9],avg:5.7,max:6.9,min:4.7},{range:[4.5,6.6],avg:5.5,max:6.6,min:4.5},{range:[4.6,6.7],avg:5.6,max:6.7,min:4.6}];return t.map((t,i)=>({name:t,weekdayKey:n[i],range:i<=e?r[i].range:[0,0],avg:i<=e?r[i].avg:0,max:i<=e?r[i].max:0,min:i<=e?r[i].min:0}))},[]),C=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?S:t},[e==null?void 0:e.chartData,S]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5`,style:{color:x}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:b(`page.glucose.trendyReport`)})]}),(0,z.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:H.background.warning},children:[(0,z.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:b(`page.glucose.weeksAverage`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:x},children:(r=e==null||(i=e.summary)==null||(i=i.avgValue)==null?void 0:i.toFixed(1))==null?`--`:r}),(0,z.jsx)(`span`,{className:`text-lg text-slate-500`,children:b(`units.mmolL`)}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#EF4444`:`#10B981`},children:[(0,z.jsx)(r?$e:ze,{className:`w-3 h-3`}),Math.abs(n).toFixed(1)]})})()]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[b(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null||(o=o.previousAvg)==null?void 0:o.toFixed(1))==null?`--`:a,` `,b(`units.mmolL`)]})]}),(0,z.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,z.jsxs)(`p`,{children:[b(`page.glucose.normalRange`),`: `,(s=e==null||(c=e.normalRange)==null?void 0:c.min)==null?3.9:s,`-`,(l=e==null||(u=e.normalRange)==null?void 0:u.max)==null?6.1:l,` `,b(`units.mmolL`)]})})]}),(0,z.jsxs)(`div`,{className:`flex gap-6`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[b(`common.max`),`(`,e?b(e.summary.maxWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:x},children:[(d=e==null||(f=e.summary)==null||(f=f.maxValue)==null?void 0:f.toFixed(1))==null?`--`:d,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:b(`units.mmolL`)})]})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[b(`common.min`),`(`,e?b(e.summary.minWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(p=e==null||(m=e.summary)==null||(m=m.minValue)==null?void 0:m.toFixed(1))==null?`--`:p,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:b(`units.mmolL`)})]})]})]})]}),(0,z.jsx)(on,{data:C,lines:[{dataKey:`avg`,areaDataKey:`range`,color:x,label:b(`page.glucose.mean`),showArea:!0,gradientId:`glucoseRangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(h=e==null||(g=e.yAxisRange)==null?void 0:g.min)==null?3:h,(_=e==null||(v=e.yAxisRange)==null?void 0:v.max)==null?10:_],renderTooltip:e=>(0,z.jsx)(bi,{...e}),referenceLine:{value:(y=e==null?void 0:e.averageLine)==null?5.5:y,color:x},height:224,chartMargin:{top:10,right:10,left:-15,bottom:0}})]})});var Si=[`normal`,`high`,`too_high`,`too_low`],Ci={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,too_low:`status.tooLow`};function wi({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=I(),c=B.glucose,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=(0,L.useMemo)(()=>Si.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(Ci[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Gt.glucose[e]||`#94A3B8`}}),[l,s]),f=(0,L.useMemo)(()=>d.filter(e=>e.type===`normal`).reduce((e,t)=>e+(t.count||0),0),[d]);return(0,z.jsx)(un,{title:s(`page.glucose.statistics`),icon:Oe,themeColor:c,items:d,pieChartSize:`medium`,centerValue:s(`common.good`),centerLabel:s(`common.inAverage`),highlightValue:f,highlightLabel:`/ ${u} ${s(`common.times`)}`,highlightDescription:s(`page.glucose.normalResults`),gridColumns:2,className:t,isLoading:n})}function Ti({data:e,className:t,isLoading:n}){var r,i;let{t:a}=I(),o=B.glucose,s=(r=e==null?void 0:e.comparison)==null?{current:{average:0},previous:{average:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{changeValue:0,trend:`stable`,previousAvg:0,avgFasting:null,avgPostMeal:null}:i,l=e=>e===`up`?(0,z.jsx)($e,{className:`w-4 h-4`}):e===`down`?(0,z.jsx)(ze,{className:`w-4 h-4`}):null,u=e=>e===`up`?`#EF4444`:e===`down`?`#10B981`:o,d=s.insight||a(`page.glucose.defaultInsight`,{defaultValue:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`});return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(ot,{className:`w-5 h-5`,style:{color:o}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.glucose.compareWithLastWeek`)})]}),(0,z.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.averageGlucose`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.average.toFixed(1):`--`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)}),c.changeValue!==0&&(0,z.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:u(c.trend)},children:[l(c.trend),Math.abs(c.changeValue).toFixed(1)]})]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?e.summary.previousAvg.toFixed(1):`--`,a(`units.mmolL`)]})]}),c.avgFasting&&(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.fastingLevel`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgFasting.toFixed(1)}),(0,z.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.fastingNormal`),`: 3.9-6.1`]})]}),!c.avgFasting&&c.avgPostMeal&&(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.postMealLevel`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgPostMeal.toFixed(1)}),(0,z.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.postMealNormal`),`: <7.8`]})]})]}),(0,z.jsx)(`div`,{className:`p-4 rounded-2xl bg-amber-50`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:d})})]})}function Ei({data:e,className:t,isLoading:n}){let{t:r}=I(),i=B.glucose,a=e==null?void 0:e.weeklySummary;return(0,z.jsx)(hn,{titleKey:`page.glucose.weeklyOverview`,Icon:we,overallText:(a==null?void 0:a.overview)||r(`page.glucose.defaultOverview`,{defaultValue:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`}),highlightText:(a==null?void 0:a.highlights)||r(`page.glucose.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`}),highlightLabelKey:`page.glucose.needsAttention`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}var Di={ç©ºè…¹:`vitals.fasting`,é¤åŽ:`vitals.postMeal`,éšæœº:`common.value`};function Oi(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function ki(e){return e<3.9?`low`:e<=6.1?`normal`:e<=7?`elevated`:`high`}function Ai(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function ji(e){var t,n,r,i,a,o,s,c,l,u,d,f;console.log(`[Glucose Adapter] Input:`,e);let p=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:m}=kt(),h=It(p.map(e=>{var t,n,r,i;let a=new Date(e.date),o=(t=(n=e.max)==null?e.value:n)==null?0:t,s=(r=(i=e.min)==null?e.value:i)==null?0:r;return{date:a,dateLabel:Oi(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,max:o,min:s,avg:(o+s)/2,typeKey:e.type?Di[e.type]:void 0}}),(e,t)=>({date:Lt(m,t),dateLabel:``,weekdayKey:e,max:0,min:0,avg:0,typeKey:void 0})),g=(e==null?void 0:e.overview)||{},_=g.average||0,v=(n=g.max)==null?h.length>0?Math.max(...h.map(e=>e.max)):0:n,y=(r=g.min)==null?h.length>0?Math.min(...h.map(e=>e.min)):0:r,b=g.max_label&&Pt[g.max_label]||`weekdays.mon`,x=g.min_label&&Pt[g.min_label]||`weekdays.mon`,S=g.fasting_avg,C=g.post_meal_avg,w=ki(S||_),T=(e==null?void 0:e.comparison)||{},E=T.changes||{},D=Ai((i=E.average)==null?void 0:i.trend),O=((a=E.average)==null?void 0:a.value)||0,k=((o=T.previous)==null?void 0:o.average)||0,ee=h.length>0?{value:h[h.length-1].avg,typeKey:h[h.length-1].typeKey,date:h[h.length-1].date}:null,A=(e==null?void 0:e.normal_range)||(e==null||(s=e.trend_chart)==null?void 0:s.normal_range)||{min:3.9,max:6.1},te=(e==null?void 0:e.weekly_summary)||{},ne={chartData:h,yAxisRange:(e==null||(c=e.trend_chart)==null?void 0:c.y_axis_range)||{min:2,max:9},averageLine:(e==null||(l=e.trend_chart)==null?void 0:l.average_line)||_,normalRange:A,summary:{avgValue:_,minValue:y,maxValue:v,minWeekdayKey:x,maxWeekdayKey:b,previousAvg:k,avgFasting:S,avgPostMeal:C,status:w,statusKey:`status.${w}`,trend:D,changeValue:O,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:(e==null||(d=e.statistics)==null?void 0:d.distribution)||[]},comparison:{current:{average:((f=T.current)==null?void 0:f.average)||_},previous:{average:k},insight:T.insight||null},weeklySummary:{overview:te.overview||null,highlights:te.highlights||null,suggestions:te.suggestions||[],dataAnalysis:te.data_analysis||[]},latestReading:ee};return console.log(`[Glucose Adapter] Output:`,ne),ne}const Mi={all:[`glucose`],trend:e=>[...Mi.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Mi.all,`details`]};function Ni(e){return Me({queryKey:Mi.trend(e),queryFn:async()=>{console.log(`[Glucose API] Fetching with dateRange:`,e);let t=await Fn(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Glucose API] Result:`,t),t},select:e=>ji(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function Pi(){return ur({featureName:`Glucose`,queryKeyFn:Mi.trend,fetchFn:e=>Fn({start_date:e.startDate,end_date:e.endDate})})}function Fi(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=Pi(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=Ni(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`text-center py-12`,children:(0,z.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(xi,{data:f}),(0,z.jsx)(wi,{data:f}),(0,z.jsx)(Ti,{data:f}),(0,z.jsx)(Ei,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}function Ii(){return(0,z.jsx)(Z,{children:(0,z.jsx)(`div`,{className:`w-full max-w-md p-2`,children:(0,z.jsx)(xi,{data:Tt(`data`)||void 0})})})}function Li(e){let{pageId:t,pageName:n,debug:r=!1}=e,[i,a]=(0,L.useState)(!1),o=(0,L.useRef)(null),s=(0,L.useRef)(null),c=(0,L.useCallback)((e,...n)=>{if(!r)return;let i=`[NativeBridge][${t}][${e}]`;console[e===`ERROR`?`error`:e===`WARN`?`warn`:`log`](i,...n)},[r,t]);(0,L.useEffect)(()=>{c(`INFO`,`åˆå§‹åŒ–é€šä¿¡å±‚`);let e={version:`2.0.0`,debug:r,_onDataReceived:null,_onError:null,receiveData:function(e){let n=r?(e,...n)=>{let r=`[NativeBridge][${t}][${e}]`;console.log(r,...n)}:()=>{};n(`INFO`,`æ”¶åˆ°åŽŸç”Ÿæ•°æ®`,typeof e==`string`?e.substring(0,100)+`...`:e);let a=e;if(typeof e==`string`)try{a=JSON.parse(e)}catch(t){n(`ERROR`,`JSON è§£æžå¤±è´¥`,t),this._onError&&this._onError({code:`PARSE_ERROR`,message:t instanceof Error?t.message:`JSON parse failed`,raw:e});return}n(`INFO`,`è§£æžåŽçš„æ•°æ®ï¼š`,a);let o=a;if(o&&o.event===`page-global-animate`){n(`INFO`,`æ”¶åˆ° page-global-animate äº‹ä»¶ï¼Œæ´¾å‘å…¥åœºåŠ¨ç”»ä¿¡å·`),window.dispatchEvent(new CustomEvent(`widget-entrance-animate`,{detail:{event:`page-global-animate`,timestamp:Date.now()}})),i(`dataReceived`,{success:!0,timestamp:Date.now()});return}this._onDataReceived?this._onDataReceived(a):n(`WARN`,`æœªæ³¨å†Œæ•°æ®å›žè°ƒï¼Œæ•°æ®æœªè¢«å¤„ç†`),i(`dataReceived`,{success:!0,timestamp:Date.now()})}};function i(e,n){let i=JSON.stringify({event:e,data:n,pageId:t,timestamp:Date.now()});window.android!==void 0&&typeof window.android.onJsMessage==`function`?window.android.onJsMessage(i):r&&console.log(`[NativeBridge][${t}][WARN]`,`åŽŸç”ŸæŽ¥å£ android.onJsMessage ä¸å­˜åœ¨ï¼ˆå¼€å‘çŽ¯å¢ƒæ­£å¸¸ï¼‰`)}return window.NativeBridge=e,a(!0),i(`pageReady`,{pageId:t,pageName:n,timestamp:Date.now()}),c(`INFO`,`é€šä¿¡å±‚åˆå§‹åŒ–å®Œæˆï¼Œå·²é€šçŸ¥åŽŸç”Ÿé¡µé¢å°±ç»ª`),()=>{c(`INFO`,`é€šä¿¡å±‚é”€æ¯`)}},[t,n,r,c]),(0,L.useEffect)(()=>{window.NativeBridge&&(window.NativeBridge._onDataReceived=o.current,window.NativeBridge._onError=s.current)});let l=(0,L.useCallback)(e=>{o.current=e,window.NativeBridge&&(window.NativeBridge._onDataReceived=e)},[]),u=(0,L.useCallback)(e=>{s.current=e,window.NativeBridge&&(window.NativeBridge._onError=e)},[]),d=(0,L.useCallback)((e,n)=>{let r=JSON.stringify({event:e,data:n,pageId:t,timestamp:Date.now()});c(`INFO`,`å‘é€äº‹ä»¶: ${e}`,n),window.android!==void 0&&typeof window.android.onJsMessage==`function`?window.android.onJsMessage(r):c(`WARN`,`åŽŸç”ŸæŽ¥å£ android.onJsMessage ä¸å­˜åœ¨`)},[c,t]);return{isReady:i,onData:l,onError:u,send:d,requestData:(0,L.useCallback)(e=>{c(`INFO`,`è¯·æ±‚åŽŸç”Ÿæ•°æ®`,e),d(`requestData`,e||{})},[c,d])}}function Ri(e){let{pageId:t,devAutoTriggerDelay:n=300,animateDelay:r=0,disableDevAutoTrigger:i=!1,debug:a=!1}=e,[o,s]=(0,L.useState)(!1),[c,l]=(0,L.useState)(!1),[u,d]=(0,L.useState)(0),f=(0,L.useRef)(!1),p=(0,L.useRef)(null),m=(0,L.useRef)(null),h=(0,L.useCallback)((e,...n)=>{if(!a)return;let r=`[WidgetEntrance][${t}][${e}]`;console[e===`WARN`?`warn`:`log`](r,...n)},[a,t]),g=(0,L.useCallback)(()=>{if(f.current){h(`WARN`,`åŠ¨ç”»å·²è§¦å‘ï¼Œå¿½ç•¥é‡å¤è°ƒç”¨ï¼ˆå¦‚éœ€é‡æ–°æ’­æ”¾è¯·ä½¿ç”¨ replayAnimateï¼‰`);return}f.current=!0,s(!0),h(`INFO`,`å…¥åœºåŠ¨ç”»å·²è§¦å‘`)},[h]),_=(0,L.useCallback)(()=>{f.current=!1,s(!1),h(`INFO`,`åŠ¨ç”»çŠ¶æ€å·²é‡ç½®`)},[h]),v=(0,L.useCallback)(()=>{d(e=>e+1),f.current=!1,s(!1),requestAnimationFrame(()=>{f.current=!0,s(!0),h(`INFO`,`å…¥åœºåŠ¨ç”»å·²é‡æ–°æ’­æ”¾`)})},[h]),y=(0,L.useCallback)((e,n)=>{var r;let i=JSON.stringify({event:e,data:n==null?{}:n,pageId:t,timestamp:Date.now()});(r=window.android)!=null&&r.onJsMessage?(window.android.onJsMessage(i),h(`INFO`,`å‘é€äº‹ä»¶: ${e}`)):h(`WARN`,`android.onJsMessage ä¸å­˜åœ¨ï¼ˆå¼€å‘çŽ¯å¢ƒæ­£å¸¸ï¼‰`)},[t,h]);return(0,L.useEffect)(()=>{h(`INFO`,`åˆå§‹åŒ–å…¥åœºåŠ¨ç”»æŽ§åˆ¶`);let e=e=>{var t;if(((t=e.detail)==null?void 0:t.event)===`page-global-animate`){h(`INFO`,`æ”¶åˆ° page-global-animate äº‹ä»¶ï¼ˆé€šè¿‡ NativeBridgeï¼‰`),p.current&&(clearTimeout(p.current),p.current=null);let e=()=>{f.current?v():g()};r>0?(h(`INFO`,`å»¶è¿Ÿ ${r}ms åŽè§¦å‘åŠ¨ç”»`),m.current=setTimeout(e,r)):e()}};return window.addEventListener(`widget-entrance-animate`,e),l(!0),y(`page-global-ready`,{pageId:t,timestamp:Date.now()}),h(`INFO`,`å·²å‘é€ page-global-ready äº‹ä»¶`),()=>{p.current&&clearTimeout(p.current),m.current&&clearTimeout(m.current),window.removeEventListener(`widget-entrance-animate`,e),h(`INFO`,`å…¥åœºåŠ¨ç”»æŽ§åˆ¶å·²é”€æ¯`)}},[t,n,r,i,h,y,g,v]),{canAnimate:o,isReady:c,animationKey:u,triggerAnimate:g,resetAnimate:_,replayAnimate:v}}var zi=(0,L.createContext)({canAnimate:!1,animationKey:0});function Bi(){return(0,L.useContext)(zi)}var Vi={hidden:{opacity:0},visible:{opacity:1}},Hi={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},Ui={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},Wi={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},Gi={hidden:{opacity:0,scale:.85,y:10},visible:{opacity:1,scale:1,y:0}};function Ki(e){switch(e){case`fade`:return Vi;case`slide`:return Hi;case`slideUp`:return Ui;case`scale`:return Wi;case`spring`:return Gi;default:return Ui}}function qi(e,t){let n=t==null?e===`spring`?.5:.4:t;return e===`spring`?{type:`spring`,stiffness:300,damping:25,duration:n}:{duration:n,ease:[.25,.46,.45,.94]}}function Ji({children:e,animate:t,animationKey:n=0,mode:r=`slideUp`,className:i=``,style:a,stagger:o=!1,staggerDelay:c=.08,initialDelay:l=.05,duration:d}){let f=Ki(r),p=qi(r,d),m={canAnimate:t,animationKey:n};if(!o)return(0,z.jsx)(zi.Provider,{value:m,children:(0,z.jsx)(s,{mode:`wait`,children:(0,z.jsx)(u.div,{className:i,style:a,initial:`hidden`,animate:t?`visible`:`hidden`,variants:f,transition:{...p,delay:l},children:e},n)})});let h=L.Children.toArray(e),g={hidden:{},visible:{transition:{staggerChildren:c,delayChildren:l}}},_={hidden:f.hidden,visible:{...f.visible,transition:p}};return(0,z.jsx)(zi.Provider,{value:m,children:(0,z.jsx)(s,{mode:`wait`,children:(0,z.jsx)(u.div,{className:i,style:a,initial:`hidden`,animate:t?`visible`:`hidden`,variants:g,children:h.map((e,t)=>(0,z.jsx)(u.div,{variants:_,children:e},t))},n)})})}var Yi={none:``,xs:`p-1`,sm:`p-2`,md:`p-4`,lg:`p-6`},Xi={none:``,xs:`pt-1`,sm:`pt-2`,md:`pt-4`,lg:`pt-6`},Zi={none:``,xs:`pb-1`,sm:`pb-2`,md:`pb-4`,lg:`pb-6`},Qi={none:``,xs:`pl-1`,sm:`pl-2`,md:`pl-4`,lg:`pl-6`},$i={none:``,xs:`pr-1`,sm:`pr-2`,md:`pr-4`,lg:`pr-6`},ea={sm:`max-w-sm`,md:`max-w-md`,lg:`max-w-lg`,xl:`max-w-xl`,"2xl":`max-w-2xl`,full:`max-w-full`};function ta(){(0,L.useEffect)(()=>{let e=()=>{let e=window.innerHeight*.01;document.documentElement.style.setProperty(`--vh`,`${e}px`)};return e(),window.addEventListener(`resize`,e),window.addEventListener(`orientationchange`,e),()=>{window.removeEventListener(`resize`,e),window.removeEventListener(`orientationchange`,e)}},[])}function na({children:e,className:t,style:n,fullHeight:r=!0,padding:i=`none`,paddingTop:a,paddingBottom:o,paddingLeft:s,paddingRight:c,maxWidth:l=`full`,centered:u=!1,responsivePadding:d=!1}){ta();let f=d?`p-2 sm:p-3 md:p-4 lg:p-6`:Yi[i],p=[a&&Xi[a],o&&Zi[o],s&&Qi[s],c&&$i[c]].filter(Boolean);return(0,z.jsx)(`div`,{className:R(`w-full`,r&&`min-h-[100dvh] min-h-[calc(var(--vh,1vh)*100)]`,ea[l],u&&`mx-auto`,f,...p,t),style:n,children:e})}function ra(e={}){let{quickAnimationDuration:t=1200}=e,n=(0,L.useRef)(null),r=(0,L.useRef)(!1),i=(0,L.useRef)(!1),a=(0,L.useRef)(null),o=(0,L.useRef)(null),s=(0,L.useCallback)(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),c=(0,L.useCallback)(()=>{let e=n.current;e&&(e.style.opacity=`0`,e.style.visibility=`hidden`,e.querySelectorAll(`.light-bloom, .light-beam-main, .light-beam-hotspot`).forEach(e=>{let t=e;t.style.animation=`none`}))},[]),l=(0,L.useCallback)(()=>{let e=n.current;e&&(e.style.opacity=`1`,e.style.visibility=`visible`)},[]),u=(0,L.useCallback)(()=>{let e=n.current;e&&(r.current=!0,l(),e.querySelectorAll(`.light-bloom, .light-beam-main, .light-beam-hotspot`).forEach(e=>{let n=e;n.style.animation=`none`,n.offsetHeight,n.style.animation=`quickLightMove ${t}ms cubic-bezier(0.25, 0.1, 0.25, 1) forwards`}),s(),a.current=setTimeout(()=>{if(r.current=!1,i.current){var e;i.current=!1,(e=o.current)==null||e.call(o)}else c()},t))},[t,s,l,c]);(0,L.useEffect)(()=>{o.current=u},[u]);let d=(0,L.useCallback)(()=>r.current?(i.current=!0,!1):(u(),!0),[u]);return(0,L.useEffect)(()=>()=>{s()},[s]),{lightGroupRef:n,triggerShine:d}}var ia={pageId:`sleep-score`,pageName:`ç¡çœ è¯„åˆ†å¡ç‰‡`,type:1},aa=200,oa=300,sa={score:88,totalSleepMinutes:375,deepSleepMinutes:248,tags:[{text:`Insufficient deep sleep`,type:`warning`},{text:`Difficulty falling asleep`,type:`warning`},{text:`Good breathing`,type:`good`}]};function ca(e,t,n){return Math.max(t,Math.min(n,e))}function la(e){let t=ca(Math.round(e),0,5999);return{hours:Math.floor(t/60),minutes:t%60}}function ua(e,t=3){return e.slice(0,t)}function da(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[SleepScoreWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[SleepScoreWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return typeof n.score==`number`?{score:n.score,totalSleepMinutes:n.totalSleepMinutes||0,deepSleepMinutes:n.deepSleepMinutes||0,tags:Array.isArray(n.tags)?n.tags:[]}:(console.warn(`[SleepScoreWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ score:`,t),null)}function fa({tag:e}){return(0,z.jsx)(`span`,{className:`px-3 py-1.5 rounded-full text-xs font-medium border text-white max-w-[180px] truncate`,style:{backgroundColor:`rgba(255, 255, 255, 0.2)`,borderColor:`rgba(255, 255, 255, 0.25)`},children:e.text})}function pa({hours:e,minutes:t,label:n,align:r=`left`,t:i}){return(0,z.jsxs)(`div`,{className:`flex flex-col gap-1 ${r===`right`?`items-end`:`items-start`}`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-semibold`,style:{color:B.bp},children:e}),(0,z.jsx)(`span`,{className:`text-sm text-gray-700`,children:i(`widgets.type1.hours`)}),(0,z.jsx)(`span`,{className:`text-2xl font-semibold ml-1`,style:{color:B.bp},children:t}),(0,z.jsx)(`span`,{className:`text-sm text-gray-700`,children:i(`widgets.type1.minutes`)})]}),(0,z.jsx)(`span`,{className:`text-xs`,style:{color:H.text.secondary},children:n})]})}const ma=rt(function(){let{t:e}=I(),[t,n]=(0,L.useState)(sa),r=q.isTestEnv,{onData:i,send:a,isReady:o}=Li({pageId:ia.pageId,pageName:ia.pageName,debug:!1}),{canAnimate:s,animationKey:c}=Ri({pageId:ia.pageId,devAutoTriggerDelay:aa,animateDelay:oa}),{lightGroupRef:l,triggerShine:u}=ra({quickAnimationDuration:1200});(0,L.useEffect)(()=>{i(e=>{console.log(`[SleepScoreWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=da(e);t?(n(t),console.log(`[SleepScoreWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[SleepScoreWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[i]);let d=(0,L.useCallback)(()=>{r&&u(),a(`cardClick`,{pageId:ia.pageId,data:t})},[a,t,r,u]),f=(0,L.useRef)(!1);(0,L.useEffect)(()=>{if(s&&r&&!f.current){f.current=!0;let e=setTimeout(()=>{u()},800);return()=>clearTimeout(e)}},[s,r,u]);let p=la(t.totalSleepMinutes),m=la(t.deepSleepMinutes);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:s,animationKey:c,mode:`spring`,children:(0,z.jsxs)(`div`,{className:`relative overflow-hidden rounded-3xl bg-white cursor-pointer select-none transition-transform duration-200 active:scale-[0.98] active:opacity-90`,onClick:d,children:[(0,z.jsxs)(`div`,{className:`relative rounded-t-3xl p-6 pb-4 ${r?`metal-surface`:``}`,style:{background:B.sleep},children:[r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{className:`layer-grain-texture rounded-t-3xl`}),(0,z.jsx)(`div`,{className:`layer-brushed-metal rounded-t-3xl`}),(0,z.jsx)(`div`,{className:`layer-static-sheen rounded-t-3xl`})]}),(0,z.jsxs)(`div`,{className:`relative z-10 flex justify-between items-start mb-2 ${r?`content-layer`:``}`,children:[(0,z.jsxs)(`div`,{className:`flex flex-col min-w-0`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,z.jsx)(pe,{className:`w-5 h-5 text-white/90 flex-shrink-0`}),(0,z.jsx)(`span`,{className:`text-lg font-medium text-white/95 ${r?`metal-embossed-text`:``}`,children:e(`widgets.type1.title`)})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-6xl sm:text-7xl font-bold text-white leading-none tracking-tight ${r?`metal-embossed-text`:``}`,children:ca(Math.round(t.score),0,100)}),(0,z.jsx)(`span`,{className:`text-xl sm:text-2xl font-normal text-white/80 ${r?`metal-embossed-text`:``}`,children:`/100`})]})]}),(0,z.jsx)(`div`,{className:`flex flex-col gap-2 items-end mt-1 flex-shrink-0 max-w-[200px]`,children:ua(t.tags,3).map((e,t)=>(0,z.jsx)(fa,{tag:e},t))})]}),r&&(0,z.jsxs)(`div`,{ref:l,className:`physics-light-group rounded-t-3xl`,children:[(0,z.jsx)(`div`,{className:`light-bloom`}),(0,z.jsx)(`div`,{className:`light-beam-main`}),(0,z.jsx)(`div`,{className:`light-beam-hotspot`})]}),r&&(0,z.jsx)(`div`,{className:`ambient-top-light rounded-t-3xl`})]}),(0,z.jsxs)(`div`,{className:`relative flex items-start justify-start gap-10 p-6 pt-4 bg-white rounded-b-3xl`,children:[(0,z.jsx)(`div`,{className:`absolute top-0 left-6 right-6 h-px bg-white/15`}),(0,z.jsx)(pa,{hours:p.hours,minutes:p.minutes,label:e(`widgets.type1.totalSleepDuration`),align:`left`,t:e}),(0,z.jsx)(`div`,{className:`flex-1 ml-8`,children:(0,z.jsx)(pa,{hours:m.hours,minutes:m.minutes,label:e(`widgets.type1.deepSleepDuration`),align:`left`,t:e})})]})]})}),!1]})})});var ha={pageId:`sleep-fatigue-comparison`,pageName:`æ·±ç¡ç–²åŠ³å¯¹æ¯”å¡ç‰‡`,type:2},ga=200,_a=200,va={theme:`sleep`,left:{title:`Deep sleep`,value:`45min`,barPercent:45,standardPercent:40,status:`low`,statusText:`Low`},right:{title:`Morning fatigue`,value:`70min`,barPercent:75,standardPercent:55,status:`high`,statusText:`Rise`}};function ya(e){return Math.max(0,Math.min(100,e))}function ba(e,t){return e.length<=t?e:e.slice(0,t-2)+`...`}function xa(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(e){return null}if(!t||typeof t!=`object`||Array.isArray(t))return null;let n=t;return!n.left||!n.right?null:{theme:n.theme===`BP`?`BP`:`sleep`,left:n.left||va.left,right:n.right||va.right}}function Sa({data:e,theme:t,position:n,standardLabel:r}){let i=e.status===`low`,a=e.status===`high`,o;o=t===`sleep`?n===`left`?`#B8DBFF`:`#FF9192`:n===`left`?B.bp:`#FF9192`;let s=i?`text-blue-500`:a?`text-red-500`:`text-slate-500`,c=i?`text-blue-500`:a?`text-red-500`:`text-slate-400`,l=ya(e.barPercent),u=ya(e.standardPercent),d=ba(e.title,16),f=ba(e.value,10),p=ba(e.statusText,8);return(0,z.jsxs)(`div`,{className:`flex-1 flex flex-col items-center max-w-[140px] min-w-0`,children:[(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700 mb-3 text-center truncate max-w-full`,children:d}),(0,z.jsxs)(`div`,{className:`w-full aspect-square bg-slate-50 rounded-xl relative flex items-end justify-center p-3 overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute left-2 right-2 h-px bg-slate-300`,style:{bottom:`${u}%`}}),(0,z.jsx)(`span`,{className:`absolute right-2 text-[10px] text-slate-400 -translate-y-1/2`,style:{bottom:`${u}%`},children:r}),(0,z.jsx)(`div`,{className:`w-3/5 rounded-t-lg transition-all duration-500`,style:{height:`${l}%`,backgroundColor:o}})]}),(0,z.jsxs)(`div`,{className:`flex items-center justify-center gap-1 mt-3 min-w-0 max-w-full`,children:[e.value&&e.value.trim()&&(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700 truncate`,children:f}),i?(0,z.jsx)(Pe,{className:`w-4 h-4 flex-shrink-0 ${c}`}):a?(0,z.jsx)(Ae,{className:`w-4 h-4 flex-shrink-0 ${c}`}):null,(0,z.jsx)(`span`,{className:`text-sm font-medium truncate ${s}`,children:p})]})]})}function Ca(e){return e===`left`?{barColor:`#a5b4fc`,text:`text-indigo-500`,bg:`bg-indigo-50`}:{barColor:`#fda4af`,text:`text-rose-500`,bg:`bg-rose-50`}}function wa({data:e,position:t,standardLabel:n,delay:r=0}){let{canAnimate:i,animationKey:a}=Bi(),o=e.status===`low`,s=Ca(t),c=ya(e.barPercent),l=ya(e.standardPercent),d=ba(e.title,16),f=ba(e.value,10),p=ba(e.statusText,8),m=t===`left`?pe:Ne,h=o?Ke:Qe,g=o?`text-indigo-500`:`text-rose-500`,_=o?`bg-indigo-50`:`bg-rose-50`;return(0,z.jsxs)(`div`,{className:`flex-1 flex flex-col items-center min-w-0 group cursor-pointer`,children:[(0,z.jsxs)(u.div,{initial:{opacity:0,y:5},animate:i?{opacity:1,y:0}:{opacity:0,y:5},transition:{delay:r+.5,duration:.4},className:`text-sm font-medium text-slate-600 mb-3 flex items-center gap-1.5`,children:[(0,z.jsx)(m,{size:14,className:`text-slate-400`}),(0,z.jsx)(`span`,{className:`truncate`,children:d})]},`title-${a}`),(0,z.jsxs)(`div`,{className:`w-full h-36 relative flex items-end justify-center`,children:[(0,z.jsxs)(u.div,{className:`absolute left-0 right-0 flex items-center`,style:{bottom:`${l}%`},initial:{opacity:0,scaleX:0},animate:i?{opacity:1,scaleX:1}:{opacity:0,scaleX:0},transition:{delay:r+.3,duration:.5},children:[(0,z.jsx)(`div`,{className:`flex-1 border-t border-dashed border-slate-300`}),(0,z.jsx)(`span`,{className:`text-[9px] text-slate-400 font-mono tracking-wider ml-1`,children:n})]},`line-${a}`),(0,z.jsxs)(u.div,{initial:{height:0,opacity:0},animate:i?{height:`${c}%`,opacity:1}:{height:0,opacity:0},transition:{type:`spring`,stiffness:100,damping:15,delay:r},className:`w-16 rounded-t-2xl relative z-10 transition-all duration-300 group-hover:w-[4.5rem] group-hover:brightness-105`,style:{backgroundColor:s.barColor},children:[(0,z.jsx)(`div`,{className:`absolute top-0 left-0 right-0 h-[2px] bg-white/40 rounded-full`}),(0,z.jsx)(`div`,{className:`absolute inset-y-0 left-0 w-1/4 bg-gradient-to-r from-white/20 to-transparent rounded-tl-2xl`})]},`bar-${a}`)]}),(0,z.jsxs)(u.div,{initial:{opacity:0,scale:.8},animate:i?{opacity:1,scale:1}:{opacity:0,scale:.8},transition:{delay:r+.3,duration:.3},className:`flex flex-col items-center mt-4 gap-1.5`,children:[e.value&&e.value.trim()&&(0,z.jsx)(`span`,{className:`text-xl font-bold text-slate-800 tabular-nums tracking-tight`,children:f}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1 text-xs font-semibold px-2.5 py-1 rounded-full ${_}`,children:[(0,z.jsx)(h,{size:12,className:g}),(0,z.jsx)(`span`,{className:g,children:p})]})]},`stats-${a}`)]})}const Ta=rt(function(){let{t:e}=I(),[t,n]=(0,L.useState)(va),{onData:r,send:i,isReady:a}=Li({pageId:ha.pageId,pageName:ha.pageName,debug:!1}),{canAnimate:o,animationKey:s}=Ri({pageId:ha.pageId,devAutoTriggerDelay:ga,animateDelay:_a}),c=q.isTestEnv;(0,L.useEffect)(()=>{r(e=>{let t=xa(e);t&&n(t)})},[r]);let l=(0,L.useCallback)(()=>{i(`cardClick`,{pageId:ha.pageId,data:t})},[i,t]),d=e(`widgets.type2.standard`);return c?(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:`transparent`},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:o,animationKey:s,mode:`scale`,children:(0,z.jsx)(`div`,{className:`relative overflow-hidden rounded-3xl bg-transparent p-6 cursor-pointer select-none transition-all duration-200 active:scale-[0.98] active:opacity-90`,onClick:l,children:(0,z.jsxs)(`div`,{className:`relative flex items-end justify-between gap-2 px-2`,children:[(0,z.jsx)(wa,{data:t.left,position:`left`,standardLabel:d,delay:.1}),(0,z.jsx)(`div`,{className:`h-28 flex flex-col items-center justify-center pb-6 opacity-50`,children:(0,z.jsx)(u.div,{animate:{x:[0,4,0]},transition:{repeat:1/0,duration:1.5,ease:`easeInOut`},children:(0,z.jsx)(qe,{className:`text-slate-300`,size:22})})}),(0,z.jsx)(wa,{data:t.right,position:`right`,standardLabel:d,delay:.3})]})})}),!1]})}):(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:`transparent`},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:o,animationKey:s,mode:`slideUp`,children:(0,z.jsx)(`div`,{className:`relative overflow-hidden rounded-2xl bg-transparent p-5 cursor-pointer select-none
                       transition-all duration-200 active:scale-[0.98] active:opacity-90`,onClick:l,children:(0,z.jsxs)(`div`,{className:`relative flex items-center justify-start gap-4`,children:[(0,z.jsx)(Sa,{data:t.left,theme:t.theme||`sleep`,position:`left`,standardLabel:d}),(0,z.jsx)(`div`,{className:`flex items-center justify-center w-8 flex-shrink-0`,children:(0,z.jsx)(Ze,{className:`w-6 h-6 text-orange-500`})}),(0,z.jsx)(Sa,{data:t.right,theme:t.theme||`sleep`,position:`right`,standardLabel:d})]})})}),!1]})})});var Ea={pageId:`nutrition-intake`,pageName:`è¥å…»æ‘„å…¥å¡ç‰‡`,type:3},Da=200,Oa=200,ka={nutritionScore:85,totalCalories:880,warningTitle:`Sodium intake seriously exceeded`,mealIntake:{value:8,unit:`mg`,recommended:5,exceedPercent:40},dailyIntake:{value:28,unit:`mg`,recommended:20,exceedPercent:27},tipText:`Your sodium intake exceeds the daily baseline by 14%, and also surpasses the daily baseline. The excess sodium primarily comes from Kung Pao Chicken and soy sauce.`};function Aa(e,t,n){return Math.max(t,Math.min(n,e))}function ja(e,t){return Aa(Math.max(0,e)/Math.max(.1,t)*100,0,100)}function Ma(e,t=4){return e<0?`0`:e>=1e4?`9999+`:e>=1e3?e.toFixed(0):Number.isInteger(e)?String(e):e.toFixed(1)}function Na(e,t=150){return e.length<=t?e:e.slice(0,t-3)+`...`}function Pa(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[NutritionIntakeWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[NutritionIntakeWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return typeof n.nutritionScore==`number`?{nutritionScore:n.nutritionScore,totalCalories:n.totalCalories||0,warningTitle:n.warningTitle||``,mealIntake:n.mealIntake||ka.mealIntake,dailyIntake:n.dailyIntake||ka.dailyIntake,tipText:n.tipText||``}:(console.warn(`[NutritionIntakeWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ nutritionScore:`,t),null)}function Fa({label:e,intake:t,recommendedLabel:n,exceedLabel:r,delay:i=0}){let{canAnimate:a,animationKey:o}=Bi(),s=ja(t.value,t.recommended),c=t.exceedPercent>0,l=Ma(t.value);return(0,z.jsxs)(u.div,{className:`mb-4 last:mb-0`,initial:{opacity:0,y:8},animate:a?{opacity:1,y:0}:{opacity:0,y:8},transition:{delay:i,duration:.35,ease:`easeOut`},children:[(0,z.jsxs)(`div`,{className:`flex justify-between items-center mb-2 min-w-0`,children:[(0,z.jsx)(`span`,{className:`text-sm text-slate-700 truncate mr-2`,children:e}),(0,z.jsxs)(u.div,{className:`flex items-baseline gap-1 flex-shrink-0`,initial:{opacity:0,scale:.9},animate:a?{opacity:1,scale:1}:{opacity:0,scale:.9},transition:{delay:i+.1,duration:.3},children:[(0,z.jsx)(`span`,{className:`text-2xl font-semibold text-slate-800`,children:l}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:t.unit})]},`value-${o}`)]}),(0,z.jsx)(`div`,{className:`h-2 bg-slate-100 rounded-full overflow-hidden`,children:(0,z.jsx)(u.div,{initial:{width:0},animate:a?{width:`${s}%`}:{width:0},transition:{delay:i+.15,duration:.6,ease:`easeOut`},className:`h-full rounded-full ${c?`bg-gradient-to-r from-amber-400 via-orange-500 to-red-500`:`bg-gradient-to-r from-emerald-400 to-green-500`}`},`bar-${o}`)}),(0,z.jsxs)(`div`,{className:`flex justify-between items-center mt-1.5`,children:[(0,z.jsx)(`span`,{className:`text-xs text-slate-400 truncate mr-2`,children:n}),c&&(0,z.jsx)(u.span,{className:`text-xs font-medium text-orange-500 flex-shrink-0`,initial:{opacity:0},animate:a?{opacity:1}:{opacity:0},transition:{delay:i+.4,duration:.25},children:r},`exceed-${o}`)]})]},`progress-${o}`)}function Ia({data:e,onClick:t,t:n}){let{canAnimate:r,animationKey:i}=Bi();return(0,z.jsxs)(`div`,{className:`relative overflow-hidden rounded-2xl bg-white p-5 cursor-pointer select-none transition-all duration-200 active:scale-[0.98] active:opacity-90`,onClick:t,children:[(0,z.jsxs)(u.div,{className:`relative flex gap-6 sm:gap-10 mb-5 flex-wrap`,initial:{opacity:0,y:10},animate:r?{opacity:1,y:0}:{opacity:0,y:10},transition:{duration:.35,ease:`easeOut`},children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-2 min-w-0`,children:[(0,z.jsx)(u.span,{className:`text-2xl sm:text-3xl font-semibold text-emerald-500`,initial:{opacity:0,scale:.9},animate:r?{opacity:1,scale:1}:{opacity:0,scale:.9},transition:{delay:.1,duration:.3},children:Aa(Math.round(e.nutritionScore),0,100)},`score-${i}`),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:n(`widgets.type3.nutritionalScore`)})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-2 min-w-0`,children:[(0,z.jsx)(u.span,{className:`text-2xl sm:text-3xl font-semibold text-slate-800`,initial:{opacity:0,scale:.9},animate:r?{opacity:1,scale:1}:{opacity:0,scale:.9},transition:{delay:.15,duration:.3},children:Ma(e.totalCalories)},`calories-${i}`),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:n(`widgets.type3.totalCalories`)})]})]},`stats-${i}`),(0,z.jsxs)(`div`,{className:`relative mb-4`,children:[(0,z.jsxs)(u.div,{className:`flex items-center gap-2 mb-4 min-w-0`,initial:{opacity:0,x:-8},animate:r?{opacity:1,x:0}:{opacity:0,x:-8},transition:{delay:.2,duration:.3},children:[(0,z.jsx)(Ie,{className:`w-4 h-4 text-orange-500 flex-shrink-0`}),(0,z.jsx)(`span`,{className:`text-base font-medium text-orange-500 truncate`,children:e.warningTitle.length>30?e.warningTitle.slice(0,28)+`...`:e.warningTitle})]},`warning-${i}`),(0,z.jsx)(Fa,{label:n(`widgets.type3.thisMealIntake`),intake:e.mealIntake,recommendedLabel:n(`widgets.type3.recommendedValue`,{value:Ma(e.mealIntake.recommended),unit:e.mealIntake.unit}),exceedLabel:n(`widgets.type3.exceedPercent`,{percent:Aa(Math.round(e.mealIntake.exceedPercent),0,999)}),delay:.25}),(0,z.jsx)(Fa,{label:n(`widgets.type3.totalDailyIntake`),intake:e.dailyIntake,recommendedLabel:n(`widgets.type3.recommendedValue`,{value:Ma(e.dailyIntake.recommended),unit:e.dailyIntake.unit}),exceedLabel:n(`widgets.type3.exceedPercent`,{percent:Aa(Math.round(e.dailyIntake.exceedPercent),0,999)}),delay:.35})]}),(0,z.jsx)(u.div,{className:`relative bg-amber-50 rounded-xl p-4 overflow-hidden`,initial:{opacity:0,y:8},animate:r?{opacity:1,y:0}:{opacity:0,y:8},transition:{delay:.5,duration:.35},children:(0,z.jsx)(`p`,{className:`text-sm text-amber-900 leading-relaxed line-clamp-4`,children:Na(e.tipText,200)})},`tip-${i}`)]})}function La(){let{t:e}=I(),[t,n]=(0,L.useState)(ka),{onData:r,send:i,isReady:a}=Li({pageId:Ea.pageId,pageName:Ea.pageName,debug:!1}),{canAnimate:o,animationKey:s}=Ri({pageId:Ea.pageId,devAutoTriggerDelay:Da,animateDelay:Oa});(0,L.useEffect)(()=>{r(e=>{console.log(`[NutritionIntakeWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=Pa(e);t?(n(t),console.log(`[NutritionIntakeWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[NutritionIntakeWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[r]);let c=(0,L.useCallback)(()=>{i(`cardClick`,{pageId:Ea.pageId,data:t})},[i,t]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:o,animationKey:s,mode:`slideUp`,children:(0,z.jsx)(Ia,{data:t,onClick:c,t:e})}),!1]})})}var Ra={pageId:`music`,pageName:`éŸ³ä¹æŽ¨è`,type:4},za=200,Ba=200,Va={items:[{order:1,songId:`song_001`,imageUrl:`https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop&q=80`,title:`è½»éŸ³ä¹`,text:`[è½»éŸ³ä¹] (æ”¾æ¾ã€èˆ’ç¼“ã€å‡åŽ‹ã€æ²»æ„ˆ)`},{order:2,songId:`song_002`,imageUrl:`https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop&q=80`,title:`ç¦…éŸ³ç–—æ³•`,text:`ç¦…éŸ³ç–—æ³• | å†¥æƒ³ã€å¤±çœ ç¼“è§£ã€æ”¾æ¾ã€ä¸“æ³¨å·¥ä½œ - çº¯éŸ³ä¹`}]};function Ha(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[MusicWidgetPage] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[MusicWidgetPage] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡ï¼ˆæœ€å¤–å±‚ï¼‰:`,t),null;if(!(`items`in t))return console.warn(`[MusicWidgetPage] ç¼ºå°‘å¿…éœ€å­—æ®µ items:`,t),null;let n=t.items;return Array.isArray(n)?t:(console.warn(`[MusicWidgetPage] items å¿…é¡»æ˜¯æ•°ç»„:`,t),null)}function Ua(e){return!e.items||!Array.isArray(e.items)?[]:[...e.items].sort((e,t)=>e.order-t.order).slice(0,10)}function Wa(e,t){return e?e.length<=t?e:e.slice(0,t-3)+`...`:``}function Ga({item:e,index:t,defaultItem:n,onCardClick:r,recommendListenLabel:i,enableMinWidth:a=!1}){let[o,s]=(0,L.useState)(!1),[c,l]=(0,L.useState)(!1),u=e.imageUrl||e.imageBase64||n.imageUrl,d=Wa(e.text||e.description||n.text||``,80),f=Wa(e.title||n.title||``,12);return(0,z.jsx)(`div`,{className:`group relative overflow-hidden flex-shrink-0 w-[calc(50%-6px)] snap-start cursor-pointer rounded-2xl ${a?`min-w-[calc(50%-6px)]`:``}`,style:{aspectRatio:`3/4`,backgroundColor:`rgba(255,255,255,0.6)`},onClick:r,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),role:`button`,tabIndex:0,onKeyDown:e=>{(e.key===`Enter`||e.key===` `)&&r()},children:(0,z.jsxs)(`div`,{className:`relative overflow-hidden rounded-2xl h-full w-full`,children:[!c&&(0,z.jsx)(`div`,{className:`absolute inset-0`,style:{background:`linear-gradient(135deg, #e5e7eb 0%, #f3f4f6 50%, #e5e7eb 100%)`}}),(0,z.jsx)(`img`,{src:u,alt:f,className:`w-full h-full object-cover block`,style:{opacity:c?1:0,transform:o?`scale(1.1)`:`scale(1)`,filter:o?`brightness(0.75)`:`brightness(1)`,transition:`transform 0.5s ease-out, filter 0.3s ease-out, opacity 0.3s ease-out`},loading:`lazy`,onLoad:()=>l(!0)}),(0,z.jsx)(`div`,{className:`absolute inset-0`,style:{background:`linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.3) 50%, transparent 100%)`,opacity:o?1:.8,transition:`opacity 0.3s ease-out`}}),(0,z.jsx)(`div`,{className:`absolute top-0 left-0 right-0 p-3 flex justify-between items-start`,children:(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full`,style:{backgroundColor:o?`rgba(255,255,255,0.35)`:`rgba(255,255,255,0.2)`,border:`1px solid rgba(255,255,255,0.3)`,transition:`background-color 0.3s ease-out`},children:[(0,z.jsx)(N,{className:`w-3 h-3 text-white`}),(0,z.jsx)(`span`,{className:`text-xs font-medium text-white`,children:f})]})}),(0,z.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 p-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 mb-1.5`,style:{opacity:o?1:0,transform:o?`translateY(0)`:`translateY(8px)`,transition:`opacity 0.3s ease-out, transform 0.3s ease-out`},children:[(0,z.jsx)(Ce,{className:`w-3.5 h-3.5`,style:{color:`#fb923c`}}),(0,z.jsx)(`span`,{className:`text-[11px] font-medium`,style:{color:`#fdba74`},children:i}),(0,z.jsx)(dt,{className:`w-3 h-3`,style:{color:`#facc15`}})]}),(0,z.jsx)(`p`,{className:`text-sm font-medium leading-snug text-white break-words whitespace-normal line-clamp-2`,style:{transform:o?`translateY(0)`:`translateY(4px)`,transition:`transform 0.3s ease-out`},children:d}),(0,z.jsx)(`div`,{className:`mt-2 h-0.5 rounded-full`,style:{background:`linear-gradient(to right, #fb923c, #ec4899, #a855f7)`,width:o?`100%`:`0%`,opacity:o?1:0,transition:`width 0.4s ease-out, opacity 0.3s ease-out`}})]}),(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl pointer-events-none`,style:{boxShadow:o?`0 0 0 2px rgba(251,146,60,0.5)`:`0 0 0 0px transparent`,transition:`box-shadow 0.3s ease-out`}})]})})}function Ka(){let{t:e}=I(),[t,n]=(0,L.useState)(Va),{onData:r,send:i,isReady:a}=Li({pageId:Ra.pageId,pageName:Ra.pageName,debug:!1}),{canAnimate:o,animationKey:s}=Ri({pageId:Ra.pageId,devAutoTriggerDelay:za,animateDelay:Ba});(0,L.useEffect)(()=>{r(e=>{console.log(`[MusicWidgetPage] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=Ha(e);t&&t.items.length>0?(n(t),console.log(`[MusicWidgetPage] æ¸²æŸ“å®Œæˆï¼Œå…±`,t.items.length,`å¼ å¡ç‰‡`)):console.warn(`[MusicWidgetPage] è§£æžåŽæ•°æ®ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[r]);let c=(0,L.useCallback)(e=>{console.log(`[MusicWidgetPage] å¡ç‰‡ç‚¹å‡»:`,e.order,e.songId),i(`cardClick`,{order:e.order,songId:e.songId,card:e})},[i]),l=(0,L.useMemo)(()=>Ua(t),[t]),u=(0,L.useMemo)(()=>Ua(Va),[]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,paddingTop:`sm`,paddingLeft:`sm`,paddingRight:`sm`,children:[(0,z.jsxs)(Ji,{animate:o,animationKey:s,mode:`slideUp`,stagger:!0,staggerDelay:.12,children:[(0,z.jsxs)(`div`,{className:`mb-3`,children:[(0,z.jsx)(`h2`,{className:`text-base font-semibold text-gray-800 leading-tight`,children:e(`widgets.type4.title`)}),(0,z.jsx)(`p`,{className:`text-xs text-gray-500`,children:e(`widgets.type4.subtitle`)})]}),l.length>0?(0,z.jsx)(`div`,{className:`flex gap-3 w-full ${l.length>2?`overflow-x-auto snap-x snap-mandatory scrollbar-hide touch-pan-x`:`overflow-hidden`}`,children:l.map((t,n)=>(0,z.jsx)(Ga,{item:t,index:n,defaultItem:u[n]||u[0],onCardClick:()=>c(t),recommendListenLabel:e(`widgets.type4.recommendListen`),enableMinWidth:l.length>2},t.songId||t.order||n))}):(0,z.jsx)(`div`,{className:`flex items-center justify-center py-8 text-gray-400 text-sm`,children:e(`widgets.type4.noMusic`)})]}),!1]})})}var qa={pageId:`vital-overview`,pageName:`å¥åº·ä½“å¾æ€»è§ˆå¡ç‰‡`,type:5},Ja=200,Ya=200,Xa={hidden:{},visible:{transition:{staggerChildren:.08,delayChildren:.1}}},Za={hidden:{opacity:0,y:16,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:[.25,.46,.45,.94]}}},Qa={heartRate:{value:68,unit:`bpm`,statusText:`steady rhythm`,status:`normal`},bloodPressure:{systolic:115,diastolic:75,unit:`mmHg`,statusText:`Slightly high SBP`,status:`warning`,highlighted:!0},spo2:{value:98,unit:`%`,statusText:`Sufficient oxygen supply`,status:`normal`},poct:{value:5.1,unit:`mmol/L`,statusText:`Normal metabolism`,status:`normal`}};function $a(e,t,n){return Math.max(t,Math.min(n,e))}function eo(e,t){if(typeof e==`string`)return e;switch(t){case`heart-rate`:return String($a(Math.round(e),0,999));case`spo2`:return String($a(Math.round(e),0,100));case`poct`:return $a(e,0,99.9).toFixed(1);default:return String(e)}}function to(e,t){return e.length<=t?e:e.slice(0,t-2)+`...`}function no(e){switch(e){case`normal`:return`rgb(34, 197, 94)`;case`warning`:return`rgb(249, 115, 22)`;case`danger`:return`rgb(239, 68, 68)`;default:return`rgb(34, 197, 94)`}}function ro(e){switch(e){case`heart-rate`:return B.bp;case`blood-pressure`:return B.bp;case`spo2`:return B.spo2;case`poct`:return B.glucose;default:return B.bp}}function io(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[VitalOverviewWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[VitalOverviewWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return!n.heartRate||!n.bloodPressure||!n.spo2||!n.poct?(console.warn(`[VitalOverviewWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ:`,t),null):t}function ao({type:e,className:t}){switch(e){case`heart-rate`:return(0,z.jsx)(`div`,{className:`w-6 h-6 flex items-center justify-center ${t}`,children:(0,z.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,className:`w-5 h-5`,children:(0,z.jsx)(`path`,{d:`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z`,fill:B.heartRate})})});case`blood-pressure`:return(0,z.jsx)(`div`,{className:`w-6 h-6 flex items-center justify-center ${t}`,children:(0,z.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,className:`w-5 h-5`,children:[(0,z.jsx)(`path`,{d:`M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7z`,fill:B.bp}),(0,z.jsx)(`circle`,{cx:`12`,cy:`9`,r:`2.5`,fill:`white`})]})});case`spo2`:return(0,z.jsx)(`div`,{className:`w-6 h-6 flex items-center justify-center ${t}`,children:(0,z.jsx)(`div`,{className:`w-5 h-5 rounded flex items-center justify-center text-white text-xs font-bold`,style:{backgroundColor:B.spo2},children:`O`})});case`poct`:return(0,z.jsx)(`div`,{className:`w-6 h-6 flex items-center justify-center ${t}`,children:(0,z.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,className:`w-5 h-5`,children:[(0,z.jsx)(`rect`,{x:`4`,y:`6`,width:`4`,height:`12`,rx:`1`,fill:B.glucose}),(0,z.jsx)(`rect`,{x:`10`,y:`4`,width:`4`,height:`14`,rx:`1`,fill:B.glucose}),(0,z.jsx)(`rect`,{x:`16`,y:`8`,width:`4`,height:`10`,rx:`1`,fill:B.glucose})]})});default:return null}}function oo({type:e,title:t,value:n,subValue:r,unit:i,statusText:a,status:o,highlighted:s,isActive:c,onClick:l}){let u=no(o),d=ro(e),f=e===`blood-pressure`?n:eo(n,e),p=r===void 0?void 0:String($a(Number(r),0,999)),m=e===`blood-pressure`?String($a(Number(n),0,999)):f,h=to(a,20);return(0,z.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 cursor-pointer select-none transition-all duration-200 border-2 overflow-hidden`,style:{borderColor:c?d:H.card.border},onClick:l,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,z.jsx)(ao,{type:e}),(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700 truncate`,children:t})]}),(0,z.jsx)(`div`,{className:`flex items-baseline gap-1 mb-1 min-w-0`,children:p===void 0?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`span`,{className:`text-2xl sm:text-3xl font-bold text-slate-800 truncate`,children:f}),(0,z.jsx)(`span`,{className:`text-xs sm:text-sm text-slate-500 ml-1 flex-shrink-0`,children:i})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(`span`,{className:`text-2xl sm:text-3xl font-bold text-slate-800 truncate`,children:[m,`/`,p]}),(0,z.jsx)(`span`,{className:`text-xs sm:text-sm text-slate-500 ml-1 flex-shrink-0`,children:i})]})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 min-w-0`,children:[(0,z.jsx)(`div`,{className:`w-2 h-2 rounded-full flex-shrink-0`,style:{backgroundColor:u}}),(0,z.jsx)(`span`,{className:`text-xs truncate`,style:{color:u},children:h})]})]})}function so(){let{t:e}=I(),[t,n]=(0,L.useState)(Qa),[r,i]=(0,L.useState)(null),{onData:a,send:o,isReady:s}=Li({pageId:qa.pageId,pageName:qa.pageName,debug:!1}),{canAnimate:c,animationKey:l}=Ri({pageId:qa.pageId,devAutoTriggerDelay:Ja,animateDelay:Ya});(0,L.useEffect)(()=>{a(e=>{console.log(`[VitalOverviewWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=io(e);if(t)n(t),console.log(`[VitalOverviewWidget] ä½“å¾æ€»è§ˆæ¸²æŸ“å®Œæˆ`);else{let t=typeof e==`string`?(()=>{try{return JSON.parse(e)}catch(e){return{}}})():e;if(t&&typeof t==`object`){var r;let e=io((r=t.vital_overview_card)==null?t:r);e&&n(e)}}})},[a]);let d=(0,L.useCallback)(e=>{i(t=>t===e?null:e),o(`cardClick`,{pageId:qa.pageId,cardType:e,data:t})},[o,t]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsxs)(u.div,{className:`grid grid-cols-2 gap-3`,initial:`hidden`,animate:c?`visible`:`hidden`,variants:Xa,children:[(0,z.jsx)(u.div,{variants:Za,children:(0,z.jsx)(oo,{type:`heart-rate`,title:e(`widgets.type5.heartRate`),value:t.heartRate.value,unit:t.heartRate.unit,statusText:t.heartRate.statusText,status:t.heartRate.status,highlighted:t.heartRate.highlighted,isActive:r===`heart-rate`,onClick:()=>d(`heart-rate`)})}),(0,z.jsx)(u.div,{variants:Za,children:(0,z.jsx)(oo,{type:`blood-pressure`,title:e(`widgets.type5.bloodPressure`),value:t.bloodPressure.systolic,subValue:t.bloodPressure.diastolic,unit:t.bloodPressure.unit,statusText:t.bloodPressure.statusText,status:t.bloodPressure.status,highlighted:t.bloodPressure.highlighted,isActive:r===`blood-pressure`,onClick:()=>d(`blood-pressure`)})}),(0,z.jsx)(u.div,{variants:Za,children:(0,z.jsx)(oo,{type:`spo2`,title:e(`widgets.type5.spo2`),value:t.spo2.value,unit:t.spo2.unit,statusText:t.spo2.statusText,status:t.spo2.status,highlighted:t.spo2.highlighted,isActive:r===`spo2`,onClick:()=>d(`spo2`)})}),(0,z.jsx)(u.div,{variants:Za,children:(0,z.jsx)(oo,{type:`poct`,title:e(`widgets.type5.poct`),value:t.poct.value,unit:t.poct.unit,statusText:t.poct.statusText,status:t.poct.status,highlighted:t.poct.highlighted,isActive:r===`poct`,onClick:()=>d(`poct`)})})]},l),!1]})})}var co={pageId:`sodium-bp`,pageName:`é’ æ‘„å…¥ä¸Žè¡€åŽ‹å…³è”å¡ç‰‡`,type:6},lo=200,uo=200,fo={intake:{value:8,unit:`mg`,label:`Sodium intake per meal`,percent:60,level:`danger`},alert:{text:`BP sharp rise`,label:`Sodium intake per meal`,level:`danger`}};function po(e){return Math.max(0,Math.min(100,e))}function mo(e,t){return e.length<=t?e:e.slice(0,t-2)+`...`}function ho(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[SodiumBPWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[SodiumBPWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return!n.intake||!n.alert?(console.warn(`[SodiumBPWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ intake æˆ– alert:`,t),null):t}function go({text:e,level:t}){let n=mo(e,18);return(0,z.jsxs)(`div`,{className:`flex flex-col items-center justify-center p-4 rounded-2xl transition-all duration-200`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-2`,children:(0,z.jsx)(`img`,{src:`/images/widgets/sodium.png`,alt:`Sodium`,className:`w-full h-full object-contain`})}),(0,z.jsx)(`span`,{className:`text-sm font-medium px-3 py-1 rounded-full text-center max-w-full truncate`,style:{backgroundColor:t===`danger`?`rgba(254, 226, 226, 0.8)`:t===`warning`?`rgba(254, 243, 199, 0.8)`:`rgba(220, 252, 231, 0.8)`,color:t===`danger`?`rgb(220, 38, 38)`:t===`warning`?`rgb(217, 119, 6)`:`rgb(22, 163, 74)`},children:n})]})}function _o(){let{t:e}=I(),[t,n]=(0,L.useState)(fo),{onData:r,send:i,isReady:a}=Li({pageId:co.pageId,pageName:co.pageName,debug:!1}),{canAnimate:o,animationKey:s}=Ri({pageId:co.pageId,devAutoTriggerDelay:lo,animateDelay:uo});(0,L.useEffect)(()=>{r(e=>{console.log(`[SodiumBPWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=ho(e);t?(n(t),console.log(`[SodiumBPWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[SodiumBPWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[r]);let c=(0,L.useCallback)(()=>{i(`cardClick`,{pageId:co.pageId,cardType:`intake`,data:t.intake})},[i,t.intake]),l=(0,L.useCallback)(()=>{i(`cardClick`,{pageId:co.pageId,cardType:`alert`,data:t.alert})},[i,t.alert]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`lg`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:o,animationKey:s,mode:`scale`,children:(0,z.jsxs)(`div`,{className:`relative flex items-stretch justify-center gap-3`,children:[(0,z.jsxs)(`div`,{className:`flex-1 rounded-2xl p-4 cursor-pointer select-none transition-all duration-200 flex flex-col items-center justify-between min-h-[172px]`,onClick:c,children:[(0,z.jsx)(`div`,{className:`flex-1 flex flex-col items-center justify-center`,children:(0,z.jsxs)(`div`,{className:`relative`,style:{width:100,height:100},children:[(0,z.jsx)(g,{width:`100%`,height:`100%`,children:(0,z.jsx)(T,{cx:`50%`,cy:`50%`,innerRadius:`70%`,outerRadius:`100%`,startAngle:90,endAngle:-270,data:[{name:`bg`,value:100,fill:`rgb(229, 231, 235)`},{name:`value`,value:po(t.intake.percent),fill:B.nutrition}],barSize:10,children:(0,z.jsx)(w,{dataKey:`value`,cornerRadius:5,background:!1})})}),(0,z.jsxs)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold truncate max-w-[60px]`,style:{color:B.nutrition},children:Math.max(0,Math.min(9999,t.intake.value))}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500 ml-0.5 flex-shrink-0`,children:t.intake.unit})]})]})}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 text-center mt-2`,children:t.intake.label})]}),(0,z.jsx)(`div`,{className:`flex items-center justify-center flex-shrink-0`,children:(0,z.jsx)(Ze,{className:`w-5 h-5`,style:{color:B.nutrition}})}),(0,z.jsxs)(`div`,{className:`flex-1 rounded-2xl p-4 cursor-pointer select-none transition-all duration-200 flex flex-col justify-between min-h-[172px]`,onClick:l,children:[(0,z.jsx)(go,{text:t.alert.text,level:t.alert.level}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 text-center mt-2`,children:t.alert.label})]})]})}),!1]})})}var vo={pageId:`weekly-health-score`,pageName:`æ¯å‘¨å¥åº·åˆ†æ•°å¡ç‰‡`,type:7},yo=200,bo=200,xo={weeklyScore:92,maxScore:100,weekNumber:42,evaluationText:`è¡¨çŽ°æžä½³ï¼Œä¿æŒè¿™ä¸ªèŠ‚å¥`,daysToTargetText:`5 days to reach target`,pointsHigherThanLastWeekText:`12 points higher than last week`,metrics:[{type:`sleep`,label:`Sleep duration`,value:324,unit:`min`},{type:`exercise`,label:`Exercise`,value:3,unit:`times`},{type:`dietary`,label:`Dietary`,value:`Goal`,unit:``}]};function So(e,t,n,r){let i=r?r(`widgets.type7.min`):`min`,a=r?r(`widgets.type7.h`):`h`,o=r?` ${r(`widgets.type7.times`)}`:` times`,s=r?r(`widgets.type7.goal`):`Goal`;if(e===`sleep`&&typeof t==`number`){let e=Math.max(0,Math.min(5999,Math.round(t))),n=Math.floor(e/60),r=e%60;return n===0?{main:``,suffix:``,segments:[{text:String(r),isValue:!0},{text:i,isValue:!1}]}:r===0?{main:``,suffix:``,segments:[{text:String(n),isValue:!0},{text:a,isValue:!1}]}:{main:``,suffix:``,segments:[{text:String(n),isValue:!0},{text:a,isValue:!1},{text:String(r),isValue:!0},{text:i,isValue:!1}]}}return e===`exercise`&&typeof t==`number`?{main:String(t),suffix:o,segments:void 0}:e===`dietary`?{main:typeof t==`string`&&t!==`Goal`?t:s,suffix:``,segments:void 0}:{main:String(t),suffix:n?` ${n}`:``,segments:void 0}}function Co(e){switch(e){case`sleep`:return{bg:Ut.sleep,iconColor:B.sleep};case`exercise`:return{bg:Ut.spo2,iconColor:B.spo2};case`dietary`:return{bg:Wt.alpha,iconColor:Wt.primary};default:return{bg:`rgb(248, 248, 248)`,iconColor:`rgb(31, 41, 55)`}}}function wo(e,t){switch(e){case`sleep`:return{icon:pe,title:t(`widgets.type7.backTips.sleep.title`),tip:t(`widgets.type7.backTips.sleep.tip`)};case`exercise`:return{icon:De,title:t(`widgets.type7.backTips.exercise.title`),tip:t(`widgets.type7.backTips.exercise.tip`)};case`dietary`:return{icon:ve,title:t(`widgets.type7.backTips.dietary.title`),tip:t(`widgets.type7.backTips.dietary.tip`)}}}function To(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=e;if(typeof e==`string`)try{h=JSON.parse(e)}catch(e){return null}let g=h,_=(t=g.weekly_health_score_card)==null?g:t;if(typeof _.weeklyScore!=`number`||typeof _.weekNumber!=`number`||!Array.isArray(_.metrics)||_.metrics.length<3)return null;let v=_.metrics[0],y=_.metrics[1],b=_.metrics[2];return{weeklyScore:_.weeklyScore,maxScore:(n=_.maxScore)==null?100:n,weekNumber:_.weekNumber,evaluationText:(r=_.evaluationText)==null?_.evaluation_text:r,daysToTargetText:(i=_.daysToTargetText)==null?_.days_to_target_text:i,pointsHigherThanLastWeekText:(a=_.pointsHigherThanLastWeekText)==null?_.points_higher_than_last_week_text:a,metrics:[{type:`sleep`,label:(o=v.label)==null?`Sleep duration`:o,value:(s=v.value)==null?0:s,unit:(c=v.unit)==null?`min`:c},{type:`exercise`,label:(l=y.label)==null?`Exercise`:l,value:(u=y.value)==null?0:u,unit:(d=y.unit)==null?`times`:d},{type:`dietary`,label:(f=b.label)==null?`Dietary`:f,value:(p=b.value)==null?`Goal`:p,unit:(m=b.unit)==null?``:m}]}}function Eo(e,t){switch(e){case`sleep`:return t(`widgets.type7.sleepDuration`);case`exercise`:return t(`widgets.type7.exercise`);case`dietary`:return t(`widgets.type7.dietary`);default:return``}}function Do({type:e,value:t,unit:n,t:r}){let[i,a]=(0,L.useState)(!1),o=Co(e),{main:s,suffix:c,segments:l}=So(e,t,n,r),d=e===`sleep`?pe:e===`exercise`?Oe:at,f=wo(e,r),p=f.icon,m=Eo(e,r);return(0,z.jsx)(`div`,{className:`relative cursor-pointer select-none`,style:{perspective:`1000px`},onClick:()=>a(!i),children:(0,z.jsxs)(u.div,{className:`relative w-full`,style:{transformStyle:`preserve-3d`},animate:{rotateY:i?180:0},transition:{duration:.5,ease:`easeInOut`},children:[(0,z.jsxs)(`div`,{className:`rounded-2xl p-4 flex flex-col items-center justify-center text-center`,style:{backgroundColor:o.bg,backfaceVisibility:`hidden`},children:[(0,z.jsx)(`div`,{className:`flex justify-center mb-2`,children:(0,z.jsx)(d,{className:`w-6 h-6`,style:{color:o.iconColor}})}),(0,z.jsx)(`div`,{className:`text-sm font-medium text-slate-600 mb-1 w-full text-center`,children:m}),(0,z.jsx)(`div`,{className:`text-base font-semibold text-slate-800 w-full text-center`,children:l?l.map((e,t)=>(0,z.jsx)(`span`,{children:e.text},t)):(0,z.jsxs)(z.Fragment,{children:[s,c]})})]}),(0,z.jsxs)(`div`,{className:`absolute inset-0 rounded-2xl p-2 flex flex-col items-center justify-center text-center gap-1`,style:{backgroundColor:o.bg,backfaceVisibility:`hidden`,transform:`rotateY(180deg)`},children:[(0,z.jsx)(p,{className:`w-5 h-5 flex-shrink-0`,style:{color:o.iconColor}}),(0,z.jsx)(`div`,{className:`text-[13px] text-slate-600 leading-snug whitespace-pre-line`,children:f.tip})]})]})})}function Oo({data:e,t,onSummaryClick:n}){var r;let[i,a]=(0,L.useState)(!1),o=(r=e.maxScore)==null?100:r;return(0,z.jsx)(`div`,{className:`relative cursor-pointer select-none mb-3`,style:{perspective:`1000px`},onClick:e=>{e.target.closest(`button`)||a(!i)},children:(0,z.jsxs)(u.div,{className:`relative w-full`,style:{transformStyle:`preserve-3d`},animate:{rotateY:i?180:0},transition:{duration:.6,ease:`easeInOut`},children:[(0,z.jsxs)(`div`,{className:`rounded-2xl p-4 text-white`,style:{backgroundColor:qt.weeklyScoreHeader,backfaceVisibility:`hidden`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(ot,{className:`w-5 h-5`}),(0,z.jsx)(`span`,{className:`text-sm font-medium`,children:t(`widgets.type7.weeklyHealthScore`)})]}),(0,z.jsx)(`button`,{type:`button`,className:`px-3 py-1.5 rounded-xl text-sm font-medium`,style:{backgroundColor:qt.weeklyScoreButtonBg,color:qt.weeklyScoreButtonText},onClick:n,children:t(`widgets.type7.weekSummary`,{week:e.weekNumber})})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1 mb-2`,children:[(0,z.jsx)(`span`,{className:`text-4xl font-bold`,children:e.weeklyScore}),(0,z.jsxs)(`span`,{className:`text-lg opacity-90`,children:[`/ `,o]})]}),e.evaluationText!=null&&e.evaluationText!==``&&(0,z.jsx)(`div`,{className:`text-sm opacity-95 mb-3`,children:e.evaluationText}),(0,z.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[e.daysToTargetText!=null&&e.daysToTargetText!==``&&(0,z.jsx)(`span`,{className:`px-2.5 py-1 rounded-lg text-sm`,style:{backgroundColor:qt.weeklyScoreButtonBg},children:e.daysToTargetText}),e.pointsHigherThanLastWeekText!=null&&e.pointsHigherThanLastWeekText!==``&&(0,z.jsx)(`span`,{className:`px-2.5 py-1 rounded-lg text-sm`,style:{backgroundColor:qt.weeklyScoreButtonBg},children:e.pointsHigherThanLastWeekText})]})]}),(0,z.jsxs)(`div`,{className:`absolute inset-0 rounded-2xl p-5 text-white flex flex-col items-center justify-center`,style:{backgroundColor:qt.weeklyScoreHeader,backfaceVisibility:`hidden`,transform:`rotateY(180deg)`},children:[(0,z.jsx)(dt,{className:`w-8 h-8 mb-3`}),(0,z.jsx)(`p`,{className:`text-base font-medium text-center leading-relaxed mb-3`,children:t(`widgets.type7.backTips.main.tip1`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl`,style:{backgroundColor:qt.weeklyScoreButtonBg},children:[(0,z.jsx)(xe,{className:`w-4 h-4 text-red-300`}),(0,z.jsx)(`span`,{className:`text-sm`,children:t(`widgets.type7.backTips.main.tip2`)})]})]})]})})}function ko(){let{t:e}=I(),[t,n]=(0,L.useState)(xo),{onData:r,send:i,isReady:a}=Li({pageId:vo.pageId,pageName:vo.pageName,debug:!1}),{canAnimate:o,animationKey:s}=Ri({pageId:vo.pageId,devAutoTriggerDelay:yo,animateDelay:bo});return(0,L.useEffect)(()=>{r(e=>{let t=To(e);t&&n(t)})},[r]),(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,paddingTop:`sm`,paddingLeft:`sm`,paddingRight:`sm`,children:[(0,z.jsxs)(Ji,{animate:o,animationKey:s,mode:`spring`,stagger:!0,staggerDelay:.1,children:[(0,z.jsx)(Oo,{data:t,t:e,onSummaryClick:()=>{i(`summaryClick`,{pageId:vo.pageId,weekNumber:t.weekNumber})}}),(0,z.jsx)(`div`,{className:`grid grid-cols-3 gap-3`,children:t.metrics.map(t=>(0,z.jsx)(Do,{type:t.type,value:t.value,unit:t.unit,t:e},t.type))})]}),!1]})})}var Ao={pageId:`sbp-sleep-trend`,pageName:`SBPä¸Žç¡çœ è¶‹åŠ¿å›¾`,type:8},jo=200,Mo=200,No={data:[{day:`Mon`,sbp:118,sleepDuration:6.2},{day:`Tue`,sbp:122,sleepDuration:5.8},{day:`Wed`,sbp:115,sleepDuration:6.5},{day:`Thu`,sbp:128,sleepDuration:5.2},{day:`Fri`,sbp:120,sleepDuration:5.4},{day:`Sat`,sbp:125,sleepDuration:6},{day:`Sun`,sbp:119,sleepDuration:5.7}],sbpLabel:`SBP`,sleepDurationLabel:`Sleep duration`,sbpColor:`rgb(249, 115, 22)`,sleepDurationColor:`rgb(167, 139, 250)`};function Po(e){var t,n,r;let i=e;if(typeof e==`string`)try{i=JSON.parse(e)}catch(e){return null}let a=i,o=(t=a.sbp_sleep_trend_chart_card)==null?a:t;return!Array.isArray(o.data)||o.data.length===0?null:{data:o.data.map(e=>{var t,n,r;return{day:String((t=e.day)==null?``:t),sbp:Number((n=e.sbp)==null?0:n),sleepDuration:Number((r=e.sleepDuration)==null?0:r)}}),sbpLabel:(n=o.sbpLabel)==null?`SBP`:n,sleepDurationLabel:(r=o.sleepDurationLabel)==null?`Sleep duration`:r,sbpColor:o.sbpColor,sleepDurationColor:o.sleepDurationColor}}function Fo(){var e,t,n,r;let{t:i}=I(),[a,o]=(0,L.useState)(No),{onData:s,isReady:c}=Li({pageId:Ao.pageId,pageName:Ao.pageName,debug:!1}),{canAnimate:l,animationKey:u}=Ri({pageId:Ao.pageId,devAutoTriggerDelay:jo,animateDelay:Mo});(0,L.useEffect)(()=>{s(e=>{let t=Po(e);t&&o(t)})},[s]);let d=(e=a.sbpColor)==null?Kt.systolic:e,f=(t=a.sleepDurationColor)==null?B.sleep:t,p=(n=a.sbpLabel)==null?i(`widgets.type8.sbp`):n,m=(r=a.sleepDurationLabel)==null?i(`widgets.type8.sleepDuration`):r,h=(0,L.useMemo)(()=>[{dataKey:`sbp`,color:d,label:p,showArea:!1,legendShape:`circle`,strokeWidth:2},{dataKey:`sleepDuration`,color:f,label:m,showArea:!1,legendShape:`circle`,strokeWidth:2}],[d,f,p,m]),g=(0,L.useMemo)(()=>a.data.map(e=>({day:e.day,sbp:e.sbp,sleepDuration:e.sleepDuration})),[a.data]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:l,animationKey:u,mode:`slideUp`,children:g.length>0?(0,z.jsx)(`div`,{className:`bg-white rounded-2xl p-4`,children:(0,z.jsx)(on,{data:g,lines:h,xAxisKey:`day`,height:224,showLegend:!0,chartMargin:{top:10,right:10,left:-15,bottom:0}})}):null}),!1]})})}function Io({src:e,alt:t,className:n=``,placeholderClassName:r=`bg-slate-100`,duration:i=.3}){let[a,o]=(0,L.useState)(!1),[c,l]=(0,L.useState)(!1),d=(0,L.useCallback)(()=>{o(!0)},[]),f=(0,L.useCallback)(()=>{l(!0),o(!0)},[]);return(0,z.jsxs)(`div`,{className:`relative w-full h-full`,children:[(0,z.jsx)(s,{children:!a&&(0,z.jsx)(u.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:i*.5},className:`absolute inset-0 ${r} rounded-full`})}),(0,z.jsx)(u.img,{src:e,alt:t,onLoad:d,onError:f,initial:{opacity:0,scale:.95},animate:{opacity:a&&!c?1:0,scale:a&&!c?1:.95},transition:{duration:i,ease:`easeOut`},className:n}),c&&(0,z.jsx)(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:i*.5},className:`absolute inset-0 ${r} rounded-full flex items-center justify-center`,children:(0,z.jsx)(`svg`,{className:`w-6 h-6 text-slate-300`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5,d:`M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z`})})})]})}var Lo={pageId:`improvement-plan`,pageName:`å®šåˆ¶æ”¹å–„è®¡åˆ’`,type:9},Ro=200,zo=200,Bo={exercise:`/images/daily_report/4.webp`,sleep:`/images/daily_report/2.webp`,nutrition:`/images/daily_report/3.webp`,other:`/images/daily_report/1.webp`},Vo={title:`Customized improvement plan`,items:[{id:`exercise-1`,type:`exercise`,title:`Neck and shoulder exercises`,description:`Supplement with appropriate...`,isAdded:!1},{id:`sleep-1`,type:`sleep`,title:`Mindfulness Breathing Practice`,description:`Supplement with appropriate amo...`,isAdded:!1}]};function Ho(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[ImprovementPlanWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[ImprovementPlanWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return Array.isArray(n.items)?{title:n.title||Vo.title,items:n.items.map(e=>{var t,n,r;return{id:String((t=e.id)==null?``:t),type:e.type||`other`,title:String((n=e.title)==null?``:n),description:String((r=e.description)==null?``:r),isAdded:!!e.isAdded}})}:(console.warn(`[ImprovementPlanWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ items:`,t),null)}var Uo={idle:60,loading:60,cancel:76,done:68};function Wo({duration:e=1200,width:t=76,height:n=32}){let[r,i]=(0,L.useState)(0),a=n/2,o=(t-n)*2+Math.PI*n,s=t+4,c=n+4;return(0,L.useEffect)(()=>{let e=requestAnimationFrame(()=>{i(-o)});return()=>cancelAnimationFrame(e)},[o]),(0,z.jsx)(`svg`,{className:`absolute pointer-events-none`,style:{width:s,height:c,left:`50%`,top:`50%`,transform:`translate(-50%, -50%)`,filter:`drop-shadow(0 0 2px #f97316)`},viewBox:`0 0 ${s} ${c}`,children:(0,z.jsx)(`rect`,{x:2,y:2,width:t,height:n,rx:a,ry:a,fill:`none`,stroke:`#f97316`,strokeWidth:2,strokeLinecap:`round`,strokeDasharray:o,strokeDashoffset:r,style:{transition:`stroke-dashoffset ${e}ms linear`}})})}function Go({item:e,onAdd:t,t:n}){let r=Bo[e.type]||Bo.other,[i,a]=(0,L.useState)(`idle`),[o,s]=(0,L.useState)(`idle`),[c,u]=(0,L.useState)(`idle`),d=(0,L.useRef)(null),f=(0,L.useRef)(null),p=Uo[i],m=(0,L.useCallback)(()=>{if(!d.current)return;let e=d.current.getBoundingClientRect(),t=(e.left+e.width/2)/window.innerWidth,n=(e.top+e.height/2)/window.innerHeight;requestAnimationFrame(()=>{l({particleCount:12,spread:40,origin:{x:t,y:n},startVelocity:12,gravity:.6,scalar:.5,ticks:60,colors:[`#ff6b6b`,`#feca57`,`#48dbfb`,`#1dd1a1`,`#ff9ff3`,`#54a0ff`],disableForReducedMotion:!1,zIndex:9999})})},[]);(0,L.useEffect)(()=>{if(i===c)return;let e=!1,t=setTimeout(()=>{e||s(`exit`)},0),n=setTimeout(()=>{if(e)return;u(i),s(`enter`);let t=setTimeout(()=>{e||s(`idle`)},150);r.push(t)},150),r=[];return()=>{e=!0,clearTimeout(t),clearTimeout(n),r.forEach(clearTimeout)}},[i,c]),(0,L.useEffect)(()=>(i===`cancel`&&(f.current=setTimeout(()=>{a(`done`),m(),t(e)},1200)),()=>{f.current&&(clearTimeout(f.current),f.current=null)}),[i,e,t,m]);let h=(0,L.useCallback)(()=>{if(i===`cancel`){f.current&&(clearTimeout(f.current),f.current=null),a(`idle`);return}i===`idle`&&(a(`loading`),setTimeout(()=>{a(`cancel`)},1e3))},[i]),g=e.isAdded||i===`done`;return(0,z.jsxs)(`div`,{className:`flex items-center gap-3 px-2 py-4`,children:[(0,z.jsx)(`div`,{className:`w-9 h-9 flex-shrink-0 rounded-full overflow-hidden flex items-center justify-center`,children:(0,z.jsx)(Io,{src:r,alt:e.type,className:`w-full h-full object-contain`,placeholderClassName:`bg-orange-50`,duration:.35})}),(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`h4`,{className:`text-sm font-medium text-slate-800 truncate`,children:e.title}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 truncate mt-0.5`,children:e.description})]}),(0,z.jsx)(`div`,{className:`flex-shrink-0 flex items-center justify-center`,style:{width:Uo.cancel},children:(0,z.jsxs)(`button`,{ref:d,onClick:h,disabled:g||i===`loading`,style:{width:p},className:`
            relative text-xs rounded-full h-8 flex items-center justify-center
            transition-all duration-300 ease-out
            ${c===`cancel`?`bg-orange-50 text-orange-600`:`bg-slate-100 text-slate-600`}
            ${(()=>g?`cursor-default`:i===`loading`?`cursor-wait`:i===`cancel`?`cursor-pointer`:`hover:bg-slate-200 cursor-pointer`)()}
          `,children:[c===`cancel`&&(0,z.jsx)(Wo,{duration:1200,width:Uo.cancel,height:32}),(0,z.jsx)(`span`,{className:`relative z-10 inline-flex items-center justify-center ${(()=>o===`exit`?`animate-scale-out`:o===`enter`?`animate-scale-in`:``)()}`,children:(()=>{let t=e.isAdded||c===`done`;return c===`loading`?(0,z.jsxs)(`svg`,{className:`w-3.5 h-3.5 animate-spin`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,children:[(0,z.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,z.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}):n(c===`cancel`?`widgets.type9.cancel`:t?`widgets.type9.added`:`widgets.type9.add`)})()})]})})]})}function Ko(){let{t:e}=I(),[t,n]=(0,L.useState)(Vo),[r,i]=(0,L.useState)(new Set),[a,o]=(0,L.useState)(!1),{onData:s,send:c,isReady:l}=Li({pageId:Lo.pageId,pageName:Lo.pageName,debug:!1}),{canAnimate:u,animationKey:d}=Ri({pageId:Lo.pageId,devAutoTriggerDelay:Ro,animateDelay:zo});(0,L.useEffect)(()=>{s(e=>{console.log(`[ImprovementPlanWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=Ho(e);t?(n(t),i(new Set(t.items.filter(e=>e.isAdded).map(e=>e.id))),o(!1),console.log(`[ImprovementPlanWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[ImprovementPlanWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[s]);let f=(0,L.useCallback)(e=>{c(`click-widget-plan-add`,{itemId:e.id,itemType:e.type,itemTitle:e.title}),i(t=>new Set([...t,e.id])),o(!1)},[c]),p=(0,L.useCallback)(()=>{c(`click-widget-plan-select`),o(!0)},[c]),m=t.items.map(e=>({...e,isAdded:e.isAdded||r.has(e.id)}));return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:u,animationKey:d,mode:`spring`,children:(0,z.jsxs)(`div`,{className:`bg-white rounded-3xl p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,z.jsx)(`div`,{className:`w-5 h-5 rounded-full bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center`,children:(0,z.jsx)(`svg`,{className:`w-3 h-3 text-white`,fill:`currentColor`,viewBox:`0 0 20 20`,children:(0,z.jsx)(`path`,{fillRule:`evenodd`,d:`M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z`,clipRule:`evenodd`})})}),(0,z.jsx)(`h3`,{className:`text-base font-medium text-orange-500`,children:e(`widgets.type9.title`)})]}),(0,z.jsx)(`div`,{className:`divide-y divide-slate-100`,children:m.map(t=>(0,z.jsx)(Go,{item:t,onAdd:f,t:e},t.id))}),(0,z.jsx)(`button`,{onClick:a?void 0:p,className:`w-full mt-4 py-3 rounded-full text-sm font-medium transition-colors ${a?`bg-slate-200 text-slate-500 cursor-default`:`bg-orange-100 text-orange-600 hover:bg-orange-200 cursor-pointer`}`,children:e(a?`widgets.type9.selected`:`widgets.type9.completeSelection`)})]})}),!1]})})}var qo={pageId:`widget-ppg`,pageName:`PPGä¿¡å·é‡‡é›†`,type:10},Jo=200,Yo=200,Xo={line:`rgba(248, 113, 113, 1)`,fillStart:`rgba(248, 113, 113, 0.3)`,fillEnd:`rgba(248, 113, 113, 0.05)`,grid:`rgba(200, 200, 200, 0.3)`,glowPoint:`rgba(255, 255, 255, 1)`,glowHalo:`rgba(248, 113, 113, 0.6)`,progressRing:`rgb(251, 146, 61)`,progressBg:`rgba(251, 146, 61, 0.2)`},Zo={dataInterval:10,gridSpeed:1,gridSpacing:30,maxDuration:30,loopDuration:10,targetFPS:60},Qo=[[-108,-106,-89,-52,0,53,96,113,101,62,11,-37,-74,-93,-95,-89,-77,-67,-56,-49,-42,-38,-39,-46,-56,-67,-76,-85,-91,-95,-96,-96,-94,-90,-87,-83,-82,-82,-81,-79,-78,-76,-76,-77,-81,-84,-87,-88,-87,-85,-83,-83,-83,-83,-82,-83,-82,-82,-84,-88,-96,-103,-103,-90],[-59,-14,39,87,117,120,93,47,-3,-47,-75,-85,-82,-73,-64,-58,-56,-52,-50,-49,-50,-54,-61,-71,-82,-89,-93,-94,-93,-91,-88,-86,-83,-81,-78,-77,-76,-76,-76,-75,-74,-74,-74,-75,-76,-80,-83,-86,-88,-89,-90,-90,-89,-87,-85,-86,-90,-97,-100,-92,-69,-25,27,80],[104,112,92,51,0,-45,-78,-94,-95,-87,-76,-66,-57,-50,-46,-44,-46,-52,-60,-69,-76,-84,-88,-90,-91,-90,-89,-88,-87,-85,-83,-80,-76,-74,-71,-72,-74,-77,-81,-84,-86,-87,-86,-85,-84,-83,-82,-83,-87,-94,-101,-103,-92,-66,-21,31,81,114,119,95,49,-6,-55,-89]];function $o(){let e=[],t=Zo.loopDuration*1e3/Zo.dataInterval,n=Qo.flat(),r=n.length;for(let i=0;i<t;i++){let t=i%r;e.push(n[t])}let i=e[0],a=e[e.length-20];for(let t=0;t<20;t++){let n=t/20,r=e.length-20+t;e[r]=Math.round(a*(1-n)+i*n)}return e}var es=class{constructor(e){this.head=0,this.tail=0,this._length=0,this.capacity=e,this.buffer=Array(e)}push(e){this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this._length<this.capacity?this._length++:this.head=(this.head+1)%this.capacity}get(e){return this.buffer[(this.head+e)%this.capacity]}get length(){return this._length}clear(){this.head=0,this.tail=0,this._length=0}};function ts(e,t){let{isRunning:n,isPaused:r,isIdle:i,ppgData:a}=t,o=(0,L.useRef)(0),s=(0,L.useRef)(0),c=(0,L.useRef)(0),l=(0,L.useRef)(null),u=(0,L.useRef)(0),d=(0,L.useRef)(0),f=(0,L.useRef)({fill:null,glow:null});return(0,L.useEffect)(()=>{let t=e.current;if(!t)return;let p=t.getContext(`2d`,{alpha:!1});if(!p)return;let m=Math.min(window.devicePixelRatio||1,2),h=t.getBoundingClientRect();t.width=h.width*m,t.height=h.height*m,p.scale(m,m);let g=h.width,_=h.height,v=_/2,y=_/3,b=Math.floor(g/2),x=1e3/Zo.targetFPS;l.current||(l.current=new es(b));let S=p.createLinearGradient(0,0,0,_);S.addColorStop(0,Xo.fillStart),S.addColorStop(1,Xo.fillEnd),f.current.fill=S;function C(e){if(!p)return;p.strokeStyle=Xo.grid,p.lineWidth=1;let t=Zo.gridSpacing,n=e%t;p.beginPath();for(let e=-n;e<g+t;e+=t)p.moveTo(e,0),p.lineTo(e,_);for(let e=0;e<_;e+=t)p.moveTo(0,e),p.lineTo(g,e);p.stroke()}function w(e){if(!p||e.length<2)return;let t=e.length;p.beginPath();let n=0;for(let r=0;r<t;r++){let i=e.get(r),a=r/t*g,o=v-i/130*y;r===0?p.moveTo(a,o):p.lineTo(a,o),n=a}if(p.strokeStyle=Xo.line,p.lineWidth=2,p.lineJoin=`round`,p.lineCap=`round`,p.stroke(),p.lineTo(n,v),p.lineTo(0,v),p.closePath(),p.fillStyle=f.current.fill,p.fill(),t>0){let n=e.get(t-1),r=g-10,i=v-n/130*y;p.beginPath(),p.arc(r,i,12,0,Math.PI*2),p.fillStyle=`rgba(248, 113, 113, 0.3)`,p.fill(),p.beginPath(),p.arc(r,i,6,0,Math.PI*2),p.fillStyle=Xo.glowPoint,p.fill(),p.strokeStyle=Xo.line,p.lineWidth=2,p.stroke()}}function T(e){if(!p)return;let t=e-d.current;if(t<x){o.current=requestAnimationFrame(T);return}if(d.current=e-t%x,p.fillStyle=`#F8FAFC`,p.fillRect(0,0,g,_),i){o.current=requestAnimationFrame(T);return}r||(s.current+=Zo.gridSpeed*(t/x)),C(s.current);let f=l.current;if(n&&a.length>0&&f){let t=e-u.current,n=Math.floor(t/Zo.dataInterval);if(n>0){for(let e=0;e<n;e++){let e=a[c.current%a.length];f.push(e),c.current++}u.current=e}}f&&f.length>0&&w(f),o.current=requestAnimationFrame(T)}return o.current=requestAnimationFrame(T),()=>{o.current&&cancelAnimationFrame(o.current)}},[e,n,r,i,a]),{reset:(0,L.useCallback)(()=>{var e;c.current=0,(e=l.current)==null||e.clear(),u.current=0,d.current=0},[])}}function ns({progress:e,remainingTime:t,size:n=40}){let r=(n-3)/2,i=2*Math.PI*r,a=i*(1-e);return(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsxs)(`svg`,{width:n,height:n,className:`-rotate-90`,children:[(0,z.jsx)(`circle`,{cx:n/2,cy:n/2,r,fill:`none`,stroke:Xo.progressBg,strokeWidth:3}),(0,z.jsx)(`circle`,{cx:n/2,cy:n/2,r,fill:`none`,stroke:Xo.progressRing,strokeWidth:3,strokeLinecap:`round`,strokeDasharray:i,strokeDashoffset:a,style:{transition:`stroke-dashoffset 0.1s linear`}})]}),(0,z.jsxs)(`span`,{className:`text-sm text-slate-600 font-medium`,children:[t,`s`]})]})}const rs=rt(function(){let{t:e}=I(),{isTestEnv:t}=Tn(),n=(0,L.useRef)(null),[r,i]=(0,L.useState)(`idle`),[a,o]=(0,L.useState)(Zo.maxDuration),[c]=(0,L.useState)(()=>$o()),l=(0,L.useRef)(0),{onData:d,send:f,isReady:p}=Li({pageId:qo.pageId,pageName:qo.pageName,debug:!1}),{canAnimate:m,animationKey:h}=Ri({pageId:qo.pageId,devAutoTriggerDelay:Jo,animateDelay:Yo}),{reset:g}=ts(n,{isRunning:r===`measuring`,isPaused:r===`completed`,isIdle:r===`idle`,ppgData:c}),_=(Zo.maxDuration-a)/Zo.maxDuration,v=(0,L.useCallback)(()=>{l.current&&(clearInterval(l.current),l.current=0),i(`completed`),console.log(`[PPGSignalWidget] æµ‹é‡ç»“æŸ`)},[]),y=(0,L.useCallback)(()=>{r!==`measuring`&&(i(`measuring`),o(Zo.maxDuration),g(),l.current=window.setInterval(()=>{o(e=>e<=1?(v(),0):e-1)},1e3),console.log(`[PPGSignalWidget] å¼€å§‹æµ‹é‡`))},[r,g,v]);(0,L.useEffect)(()=>{d(e=>{if(console.log(`[PPGSignalWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®:`,e),typeof e==`object`&&e){let t=e;if(t.event===`page-widget-ppg-start`){console.log(`[PPGSignalWidget] æ”¶åˆ° Android å¼€å§‹ä¿¡å·`),y();return}if(t.event===`page-widget-ppg-stop`){console.log(`[PPGSignalWidget] æ”¶åˆ° Android ç»“æŸä¿¡å·`),v();return}Array.isArray(t.values)&&console.log(`[PPGSignalWidget] æ”¶åˆ° PPG æ•°æ®:`,t.values.length,`ä¸ªç‚¹`)}})},[d,v,y]),(0,L.useEffect)(()=>()=>{l.current&&clearInterval(l.current)},[]);let b=(0,L.useCallback)(()=>{i(`idle`),o(Zo.maxDuration),g()},[g]);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:m,animationKey:h,mode:`scale`,children:(0,z.jsxs)(`div`,{className:`bg-white rounded-3xl p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`div`,{className:`w-5 h-5 rounded-full bg-gradient-to-br from-red-400 to-red-500 flex items-center justify-center`,children:(0,z.jsx)(`svg`,{className:`w-3 h-3 text-white`,fill:`currentColor`,viewBox:`0 0 20 20`,children:(0,z.jsx)(`path`,{fillRule:`evenodd`,d:`M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z`,clipRule:`evenodd`})})}),(0,z.jsx)(`h3`,{className:`text-base font-medium text-red-500`,children:e(`widgets.type10.title`)})]}),r===`idle`&&t&&(0,z.jsx)(`button`,{onClick:y,className:`px-4 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-full transition-colors`,children:e(`widgets.type10.start`)}),r===`measuring`&&t&&(0,z.jsx)(`button`,{onClick:v,className:`px-4 py-1.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-full transition-colors`,children:e(`widgets.type10.stop`,`æš‚åœ`)}),r===`completed`&&t&&(0,z.jsx)(`button`,{onClick:b,className:`px-4 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm font-medium rounded-full transition-colors`,children:e(`widgets.type10.restart`)})]}),(0,z.jsxs)(`div`,{className:`relative w-full h-40 bg-slate-50 rounded-2xl overflow-hidden`,children:[(0,z.jsx)(`canvas`,{ref:n,className:`w-full h-full`,style:{display:`block`}}),(0,z.jsx)(s,{children:r===`idle`&&(0,z.jsx)(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:`easeInOut`},className:`absolute inset-0 flex items-center justify-center bg-slate-50/80`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-400`,children:e(t?`widgets.type10.idleHint`:`widgets.type10.placeFinger`)})})})]}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mt-4 h-10`,children:[(0,z.jsx)(u.div,{initial:!1,animate:{opacity:r===`completed`?.5:1},transition:{duration:.3,ease:`easeInOut`},children:(0,z.jsx)(ns,{progress:r===`idle`?0:_,remainingTime:a})}),(0,z.jsx)(s,{mode:`wait`,children:(0,z.jsxs)(u.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.25,ease:`easeInOut`},className:`text-sm text-slate-500`,children:[r===`idle`&&e(`widgets.type10.statusIdle`),r===`measuring`&&e(`widgets.type10.statusMeasuring`),r===`completed`&&e(`widgets.type10.statusCompleted`)]},r)})]})]})}),!1]})})});function is(e){return/bilibili\.com|b23\.tv|player\.bilibili\.com/i.test(e)?`bilibili`:/youtube\.com|youtu\.be|youtube-nocookie\.com/i.test(e)?`youtube`:`direct`}function as(e,t){if(t===`bilibili`){if(e.includes(`player.bilibili.com`))try{let t=new URL(e.startsWith(`//`)?`https:${e}`:e);return t.searchParams.has(`autoplay`)||t.searchParams.set(`autoplay`,`0`),t.searchParams.has(`danmaku`)||t.searchParams.set(`danmaku`,`0`),t.toString()}catch(t){return e}let t=e.match(/(BV[\w]+)/i);if(t)return`https://player.bilibili.com/player.html?bvid=${t[1]}&autoplay=0&danmaku=0`;let n=e.match(/av(\d+)/i);return n?`https://player.bilibili.com/player.html?aid=${n[1]}&autoplay=0&danmaku=0`:null}if(t===`youtube`){if(e.includes(`youtube.com/embed/`)||e.includes(`youtube-nocookie.com/embed/`))return e;let t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/);return t?`https://www.youtube.com/embed/${t[1]}?autoplay=0`:null}return null}var os={pageId:`health-intervention`,pageName:`å¥åº·å¹²é¢„å¡ç‰‡`,type:11},ss=200,cs=300,ls={title:`Meditation and Breath Regulation`,videoUrl:`https://www.bilibili.com/video/BV1GJ411x7h7`,videoPoster:void 0,durationMinutes:3,reasoning:`Given the currently high systolic blood pressure, it is recommended to immediately put down your work, close your eyes, and sit quietly for 3 minutes.`};function us(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[HealthInterventionWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[HealthInterventionWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;return typeof n.title!=`string`||typeof n.videoUrl!=`string`?(console.warn(`[HealthInterventionWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ title æˆ– videoUrl:`,t),null):{title:n.title,videoUrl:n.videoUrl,videoPoster:typeof n.videoPoster==`string`?n.videoPoster:void 0,durationMinutes:typeof n.durationMinutes==`number`?n.durationMinutes:3,reasoning:typeof n.reasoning==`string`?n.reasoning:``}}const ds=rt(function(){let{t:e}=I(),[t,n]=(0,L.useState)(ls),[r,i]=(0,L.useState)(!1),[a,o]=(0,L.useState)(``),s=(0,L.useRef)(null),c=(0,L.useMemo)(()=>is(t.videoUrl),[t.videoUrl]),l=(0,L.useMemo)(()=>as(t.videoUrl,c),[t.videoUrl,c]),u=c!==`direct`,{onData:d,send:f,isReady:p}=Li({pageId:os.pageId,pageName:os.pageName,debug:!1}),{canAnimate:m,animationKey:h}=Ri({pageId:os.pageId,devAutoTriggerDelay:ss,animateDelay:cs});(0,L.useEffect)(()=>{d(e=>{console.log(`[HealthInterventionWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=us(e);t?(n(t),o(``),console.log(`[HealthInterventionWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[HealthInterventionWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[d]);let g=(0,L.useCallback)(e=>{e.stopPropagation(),!u&&s.current&&(r?s.current.pause():s.current.play(),i(!r)),f(`click-widget-video-start`,{pageId:os.pageId,videoUrl:t.videoUrl})},[r,u,f,t.videoUrl]),_=(0,L.useCallback)(()=>{!u&&s.current&&(r?s.current.pause():s.current.play(),i(!r)),f(`videoClick`,{pageId:os.pageId,videoUrl:t.videoUrl})},[r,u,f,t.videoUrl]);return(0,L.useEffect)(()=>{let e=s.current;if(!e)return;let t=()=>i(!0),n=()=>i(!1),r=()=>{i(!1),f(`videoEnded`,{pageId:os.pageId})};return e.addEventListener(`play`,t),e.addEventListener(`pause`,n),e.addEventListener(`ended`,r),()=>{e.removeEventListener(`play`,t),e.removeEventListener(`pause`,n),e.removeEventListener(`ended`,r)}},[f]),(0,L.useEffect)(()=>{let e=s.current;if(!e)return;let t=e=>(e.preventDefault(),e.stopPropagation(),!1);return e.addEventListener(`webkitfullscreenchange`,t),e.addEventListener(`fullscreenchange`,t),()=>{e.removeEventListener(`webkitfullscreenchange`,t),e.removeEventListener(`fullscreenchange`,t)}},[]),(0,L.useEffect)(()=>{let e=s.current;if(!e||t.videoPoster)return;let n=()=>{try{if(e.videoWidth===0||e.videoHeight===0){console.warn(`[HealthInterventionWidget] è§†é¢‘å°ºå¯¸æ— æ•ˆï¼Œè·³è¿‡æˆªå›¾`);return}let t=document.createElement(`canvas`);t.width=e.videoWidth,t.height=e.videoHeight;let n=t.getContext(`2d`);n&&(n.drawImage(e,0,0,t.width,t.height),o(t.toDataURL(`image/jpeg`,.85)),console.log(`[HealthInterventionWidget] å·²è‡ªåŠ¨æå–è§†é¢‘ç¬¬ä¸€å¸§ä½œä¸ºå°é¢`))}catch(e){console.warn(`[HealthInterventionWidget] æå–è§†é¢‘ç¬¬ä¸€å¸§å¤±è´¥:`,e)}},r=()=>{e.currentTime=.1;let t=()=>{n(),e.removeEventListener(`seeked`,t)};e.addEventListener(`seeked`,t)};return e.addEventListener(`loadeddata`,r),()=>{e.removeEventListener(`loadeddata`,r)}},[t.videoUrl,t.videoPoster]),(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:m,animationKey:h,mode:`spring`,children:(0,z.jsxs)(`div`,{className:`relative overflow-hidden rounded-[32px] bg-white shadow-[0_10px_40px_rgba(0,0,0,0.08)]`,style:{padding:`24px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[(0,z.jsx)(Ne,{className:`w-4 h-4`,style:{color:`#FF7F27`}}),(0,z.jsx)(`span`,{className:`text-sm font-medium`,style:{color:`#FF7F27`},children:e(`widgets.type11.urgencyBadge`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsx)(`h2`,{className:`text-base font-semibold truncate mr-3`,style:{color:`#1A1A1A`},children:t.title}),(0,z.jsxs)(`button`,{onClick:g,className:`flex items-center gap-1.5 px-4 py-1.5 rounded-full text-white font-medium text-sm transition-all duration-200 hover:scale-105 active:scale-95 flex-shrink-0`,style:{backgroundColor:`#FF7F27`,boxShadow:`0 2px 8px rgba(255, 127, 39, 0.3)`},children:[(0,z.jsx)(oe,{className:`w-4 h-4 fill-current`}),(0,z.jsx)(`span`,{children:e(`widgets.type11.startButton`)})]})]}),(0,z.jsxs)(`div`,{className:`relative mb-4 overflow-hidden rounded-[20px] ${u?``:`cursor-pointer group`}`,onClick:u?void 0:_,style:{backgroundColor:`#F5F5F5`},children:[u&&l?(0,z.jsx)(`iframe`,{src:l,className:`w-full aspect-video`,allow:`autoplay; fullscreen; picture-in-picture; encrypted-media`,allowFullScreen:!0,sandbox:`allow-scripts allow-same-origin allow-presentation allow-encrypted-media`,frameBorder:0,scrolling:`no`,referrerPolicy:`no-referrer`,style:{border:`none`},title:t.title}):(0,z.jsx)(`video`,{ref:s,src:t.videoUrl,poster:t.videoPoster||a,className:`w-full aspect-video object-cover transition-transform duration-300 group-hover:scale-[1.02]`,playsInline:!0,controlsList:`nodownload nofullscreen noremoteplayback`,disablePictureInPicture:!0,preload:`metadata`,crossOrigin:`anonymous`}),!u&&(0,z.jsxs)(`div`,{className:`absolute top-3 left-3 px-3 py-1.5 rounded-full text-white text-sm font-medium flex items-center gap-1`,style:{backgroundColor:`rgba(255, 140, 0, 0.95)`},children:[(0,z.jsx)(oe,{className:`w-3 h-3 fill-current`}),(0,z.jsxs)(`span`,{children:[t.durationMinutes,` `,e(`widgets.type11.minutes`)]})]}),!u&&!r&&(0,z.jsx)(`div`,{className:`absolute inset-0 bg-black/10 transition-all duration-300 group-hover:bg-black/25`,children:(0,z.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300`,children:(0,z.jsx)(`div`,{className:`w-16 h-16 rounded-full bg-white/90 flex items-center justify-center shadow-lg transform transition-transform group-hover:scale-110`,children:(0,z.jsx)(oe,{className:`w-8 h-8 fill-current ml-1`,style:{color:`#FF7F27`}})})})})]}),(0,z.jsx)(`div`,{className:`p-4 rounded-[16px]`,style:{backgroundColor:`#F0F0F0`,lineHeight:`1.5`},children:(0,z.jsx)(`p`,{className:`text-sm`,style:{color:`#666666`},children:t.reasoning})})]})}),!1]})})});var fs={fill:`currentColor`},ps={pageId:`hre-recommendation`,pageName:`HRE æŽ¨èå¡ç‰‡`,type:12},ms=200,hs=300,gs={hre_recommendations:[{content_id:`697c7ee5492c5a6580b1fe85`,type:`video`,content_type:`exercise`,image_url:`https://cdn.fulai.tech/comm/image/1769750270125_456l864te`,url:`https://cdn.fulai.tech/comm/video/1769749075286_73302i411`,minutes:15,title:`Gentle 5-Minute Move`,explanation_text:`Knees bent, arm swing, leg kick, waist twist, ankle rotation, stretch & breathe.`,detailed_text:`As someone with gout and blood sugar concerns, this easy workout is great for you! It gets your blood flowing gentlyâ€”bend knees, swing arms, twist waist, and stretch with slow breaths. No heavy lifting, just simple movements to wake your body, boost energy, and help with blood sugar control. Even 5 minutes a day can make a difference!`,has_match:!0,rank:1,total_count:1}]};function _s(e){return e.has_match?e.type===`video`||e.type===`audio`:!1}function vs(e){return e.has_match&&!!e.image_url}function ys(e){return e.has_match}function bs(e){return!e.hre_recommendations||e.hre_recommendations.length===0?null:[...e.hre_recommendations].sort((e,t)=>e.rank-t.rank)[0]}function xs(e){let t=e;if(typeof e==`string`)try{t=JSON.parse(e)}catch(t){return console.error(`[HRERecommendationWidget] JSON è§£æžå¤±è´¥:`,e),null}if(!t||typeof t!=`object`||Array.isArray(t))return console.warn(`[HRERecommendationWidget] æ•°æ®æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ› JSON å¯¹è±¡:`,t),null;let n=t;if(!Array.isArray(n.hre_recommendations))return console.warn(`[HRERecommendationWidget] ç¼ºå°‘å¿…éœ€å­—æ®µ hre_recommendations:`,t),null;let r=n.hre_recommendations.filter(e=>!(!e||typeof e!=`object`||typeof e.title!=`string`||typeof e.has_match!=`boolean`)).map(e=>({content_id:typeof e.content_id==`string`?e.content_id:void 0,type:[`video`,`audio`,`image_text`].includes(e.type)?e.type:void 0,content_type:[`exercise`,`food`,`music`,`sleep`,`other`].includes(e.content_type)?e.content_type:void 0,image_url:typeof e.image_url==`string`?e.image_url:void 0,url:typeof e.url==`string`?e.url:void 0,minutes:typeof e.minutes==`number`?e.minutes:void 0,title:e.title,explanation_text:typeof e.explanation_text==`string`?e.explanation_text:``,detailed_text:typeof e.detailed_text==`string`?e.detailed_text:``,has_match:e.has_match,rank:typeof e.rank==`number`?e.rank:999,total_count:typeof e.total_count==`number`?e.total_count:0}));return r.length===0?(console.warn(`[HRERecommendationWidget] æ— æœ‰æ•ˆæŽ¨èé¡¹`),null):{hre_recommendations:r}}function Ss(){let{t:e}=I(),[t,n]=(0,L.useState)(gs),[r,i]=(0,L.useState)(!1),{onData:a,send:o,isReady:s}=Li({pageId:ps.pageId,pageName:ps.pageName,debug:!1}),{canAnimate:c,animationKey:l}=Ri({pageId:ps.pageId,devAutoTriggerDelay:ms,animateDelay:hs});(0,L.useEffect)(()=>{a(e=>{console.log(`[HRERecommendationWidget] æ”¶åˆ°åŽŸç”Ÿæ•°æ®`);let t=xs(e);t?(n(t),i(!1),console.log(`[HRERecommendationWidget] æ¸²æŸ“å®Œæˆ`)):console.warn(`[HRERecommendationWidget] æ•°æ®è§£æžå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`)})},[a]);let u=bs(t),d=(0,L.useCallback)(e=>{e.stopPropagation(),u&&o(`click-start`,{pageId:ps.pageId,contentId:u.content_id,type:u.type,contentType:u.content_type,url:u.url,imageUrl:u.image_url})},[o,u]),f=(0,L.useCallback)(()=>{u&&o(`cardClick`,{pageId:ps.pageId,item:u})},[o,u]);if(!u)return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsx)(na,{maxWidth:`md`,fullHeight:!1,children:(0,z.jsx)(`div`,{className:`p-6 text-center text-sm`,style:{color:`#999999`},children:e(`widgets.type12.noRecommendation`)})})});let p=_s(u),m=vs(u),h=ys(u);return(0,z.jsx)(Z,{align:`left`,className:`p-0`,style:{backgroundColor:Vt},children:(0,z.jsxs)(na,{maxWidth:`md`,fullHeight:!1,children:[(0,z.jsx)(Ji,{animate:c,animationKey:l,mode:`spring`,children:(0,z.jsxs)(`div`,{className:`relative overflow-hidden rounded-[32px] bg-white shadow-[0_10px_40px_rgba(0,0,0,0.08)] cursor-pointer select-none transition-transform duration-200 active:scale-[0.98] active:opacity-90`,style:{padding:`24px`},onClick:f,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[(0,z.jsx)(Ne,{className:`w-4 h-4`,style:{color:`#FF7F27`,...fs}}),(0,z.jsx)(`span`,{className:`text-sm font-medium`,style:{color:`#FF7F27`},children:e(`widgets.type12.urgencyBadge`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsx)(`h2`,{className:`text-base font-semibold truncate mr-3`,style:{color:`#1A1A1A`},children:u.title}),h&&(0,z.jsxs)(`button`,{onClick:d,className:`flex items-center gap-1.5 px-4 py-1.5 rounded-full text-white font-medium text-sm transition-all duration-200 hover:scale-105 active:scale-95 flex-shrink-0`,style:{backgroundColor:`#FF7F27`,boxShadow:`0 2px 8px rgba(255, 127, 39, 0.3)`},children:[(0,z.jsx)(oe,{className:`w-4 h-4 fill-current`}),(0,z.jsx)(`span`,{children:e(`widgets.type12.startButton`)})]})]}),m&&(0,z.jsxs)(`div`,{className:`relative mb-4 overflow-hidden rounded-[20px]`,style:{backgroundColor:`#F5F5F5`},children:[(0,z.jsxs)(`div`,{className:`relative w-full aspect-video`,children:[!r&&(0,z.jsx)(`div`,{className:`absolute inset-0 animate-pulse`,style:{background:`linear-gradient(135deg, #e5e7eb 0%, #f3f4f6 50%, #e5e7eb 100%)`}}),(0,z.jsx)(`img`,{src:u.image_url,alt:u.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300`,style:{opacity:r?1:0},onLoad:()=>i(!0),onError:()=>i(!0)})]}),p&&u.minutes!=null&&(0,z.jsxs)(`div`,{className:`absolute top-3 left-3 px-2 py-1 rounded-md text-white text-xs font-medium flex items-center gap-1`,style:{backgroundColor:`rgba(255, 140, 0, 0.95)`},children:[(0,z.jsx)(it,{className:`w-3 h-3`}),(0,z.jsxs)(`span`,{children:[u.minutes,` `,e(`widgets.type12.minutes`)]})]})]}),!u.has_match&&u.explanation_text&&(0,z.jsx)(`div`,{className:`mb-3 p-4 rounded-[16px]`,style:{backgroundColor:`#FFF7ED`,lineHeight:`1.6`},children:(0,z.jsx)(`p`,{className:`text-sm`,style:{color:`#92400E`,textAlign:`justify`},children:u.explanation_text})}),u.detailed_text&&(0,z.jsx)(`div`,{className:`p-4 rounded-[16px]`,style:{backgroundColor:`#F0F0F0`,lineHeight:`1.6`},children:(0,z.jsx)(`p`,{className:`text-sm`,style:{color:`#666666`,textAlign:`justify`},children:u.detailed_text})})]})}),!1]})})}function Cs(e){return[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`][new Date(e).getDay()]||e}function ws(e){return e.split(` `)[1]||e}function Ts(e){return e?e.trend===`up`?`up`:e.trend===`down`?`down`:`stable`:`stable`}function Es(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,k;let{overview:ee,indicators:A}=e.data,te=ee.chart_data.filter(e=>e.score!==null).map(e=>{var t;return{day:e.label,score:(t=e.score)==null?0:t,date:new Date(e.date)}}),ne=te.length>0?te:void 0,j=A[0],M=A[1],N=A[2],re=A[3],ie=A[4],ae=A[5],oe=A[6],se=(j==null||(t=j.chart)==null?void 0:t.map(e=>({day:ws(e.time),systolic:e.systolic,diastolic:e.diastolic})))||[],ce=(M==null||(n=M.chart)==null?void 0:n.map((e,t)=>({x:t,value:e.value})))||[],P=ce.length>0?ce:void 0,le=(N==null||(r=N.chart)==null?void 0:r.map((e,t)=>({x:t,value:e.value})))||[],ue=le.length>0?le:void 0,de=(re==null||(i=re.chart)==null?void 0:i.map(e=>({day:ws(e.time),value:e.value})))||[],fe=de.length>0?de:void 0,F=(ie==null||(a=ie.chart_data)==null?void 0:a.map(e=>({day:Cs(e.date),hours:e.total_minutes/60,quality:(e.deep_sleep_percent+e.rem_percent)*100,deepPercent:e.deep_sleep_percent,lightPercent:e.light_sleep_percent,awakePercent:e.awake_percent,remPercent:e.rem_percent})))||[],pe=F.length>0?F:void 0,me=(ae==null||(o=ae.chart_data)==null?void 0:o.map(e=>({day:Cs(e.date),positive:e.positive,neutral:e.neutral,negative:e.negative})))||[],he=me.length>0?me:void 0,ge=(oe==null||(s=oe.chart_data)==null?void 0:s.map((e,t)=>({x:t,value:e.value})))||[],_e=ge.length>0?ge:void 0,ve=(c=ie==null||(l=ie.statistic)==null?void 0:l.average)==null?0:c,ye=Math.floor(ve/60),be=Math.round(ve%60);return{comprehensiveHealth:{chartData:ne,weeklyAverage:(u=ee.average_score)==null?0:u,aiSummary:ee.ai_insight||``,targetScore:60,trend:Ts(j==null?void 0:j.change)},bloodPressure:{avgSystolic:(d=j==null||(f=j.avg)==null?void 0:f.systolic)==null?0:d,avgDiastolic:(p=j==null||(m=j.avg)==null?void 0:m.diastolic)==null?0:p,latestSystolic:j==null||(h=j.latest)==null?void 0:h.systolic,latestDiastolic:j==null||(g=j.latest)==null?void 0:g.diastolic,maxSystolic:j==null||(_=j.max)==null?void 0:_.systolic,maxDiastolic:j==null||(v=j.max)==null?void 0:v.diastolic,minSystolic:j==null||(y=j.min)==null?void 0:y.systolic,minDiastolic:j==null||(b=j.min)==null?void 0:b.diastolic,reference:j==null?void 0:j.reference,status:j==null?void 0:j.status,periodDescription:`12 weeks`,chartData:se},heartRate:{avgHeartRate:(x=M==null?void 0:M.avg)==null?0:x,latestValue:M==null?void 0:M.latest,maxValue:M==null?void 0:M.max,minValue:M==null?void 0:M.min,reference:M==null?void 0:M.reference,status:M==null?void 0:M.status,periodDescription:`12 weeks`,chartData:P,referenceLine:(S=M==null?void 0:M.avg)==null?70:S},bloodSugar:{poctValue:(C=N==null?void 0:N.latest)==null?0:C,avgValue:N==null?void 0:N.avg,maxValue:N==null?void 0:N.max,minValue:N==null?void 0:N.min,reference:N==null?void 0:N.reference,status:N==null?void 0:N.status,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:ue},bloodOxygen:{avgSpO2:(w=re==null?void 0:re.avg)==null?0:w,latestValue:re==null?void 0:re.latest,maxValue:re==null?void 0:re.max,minValue:re==null?void 0:re.min,reference:re==null?void 0:re.reference,status:re==null?void 0:re.status,periodDescription:`12 weeks`,chartData:fe,referenceLine:95},sleep:{avgSleepTime:{hours:ye,minutes:be},label:ie==null||(T=ie.statistic)==null?void 0:T.label,periodDescription:`12 weeks`,chartData:pe},emotion:{dominantEmotion:`positive`,label:ae==null||(E=ae.statistic)==null?void 0:E.label,periodDescription:`12 weeks`,chartData:he},nutrition:{avgValue:(D=oe==null||(O=oe.statistic)==null?void 0:O.average)==null?0:D,label:oe==null||(k=oe.statistic)==null?void 0:k.label,unit:`/ minute`,periodDescription:`12 weeks`,chartData:_e,referenceLine:70}}}function Ds(){let e=[{day:`Mon`,score:52,date:new Date},{day:`Tue`,score:78,date:new Date},{day:`Wed`,score:48,date:new Date},{day:`Thu`,score:92,date:new Date},{day:`Fri`,score:68,date:new Date},{day:`Sat`,score:45,date:new Date},{day:`Sun`,score:28,date:new Date}],t=Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:120+Math.random()*30,diastolic:75+Math.random()*15})),n=Array.from({length:12},(e,t)=>({x:t,value:74+Math.sin(t*.6)*30+Math.random()*20})),r=Array.from({length:12},(e,t)=>({x:t,value:6.5+Math.sin(t*.5)*2.5+Math.random()*1.5})),i=Array.from({length:12},(e,t)=>({day:`D${t+1}`,value:95+Math.sin(t*.5)*3+Math.random()*2})),a=Array.from({length:12},(e,t)=>({day:`D${t+1}`,hours:7+Math.sin(t*.4)*2+Math.random()*1.5,quality:65+Math.sin(t*.4)*20+Math.random()*15})),o=Array.from({length:12},(e,t)=>({day:`D${t+1}`,positive:35+Math.sin(t*.5)*25+Math.random()*15,neutral:25+Math.random()*20,negative:15+Math.random()*15})),s=Array.from({length:12},(e,t)=>({x:t,value:75+Math.sin(t*.4)*25+Math.random()*20}));return{comprehensiveHealth:{chartData:e,weeklyAverage:72,aiSummary:`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`,targetScore:60,trend:`up`},bloodPressure:{avgSystolic:136,avgDiastolic:86,periodDescription:`12 weeks`,chartData:t},heartRate:{avgHeartRate:74,periodDescription:`12 weeks`,chartData:n,referenceLine:70},bloodSugar:{poctValue:7.4,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:r},bloodOxygen:{avgSpO2:94.9,periodDescription:`12 weeks`,chartData:i,referenceLine:95},sleep:{avgSleepTime:{hours:7,minutes:11},periodDescription:`12 weeks`,chartData:a},emotion:{dominantEmotion:`positive`,periodDescription:`12 weeks`,chartData:o},nutrition:{avgValue:74,unit:`/ minute`,periodDescription:`12 weeks`,chartData:s,referenceLine:70}}}var Os=`healthy_demo_mode`;function ks(){try{return localStorage.getItem(Os)===`true`}catch(e){return console.warn(`[Demo Mode] Failed to read from localStorage:`,e),!1}}function As(){try{localStorage.setItem(Os,`true`),console.log(`âœ… [Demo Mode] Enabled - Using dummy data`)}catch(e){console.error(`[Demo Mode] Failed to enable:`,e)}}function js(){try{localStorage.setItem(Os,`false`),console.log(`âœ… [Demo Mode] Disabled - Using backend data`)}catch(e){console.error(`[Demo Mode] Failed to disable:`,e)}}function Ms(){let e=!ks();return e?As():js(),e}const Ns={all:[`healthy`],data:e=>[...Ns.all,`data`,e]};async function Ps(e){if(ks())return console.log(`ðŸŽ­ [Demo Mode] Using dummy data instead of backend API`),Ds();try{let t=await An.post(`/trend-review/overview`,{view_type:e});if(console.log(`[Healthy API] Response code:`,t.data.code,`msg:`,t.data.msg),t.data.code!==200)throw console.error(`[Healthy API] Unexpected code:`,t.data.code),Error(t.data.msg||`Failed to fetch healthy data`);return Es(t.data)}catch(e){return console.error(`[Healthy API] Failed to fetch healthy data:`,e),console.warn(`[Healthy API] Using mock data as fallback`),Ds()}}function Fs(e=`day`){return Me({queryKey:Ns.data(e),queryFn:()=>Ps(e),staleTime:300*1e3,gcTime:600*1e3})}var Is=.1,Ls=`50px`;function Rs(e={}){var t;let n=yr(e.threshold);return{threshold:n.ok?n.value:Is,rootMargin:typeof e.rootMargin==`string`&&e.rootMargin.trim()!==``?e.rootMargin.trim():Ls,root:(t=e.root)==null?null:t,triggerOnce:e.triggerOnce!==!1}}function zs(e={}){let{threshold:t,rootMargin:n,root:r,triggerOnce:i}=(0,L.useMemo)(()=>Rs(e),[e==null?void 0:e.threshold,e==null?void 0:e.rootMargin,e==null?void 0:e.root,e==null?void 0:e.triggerOnce]),a=(0,L.useRef)(null),[o,s]=(0,L.useState)(!1),[c,l]=(0,L.useState)(!1);return(0,L.useEffect)(()=>{let e=a.current;if(!e||i&&c)return;let o=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.isIntersecting;s(t),t&&!c&&l(!0),i&&t&&o.disconnect()})},{threshold:t,rootMargin:n,root:r});return o.observe(e),()=>{o.disconnect()}},[t,n,r,i,c]),{ref:a,isInViewport:o,hasBeenInViewport:c}}var Bs=({height:e})=>(0,z.jsx)(`div`,{className:`animate-pulse bg-gradient-to-r from-slate-100 via-slate-50 to-slate-100 rounded-lg`,style:{height:typeof e==`number`?`${e}px`:e,backgroundSize:`200% 100%`,animation:`shimmer 1.5s infinite`},children:(0,z.jsx)(`style`,{children:`
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
    `})});function Vs({children:e,height:t=200,className:n=``,skeleton:r,threshold:i=.1,rootMargin:a=`100px`}){let{ref:o,hasBeenInViewport:s}=zs({threshold:i,rootMargin:a,triggerOnce:!0});return(0,z.jsx)(`div`,{ref:o,className:n,style:{height:typeof t==`number`?`${t}px`:t,position:`relative`},children:s?e:r||(0,z.jsx)(Bs,{height:t})})}var Hs=`#FB923D`,Us=`#FB923D`,Ws=()=>(0,z.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,z.jsx)(`rect`,{x:`4`,y:`4`,width:`6`,height:`16`,rx:`1`,fill:Hs}),(0,z.jsx)(`rect`,{x:`14`,y:`8`,width:`6`,height:`12`,rx:`1`,fill:Hs,opacity:`0.6`})]});const Gs=(0,L.memo)(({data:e,period:t=`weekly`,onPeriodChange:n,className:r,isLoading:i})=>{var a,o;let{t:s}=I(),c=[{day:`Mon`,score:52},{day:`Tues`,score:78},{day:`Wed`,score:48},{day:`Thur`,score:92},{day:`Fri`,score:68},{day:`Sat`,score:45},{day:`Sun`,score:28}],l=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),u=(a=e==null?void 0:e.weeklyAverage)==null?72:a,d=(o=e==null?void 0:e.aiSummary)==null?`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`:o;e?!e.chartData||e.chartData.length===0?console.log(`âš ï¸ ComprehensiveHealthCard: Empty chartData from API, using placeholder`):console.log(`âœ… ComprehensiveHealthCard: Using API data, points:`,e.chartData.length):console.log(`âš ï¸ ComprehensiveHealthCard: No data provided, using dummy data`);let f=()=>{if(!u||!d)return d;let e=String(u),t=d.split(e);return t.length===1?d:t.map((n,r)=>(0,z.jsxs)(`span`,{children:[n,r<t.length-1&&(0,z.jsx)(`span`,{style:{color:Hs,fontWeight:600},children:e})]},r))};return(0,z.jsxs)(G,{className:`${r} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${i?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Ws,{}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`healthy.comprehensiveHealth`,`Comprehensive health data`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center bg-slate-100 rounded-full p-0.5`,children:[(0,z.jsx)(`button`,{onClick:()=>n==null?void 0:n(`daily`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`daily`?`text-slate-800`:`text-slate-400 hover:text-slate-600`}`,children:s(`common.daily`,`Daily`)}),(0,z.jsx)(`button`,{onClick:()=>n==null?void 0:n(`weekly`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`weekly`?`text-white`:`text-slate-400 hover:text-slate-600`}`,style:t===`weekly`?{backgroundColor:Hs}:{},children:s(`common.weekly`,`Weekly`)})]})]}),(0,z.jsx)(`div`,{className:`text-xs text-slate-400 mb-1 ml-1`,children:`Score`}),(0,z.jsx)(`div`,{className:`-mx-1 mb-5`,children:(0,z.jsx)(Vs,{height:176,children:(0,z.jsx)(g,{width:`100%`,height:176,children:(0,z.jsxs)(h,{data:l,margin:{top:5,right:15,left:0,bottom:5},barCategoryGap:`25%`,children:[(0,z.jsx)(y,{horizontal:!0,vertical:!1,strokeDasharray:`4 4`,stroke:`#E5E7EB`}),(0,z.jsx)(_,{dataKey:`day`,tick:{fontSize:12,fill:`#94a3b8`},tickLine:!1,axisLine:!1,dy:8}),(0,z.jsx)(k,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[0,100],ticks:[0,20,40,60,80,100],width:30}),(0,z.jsx)(C,{dataKey:`score`,radius:[20,20,4,4],maxBarSize:36,...Ct.animation,children:l.map((e,t)=>(0,z.jsx)(b,{fill:Hs},`cell-${t}`))}),(0,z.jsx)(D,{y:u,stroke:Us,strokeDasharray:`6 4`,strokeWidth:1.5,label:{position:`left`,value:`â–¶`,fill:Us,fontSize:10,dx:-5}})]})})})}),(0,z.jsxs)(`div`,{className:`rounded-xl p-4 relative`,style:{backgroundColor:`#ECFDF5`},children:[(0,z.jsx)(`div`,{className:`absolute -top-3 right-4`,children:(0,z.jsx)(`span`,{className:`px-3 py-1.5 text-xs font-medium text-white rounded-full shadow-sm`,style:{background:`linear-gradient(90deg, #FFCC2B 0%, #FEA80D 100%)`},children:s(`healthy.aiGenerated`,`AI Generated`)})}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed pt-1`,children:f()})]})]})});var Ks=`#F97316`,qs=`#4ADE80`,Js=`#E2E8F0`;const Ys=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:s}=I(),c=Ks,[l]=(0,L.useState)(()=>Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:100+Math.random()*60,diastolic:60+Math.random()*40}))),u=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?l:t},[e==null?void 0:e.chartData,l]),d=(i=e==null?void 0:e.avgSystolic)==null?136:i,f=(a=e==null?void 0:e.avgDiastolic)==null?86:a,p=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`âš ï¸ HealthBloodPressureCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(xe,{className:`w-5 h-5`,style:{color:c}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`vitals.bloodPressure`,`Blood pressure`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[s(`healthy.bpDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:p}),(0,z.jsxs)(`span`,{style:{color:Ks,fontWeight:600},children:[d,` mmHg`]}),s(`healthy.bpDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsxs)(`span`,{style:{color:Ks,fontWeight:600},children:[f,` mmHg`]}),`.`]})}),(0,z.jsxs)(Vs,{height:224,children:[(0,z.jsx)(g,{width:`100%`,height:224,children:(0,z.jsxs)(h,{data:u,margin:{top:10,right:10,left:10,bottom:0},barGap:2,barCategoryGap:`30%`,children:[(0,z.jsx)(_,{dataKey:`day`,hide:!0}),(0,z.jsx)(k,{domain:[40,180],hide:!0}),(0,z.jsx)(C,{dataKey:`systolic`,radius:[4,4,4,4],maxBarSize:16,...Ct.animation,children:u.map((e,t)=>(0,z.jsx)(b,{fill:Js},`systolic-${t}`))}),(0,z.jsx)(C,{dataKey:`diastolic`,radius:[4,4,4,4],maxBarSize:16,...Ct.animation,children:u.map((e,t)=>(0,z.jsx)(b,{fill:Js},`diastolic-${t}`))})]})}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`35%`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Ks}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Ks}}),(0,z.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Ks},children:[`SBP: `,d,`mmHg`]}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Ks}`}})]}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`65%`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${qs}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:qs}}),(0,z.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:qs},children:[`DBP: `,f,`mmHg`]}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${qs}`}})]})]})]})});var Xs=`#F87171`,Zs=[{x:0,value:68},{x:1,value:70},{x:2,value:76},{x:3,value:78},{x:4,value:88},{x:5,value:90},{x:6,value:85},{x:7,value:75},{x:8,value:68}];const Qs=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=I(),s=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?Zs:t},[e==null?void 0:e.chartData]),c=(i=e==null?void 0:e.avgHeartRate)==null?74:i,l=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e?!e.chartData||e.chartData.length===0?console.log(`âš ï¸ HealthHeartRateCard: Empty chartData from API, using placeholder`):console.log(`âœ… HealthHeartRateCard: Using API data, points:`,e.chartData.length):console.log(`âš ï¸ HealthHeartRateCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(xe,{className:`w-5 h-5`,style:{color:Xs}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.heartRate`,`Heart rate`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[o(`healthy.hrDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:l}),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),o(`healthy.hrDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,z.jsxs)(Vs,{height:208,children:[(0,z.jsx)(g,{width:`100%`,height:208,children:(0,z.jsxs)(E,{data:s,margin:{top:20,right:10,left:10,bottom:20},children:[(0,z.jsx)(k,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,z.jsx)(v,{type:`linear`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:Xs},...Ct.animation})]})}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`40%`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Xs}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Xs}}),(0,z.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Xs},children:[o(`healthy.heartRateLabel`,`Heart rate`),`: `,c,` / minute`]}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Xs}`}})]})]})]})});var $s=`#F59E0B`,ec=[{x:0,value:5.2},{x:1,value:4.8},{x:2,value:8.5},{x:3,value:9.2},{x:4,value:7.8},{x:5,value:6.5},{x:6,value:5.8},{x:7,value:4.2},{x:8,value:3.8},{x:9,value:5.5},{x:10,value:6.8},{x:11,value:8.2},{x:12,value:9.5},{x:13,value:8.8},{x:14,value:7.2}];const tc=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:s}=I(),c=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?ec:t},[e==null?void 0:e.chartData]),l=(i=e==null?void 0:e.poctValue)==null?7.4:i,u=(a=e==null?void 0:e.unit)==null?`mmol/L`:a,d=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`âš ï¸ HealthBloodSugarCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(M,{className:`w-5 h-5`,style:{color:$s}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`vitals.bloodSugar`,`Blood Sugar`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[s(`healthy.bsDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:d}),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),s(`healthy.bsDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,z.jsxs)(Vs,{height:208,children:[(0,z.jsx)(g,{width:`100%`,height:208,children:(0,z.jsxs)(O,{data:c,margin:{top:20,right:10,left:10,bottom:20},children:[(0,z.jsx)(`defs`,{children:(0,z.jsxs)(`linearGradient`,{id:`bloodSugarGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,z.jsx)(`stop`,{offset:`5%`,stopColor:`#CBD5E1`,stopOpacity:.5}),(0,z.jsx)(`stop`,{offset:`95%`,stopColor:`#CBD5E1`,stopOpacity:.05})]})}),(0,z.jsx)(k,{hide:!0,domain:[2,12]}),(0,z.jsx)(A,{type:`monotone`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,fill:`url(#bloodSugarGradient)`,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:$s},...Ct.animation})]})}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`46%`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${$s}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:$s}}),(0,z.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:$s},children:[`POCT: `,l,` `,u]}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${$s}`}})]})]})]})});var nc=()=>(0,z.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:[(0,z.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`4`,stroke:`#A78BFA`,strokeWidth:`2`,fill:`none`}),(0,z.jsx)(`text`,{x:`12`,y:`15`,textAnchor:`middle`,fill:`#A78BFA`,fontSize:`8`,fontWeight:`600`,children:`Oâ‚‚`})]});const rc=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=I(),s=B.spo2,c=Array.from({length:20},(e,t)=>({day:`D${t+1}`,value:94+Math.random()*4})),l=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),u=(i=e==null?void 0:e.avgSpO2)==null?94.9:i;e==null||e.referenceLine;let d=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`âš ï¸ HealthBloodOxygenCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(nc,{}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.bloodOxygen`,`Blood Oxygen`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.spo2Description`,`Your average systolic blood pressure over the past {{period}} was `,{period:d}),(0,z.jsx)(`span`,{style:{color:s,fontWeight:600},children:`136 mmHg`}),o(`healthy.spo2DescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:s,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,z.jsxs)(`div`,{className:`relative`,children:[(0,z.jsx)(Vs,{height:112,children:(0,z.jsx)(g,{width:`100%`,height:112,children:(0,z.jsxs)(h,{data:l,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,z.jsx)(k,{hide:!0,domain:[90,100]}),(0,z.jsx)(C,{dataKey:`value`,radius:[3,3,0,0],maxBarSize:12,...Ct.animation,children:l.map((e,t)=>(0,z.jsx)(b,{fill:`#D1D5DB`},`cell-${t}`))})]})})}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.5)`},children:[(0,z.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #A78BFA`,marginLeft:`4px`}}),(0,z.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #A78BFA 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,z.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #A78BFA`,marginRight:`4px`}})]}),(0,z.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.5 - 14px)`},children:(0,z.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:`#A78BFA`},children:[`SpO2: `,u,`%`]})})]})]})});var ic=`#818CF8`;const ac=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=I(),[s]=(0,L.useState)(()=>Array.from({length:14},(e,t)=>({day:`D${t+1}`,hours:6+Math.random()*3,quality:60+Math.random()*30}))),c=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?s:t},[e==null?void 0:e.chartData,s]),l=(i=e==null?void 0:e.avgSleepTime)==null?{hours:7,minutes:11}:i,u=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`âš ï¸ HealthSleepCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(pe,{className:`w-5 h-5`,style:{color:ic}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.sleep`,`Sleep`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.sleepDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:u}),(0,z.jsx)(`span`,{style:{color:ic,fontWeight:600},children:`136 mmHg`}),o(`healthy.sleepDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:ic,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,z.jsxs)(`div`,{className:`relative`,children:[(0,z.jsx)(Vs,{height:112,children:(0,z.jsx)(g,{width:`100%`,height:112,children:(0,z.jsxs)(h,{data:c,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,z.jsx)(k,{hide:!0,domain:[0,12]}),(0,z.jsx)(C,{dataKey:`hours`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Ct.animation,children:c.map((e,t)=>(0,z.jsx)(b,{fill:`#9CA3AF`},`cell-${t}`))}),(0,z.jsx)(C,{dataKey:`quality`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Ct.animation,children:c.map((e,t)=>(0,z.jsx)(b,{fill:`#D1D5DB`},`cell-light-${t}`))})]})})}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.45)`},children:[(0,z.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #818CF8`,marginLeft:`4px`}}),(0,z.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #818CF8 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,z.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #818CF8`,marginRight:`4px`}})]}),(0,z.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.45 - 14px)`},children:(0,z.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:ic},children:[o(`healthy.sleepTime`,`Sleep time`),`: `,l.hours,` hours `,l.minutes,` minutes`]})})]})]})});var oc={positive:`#FBBF24`,neutral:`#93C5FD`,negative:`#3B82F6`},sc=[{day:`D1`,positive:35,neutral:45,negative:20},{day:`D2`,positive:30,neutral:50,negative:20},{day:`D3`,positive:40,neutral:40,negative:20},{day:`D4`,positive:25,neutral:55,negative:20},{day:`D5`,positive:45,neutral:40,negative:15},{day:`D6`,positive:35,neutral:45,negative:20},{day:`D7`,positive:30,neutral:45,negative:25},{day:`D8`,positive:40,neutral:40,negative:20},{day:`D9`,positive:35,neutral:45,negative:20},{day:`D10`,positive:45,neutral:40,negative:15},{day:`D11`,positive:38,neutral:42,negative:20},{day:`D12`,positive:32,neutral:48,negative:20},{day:`D13`,positive:28,neutral:52,negative:20},{day:`D14`,positive:50,neutral:35,negative:15}];const cc=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i;let{t:a}=I(),o=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?sc:t},[e==null?void 0:e.chartData]),s=(i=e==null?void 0:e.periodDescription)==null?`12 weeks`:i;return e||console.log(`âš ï¸ HealthEmotionCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(je,{className:`w-5 h-5`,style:{color:oc.positive}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`vitals.emotion`,`Emotion`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[a(`healthy.emotionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:s}),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),a(`healthy.emotionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,z.jsxs)(Vs,{height:224,children:[(0,z.jsx)(`div`,{className:`absolute left-0 right-0 flex items-center justify-between px-4`,style:{top:`8px`,height:`180px`},children:o.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex flex-col gap-1`,style:{height:`100%`,width:`3%`},children:[(0,z.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:oc.positive,flex:e.positive}}),(0,z.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:oc.neutral,flex:e.neutral}}),(0,z.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:oc.negative,flex:e.negative}})]},t))}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.18)`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${oc.positive}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:oc.positive}}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${oc.positive}`}})]}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.52)`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${oc.neutral}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:oc.neutral}}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${oc.neutral}`}})]}),(0,z.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.85)`},children:[(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${oc.negative}`}}),(0,z.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:oc.negative}}),(0,z.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${oc.negative}`}})]}),(0,z.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 flex justify-center gap-6`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:oc.positive}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.positive`,`ç§¯æž`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:oc.neutral}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.neutral`,`ä¸­æ€§`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:oc.negative}}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.negative`,`æ¶ˆæž`)})]})]})]})]})});var lc=B.heartRate;const uc=(0,L.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o,s;let{t:c}=I(),[l]=(0,L.useState)(()=>Array.from({length:15},(e,t)=>({x:t,value:70+Math.sin(t*.3)*20+Math.random()*10}))),u=(0,L.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?l:t},[e==null?void 0:e.chartData,l]),d=(i=e==null?void 0:e.avgValue)==null?74:i,f=(a=e==null?void 0:e.unit)==null?`/ minute`:a,p=(o=e==null?void 0:e.referenceLine)==null?70:o,m=(s=e==null?void 0:e.periodDescription)==null?`12 weeks`:s;return e||console.log(`âš ï¸ HealthNutritionCard: No data provided, using dummy data`),(0,z.jsxs)(G,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Re,{className:`w-5 h-5`,style:{color:lc}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.nutrition`,`Nutrition`)})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-400`})]}),(0,z.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[c(`healthy.nutritionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:m}),(0,z.jsx)(`span`,{style:{color:lc,fontWeight:600},children:`136 mmHg`}),c(`healthy.nutritionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,z.jsx)(`span`,{style:{color:lc,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,z.jsxs)(`div`,{className:`relative`,children:[(0,z.jsx)(Vs,{height:80,children:(0,z.jsx)(g,{width:`100%`,height:80,children:(0,z.jsxs)(E,{data:u,margin:{top:10,right:10,left:10,bottom:10},children:[(0,z.jsx)(k,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,z.jsx)(D,{y:p,stroke:lc,strokeDasharray:`4 4`,strokeWidth:1,strokeOpacity:.5}),(0,z.jsx)(v,{type:`monotone`,dataKey:`value`,stroke:lc,strokeWidth:2,dot:!1,activeDot:{r:4,fill:lc},...Ct.animation})]})})}),(0,z.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,z.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium`,style:{backgroundColor:lc},children:[c(`healthy.heartRateLabel`,`Heart rate`),`: `,d,` `,f]})})]})]})});function dc({className:e=``,onChange:t}){let{t:n}=I(),[r,i]=(0,L.useState)(ks);return(0,L.useEffect)(()=>{i(ks())},[]),(0,z.jsxs)(`div`,{className:`flex items-center gap-3 ${e}`,children:[(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:n(`healthy.demoMode`,`Demo Mode`)}),(0,z.jsx)(`button`,{onClick:()=>{let e=Ms();i(e),t==null||t(e),window.location.reload()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${r?`bg-orange-500`:`bg-slate-300`}`,role:`switch`,"aria-checked":r,"aria-label":n(`healthy.toggleDemoMode`,`Toggle demo mode`),children:(0,z.jsx)(`span`,{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?`translate-x-6`:`translate-x-1`}`})}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:r?n(`healthy.demoModeOn`,`Using dummy data`):n(`healthy.demoModeOff`,`Using backend data`)})]})}function fc(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function pc(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function mc(){let{t:e}=I(),t=he(),n=kr(),[r,i]=(0,L.useState)(`weekly`),a=r===`daily`?`day`:`week`,[o,s]=(0,L.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),c=(0,L.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(o.end);return t.setHours(0,0,0,0),t<e},[o.end]);(0,L.useMemo)(()=>({startDate:fc(o.start),endDate:fc(o.end)}),[o]);let l=(0,L.useMemo)(()=>({start:pc(o.start),end:pc(o.end)}),[o]),u=()=>{s(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},d=()=>{c&&s(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:f,isLoading:p,isFetching:m,error:h}=Fs(a);return h?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:n.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:n.textSecondary},children:String(h)})]})}):(0,z.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:n.background},children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsxs)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:n.background},children:[(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:l.start,endDate:l.end,onPrevious:u,onNext:d,disableNext:!c})}),(0,z.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,z.jsx)(dc,{})})]}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,z.jsx)(`p`,{style:{color:n.textSecondary},children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(Gs,{data:f==null?void 0:f.comprehensiveHealth,period:r,onPeriodChange:i}),(0,z.jsx)(Ys,{data:f==null?void 0:f.bloodPressure,onClick:()=>t(`/details/blood-pressure`)}),(0,z.jsx)(Qs,{data:f==null?void 0:f.heartRate,onClick:()=>t(`/details/heart-rate`)}),(0,z.jsx)(tc,{data:f==null?void 0:f.bloodSugar,onClick:()=>t(`/details/glucose`)}),(0,z.jsx)(rc,{data:f==null?void 0:f.bloodOxygen,onClick:()=>t(`/details/spo2`)}),(0,z.jsx)(ac,{data:f==null?void 0:f.sleep,onClick:()=>console.log(`Navigate to sleep details`)}),(0,z.jsx)(cc,{data:f==null?void 0:f.emotion,onClick:()=>console.log(`Navigate to emotion details`)}),(0,z.jsx)(uc,{data:f==null?void 0:f.nutrition,onClick:()=>console.log(`Navigate to nutrition details`)}),(0,z.jsx)(Ir,{})]})})]})})}var hc=(0,L.memo)(e=>{let{fill:t,x:n,y:r,width:i,height:a,payload:o,dataKey:s,layers:c}=e,l=null;for(let e=c.length-1;e>=0;e--){let t=c[e].dataKey;if(o[t]&&o[t]>0){l=t;break}}let u=s===l?[3,3,0,0]:[0,0,0,0];return(0,z.jsx)(j,{...e,radius:u})});hc.displayName=`RoundedTopBar`;var gc=({data:e,layers:t,xAxisKey:n,yAxisDomain:r,yAxisFormatter:i,legendShape:a=`circle`,barSize:o=12,height:s=200,className:c=``,renderTooltip:l,showRoundedTop:u=!0,stackId:d=`stack`,showLegend:f=!0,referenceLines:p})=>{let h=$t(),v=en(),b=a===`circle`?`rounded-full`:`rounded`;return(0,z.jsxs)(`div`,{className:`transform-gpu will-change-transform ${c}`,children:[f&&(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2 flex-wrap`,children:t.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 ${b}`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,z.jsxs)(`div`,{ref:v,style:{height:s},className:`-mx-2 relative`,children:[(0,z.jsx)(g,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,z.jsxs)(ee,{data:e,margin:{top:10,right:10,left:-15,bottom:0},barCategoryGap:`40%`,children:[(0,z.jsx)(y,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,z.jsx)(_,{dataKey:n,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,z.jsx)(k,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:i}),l&&(0,z.jsx)(m,{content:l,wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),p==null?void 0:p.map((e,t)=>{var n;return(0,z.jsx)(D,{y:e.y,stroke:(n=e.stroke)==null?`#94a3b8`:n,strokeDasharray:e.strokeDasharray},t)}),t.map(e=>(0,z.jsx)(C,{dataKey:e.dataKey,stackId:d,fill:e.color,barSize:o,shape:u?(0,z.jsx)(hc,{layers:t}):void 0,...h},e.dataKey))]})}),(0,z.jsx)(nn,{containerRef:v})]})]})};gc.displayName=`StackedBarChart`;const _c=(0,L.memo)(gc);var vc=(0,L.memo)(({active:e,payload:t,label:n})=>{let{t:r}=I();if(!e||!t||t.length===0)return null;let i=t.find(e=>e.dataKey===`deep`),a=t.find(e=>e.dataKey===`light`),o=t.find(e=>e.dataKey===`rem`),s=t.find(e=>e.dataKey===`awake`),c=e=>{let t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`};return(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:n}),i&&(0,z.jsxs)(`p`,{style:{color:i.fill},children:[r(`page.sleep.deepSleep`),`: `,c(i.value)]}),a&&(0,z.jsxs)(`p`,{style:{color:a.fill},children:[r(`page.sleep.lightSleep`),`: `,c(a.value)]}),o&&(0,z.jsxs)(`p`,{style:{color:o.fill},children:[r(`page.sleep.remSleep`),`: `,c(o.value)]}),s&&(0,z.jsxs)(`p`,{style:{color:s.fill},children:[r(`page.sleep.awake`),`: `,c(s.value)]})]})}),yc=`#A78BFA`;const bc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w;let{t:T}=I(),E=(e==null?void 0:e.stageColors)||{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},D=(()=>{let e=new Date().getDay();return e===0?6:e-1})(),O=[{deep:60,light:180,rem:90,awake:10},{deep:50,light:190,rem:100,awake:15},{deep:70,light:170,rem:80,awake:10},{deep:55,light:185,rem:95,awake:12},{deep:65,light:175,rem:85,awake:8},{deep:80,light:160,rem:110,awake:20},{deep:60,light:180,rem:90,awake:10}],k=[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`].map((e,t)=>({name:e,deep:t<=D?O[t].deep:0,light:t<=D?O[t].light:0,rem:t<=D?O[t].rem:0,awake:t<=D?O[t].awake:0})),ee=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map(e=>({name:T(e.weekdayKey),deep:e.deep,light:e.light,rem:e.rem,awake:e.awake,total:e.total})))==null?k:t},[e,T,k]),A=(0,L.useMemo)(()=>Math.max(...ee.map(e=>(e.deep||0)+(e.light||0)+(e.rem||0)+(e.awake||0))),[ee]),te=Math.ceil(A/60)+1,ne=[{dataKey:`deep`,color:E.deep,label:T(`page.sleep.deepSleep`)},{dataKey:`light`,color:E.light,label:T(`page.sleep.lightSleep`)},{dataKey:`rem`,color:E.rem,label:T(`page.sleep.remSleep`)},{dataKey:`awake`,color:E.awake,label:T(`page.sleep.awake`)}];return(0,z.jsxs)(G,{className:`${t} relative`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(pe,{className:`w-5 h-5`,style:{color:yc}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:T(`page.sleep.trendyReport`)})]}),n&&(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,z.jsx)(F,{className:`w-3 h-3 animate-spin`}),(0,z.jsx)(`span`,{children:T(`common.loading`)})]})]}),(0,z.jsxs)(`div`,{className:`bg-gray-100 rounded-xl p-4 mb-4`,children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mb-2`,children:T(`page.sleep.weeksAverageSleep`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-3 mb-2`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:`#FB923D`},children:(r=e==null||(i=e.summary)==null?void 0:i.avgHours)==null?`--`:r}),(0,z.jsx)(`span`,{className:`text-base text-slate-600`,children:T(`units.hour`,`hours`)}),(0,z.jsx)(`span`,{className:`text-3xl font-bold ml-1`,style:{color:`#FB923D`},children:(a=e==null||(o=e.summary)==null?void 0:o.avgMinutes)==null?`--`:a}),(0,z.jsx)(`span`,{className:`text-base text-slate-600`,children:T(`units.minute`,`minutes`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(e==null||(s=e.summary)==null?void 0:s.trend)===`down`&&(0,z.jsx)(Ke,{className:`w-5 h-5 text-cyan-500`}),(e==null||(c=e.summary)==null?void 0:c.trend)===`up`&&(0,z.jsx)(Qe,{className:`w-5 h-5 text-orange-500`}),(0,z.jsx)(`span`,{className:`text-lg font-semibold text-cyan-500`,children:(l=e==null||(u=e.summary)==null?void 0:u.durationChange)==null?`--`:l})]})]}),(0,z.jsxs)(`p`,{className:`text-sm text-slate-500 mb-4`,children:[T(`time.lastWeek`),`: `,(d=e==null||(f=e.summary)==null?void 0:f.lastWeekDurationText)==null?`-- hours -- minutes`:d]}),(0,z.jsxs)(`div`,{className:`flex gap-6`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`p`,{className:`text-sm text-slate-500 mb-1`,children:[T(`page.sleep.highest`),`(`,(p=e==null||(m=e.summary)==null?void 0:m.highestDay)==null?`--`:p,`)`]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:`#FB923D`},children:(h=e==null||(g=e.summary)==null?void 0:g.highestHours)==null?`--`:h}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.hour`,`hours`)}),(0,z.jsx)(`span`,{className:`text-2xl font-bold ml-1`,style:{color:`#FB923D`},children:(_=e==null||(v=e.summary)==null?void 0:v.highestMinutes)==null?`--`:_}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.minute`,`minutes`)})]})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`p`,{className:`text-sm text-slate-500 mb-1`,children:[T(`page.sleep.lowest`),`(`,(y=e==null||(b=e.summary)==null?void 0:b.lowestDay)==null?`--`:y,`)`]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:`#FB923D`},children:(x=e==null||(S=e.summary)==null?void 0:S.lowestHours)==null?`--`:x}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.hour`,`hours`)}),(0,z.jsx)(`span`,{className:`text-2xl font-bold ml-1`,style:{color:`#FB923D`},children:(C=e==null||(w=e.summary)==null?void 0:w.lowestMinutes)==null?`--`:C}),(0,z.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.minute`,`minutes`)})]})]})]})]}),(0,z.jsx)(_c,{data:ee,layers:ne,xAxisKey:`name`,yAxisDomain:[0,te*60],yAxisFormatter:e=>`${Math.round(e/60)}h`,legendShape:`circle`,renderTooltip:e=>(0,z.jsx)(vc,{...e}),stackId:`sleep`,height:224})]})});var xc={deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},Sc=`#A78BFA`;const Cc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=I(),o=(r=e==null||(i=e.sleepStructure)==null?void 0:i.stages)==null?[]:r,s=o.length>0?o:[{type:`deep`,percent:0,reference:``,status:`normal`,statusText:``},{type:`light`,percent:0,reference:``,status:`normal`,statusText:``},{type:`rem`,percent:0,reference:``,status:`normal`,statusText:``},{type:`awake`,percent:0,reference:``,status:`normal`,statusText:``}],c=e=>{switch(e){case`deep`:return a(`page.sleep.deepSleep`);case`light`:return a(`page.sleep.lightSleep`);case`rem`:return a(`page.sleep.remSleep`);case`awake`:return a(`page.sleep.awake`);default:return e}},l=e=>{switch(e){case`deep`:return xc.deep;case`light`:return xc.light;case`rem`:return xc.rem;case`awake`:return xc.awake;default:return`#94a3b8`}},u=e=>{switch(e){case`high`:case`low`:return`#F97316`;default:return`#64748b`}};return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Oe,{className:`w-5 h-5`,style:{color:Sc}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.sleep.sleepStructure`)})]}),(0,z.jsx)(`div`,{className:`space-y-3`,children:s.map(e=>{let t=l(e.type),n=u(e.status),r=e.status!==`normal`&&e.statusText;return(0,z.jsxs)(`div`,{className:`p-4 rounded-xl`,style:{backgroundColor:`#F8F9FA`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,z.jsxs)(`span`,{className:`font-semibold text-sm text-slate-800`,children:[c(e.type),` `,e.percent>0?`(${e.percent}%)`:``]}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.reference?`${a(`page.sleep.standard`)}: ${e.reference}`:``})]}),(0,z.jsx)(`div`,{className:`relative h-2.5 bg-slate-200 rounded-full overflow-hidden mb-2`,children:(0,z.jsx)(`div`,{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(e.percent,100)}%`,backgroundColor:t}})}),r&&(0,z.jsxs)(`div`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`p`,{className:`text-xs font-medium flex-1`,style:{color:n},children:e.statusText}),(0,z.jsx)(Se,{className:`w-3.5 h-3.5 flex-shrink-0 mt-0.5`,style:{color:n}})]}),e.status===`normal`&&e.percent>0&&(0,z.jsx)(`p`,{className:`text-xs text-slate-500`,children:`Normal`})]},e.type)})})]})});var wc=`#A78BFA`;const Tc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=I(),o=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,s=[a(`page.sleep.defaultAnalysis1`,{defaultValue:`The average blood oxygen saturation this week was 97%, the same as last week.`}),a(`page.sleep.defaultAnalysis2`,{defaultValue:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`}),a(`page.sleep.defaultAnalysis3`,{defaultValue:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`})];return(0,z.jsx)(Gr,{titleKey:`page.sleep.dataAnalysis`,Icon:_e,items:o.length>0?o:s,themeColor:wc,className:t,isLoading:n})});var Ec=`#A78BFA`;const Dc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=I(),a=(r=e==null?void 0:e.routine)==null?{hasData:!1,avgSleepTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},avgWakeTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},insight:null}:r,o=(0,L.useMemo)(()=>a.insight||i(`page.sleep.defaultInsight`,{defaultValue:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`}),[a.insight,i]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(ot,{className:`w-5 h-5`,style:{color:Ec}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`page.sleep.compareWithLastWeek`)})]}),(0,z.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgSleepTime`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:Ec},children:a.avgSleepTime.text})}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgSleepTime.changeText||i(`page.sleep.sameAsLastWeek`)})]}),(0,z.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgWakeTime`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,z.jsx)(`span`,{className:`text-xl font-bold`,style:{color:Ec},children:a.avgWakeTime.text})}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgWakeTime.changeText||i(`page.sleep.sameAsLastWeek`)})]})]}),(0,z.jsx)(`div`,{className:`p-4 rounded-2xl bg-purple-50`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:o})})]})});var Oc=`#A78BFA`;const kc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=I(),a=(r=e==null?void 0:e.weeklySummary)==null?{overview:null,highlights:null,suggestions:[],dataAnalysis:[]}:r;return(0,z.jsx)(hn,{titleKey:`page.sleep.weeklyOverview`,Icon:we,overallText:(0,L.useMemo)(()=>a.overview||i(`page.sleep.defaultOverview`,{defaultValue:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`}),[a.overview,i]),highlightText:(0,L.useMemo)(()=>a.highlights||i(`page.sleep.defaultHighlights`,{defaultValue:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`}),[a.highlights,i]),highlightLabelKey:`page.sleep.needsAttention`,highlightColor:`#FBBF24`,suggestions:a.suggestions,themeColor:Oc,className:t,isLoading:n})});var Ac={deep:`page.sleep.deepSleep`,light:`page.sleep.lightSleep`,rem:`page.sleep.remSleep`,awake:`page.sleep.awake`};function jc(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Mc(e){switch(e){case`up`:return`up`;case`dn`:case`down`:return`down`;default:return`stable`}}function Nc(e){switch(e){case`high`:return`high`;case`low`:return`low`;default:return`normal`}}function Pc(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:g}=kt(),_=It(h.map(e=>({date:new Date(e.date),dateLabel:jc(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,total:e.total||0,totalText:e.total_text||``,deep:e.deep||0,light:e.light||0,rem:e.rem||0,awake:e.awake||0})),(e,t)=>({date:Lt(g,t),dateLabel:``,weekdayKey:e,total:0,totalText:``,deep:0,light:0,rem:0,awake:0})),v=(e==null?void 0:e.overview)||{},y=v.change||{},b=(e==null?void 0:e.sleep_structure)||{has_data:!1,stages:[]},x=(b.stages||[]).map(e=>({type:e.type,labelKey:Ac[e.type]||e.label,percent:e.percent||0,reference:e.reference||``,status:Nc(e.evaluation),statusText:e.evaluation_text||``,color:e.color||`#ccc`})),S=(e==null?void 0:e.sleep_routine)||{has_data:!1},C={hasData:S.has_data||!1,avgSleepTime:{text:((n=S.avg_sleep_time)==null?void 0:n.time_text)||`--:--`,changeValue:((r=S.avg_sleep_time)==null||(r=r.change)==null?void 0:r.value)||0,trend:Mc(((i=S.avg_sleep_time)==null||(i=i.change)==null?void 0:i.trend)||`same`),changeText:((a=S.avg_sleep_time)==null||(a=a.change)==null?void 0:a.text)||``},avgWakeTime:{text:((o=S.avg_wake_time)==null?void 0:o.time_text)||`--:--`,changeValue:((s=S.avg_wake_time)==null||(s=s.change)==null?void 0:s.value)||0,trend:Mc(((c=S.avg_wake_time)==null||(c=c.change)==null?void 0:c.trend)||`same`),changeText:((l=S.avg_wake_time)==null||(l=l.change)==null?void 0:l.text)||``},insight:S.insight||null};return{chartData:_,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:0,max:10},stageColors:{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},summary:{avgDuration:v.average||0,avgDurationText:v.average_text||`--`,avgHours:Math.floor((v.average||0)/60),avgMinutes:(v.average||0)%60,durationChange:y.value||0,durationChangeText:y.value_text||``,lastWeekDurationText:v.previous_average_text||`--`,trend:Mc(y.trend),maxDurationText:v.max_text||`--`,maxDay:v.max_label||``,highestHours:Math.floor((v.max||0)/60),highestMinutes:(v.max||0)%60,highestDay:v.max_label||`--`,minDurationText:v.min_text||`--`,minDay:v.min_label||``,lowestHours:Math.floor((v.min||0)/60),lowestMinutes:(v.min||0)%60,lowestDay:v.min_label||`--`},sleepStructure:{hasData:b.has_data||!1,stages:x},routine:C,weeklySummary:{overview:(e==null||(d=e.weekly_summary)==null?void 0:d.overview)||null,highlights:(e==null||(f=e.weekly_summary)==null?void 0:f.highlights)||null,suggestions:(e==null||(p=e.weekly_summary)==null?void 0:p.suggestions)||[],dataAnalysis:(e==null||(m=e.weekly_summary)==null?void 0:m.data_analysis)||[]}}}const Fc={all:[`sleep`],trend:e=>[...Fc.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Fc.all,`details`]};function Ic(e){return Me({queryKey:Fc.trend(e),queryFn:async()=>{console.log(`[Sleep API] Fetching with dateRange:`,e);let t=await Ln(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Sleep API] Result:`,t),t},select:e=>Pc(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function Lc(){return ur({featureName:`Sleep`,queryKeyFn:Fc.trend,fetchFn:e=>Ln({start_date:e.startDate,end_date:e.endDate})})}function Rc(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=Lc(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=Ic(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,z.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(bc,{data:f}),(0,z.jsx)(Cc,{data:f}),(0,z.jsx)(Tc,{data:f}),(0,z.jsx)(Dc,{data:f}),(0,z.jsx)(kc,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}const zc=(0,L.memo)(({level:e,size:t=48,className:n=``})=>{let r=t/48,i=14*r,a=8*r,o=18*r,s=10*r,c=3*r,l=18*r,u=12*r,d=14*r,f=e===`good`||e===`bad`?16*r:12*r,p=e===`good`||e===`bad`?8*r:2*r;return(0,z.jsxs)(`div`,{className:`relative rounded-full flex items-center justify-center ${n}`,style:{width:`${t}px`,height:`${t}px`,background:`#FFFFFF`,boxShadow:`0 0 0 ${1*r}px rgba(0, 0, 0, 0.06), 0 ${2*r}px ${10*r}px rgba(15, 23, 42, 0.06)`},children:[(0,z.jsx)(`div`,{className:`absolute rounded-full pointer-events-none`,style:{width:`${t*1.9}px`,height:`${t*1.9}px`,background:`radial-gradient(circle at 30% 35%, rgba(255, 168, 90, 0.95) 0%, rgba(255, 168, 90, 0.0) 55%), radial-gradient(circle at 65% 70%, rgba(255, 120, 200, 0.85) 0%, rgba(255, 120, 200, 0.0) 60%)`,filter:`blur(${22*r}px)`,opacity:.55,zIndex:-1,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`}}),(0,z.jsx)(`div`,{className:`absolute flex items-center justify-center`,style:{top:`${e===`good`?o:l}px`,left:`50%`,transform:`translateX(-50%)`,gap:`${e===`good`?s:u}px`},children:e===`good`?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{style:{width:`${i}px`,height:`${a}px`,borderTop:`${3*r}px solid #F59E0B`,borderRadius:`${i/2}px ${i/2}px 0 0`,background:`transparent`}}),(0,z.jsx)(`div`,{style:{width:`${i}px`,height:`${a}px`,borderTop:`${3*r}px solid #F59E0B`,borderRadius:`${i/2}px ${i/2}px 0 0`,background:`transparent`}})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{className:`rounded-full`,style:{width:`${c}px`,height:`${c}px`,background:`#FFA500`}}),(0,z.jsx)(`div`,{className:`rounded-full`,style:{width:`${c}px`,height:`${c}px`,background:`#FFA500`}})]})}),(0,z.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2`,style:{bottom:`${d}px`},children:e===`good`?null:e===`bad`?(0,z.jsx)(`div`,{style:{width:`${f}px`,height:`${p}px`,borderTop:`${2*r}px solid #94A3B8`,borderRadius:`${f/2}px ${f/2}px 0 0`,transform:`translateY(${4*r}px)`}}):(0,z.jsx)(`div`,{className:`rounded-full`,style:{width:`${f}px`,height:`${p}px`,background:`#94A3B8`}})})]})});zc.displayName=`EmotionFaceIcon`;var Bc=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return!i||i.score===null?null:(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,z.jsxs)(`p`,{style:{color:W.primary},children:[r(`page.emotion.score`),`: `,i.score]})]})});const Vc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m;let{t:h}=I(),g=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.trendChartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,score:e.score})))==null?[]:t},[e==null?void 0:e.trendChartData]);return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5`,style:{color:W.primary}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:h(`page.emotion.trendyReport`)})]}),(0,z.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:H.background.warning},children:[(0,z.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:h(`page.emotion.weeksAverage`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:W.primary},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,z.jsx)(`span`,{className:`text-lg text-slate-500`,children:h(`page.emotion.points`)}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#10B981`:`#EF4444`},children:[(0,z.jsx)(r?$e:ze,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[h(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,` `,h(`page.emotion.points`)]})]}),(()=>{var t,n;let r=(e==null||(t=e.summary)==null?void 0:t.emotionLevel)||`neutral`,i=(e==null||(n=e.summary)==null?void 0:n.emotionLabel)||`--`;return(0,z.jsxs)(`div`,{className:`flex flex-col items-center gap-1.5`,children:[(0,z.jsx)(zc,{level:r,size:48}),(0,z.jsx)(`span`,{className:`text-[10px] font-medium text-slate-500 whitespace-nowrap`,children:i})]})})()]}),(0,z.jsxs)(`div`,{className:`flex gap-6`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[h(`common.max`),`(`,e?h(e.summary.maxWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:W.primary},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:h(`page.emotion.points`)})]})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[h(`common.min`),`(`,e?h(e.summary.minWeekdayKey):`--`,`)`]}),(0,z.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,z.jsx)(`span`,{className:`text-sm font-normal`,children:h(`page.emotion.points`)})]})]})]})]}),(0,z.jsx)(on,{data:g,lines:[{dataKey:`score`,color:W.primary,label:h(`page.emotion.score`),showArea:!0,gradientId:`emotionLineGradient`,legendShape:`circle`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?0:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?100:p],renderTooltip:e=>(0,z.jsx)(Bc,{...e}),showLegend:!1,height:224})]})});var Hc=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,z.jsxs)(`p`,{style:{color:W.positive},children:[r(`page.emotion.positive`),`: `,i.positivePercent,`%`]}),(0,z.jsxs)(`p`,{style:{color:W.neutral},children:[r(`page.emotion.neutral`),`: `,i.neutralPercent,`%`]}),(0,z.jsxs)(`p`,{style:{color:W.negative},children:[r(`page.emotion.negative`),`: `,i.negativePercent,`%`]})]}):null});const Uc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{let{t:r}=I(),i=(0,L.useMemo)(()=>{var t,n;return(t=e==null||(n=e.compositionData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,positivePercent:e.positivePercent,neutralPercent:e.neutralPercent,negativePercent:e.negativePercent})))==null?[]:t},[e==null?void 0:e.compositionData]),a=[{dataKey:`positivePercent`,color:W.positive,label:r(`page.emotion.positive`)},{dataKey:`neutralPercent`,color:W.neutral,label:r(`page.emotion.neutral`)},{dataKey:`negativePercent`,color:W.negative,label:r(`page.emotion.negative`)}];return(0,z.jsxs)(G,{className:`${t} relative overflow-hidden`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(ot,{className:`w-5 h-5`,style:{color:W.primary}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`page.emotion.statistics`)})]}),(0,z.jsx)(_c,{data:i,layers:a,xAxisKey:`name`,yAxisDomain:[0,100],yAxisFormatter:e=>`${e}%`,legendShape:`square`,renderTooltip:e=>(0,z.jsx)(Hc,{...e}),stackId:`emotion`,height:224})]})});var Wc={happy:W.happy,surprised:W.surprised,calm:W.calm,sad:W.sad,angry:W.angry,fearful:W.fearful,disgusted:W.disgusted,neutral:W.calm};const Gc=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=I(),c=W.primary,l=(r=e==null||(i=e.distribution)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.distribution)==null?void 0:o.dominantEmotion)==null?``:a,d=(0,L.useMemo)(()=>l.map(e=>({type:e.type,label:e.label,percent:e.percent,count:e.count,color:Wc[e.type]||W.calm})),[l]);return(0,z.jsx)(un,{title:s(`page.emotion.distribution`),icon:Ge,themeColor:c,pieChartSize:`medium`,items:d,centerValue:u||s(`page.emotion.neutral`),centerLabel:`as main`,showCount:!1,columns:2,className:t})});function Kc({data:e,className:t}){var n;let{t:r}=I(),i=(e==null||(n=e.weeklySummary)==null?void 0:n.dataAnalysis)||[],a=[r(`page.emotion.defaultAnalysis1`,{defaultValue:`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`}),r(`page.emotion.defaultAnalysis2`,{defaultValue:`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`}),r(`page.emotion.defaultAnalysis3`,{defaultValue:`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`})];return(0,z.jsx)(Gr,{titleKey:`page.emotion.dataAnalysis`,Icon:Ee,items:i.length>0?i:a,themeColor:W.primary,className:t})}function qc({data:e,className:t}){let{t:n}=I(),r=e==null?void 0:e.weeklySummary;return(0,z.jsx)(hn,{titleKey:`page.emotion.weeklyOverview`,Icon:we,overallText:(r==null?void 0:r.overview)||n(`page.emotion.defaultOverview`,{defaultValue:`æœ¬å‘¨æ‚¨çš„æƒ…ç»ªæ•´ä½“å¤„äºŽç§¯æžçŠ¶æ€ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„å¿ƒæ€å’Œç”Ÿæ´»ä¹ æƒ¯ï¼`}),highlightText:(r==null?void 0:r.highlights)||n(`page.emotion.defaultHighlights`,{defaultValue:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„æƒ…ç»ªåœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°å·¥ä½œåŽ‹åŠ›ã€ç¡çœ è´¨é‡å’Œç¤¾äº¤æ´»åŠ¨çš„å½±å“ã€‚`}),highlightLabelKey:`page.emotion.needsAttention`,highlightColor:`#FBBF24`,suggestions:r==null?void 0:r.suggestions,themeColor:W.primary,className:t})}function Jc(e){let[t,n]=(0,L.useState)(0);(0,L.useEffect)(()=>{t>=e&&e>0&&n(e-1)},[e,t]);let r=(0,L.useCallback)(t=>{t>=0&&t<e&&n(t)},[e]),i=(0,L.useCallback)(()=>{t<e-1&&n(e=>e+1)},[t,e]),a=(0,L.useCallback)(()=>{t>0&&n(e=>e-1)},[t]);return(0,L.useMemo)(()=>({currentIndex:t,setCurrentIndex:r,goToNext:i,goToPrev:a,isFirst:t===0,isLast:t===e-1,total:e}),[t,r,i,a,e])}var Yc=`#FB923D`,Xc=`#D1D5DB`;const Zc=({total:e,current:t,onSelect:n,activeColor:r=Yc,inactiveColor:i=Xc,className:a=``})=>e<=1?null:(0,z.jsx)(`div`,{className:`flex justify-center items-center gap-2 ${a}`,children:Array.from({length:e}).map((e,a)=>(0,z.jsx)(`button`,{onClick:()=>n==null?void 0:n(a),className:`transition-all duration-300`,style:{width:a===t?24:8,height:8,borderRadius:4,backgroundColor:a===t?r:i},"aria-label":`Go to slide ${a+1}`},a))}),Qc=({items:e,renderItem:t,className:n,isLoading:r,header:i,emptyMessage:a=`No data available`,indicatorActiveColor:o,indicatorInactiveColor:s,hideIndicators:c=!1,currentIndex:l,onIndexChange:u,wrapInCard:d=!0})=>{let[f,p]=(0,L.useState)(0),m=l!==void 0,h=m?l:f,g=(0,L.useCallback)(e=>{let t=typeof e==`function`?e(h):e;m||p(t),u==null||u(t)},[h,m,u]),_=(0,L.useRef)(null),v=(0,L.useRef)(0),y=(0,L.useRef)(0),b=(0,L.useRef)(0),x=(0,L.useRef)(!1),[S,C]=(0,L.useState)(0);(0,L.useEffect)(()=>{m||p(0)},[e.length,m]);let w=(0,L.useCallback)(e=>{v.current=e.touches[0].clientX,y.current=e.touches[0].clientY,x.current=!1,C(0)},[]),T=(0,L.useCallback)(t=>{let n=t.touches[0].clientX,r=t.touches[0].clientY,i=n-v.current,a=r-y.current;if(Math.abs(i)>Math.abs(a)&&Math.abs(i)>10){x.current=!0;let t=i;(h===0&&i>0||h===e.length-1&&i<0)&&(t=i*.3),C(t)}b.current=n},[h,e.length]),E=(0,L.useCallback)(()=>{let t=b.current-v.current;x.current&&(t>50&&h>0?g(e=>e-1):t<-50&&h<e.length-1&&g(e=>e+1)),C(0),x.current=!1,v.current=0,b.current=0},[h,e.length]),D=(0,L.useCallback)(e=>{g(e)},[]),O=-h*100,k=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${r?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:V.loadingOverlay},children:(0,z.jsx)(F,{className:`w-8 h-8 text-white animate-spin`})}),i&&(0,z.jsx)(`div`,{className:`mb-4`,children:i}),e.length>0?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{ref:_,className:`relative overflow-hidden touch-pan-y`,onTouchStart:w,onTouchMove:T,onTouchEnd:E,style:{touchAction:`pan-y pinch-zoom`},"data-swipe-ignore":!0,children:(0,z.jsx)(`div`,{className:`flex`,style:{transform:`translateX(calc(${O}% + ${S}px))`,transition:S===0?`transform 0.3s ease-out`:`none`},children:e.map((e,n)=>(0,z.jsx)(`div`,{className:`w-full flex-shrink-0 px-0`,children:t(e,n)},n))})}),!c&&(0,z.jsx)(Zc,{total:e.length,current:h,onSelect:D,activeColor:o,inactiveColor:s,className:`mt-4`})]}):(0,z.jsx)(`div`,{className:`text-center py-8 text-slate-400 text-sm`,children:a})]});return d?(0,z.jsx)(G,{className:`${n} relative overflow-hidden`,children:k}):(0,z.jsx)(`div`,{className:`${n} relative overflow-hidden`,children:k})};var $c={å¼€å¿ƒ:W.happy,ç”Ÿæ°”:W.angry,å¹³é™:W.calm,åº†å¹¸:W.surprised,æ‚²ä¼¤:W.sad,ææƒ§:W.fearful,åŽŒæ¶:W.disgusted,Happy:W.happy,Angry:W.angry,Calm:W.calm,Surprised:W.surprised,Sad:W.sad,Fearful:W.fearful,Disgusted:W.disgusted},el=`#FB923D`,tl=`#D1D5DB`,nl=(0,L.memo)(({diary:e})=>(0,z.jsxs)(`div`,{className:`bg-slate-50 rounded-2xl p-4 relative overflow-hidden`,children:[(0,z.jsxs)(`div`,{className:`mb-3`,children:[(0,z.jsx)(`h4`,{className:`text-base font-semibold text-slate-800 mb-1`,children:e.title}),(0,z.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[e.dateLabel,` `,e.weekLabel,` `,e.timeLabel]})]}),(0,z.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed mb-4`,children:e.content}),e.imageUrl&&(0,z.jsx)(`div`,{className:`mb-4 -mx-4 px-4`,children:(0,z.jsx)(`div`,{className:`rounded-xl overflow-hidden`,children:(0,z.jsx)(`img`,{src:e.imageUrl,alt:e.title,className:`w-full h-auto max-h-64 object-contain`,style:{backgroundColor:`transparent`},onError:e=>{e.currentTarget.style.display=`none`}})})}),(0,z.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:e.emotionTags.map((e,t)=>(0,z.jsxs)(`span`,{className:`px-3 py-1 rounded-full text-xs text-white font-medium`,style:{backgroundColor:$c[e]||W.calm},children:[`# `,e]},t))}),(0,z.jsx)(`div`,{className:`absolute bottom-0 right-0 w-12 h-12`,style:{background:`linear-gradient(135deg, transparent 50%, rgba(148, 163, 184, 0.15) 50%)`}})]})),rl=(0,L.memo)(()=>{let{t:e}=I();return(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Le,{className:`w-5 h-5`,style:{color:W.primary}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e(`page.emotion.diary`)})]})});const il=(0,L.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=I();return(0,z.jsx)(Qc,{items:(r=e==null?void 0:e.diaries)==null?[]:r,renderItem:e=>(0,z.jsx)(nl,{diary:e}),className:t,isLoading:n,header:(0,z.jsx)(rl,{}),emptyMessage:i(`common.noData`),indicatorActiveColor:el,indicatorInactiveColor:tl})});var al=`emotion_demo_mode`;function ol(){try{return localStorage.getItem(al)===`true`}catch(e){return console.warn(`[Emotion Demo Mode] Failed to read from localStorage:`,e),!1}}function sl(){try{localStorage.setItem(al,`true`),console.log(`âœ… [Emotion Demo Mode] Enabled - Using dummy data`)}catch(e){console.error(`[Emotion Demo Mode] Failed to enable:`,e)}}function cl(){try{localStorage.setItem(al,`false`),console.log(`âœ… [Emotion Demo Mode] Disabled - Using backend data`)}catch(e){console.error(`[Emotion Demo Mode] Failed to disable:`,e)}}function ll(){let e=!ol();return e?sl():cl(),e}function ul({className:e=``,onChange:t}){let{t:n}=I(),[r,i]=(0,L.useState)(ol);return(0,L.useEffect)(()=>{i(ol())},[]),(0,z.jsxs)(`div`,{className:`flex items-center gap-3 ${e}`,children:[(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:n(`page.emotion.demoMode`,`Demo Mode`)}),(0,z.jsx)(`button`,{onClick:()=>{let e=ll();i(e),t==null||t(e),window.location.reload()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${r?`bg-purple-500`:`bg-slate-300`}`,role:`switch`,"aria-checked":r,"aria-label":n(`page.emotion.toggleDemoMode`,`Toggle demo mode`),children:(0,z.jsx)(`span`,{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?`translate-x-6`:`translate-x-1`}`})}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:r?n(`page.emotion.demoModeOn`,`Using dummy data`):n(`page.emotion.demoModeOff`,`Using backend data`)})]})}function dl(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function fl(e){return e===`up`||e===`dn`||e===`same`?e:`same`}function pl(e){return e===`good`||e===`neutral`||e===`bad`?e:`neutral`}function ml(){let{start:e}=kt(),t=Ft(),n=[],r=[],i=[78,82,75,88,85,90,86],a=[25,30,20,35,32,40,38],o=[55,50,60,45,48,42,44],s=[20,20,20,20,20,18,18];for(let c=0;c<=t;c++){let t=Lt(e,c),l=Nt[c];n.push({date:t,dateLabel:dl(t.toISOString().split(`T`)[0]),weekdayKey:l,score:i[c]}),r.push({date:t,dateLabel:dl(t.toISOString().split(`T`)[0]),weekdayKey:l,positivePercent:a[c],neutralPercent:o[c],negativePercent:s[c],positiveCount:Math.round(a[c]/5),neutralCount:Math.round(o[c]/5),negativeCount:Math.round(s[c]/5)})}return{trendChartData:It(n,(t,n)=>({date:Lt(e,n),dateLabel:``,weekdayKey:t,score:0})),yAxisRange:{min:0,max:100},compositionData:It(r,(t,n)=>({date:Lt(e,n),dateLabel:``,weekdayKey:t,positivePercent:0,neutralPercent:0,negativePercent:0,positiveCount:0,neutralCount:0,negativeCount:0})),summary:{avgValue:85,previousAvg:86,maxValue:88,maxWeekdayKey:`weekdays.tue`,minValue:82,minWeekdayKey:`weekdays.mon`,emotionLevel:`good`,emotionLabel:`ç§¯æžå‘å¥½`,trend:`dn`,changeValue:1},distribution:{totalCount:55,dominantEmotion:`å¹³é™`,distribution:[{type:`happy`,label:`å¼€å¿ƒ`,count:4,percent:7},{type:`angry`,label:`ç”Ÿæ°”`,count:5,percent:9},{type:`neutral`,label:`å¹³é™`,count:45,percent:82},{type:`surprised`,label:`åº†å¹¸`,count:0,percent:0},{type:`sad`,label:`æ‚²ä¼¤`,count:1,percent:2},{type:`fearful`,label:`ææƒ§`,count:0,percent:0},{type:`disgusted`,label:`åŽŒæ¶`,count:0,percent:0}]},comparison:{current:{average:85},previous:{average:86},insight:null},weeklySummary:{overview:`æœ¬å‘¨"å¼€å¿ƒ"ä¸Ž"å¹³é™"å æ¯”åˆè®¡è¾¾ 72%ã€‚å‘¨å…­çš„æˆ·å¤–æ´»åŠ¨æ˜¾è‘—æå‡äº†æ‚¨çš„æ„‰æ‚¦æŒ‡æ•°ã€‚`,highlights:`å‘¨äºŒå‡ºçŽ°çŸ­æš‚çš„"ç–²æƒ«/æ‚²ä¼¤"æƒ…ç»ªï¼Œä¸»è¦ä¸Žå·¥ä½œåŽ‹åŠ›åŠå‰ä¸€æ™šç¡çœ ä¸è¶³æœ‰å…³ã€‚`,suggestions:[],dataAnalysis:[`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`,`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`,`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`]},diaries:[{diaryId:`dummy-1`,title:`é’±åŒ…å¤±è€Œå¤å¾—`,weekLabel:`å‘¨å›› Thu`,dateLabel:`Nov.21`,timeLabel:`20:22`,content:`ä»Šå¤©å‡ºé—¨ä¹°èœæ—¶ä¸å°å¿ƒæŠŠé’±åŒ…è½åœ¨äº†è¶…å¸‚ï¼Œå›žå®¶æ‰å‘çŽ°ã€‚æ­£ç€æ€¥çš„æ—¶å€™ï¼Œè¶…å¸‚æ‰“æ¥ç”µè¯è¯´æœ‰äººæ¡åˆ°äº¤ç»™äº†æœåŠ¡å°ã€‚çœŸæ˜¯å¤ªæ„Ÿè°¢é‚£ä½å¥½å¿ƒäººäº†ï¼Œä¸–ç•Œè¿˜æ˜¯å¥½äººå¤šå•Šï¼`,emotionTags:[`åº†å¹¸`],imageUrl:`/images/emotion/wallet.png`},{diaryId:`dummy-2`,title:`ç¤¾åŒºæ´»åŠ¨çœŸçƒ­é—¹`,weekLabel:`å‘¨äº” Fri`,dateLabel:`Nov.22`,timeLabel:`15:30`,content:`ä»Šå¤©å‚åŠ äº†ç¤¾åŒºç»„ç»‡çš„è€å¹´äººè”è°Šä¼šï¼Œè§åˆ°äº†å¥½å¤šè€æœ‹å‹ã€‚å¤§å®¶ä¸€èµ·èŠå¤©ã€ä¸‹æ£‹ã€å”±æ­Œï¼Œåº¦è¿‡äº†æ„‰å¿«çš„ä¸‹åˆã€‚æ´»åŠ¨ç»“æŸåŽè¿˜ä¸€èµ·åˆå½±ç•™å¿µï¼ŒçœŸå¸Œæœ›è¿™æ ·çš„æ´»åŠ¨èƒ½å¤šä¸¾åŠžå‡ æ¬¡ã€‚`,emotionTags:[`å¼€å¿ƒ`],imageUrl:`/images/emotion/meeting.png`},{diaryId:`dummy-3`,title:`æœŸå¾…å·²ä¹…çš„å®¶åº­èšé¤`,weekLabel:`å‘¨ä¸€ Mon`,dateLabel:`Nov.24`,timeLabel:`19:33`,content:`ä»Šå¤©å­©å­ä»¬éƒ½å›žæ¥äº†ï¼Œæˆ‘ç‰¹æ„åšäº†ä»–ä»¬çˆ±åƒçš„çº¢çƒ§è‚‰ã€‚å°å­™å­è®²äº†å¾ˆå¤šå­¦æ ¡çš„äº‹æƒ…ï¼Œå¥³å„¿ä¹Ÿåˆ†äº«äº†å·¥ä½œä¸Šçš„è¶£äº‹ã€‚ä¸€å®¶äººå›´ååœ¨ä¸€èµ·åƒé¥­èŠå¤©ï¼Œè¿™ç§æ¸©é¦¨çš„æ„Ÿè§‰çœŸå¥½ã€‚`,emotionTags:[`å¼€å¿ƒ`],imageUrl:`/images/emotion/daughter.png`}]}}function hl(e){var t,n,r,i,a;if(console.log(`[Emotion Adapter] Input:`,e),!e)return console.warn(`[Emotion Adapter] No API data, using dummy data`),ml();let o=(e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[],{start:s}=kt(),c=It(o.map(e=>({date:new Date(e.date),dateLabel:dl(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,score:e.score})),(e,t)=>({date:Lt(s,t),dateLabel:``,weekdayKey:e,score:0})),l=It(((e==null||(n=e.emotion_composition)==null?void 0:n.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:dl(e.date),weekdayKey:Pt[e.label]||`weekdays.mon`,positivePercent:e.positive_percent,neutralPercent:e.neutral_percent,negativePercent:e.negative_percent,positiveCount:e.positive_count,neutralCount:e.neutral_count,negativeCount:e.negative_count})),(e,t)=>({date:Lt(s,t),dateLabel:``,weekdayKey:e,positivePercent:0,neutralPercent:0,negativePercent:0,positiveCount:0,neutralCount:0,negativeCount:0})),u=((e==null?void 0:e.emotion_diaries)||[]).map(e=>({diaryId:e.diary_id,title:e.title,weekLabel:e.week_label,dateLabel:e.date_label,timeLabel:e.time_label,content:e.content,emotionTags:e.emotion_tag||[],imageUrl:e.image_url})),d=(e==null?void 0:e.overview)||{},f=d.average||0,p=d.previous_average||0,m=d.max||0,h=d.min||0,g=d.max_label&&Pt[d.max_label]||`weekdays.mon`,_=d.min_label&&Pt[d.min_label]||`weekdays.mon`,v=pl(d.emotion_level),y=d.emotion_label||``,b=d.change||{},x=fl(b.trend),S=b.value||0,C=(e==null?void 0:e.emotion_distribution)||{},w={totalCount:C.total_count||0,dominantEmotion:C.dominant_emotion||``,distribution:(C.distribution||[]).map(e=>({type:e.type,label:e.label,count:e.count,percent:e.percent}))},T=(e==null?void 0:e.comparison)||{},E=(e==null?void 0:e.weekly_summary)||{},D={trendChartData:c.length>0?c:ml().trendChartData,yAxisRange:(e==null||(r=e.trend_chart)==null?void 0:r.y_axis_range)||{min:0,max:100},compositionData:l.length>0?l:ml().compositionData,summary:{avgValue:f,previousAvg:p,maxValue:m,maxWeekdayKey:g,minValue:h,minWeekdayKey:_,emotionLevel:v,emotionLabel:y,trend:x,changeValue:S},distribution:w,comparison:{current:{average:((i=T.current)==null?void 0:i.average)||f},previous:{average:((a=T.previous)==null?void 0:a.average)||p},insight:T.insight||null},weeklySummary:{overview:E.overview||null,highlights:E.highlights||null,suggestions:E.suggestions||[],dataAnalysis:E.data_analysis||[]},diaries:u.length>0?u:ml().diaries};return console.log(`[Emotion Adapter] Output:`,D),D}const gl={all:[`emotion`],trend:(e,t)=>[...gl.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate,t?`demo`:`live`],details:()=>[...gl.all,`details`]};async function _l(e){try{return await Mn(`emotion`,e)}catch(e){return console.warn(`[Emotion API] API not available, using dummy data:`,e),null}}function vl(e){let t=ol();return Me({queryKey:gl.trend(e,t),queryFn:async()=>{if(t)return console.log(`ðŸŽ­ [Emotion Demo Mode] Using dummy data instead of backend API`),ml();console.log(`[Emotion API] Fetching with dateRange:`,e);let n=await _l(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Emotion API] Result:`,n),hl(n)},staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function yl(){let e=ol();return ur({featureName:`Emotion`,queryKeyFn:t=>gl.trend(t,e),fetchFn:async t=>{if(e)return ml();try{return hl(await _l({start_date:t.startDate,end_date:t.endDate}))}catch(e){return ml()}}})}function bl(){let{t:e}=I(),t=kr(),{prefetchPreviousWeeks:n}=yl(),{dateRange:r,apiDateRange:i,displayDateRange:a,canGoNext:o,goToPreviousWeek:s,goToNextWeek:c,setWeek:l}=Ar(),{containerRef:u,swipeHandlers:d}=Fr({onSwipeLeft:c,onSwipeRight:s,canSwipeLeft:o,canSwipeRight:!0});(0,L.useEffect)(()=>{n(r.start,3)},[r.start,n]);let{data:f,isLoading:p,error:m}=vl(i);return m?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(m)})]})}):(0,z.jsx)(`div`,{ref:u,className:`min-h-screen pb-20`,style:{backgroundColor:t.background},...d,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsxs)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:[(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:a.start,endDate:a.end,onPrevious:s,onNext:c,disableNext:!o,onSelectWeek:l})}),(0,z.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,z.jsx)(ul,{})})]}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,z.jsx)(`div`,{className:`text-center py-12`,children:(0,z.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(Vc,{data:f}),(0,z.jsx)(Uc,{data:f}),(0,z.jsx)(Gc,{data:f}),(0,z.jsx)(Kc,{data:f}),(0,z.jsx)(qc,{data:f}),(0,z.jsx)(il,{data:f}),(0,z.jsx)(Ir,{})]})})]})})}const xl=({data:e,className:t})=>{let{t:n}=I();if(!e)return null;let r=[{name:`Low`,value:30,color:`#93C5FD`},{name:`Normal`,value:25,color:`#86EFAC`},{name:`Excess`,value:45,color:`#FB923D`}],i=4500,a=Math.min(i,Math.max(0,e.currentCal))/i;return(0,z.jsx)(G,{className:`${t} p-5 bg-white rounded-[24px]`,children:(0,z.jsxs)(`div`,{className:`flex flex-col w-full`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 w-full`,children:[(0,z.jsx)(Qe,{className:`w-5 h-5 text-orange-500`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`nutrition.weeklyAverageReport`,`Weekly average report`)})]}),(0,z.jsxs)(`div`,{className:`relative w-full h-[220px] mb-4 rounded-xl overflow-hidden`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`absolute top-3 left-4 text-[12px] text-slate-400 z-10`,children:n(`nutrition.weeklyIntakeReport`,`Weekly intake report`)}),e.status===`alert`&&(0,z.jsxs)(`div`,{className:`absolute top-3 right-4 flex items-center gap-1 text-orange-500 text-xs z-10`,children:[(0,z.jsx)(Ve,{className:`w-3 h-3`}),n(`nutrition.excessiveIntake`,`Excessive intake`)]}),(0,z.jsx)(`div`,{className:`w-full h-full`,children:(0,z.jsx)(g,{width:`100%`,height:`100%`,children:(0,z.jsx)(S,{children:(0,z.jsx)(x,{data:r,cx:`50%`,cy:`88%`,startAngle:180,endAngle:0,innerRadius:125,outerRadius:145,paddingAngle:3,dataKey:`value`,stroke:`none`,cornerRadius:8,children:r.map((e,t)=>(0,z.jsx)(b,{fill:e.color},`cell-${t}`))})})})}),(0,z.jsx)(`div`,{className:`absolute inset-0 pointer-events-none z-10`,children:(0,z.jsx)(`div`,{className:`absolute left-1/2 top-[83%] w-0 h-0`,children:(0,z.jsx)(`div`,{className:`absolute left-0 top-0 w-0 h-0 flex items-center justify-start transition-transform duration-1000 ease-out`,style:{transform:`rotate(${-180+a*180}deg)`},children:(0,z.jsxs)(`div`,{className:`relative flex items-center`,style:{transformOrigin:`left center`},children:[(0,z.jsx)(`div`,{className:`absolute -left-[10px] -top-[10px] w-[20px] h-[20px] bg-[#FB923D] rounded-full z-20 border-[3px] border-white box-border shadow-sm`}),(0,z.jsx)(`div`,{className:`absolute left-[0px] top-[-3px] h-[6px] w-[36px] bg-[#FB923D] rounded-l-none`}),(0,z.jsx)(`div`,{className:`absolute left-[36px] top-[-7px] h-[14px] w-[58px] bg-[#FB923D] rounded-full shadow-sm`})]})})})}),(0,z.jsxs)(`div`,{className:`absolute top-[75px] left-1/2 -translate-x-1/2 flex flex-col items-center pointer-events-none z-0`,children:[(0,z.jsx)(`div`,{className:`text-[30px] font-bold text-[#FB923D] leading-none tracking-tight`,children:e.currentCal}),(0,z.jsx)(`div`,{className:`text-[14px] text-slate-400 font-medium mt-0.5`,children:n(`nutrition.kcal`,`kcal`)}),(0,z.jsxs)(`div`,{className:`text-[11px] text-slate-400 mt-1 opacity-90`,children:[n(`nutrition.target`,`Target`),`: `,e.targetCal,` `,n(`nutrition.kcal`,`kcal`)]})]})]}),(0,z.jsxs)(`div`,{className:`w-full grid grid-cols-2 gap-3`,children:[(0,z.jsxs)(`div`,{className:`rounded-[16px] py-4 px-4 flex flex-col items-center justify-center`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`text-[12px] text-slate-400 mb-1`,children:n(`nutrition.calorieIntake`,`Calorie intake`)}),(0,z.jsxs)(`span`,{className:`text-[20px] font-bold text-orange-500 whitespace-nowrap`,children:[e.remainingCal>0?`+${e.remainingCal}`:e.remainingCal,(0,z.jsx)(`span`,{className:`text-[12px] font-normal text-slate-500 ml-1`,children:n(`nutrition.kcal`,`kcal`)})]})]}),(0,z.jsxs)(`div`,{className:`rounded-[16px] py-4 px-4 flex flex-col items-center justify-center`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`text-[12px] text-slate-400 mb-1`,children:n(`nutrition.averageConsumption`,`Average consumption`)}),(0,z.jsxs)(`span`,{className:`text-[20px] font-bold text-[#FB923D] whitespace-nowrap`,children:[`--- `,(0,z.jsx)(`span`,{className:`text-[12px] font-normal text-slate-500 ml-1`,children:n(`nutrition.kcal`,`kcal`)})]})]})]})]})})};function Sl({title:e,icon:t,themeColor:n,data:r,unit:i=``,avgValue:a,className:o,isLoading:s}){let{t:c}=I(),l=(e,t)=>e>t?`#FB923D`:e<t*.8?`#93C5FD`:`#86EFAC`;return r?(0,z.jsxs)(G,{className:`${o} relative overflow-hidden p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[t&&(0,z.jsx)(t,{className:`w-5 h-5`,style:{color:n}}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e}),typeof a==`number`&&(0,z.jsxs)(`span`,{className:`ml-auto flex items-center gap-1 text-xs text-slate-500 bg-white border border-slate-200 px-2 py-1 rounded-full shadow-sm`,children:[c(`nutrition.avg`,`Avg`),` `,a,` `,i]})]}),(0,z.jsxs)(`div`,{className:`flex justify-start gap-6 mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-green-300`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.meet`,`Goal`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-blue-300`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.insufficient`,`Insufficient`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-orange-400`}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.excess`,`Exceed`)})]})]}),(0,z.jsx)(`div`,{className:`h-48 w-full`,children:(0,z.jsx)(g,{width:`100%`,height:`100%`,children:(0,z.jsxs)(h,{data:r,margin:{top:10,right:0,left:-20,bottom:0},barSize:12,children:[(0,z.jsx)(y,{strokeDasharray:`3 3`,vertical:!1,stroke:`#F1F5F9`}),(0,z.jsx)(_,{dataKey:`label`,axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`},dy:10}),(0,z.jsx)(k,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`}}),(0,z.jsx)(C,{dataKey:`value`,radius:[6,6,0,0],children:r.map((e,t)=>(0,z.jsx)(b,{fill:l(e.value,e.target)},`cell-${t}`))})]})})})]}):null}const Cl=({data:e,className:t,isLoading:n})=>{let{t:r}=I(),i=B.nutrition||`#FB923D`,a=(e==null?void 0:e.map(e=>({label:e.date,value:e.value,target:e.target})))||[],o=e&&e.length>0?Math.round(e.reduce((e,t)=>e+t.value,0)/e.length):0;return(0,z.jsx)(Sl,{title:r(`nutrition.ingestTargetStatistics`,`Ingest target statistics`),icon:Qe,themeColor:i,data:a,unit:r(`nutrition.kcal`,`kcal`),avgValue:o,className:t,isLoading:n})},wl=({data:e,className:t,isLoading:n})=>{let{t:r}=I(),i=B.nutrition||`#FB923D`;return(0,z.jsx)(Gr,{titleKey:`nutrition.dataAnalysis`,Icon:we,items:(e==null?void 0:e.details)||[],themeColor:i,className:t,isLoading:n})};function Tl(e,t){let n=e/t*100;return n>=90&&n<=110?`goal`:n>110?`exceed`:`insufficient`}function El(e,t){switch(e){case`goal`:return{bg:`bg-green-100`,text:`text-green-600`,label:t(`nutrition.goal`,`Goal`)};case`exceed`:return{bg:`bg-orange-100`,text:`text-orange-600`,label:t(`nutrition.exceed`,`Exceed`)};case`insufficient`:return{bg:`bg-blue-100`,text:`text-blue-600`,label:t(`nutrition.insufficient`,`Insufficient`)}}}const Dl=({data:e,summary:t,className:n})=>{let{t:r}=I();if(!e)return null;let i=t||r(`nutrition.balancedIntakeSummary`,`Your macronutrient balance is generally good. Protein intake hits the target, while fat intake is slightly high. We recommend maintaining current protein levels while reducing fat consumption.`);return(0,z.jsxs)(G,{className:`${n} p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(Ge,{className:`w-5 h-5 text-orange-500`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`nutrition.macronutrientStructure`,`Macronutrient structure`)})]}),(0,z.jsx)(`div`,{className:`flex flex-col gap-4`,children:e.map((e,t)=>{let n=El(Tl(e.current,e.total),(e,t)=>r(e,t==null?e:t));return(0,z.jsxs)(`div`,{className:`rounded-xl p-4 relative`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`absolute top-4 right-4 text-xs font-medium px-3 py-1 rounded-md ${n.bg} ${n.text}`,children:n.label}),(0,z.jsx)(`div`,{className:`flex justify-between items-center`,children:(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:e.label})}),(0,z.jsxs)(`div`,{className:`flex justify-between items-baseline mb-3`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:B.nutrition},children:e.current}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500 ml-1`,children:e.unit})]}),(0,z.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[r(`nutrition.target`,`Target`),`: `,e.total,` `,e.unit]})]}),(0,z.jsx)(`div`,{className:`h-2 w-full bg-slate-200 rounded-full overflow-hidden`,children:(0,z.jsx)(`div`,{className:`h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(100,e.current/e.total*100)}%`,backgroundColor:e.color}})})]},t)})}),(0,z.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-sm text-slate-600 leading-relaxed`,children:i})]})},Ol=({data:e,summary:t,className:n})=>{let{t:r}=I();if(!e)return null;let i=t||r(`nutrition.microElementsSummary`,`Monitor your micro-element intake to maintain optimal health.`);return(0,z.jsxs)(G,{className:`${n} p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(pt,{className:`w-5 h-5 text-orange-500`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`nutrition.microElementStatus`,`Micro-element status`)})]}),(0,z.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,t)=>{let n=e.status===`normal`?`bg-green-100 text-green-600`:e.status===`low`?`bg-blue-100 text-blue-600`:`bg-orange-100 text-orange-600`,i=e.status===`normal`?r(`nutrition.normal`,`Normal`):e.status===`low`?r(`nutrition.insufficient`,`Insufficient`):r(`nutrition.excess`,`Excess`),a=e.status===`normal`?`#86EFAC`:e.status===`low`?`#93C5FD`:`#FB923D`,o=e.status===`low`?`30%`:e.status===`normal`?`60%`:`90%`;return(0,z.jsxs)(`div`,{className:`p-3 rounded-xl border border-slate-100`,style:{backgroundColor:H.background.gray},children:[(0,z.jsxs)(`div`,{className:`flex justify-between items-start mb-2`,children:[(0,z.jsx)(`span`,{className:`text-sm font-semibold text-slate-700`,children:e.name}),(0,z.jsx)(`span`,{className:`text-[10px] px-1.5 py-0.5 rounded-md font-medium ${n}`,children:i})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1 mb-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:e.value}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]}),(0,z.jsx)(`div`,{className:`relative h-1.5 bg-slate-200 rounded-full w-full overflow-hidden`,children:(0,z.jsx)(`div`,{className:`absolute h-full rounded-full`,style:{width:o,backgroundColor:a}})}),(0,z.jsxs)(`div`,{className:`flex justify-between text-[10px] text-slate-400 mt-1`,children:[(0,z.jsx)(`span`,{children:r(`nutrition.range`,`Range`)}),(0,z.jsxs)(`span`,{children:[e.range[0],`-`,e.range[1]]})]})]},t)})}),(0,z.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-sm text-slate-600 leading-relaxed`,children:i})]})},kl=({data:e,summary:t,className:n})=>{let{t:r}=I();if(!e||e.length===0)return null;let i=t||r(`nutrition.dietaryComponentsSummary`,`Monitor your dietary fiber and purine intake for better digestive health.`);return(0,z.jsxs)(G,{className:`${n} p-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(st,{className:`w-5 h-5 text-orange-500`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`nutrition.otherDietaryIngredients`,`Other dietary ingredients`)})]}),(0,z.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,t)=>{let n=e.status===`normal`?`bg-green-100 text-green-600`:e.status===`low`?`bg-blue-100 text-blue-600`:`bg-orange-100 text-orange-600`,i=e.status===`normal`?r(`nutrition.goal`,`Goal`):e.status===`low`?r(`nutrition.insufficient`,`Insufficient`):r(`nutrition.excess`,`Excess`),a=e.status===`normal`?`#86EFAC`:e.status===`low`?`#93C5FD`:`#FB923D`,o=Math.min(100,e.value/e.target*100);return(0,z.jsxs)(`div`,{className:`p-3 rounded-xl border border-slate-100`,style:{backgroundColor:H.background.gray},children:[(0,z.jsxs)(`div`,{className:`flex justify-between items-start mb-2`,children:[(0,z.jsx)(`span`,{className:`text-sm font-semibold text-slate-700`,children:e.name}),(0,z.jsx)(`span`,{className:`text-[10px] px-1.5 py-0.5 rounded-md font-medium ${n}`,children:i})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1 mb-2`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:e.value}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]}),(0,z.jsx)(`div`,{className:`relative h-1.5 bg-slate-200 rounded-full w-full overflow-hidden`,children:(0,z.jsx)(`div`,{className:`absolute h-full rounded-full`,style:{width:`${o}%`,backgroundColor:a}})}),(0,z.jsx)(`div`,{className:`flex justify-between text-[10px] text-slate-400 mt-1`,children:(0,z.jsxs)(`span`,{children:[r(`nutrition.target`,`Target`),`: `,e.target,` `,e.unit]})})]},t)})}),(0,z.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-sm text-slate-600 leading-relaxed`,children:i})]})};var Al=`#FB923D`,jl=`#EFF6FF`,Ml=`#D1D5DB`,Nl=`#F8F8F8`,Pl=`#918D8A`,Fl=[{primary:`#FB923D`,bg:`#FEE4CD`,inactive:`#FED7AA`},{primary:`#A78BFA`,bg:`#EDE9FE`,inactive:`#DDD6FE`},{primary:`#10B981`,bg:`#D1FAE5`,inactive:`#A7F3D0`}],Il={breakfast:`nutrition.comparison.breakfast`,lunch:`nutrition.comparison.lunch`,dinner:`nutrition.comparison.dinner`,snacks:`nutrition.comparison.snacks`};function Ll(e){return`${[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`][e.getMonth()]}.${e.getDate()} ${[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`][e.getDay()]}`}var Rl=({lastWeekValue:e,thisWeekValue:t,themeColor:n=Al})=>{let{t:r}=I(),i=Math.max(e,t),a=i>0?e/i*64:0,o=i>0?t/i*64:0;return(0,z.jsxs)(`div`,{className:`flex items-end gap-3 h-20`,children:[(0,z.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,z.jsx)(`div`,{className:`flex items-end h-16`,children:(0,z.jsx)(`div`,{className:`w-4 rounded-t-full transition-all duration-300`,style:{height:`${Math.max(a,a>0?4:0)}px`,backgroundColor:Ml}})}),(0,z.jsx)(`span`,{className:`text-[10px] whitespace-nowrap`,style:{color:Pl},children:r(`nutrition.comparison.lastWeek`,`Last week`)})]}),(0,z.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,z.jsx)(`div`,{className:`flex items-end h-16`,children:(0,z.jsx)(`div`,{className:`w-4 rounded-t-full transition-all duration-300`,style:{height:`${Math.max(o,o>0?4:0)}px`,backgroundColor:n}})}),(0,z.jsx)(`span`,{className:`text-[10px] whitespace-nowrap`,style:{color:Pl},children:r(`nutrition.comparison.thisWeek`,`This week`)})]})]})};function zl(e){let[t,n]=(0,L.useState)(e),r=(0,L.useRef)(void 0),i=(0,L.useRef)(0),a=(0,L.useRef)(0),o=(0,L.useRef)(0),s=(0,L.useRef)(0),c=1e3;return(0,L.useEffect)(()=>{Math.abs(e-t)>.1&&(i.current=performance.now(),a.current=performance.now(),o.current=0,s.current=e-t);let l=u=>{let d=e-t,f=u-i.current;if(Math.abs(d)<.1){n(e);return}if(f>=c){n(e);return}let p=Math.max(1,u-a.current)/1e3;a.current=u;let m=(c-f)/1e3,h=Math.abs(d),g;if(Math.abs(d)>5)g=Math.sign(d)*Math.min(10,Math.abs(d));else{let e=h/Math.max(m,.001),t=5*d;o.current+=d*p;let n=Math.abs(d)*10;o.current=Math.max(-n,Math.min(n,o.current));let r=.1*o.current,i=.3*(d-s.current)/Math.max(p,.001);s.current=d;let a=(t+r+i)*p,c=e*p;g=Math.sign(d)*Math.max(Math.abs(a),Math.abs(c),2),g=Math.sign(d)*Math.min(Math.abs(g),Math.abs(d))}n(t+g),r.current=requestAnimationFrame(l)};return Math.abs(e-t)>.1&&(r.current=requestAnimationFrame(l)),()=>{r.current&&cancelAnimationFrame(r.current)}},[e,t]),Math.round(t)}var Bl=({data:e,dish:t,index:n=0})=>{let{t:r}=I(),i=zl(e.calorieChange),a=i>0?`+`:``,o=Fl[Math.min(n,2)],s=r(Il[t.mealType]||`nutrition.comparison.dinner`,t.mealType),c=Ll(t.date);return(0,z.jsx)(`div`,{className:`px-[25px]`,children:(0,z.jsx)(`div`,{className:`rounded-2xl overflow-hidden`,children:(0,z.jsxs)(`div`,{className:`flex flex-col`,children:[(0,z.jsxs)(`div`,{className:`px-5 py-3 flex justify-between items-start`,style:{backgroundColor:o.bg},children:[(0,z.jsxs)(`div`,{className:`flex flex-col gap-1 flex-1`,children:[(0,z.jsx)(`span`,{className:`text-xs`,style:{color:Pl},children:r(`nutrition.comparison.avgCaloriesCompare`,`Average calories compare to last week`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsxs)(`span`,{className:`text-3xl font-bold`,style:{color:o.primary},children:[a,i]}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:r(`nutrition.kcal`,`kcal`)})]}),(0,z.jsxs)(`span`,{className:`text-xs`,style:{color:Pl},children:[r(`nutrition.comparison.lastWeekValue`,`Last week`),`: `,Math.round(e.lastWeekCalories),` `,r(`nutrition.kcal`,`kcal`)]})]}),(0,z.jsx)(Rl,{lastWeekValue:e.lastWeekCalories,thisWeekValue:e.thisWeekCalories,themeColor:o.primary})]}),(0,z.jsxs)(`div`,{className:`p-4 pb-4`,style:{backgroundColor:Nl},children:[(0,z.jsx)(`p`,{className:`text-xs mb-3`,style:{color:Pl},children:r(`nutrition.comparison.mainCause`,`Data attribution: Primarily caused by...`)}),(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-32 aspect-video rounded-lg overflow-hidden flex-shrink-0 bg-slate-100`,children:t.imageUrl?(0,z.jsx)(`img`,{src:t.imageUrl,alt:t.dishName,className:`w-full h-full object-cover`}):(0,z.jsx)(`div`,{className:`w-full h-full flex items-center justify-center text-slate-300`,children:`ðŸ½ï¸`})}),(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`h4`,{className:`text-base font-semibold text-slate-800 truncate`,children:t.dishName}),(0,z.jsxs)(`p`,{className:`text-xs truncate`,style:{color:Pl},children:[c,` `,s]})]}),(0,z.jsxs)(`div`,{className:`flex flex-col items-center px-3 py-1.5 rounded-lg`,style:{backgroundColor:o.primary},children:[(0,z.jsxs)(`span`,{className:`text-xs font-medium text-white`,children:[t.calories,` `,r(`nutrition.kcal`,`kcal`)]}),(0,z.jsx)(`span`,{className:`text-[10px] text-white/80`,children:t.remark||r(`nutrition.exceed`,`Exceed`)})]})]})]})]})})})};const Vl=({data:e,className:t,isLoading:n})=>{let{t:r}=I(),i={dishName:r(`nutrition.comparison.sampleDish`,`Sample high-calorie dinner`),calories:680,mealType:`dinner`,date:new Date,remark:r(`nutrition.comparison.placeholderRemark`,`Likely the main contributor`)},a={lastWeekCalories:2100,thisWeekCalories:1800,calorieChange:-300,trendAnalysis:r(`nutrition.comparison.placeholderTrend`,`This week is slightly lower than last week. Watch dinner calories to keep the downward trend.`),mainCauseDishes:[i]},o=e==null?a:e,s=(o.mainCauseDishes&&o.mainCauseDishes.length>0?o.mainCauseDishes:[i]).slice(0,3),c=s.length>=2,l=Jc(s.length);return(0,z.jsxs)(G,{className:`${t} flex flex-col gap-4`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`div`,{className:`w-8 h-8 rounded-lg flex items-center justify-center`,style:{backgroundColor:`${B.nutrition}20`},children:(0,z.jsx)(Qe,{className:`w-4 h-4`,style:{color:B.nutrition}})}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`nutrition.comparison.title`,`Compare with last week`)})]}),s.length>0&&(0,z.jsx)(`div`,{className:`-mx-[25px]`,children:c?(0,z.jsx)(Qc,{items:s,renderItem:(e,t)=>(0,z.jsx)(Bl,{data:o,dish:e,index:t}),currentIndex:l.currentIndex,onIndexChange:l.setCurrentIndex,hideIndicators:!0,wrapInCard:!1,isLoading:n,emptyMessage:r(`common.noData`,`No data available`)}):(0,z.jsx)(Bl,{data:o,dish:s[0],index:0})}),o.trendAnalysis&&(0,z.jsx)(`div`,{className:`rounded-xl p-4`,style:{backgroundColor:jl},children:(0,z.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:o.trendAnalysis})}),c&&(0,z.jsx)(Zc,{total:s.length,current:l.currentIndex,onSelect:l.setCurrentIndex,activeColor:Al,inactiveColor:`#FED7AA`,className:`mt-2`})]})};function Hl({data:e,className:t,isLoading:n}){let{t:r}=I(),i=B.nutrition,a=e==null?void 0:e.weeklySummary;return(0,z.jsx)(hn,{titleKey:`page.nutrition.weeklyOverview`,Icon:we,overallText:(a==null?void 0:a.overview)||r(`page.nutrition.defaultOverview`,{defaultValue:`Your nutritional intake is generally balanced. Total calorie intake fluctuates slightly but remains within the target range.`}),highlightText:(a==null?void 0:a.highlights)||r(`page.nutrition.defaultHighlights`,{defaultValue:`The analysis shows that your protein intake has been consistent, but there was a slight excess in fat consumption over the weekend. We recommend increasing vegetable intake to balance the micronutrients.`}),highlightLabelKey:`page.nutrition.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}function Ul(e){var t;return e!=null&&e.data?((t=e.data.report)==null?void 0:t.nutrition_status)||e.data.nutrition_status:null}function Wl(e,t){var n;if(!(!(e==null||(n=e.data)==null)&&n.report))return t;let r=e.data.report.weekly_calories_overview,i=Ul(e);if(r!=null&&r.average_calories&&r!=null&&r.target_calories){let e=r.average_calories,t=r.target_calories,n=Math.round(e/t*100),i=`good`;return n<80?i=`warning`:n>120&&(i=`alert`),{currentCal:Math.round(e),targetCal:Math.round(t),remainingCal:Math.round(e-t),percentage:n,status:i}}let a=(i==null?void 0:i[`èƒ½é‡ï¼ˆåƒå¡ï¼‰`])||(i==null?void 0:i.èƒ½é‡);if(!a)return t;let o=a.value,s=a.target,c=a.percentage,l=`good`;return c<80?l=`warning`:c>120&&(l=`alert`),{currentCal:Math.round(o),targetCal:Math.round(s),remainingCal:Math.round(o-s),percentage:Math.round(c),status:l}}var Gl={å‘¨ä¸€:`Mon`,å‘¨äºŒ:`Tue`,å‘¨ä¸‰:`Wed`,å‘¨å››:`Thu`,å‘¨äº”:`Fri`,å‘¨å…­:`Sat`,å‘¨æ—¥:`Sun`};function Kl(e,t){var n;if(!(!(e==null||(n=e.data)==null)&&n.report))return t;let r=e.data.report,i=r.weekly_calories_overview;if(i!=null&&i.daily_calories&&i.daily_calories.length===7){let e=i.target_calories||2e3,t=[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],n=i.daily_calories.map((n,r)=>({date:t[r],value:Math.round(n),target:Math.round(e)}));return console.log(`[Nutrition Adapter] Successfully extracted trend data from daily_calories array:`,n),n}let a=e.data.trend_chart||r.trend_chart,o=a==null?void 0:a.chart_data;if(o&&o.length>0){var s,c;let e=(i==null?void 0:i.target_daily_calories)||(i==null?void 0:i.target_calories)||((s=r.nutrition_status)==null||(s=s[`èƒ½é‡ï¼ˆåƒå¡ï¼‰`])==null?void 0:s.target)||((c=r.nutrition_status)==null||(c=c.èƒ½é‡)==null?void 0:c.target)||2e3,t=o.map(t=>({date:Gl[t.label]||t.label,value:Math.round(t.value),target:t.target||Math.round(e)}));if(t.length>0)return console.log(`[Nutrition Adapter] Successfully extracted trend data from trend_chart:`,t),t}return console.log(`[Nutrition Adapter] No trend data found, using mock data`),t}function ql(e,t){let n=Ul(e);if(!n)return t;let r=[],i=n[`ç¢³æ°´åŒ–åˆç‰©(g)`]||n.ç¢³æ°´åŒ–åˆç‰©;i&&r.push({label:`Carbs`,current:Math.round(i.value*10)/10,total:i.target,unit:`g`,color:`#86EFAC`});let a=n[`è„‚è‚ª(g)`]||n.è„‚è‚ª;a&&r.push({label:`Fat`,current:Math.round(a.value*10)/10,total:a.target,unit:`g`,color:`#FB923D`});let o=n[`è›‹ç™½è´¨(g)`]||n.è›‹ç™½è´¨;return o&&r.push({label:`Protein`,current:Math.round(o.value*10)/10,total:o.target,unit:`g`,color:`#93C5FD`}),r.length===3?r:t}function Jl(e,t){let n=Ul(e);if(!n)return t;let r=[];return[{newKey:`é’™(mg)`,oldKey:`é’™`,name:`Calcium (Ca)`,unit:`mg`},{newKey:`é’ (mg)`,oldKey:`é’ `,name:`Sodium (Na)`,unit:`mg`},{newKey:`é“(mg)`,oldKey:`é“`,name:`Iron (Fe)`,unit:`mg`},{newKey:`é”Œ(mg)`,oldKey:`é”Œ`,name:`Zinc (Zn)`,unit:`mg`},{newKey:`ç»´ç”Ÿç´ C(mg)`,oldKey:`ç»´ç”Ÿç´ C`,name:`Vitamin C`,unit:`mg`},{newKey:`ç»´ç”Ÿç´ D(ug)`,oldKey:`ç»´ç”Ÿç´ D`,name:`Vitamin D`,unit:`Î¼g`}].forEach(({newKey:e,oldKey:t,name:i,unit:a})=>{let o=n[e]||n[t];if(o){let e=`normal`;o.status===`ä¸è¶³`?e=`low`:o.status===`è¶…æ ‡`&&(e=`high`);let t=o.target*.8,n=o.target*1.2;r.push({name:i,value:Math.round(o.value*10)/10,unit:a,range:[Math.round(t),Math.round(n)],status:e})}}),r.length>=4?r:t}function Yl(e,t){let n=Ul(e);if(!n)return t;let r=[];return[{newKey:`è†³é£Ÿçº¤ç»´(g)`,oldKey:`è†³é£Ÿçº¤ç»´`,name:`Dietary fiber`,unit:`g`},{newKey:`å˜Œå‘¤(mg)`,oldKey:`å˜Œå‘¤`,name:`Purine`,unit:`mg`}].forEach(({newKey:e,oldKey:t,name:i,unit:a})=>{let o=n[e]||n[t];if(o){let e=`normal`;o.status===`ä¸è¶³`?e=`low`:o.status===`è¶…æ ‡`&&(e=`high`),r.push({name:i,value:Math.round(o.value*10)/10,target:o.target,unit:a,status:e})}}),r.length>0?r:t}function Xl(e,t){if(!(e!=null&&e.data))return t;let n=e.data.report,r=85,i=Ul(e);if(i){let e=Object.values(i),t=e.filter(e=>e.status===`è¾¾æ ‡`).length,n=e.length;r=Math.round(t/n*100)}let a=(n==null?void 0:n.data_analysis)||e.data.data_analysis,o=t.summary;typeof a==`string`?o=a:Array.isArray(a)&&a.length>0&&(o=a[0]);let s=[];return Array.isArray(a)&&a.length>0?s.push(...a):typeof a==`string`&&s.push(a),s.length===0?t:{score:r,summary:o,details:s}}function Zl(e,t){var n,r;let i=e==null||(n=e.data)==null?void 0:n.weekly_summary;if(i)return{overview:i.overview||t.overview,highlights:i.highlights||t.highlights,suggestions:[]};if(!(!(e==null||(r=e.data)==null||(r=r.report)==null)&&r.weekly_overview))return t;let a=e.data.report.weekly_overview,o=e.data.report.weekly_calories_overview;return{overview:a.overall_trend||t.overview,highlights:a.anomaly_alert||(o==null?void 0:o.evaluation)||t.highlights,suggestions:[]}}function Ql(e){let t={macroNutrients:null,microNutrients:null,dietaryComponents:null};if(!(e!=null&&e.data))return t;let n=e.data.report,r=(n==null?void 0:n.category_evaluations)||e.data.category_evaluations;return r?{macroNutrients:r.macro_nutrients||null,microNutrients:r.micro_nutrients||null,dietaryComponents:r.dietary_components||null}:t}var $l={æ—©é¤:`breakfast`,åˆé¤:`lunch`,æ™šé¤:`dinner`,åŠ é¤:`snacks`,é›¶é£Ÿ:`snacks`};function eu(e){var t,n;if(!(!(e==null||(t=e.data)==null||(t=t.report)==null)&&t.comparison_with_last_week))return;let r=e.data.report.comparison_with_last_week;if(r.last_week_calories===void 0||r.this_week_calories===void 0)return;let i=[];return r.main_cause_dishes&&r.main_cause_dishes.length>0&&r.main_cause_dishes.forEach(e=>{i.push({dishName:e.dish_name,calories:e.calories,mealType:$l[e.meal_type]||`dinner`,date:new Date(e.date),remark:e.remark,imageUrl:e.image_url})}),{calorieChange:(n=r.calories_change)==null?r.this_week_calories-r.last_week_calories:n,lastWeekCalories:r.last_week_calories,thisWeekCalories:r.this_week_calories,trendAnalysis:r.trend_analysis||``,mainCauseDishes:i}}const tu=(e,t)=>(console.log(`[Nutrition Adapter] Data received:`,e),{weeklyManagement:Wl(e,t.weeklyManagement),metabolismTrend:Kl(e,t.metabolismTrend),nutrientStructure:ql(e,t.nutrientStructure),microElements:Jl(e,t.microElements),dietaryComponents:Yl(e,t.dietaryComponents),recipes:t.recipes,analysis:Xl(e,t.analysis),weeklySummary:Zl(e,t.weeklySummary),categoryEvaluations:Ql(e),weeklyComparison:eu(e)});var nu=`https://test.fulai.tech/ns/nutrition/calc/weekly_nutrition_report_app_new`,ru=`sk-proj-VvBPGYkFpr0SFMfZJvwDfNwJV4N_hdx5`,iu=`69521a739c443012172f98b3`;async function au(e,t){try{let n=await fetch(nu,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${ru}`},body:JSON.stringify({user_id:iu,force_refresh:!1,week_start_date:e,week_end_date:t})});if(!n.ok)return console.warn(`[Nutrition API] Backend request failed:`,n.status),null;let r=await n.json();return console.log(`[Nutrition API] Response:`,r),r.code===200?r:(console.warn(`[Nutrition API] Backend returned error code:`,r.code),null)}catch(e){return console.warn(`[Nutrition API] Backend request error:`,e),null}}var ou={weeklyManagement:{currentCal:33520,targetCal:2350,remainingCal:2350,percentage:75,status:`good`},metabolismTrend:[{date:`Mon`,value:2050,target:2e3},{date:`Tue`,value:2493,target:2e3},{date:`Wed`,value:1520,target:2e3},{date:`Thu`,value:2680,target:2e3},{date:`Fri`,value:2380,target:2e3},{date:`Sat`,value:1850,target:2e3},{date:`Sun`,value:1980,target:2e3}],nutrientStructure:[{label:`Carbs`,current:300,total:350,unit:`g`,color:`#86EFAC`},{label:`Fat`,current:62.3,total:50,unit:`g`,color:`#FB923D`},{label:`Protein`,current:13,total:65,unit:`mg`,color:`#93C5FD`}],microElements:[{name:`Calcium (Ca)`,value:721,unit:`mg`,range:[800,1200],status:`low`},{name:`Sodium (Na)`,value:2543,unit:`mg`,range:[1e3,2e3],status:`high`},{name:`Iron (Fe)`,value:15,unit:`mg`,range:[10,20],status:`normal`},{name:`Zinc (Zn)`,value:8,unit:`mg`,range:[10,15],status:`low`},{name:`Vitamin A`,value:113,unit:`Î¼g`,range:[600,900],status:`low`},{name:`Vitamin C`,value:95,unit:`mg`,range:[60,100],status:`normal`},{name:`Vitamin D`,value:22,unit:`Î¼g`,range:[10,20],status:`high`},{name:`Vitamin E`,value:18,unit:`mg`,range:[12,20],status:`normal`}],dietaryComponents:[{name:`Dietary fiber`,value:12,target:25,unit:`g`,status:`low`},{name:`Purine`,value:280,target:150,unit:`mg`,status:`high`}],recipes:[{id:`1`,title:`Grilled Salmon with Quinoa`,calories:485,imageUrl:`https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=800&q=80`,tags:[`High Protein`,`Omega-3`,`Dinner`]},{id:`2`,title:`Mediterranean Salad Bowl`,calories:320,imageUrl:`https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80`,tags:[`Healthy`,`Vegetarian`,`Lunch`]},{id:`3`,title:`Chicken Stir-Fry`,calories:425,imageUrl:`https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=800&q=80`,tags:[`High Protein`,`Low Carb`,`Dinner`]}],analysis:{score:85,summary:`Your diet structure is good, but you need to pay attention to Vitamin intake.`,details:[`Fat intake is slightly high, consider reducing oil usage.`,`Protein intake is good, keep it up.`,`Micro-elements Calcium and Vitamin A are insufficient.`,`Sodium levels are above the recommended range, try to reduce salt intake.`,`Your carbohydrate intake is well balanced and within the healthy range.`]},weeklySummary:{overview:`Your nutritional intake this week has been generally balanced. Total calorie consumption fluctuated slightly but remained within the target range. Most macronutrient goals were met, with a slight variation in fat intake.`,highlights:`Analysis indicates consistent protein intake throughout the week. However, fat consumption exceeded recommended levels on the weekend. We suggest incorporating more vegetables to optimize micronutrient balance and offset calorie surplus.`,suggestions:[]},categoryEvaluations:{macroNutrients:null,microNutrients:null,dietaryComponents:null}};const su={all:[`nutrition`],detail:e=>[...su.all,`detail`,e==null?void 0:e.startDate,e==null?void 0:e.endDate]},cu=async e=>{let t=(e==null?void 0:e.start_date)||new Date().toISOString().split(`T`)[0],n=(e==null?void 0:e.end_date)||new Date().toISOString().split(`T`)[0];return console.log(`[Nutrition API] Fetching with week range:`,t,`to`,n),tu(await au(t,n),ou)};function lu(e){return Me({queryKey:su.detail(e),queryFn:async()=>await cu(e?{start_date:e.startDate,end_date:e.endDate}:void 0),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function uu(){return ur({featureName:`Nutrition`,queryKeyFn:su.detail,fetchFn:e=>cu({start_date:e.startDate,end_date:e.endDate})})}function du(){var e,t,n;let{t:r}=I(),i=kr(),{prefetchPreviousWeeks:a}=uu(),{dateRange:o,apiDateRange:s,displayDateRange:c,canGoNext:l,goToPreviousWeek:u,goToNextWeek:d,setWeek:f}=Ar(),{containerRef:p,swipeHandlers:m}=Fr({onSwipeLeft:d,onSwipeRight:u,canSwipeLeft:l,canSwipeRight:!0});(0,L.useEffect)(()=>{a(o.start,3)},[o.start,a]);let{data:h,isLoading:g,error:_}=lu(s);return _?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:i.background},children:(0,z.jsxs)(`div`,{className:`text-center`,children:[(0,z.jsx)(`p`,{className:`text-red-500 mb-2`,children:r(`common.error`)}),(0,z.jsx)(`p`,{className:`text-sm`,style:{color:i.textSecondary},children:String(_)})]})}):(0,z.jsx)(`div`,{ref:p,className:`min-h-screen pb-20`,style:{backgroundColor:i.background},...m,children:(0,z.jsxs)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:[(0,z.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:i.background},children:(0,z.jsx)(`div`,{className:`flex justify-center`,children:(0,z.jsx)(Bt,{startDate:c.start,endDate:c.end,onPrevious:u,onNext:d,disableNext:!l,onSelectWeek:f})})}),(0,z.jsx)(`div`,{className:`px-4 space-y-4`,children:!h&&!g?(0,z.jsx)(`div`,{className:`text-center py-12`,children:(0,z.jsx)(`p`,{className:`text-slate-500`,children:r(`common.noData`)})}):(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(xl,{data:h==null?void 0:h.weeklyManagement}),(0,z.jsx)(Cl,{data:h==null?void 0:h.metabolismTrend}),(0,z.jsx)(wl,{data:h==null?void 0:h.analysis}),(0,z.jsx)(Dl,{data:h==null?void 0:h.nutrientStructure,summary:h==null||(e=h.categoryEvaluations)==null?void 0:e.macroNutrients}),(0,z.jsx)(Ol,{data:h==null?void 0:h.microElements,summary:h==null||(t=h.categoryEvaluations)==null?void 0:t.microNutrients}),(0,z.jsx)(kl,{data:h==null?void 0:h.dietaryComponents,summary:h==null||(n=h.categoryEvaluations)==null?void 0:n.dietaryComponents}),(0,z.jsx)(Vl,{data:h==null?void 0:h.weeklyComparison}),(0,z.jsx)(Hl,{data:h}),(0,z.jsx)(Ir,{})]})})]})})}var fu=({percentage:e,color:t,size:n=80,strokeWidth:r=6,icon:i})=>{let a=(n-r)/2,o=2*Math.PI*a,s=o-e/100*o;return(0,z.jsxs)(`div`,{className:`relative`,style:{width:n,height:n},children:[(0,z.jsxs)(`svg`,{width:n,height:n,className:`transform -rotate-90`,children:[(0,z.jsx)(`circle`,{cx:n/2,cy:n/2,r:a,fill:`none`,stroke:`rgba(255,255,255,0.3)`,strokeWidth:r}),(0,z.jsx)(`circle`,{cx:n/2,cy:n/2,r:a,fill:`none`,stroke:`white`,strokeWidth:r,strokeLinecap:`round`,strokeDasharray:o,strokeDashoffset:s,style:{transition:`stroke-dashoffset 0.5s ease-in-out`}})]}),i&&(0,z.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:i})]})};const pu=(0,L.memo)(({score:e,maxScore:t=100,levelLabel:n,percentile:r,percentileMessage:i,aiTags:a=[],themeColor:o,gradientEndColor:s,tagBgColor:c,icon:l,title:u,className:d=``})=>{let{t:f}=I(),p=e===null?0:e/t*100,m=o||`#FB923D`,h=s||(m.startsWith(`rgb(`)?m.replace(`rgb(`,`rgba(`).replace(`)`,`, 0.8)`):m+`cc`);return(0,z.jsxs)(`div`,{className:`py-5 shadow-sm ${d}`,style:{background:`linear-gradient(135deg, ${m} 0%, ${h} 100%)`,borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsxs)(`div`,{className:`flex items-stretch gap-3 mb-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 flex flex-col justify-center`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 mb-2`,children:[(0,z.jsx)(dt,{className:`w-4.5 h-4.5 text-white`}),(0,z.jsx)(`span`,{className:`text-white text-base font-medium`,children:u})]}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-5xl font-bold text-white drop-shadow-sm`,children:e===null?`--`:e}),(0,z.jsxs)(`span`,{className:`text-white/80 text-lg`,children:[`/`,t]})]})]}),(0,z.jsx)(`div`,{className:`flex items-center justify-center`,children:(0,z.jsx)(fu,{percentage:p,color:o,size:80,strokeWidth:6,icon:l})})]}),i&&(0,z.jsxs)(`div`,{className:`flex items-center gap-2 bg-white/20 backdrop-blur-md rounded-xl px-3 py-3 mb-4`,children:[(0,z.jsx)(Ke,{className:`w-4.5 h-4.5 text-white shrink-0`}),(0,z.jsx)(`span`,{className:`text-white text-base font-medium leading-none`,children:i})]}),a.length>0&&(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5 mb-2`,children:[(0,z.jsx)(dt,{className:`w-3.5 h-3.5 text-white/90`}),(0,z.jsx)(`span`,{className:`text-white text-xs font-medium`,children:f(`daily.aiAnalysis`,`AI Analysis`)})]}),(0,z.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:a.map((e,t)=>(0,z.jsx)(`span`,{className:`px-3 py-1.5 rounded-full text-xs font-medium border border-white/40 bg-white/10`,style:{color:`white`},children:e},t))})]})]})}),mu=(0,L.memo)(({insights:e,themeColor:t=`#FB923D`,className:n=``})=>{let{t:r}=I();return!e||e.length===0?null:(t.replace(`rgb(`,`rgba(`).replace(`)`,`, 0.8)`),(0,z.jsxs)(`div`,{className:`${n} py-6 shadow-sm`,style:{backgroundColor:`#ffddb8ff`,borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsx)(`div`,{className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-full text-white text-sm font-medium mb-4`,style:{background:`#FE760C`},children:(0,z.jsx)(`span`,{children:r(`daily.aiHealthInsights`,`AI health related insights`)})}),(0,z.jsx)(`div`,{className:`space-y-3`,children:e.map((e,t)=>(0,z.jsx)(`div`,{className:`bg-white rounded-xl p-4 border border-slate-100`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:e})},t))})]}))}),hu=(0,L.memo)(({suggestions:e,onAdd:t,className:n=``})=>{let{t:r}=I(),i=!e||e.length===0?[{icon:`/images/daily_report/1.webp`,title:r(`daily.defaultSuggestions.soakingFeet.title`,`Soaking feet before bed`),description:r(`daily.defaultSuggestions.soakingFeet.description`,`Relieve current anxiety and lower heart rate.`)},{icon:`/images/daily_report/2.webp`,title:r(`daily.defaultSuggestions.napSuggestion.title`,`Today's nap suggestion`),description:r(`daily.defaultSuggestions.napSuggestion.description`,`Relieve current anxiety and lower heart rate.`)}]:e,a=e=>{t?t(e):alert(`Added suggestion: ${i[e].title}`)};return(0,z.jsxs)(`div`,{className:`${n}`,children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800 mb-4`,children:r(`daily.personalizedSuggestions`,`Personalized suggestions`)}),(0,z.jsx)(`div`,{className:`space-y-3`,children:i.map((e,t)=>(0,z.jsxs)(`div`,{className:`bg-white py-5 shadow-sm border border-slate-100 flex items-center gap-4`,style:{borderRadius:24,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsx)(`div`,{className:`w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden`,children:(0,z.jsx)(`img`,{src:e.icon,alt:``,className:`w-9 h-9 object-cover`,onError:e=>{e.currentTarget.style.display=`none`}})}),(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`h4`,{className:`text-sm font-medium text-slate-800 truncate`,children:e.title}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500 truncate`,children:e.description})]}),(0,z.jsx)(`button`,{onClick:()=>a(t),className:`px-4 py-1.5 text-xs font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors flex-shrink-0`,children:r(`common.add`,`Add`)})]},t))})]})}),gu=e=>{let t=e.toUpperCase();return{HAPPY:W.happy,CALM:W.calm,NEUTRAL:W.neutral,SURPRISED:W.surprised,SAD:W.sad,ANGRY:W.angry,FEARFUL:W.fearful,DISGUSTED:W.disgusted}[t]||`#94a3b8`};var _u=(e,t,n)=>n(`emotion.${e.toLowerCase()}`,t);const vu=(0,L.memo)(({mainEmotion:e,mainEmotionLabel:t,items:n,className:r=``,isLoading:i=!1})=>{let{t:a}=I(),o=(0,L.useMemo)(()=>n.map(e=>({type:e.type,label:_u(e.type,e.label,a),percent:e.percent,count:e.count,color:gu(e.type)})),[n,a]),s=(0,L.useMemo)(()=>_u(e,t,a),[e,t,a]),c=(0,z.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`});return(0,z.jsx)(un,{title:a(`daily.emotionDistribution`,`Emotion distribution`),iconElement:c,themeColor:W.primary,items:o,donutThickness:12,centerValue:s,centerLabel:a(`daily.asMain`,`as main`),centerValueColor:gu(e),itemLayout:`grid-2col`,pieChartSize:`medium`,showInfo:!0,className:r,isLoading:i})});var yu=e=>{let[t]=e.split(`:`).map(Number);return t},bu=(0,L.memo)(({active:e,payload:t,layers:n})=>{var r;if(!e||!t||t.length===0)return null;let i=(r=t[0])==null?void 0:r.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:i.label||i.hour}),n.map(e=>(0,z.jsxs)(`p`,{style:{color:e.color},children:[e.label,`: `,i[e.dataKey],`%`]},e.dataKey))]}):null}),xu=(0,L.memo)(e=>{let{fill:t,x:n,y:r,width:i,height:a,payload:o,dataKey:s,layers:c,barRadius:l}=e,u=null;for(let e=c.length-1;e>=0;e--){let t=c[e].dataKey;if(o[t]&&o[t]>0){u=t;break}}let d=s===u?l:[0,0,0,0];return(0,z.jsx)(j,{...e,radius:d})});xu.displayName=`RoundedTopBar`;const Su=(0,L.memo)(({data:e,layers:t,height:n=200,yAxisDomain:r=[0,100],showLegend:i=!0,renderTooltip:a,maxBarSize:o=20,barRadius:s=[4,4,0,0],barGap:c,barCategoryGap:l,className:u=``})=>{let d=$t(),f=en(),p=(0,L.useMemo)(()=>e.map(e=>({...e,position:yu(e.hour)})),[e]);return(0,z.jsxs)(`div`,{className:`transform-gpu will-change-transform ${u}`,children:[i&&(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-3 flex-wrap`,children:t.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-sm`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,z.jsxs)(`div`,{ref:f,style:{height:n},className:`-mx-2 relative`,children:[(0,z.jsx)(g,{width:`100%`,height:`100%`,children:(0,z.jsxs)(ee,{data:p,margin:{top:10,right:10,left:-15,bottom:0},barGap:c,barCategoryGap:l,children:[(0,z.jsx)(y,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,z.jsx)(_,{dataKey:`hour`,type:`category`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,ticks:[`00:00`,`06:00`,`12:00`,`18:00`,`24:00`]}),(0,z.jsx)(k,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:e=>`${e}`}),(0,z.jsx)(m,{content:a||(e=>(0,z.jsx)(bu,{...e,layers:t})),wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),t.map(e=>(0,z.jsx)(C,{dataKey:e.dataKey,stackId:`stack`,fill:e.color,maxBarSize:o,shape:(0,z.jsx)(xu,{layers:t,barRadius:s}),...d},e.dataKey))]})}),(0,z.jsx)(nn,{containerRef:f})]})]})}),Cu=(0,L.memo)(({data:e,className:t=``})=>{let{t:n}=I(),r=[{dataKey:`positive`,color:W.positive,label:n(`page.emotion.positive`,`Positive`)},{dataKey:`neutral`,color:W.neutral,label:n(`page.emotion.neutral`,`Neutral`)},{dataKey:`negative`,color:W.negative,label:n(`page.emotion.negative`,`Negative`)}];return(0,z.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`daily.emotionProportion`,`Emotional proportion analysis`)})]}),(0,z.jsx)(Su,{data:e,layers:r,height:200,yAxisDomain:[0,100],showLegend:!0,maxBarSize:10})]})}),wu={all:[`daily`],healthy:(e,t)=>[...wu.all,`healthy`,e,t],emotion:(e,t)=>[...wu.all,`emotion`,e,t],sleep:(e,t)=>[...wu.all,`sleep`,e,t]};function Tu(e){if(e===void 0||e===``)return xr();let t=br(e);return t.ok?t.value:xr()}function Eu(e,t){let{logLabel:n,fallback:r}=t;return async()=>{try{return await e()}catch(e){if(console.error(`[${n}] Query failed:`,e),r!==void 0)return r;throw e}}}function Du(e){let{queryKeyPart:t,isDemoEnabled:n,fetchApi:r,generateDemo:i,fallbackData:a,logLabel:o}=e,s=(e,n)=>{switch(t){case`healthy`:return wu.healthy(e,n);case`emotion`:return wu.emotion(e,n);case`sleep`:return wu.sleep(e,n);default:return[...wu.all,t,e,n]}};return function(e){let t=n(),c=(0,L.useMemo)(()=>Tu(e),[e]),l=ye(),u=(0,L.useCallback)(()=>Eu(async()=>t?(console.log(`ðŸŽ­ [${o}] Demo mode enabled, using demo data`),i()):(console.log(`ðŸ“¡ [${o}] Fetching real data for:`,c),r(c)),{logLabel:o,fallback:a})(),[t,c,o]),d=Me({queryKey:s(c,t),queryFn:u,staleTime:300*1e3,gcTime:600*1e3}),f=(0,L.useCallback)(()=>{l.invalidateQueries({queryKey:wu.all})},[l]);return{...d,isDemoMode:t,invalidate:f}}}const Ou=Du({queryKeyPart:`healthy`,isDemoEnabled:()=>q.isTestEnv,fetchApi:qn,generateDemo:Vn,fallbackData:null,logLabel:`Healthy Daily`}),ku=Du({queryKeyPart:`emotion`,isDemoEnabled:()=>q.isTestEnv,fetchApi:Jn,generateDemo:Un,logLabel:`Emotion Daily`}),Au=Du({queryKeyPart:`sleep`,isDemoEnabled:()=>q.isTestEnv,fetchApi:Yn,generateDemo:Gn,logLabel:`Sleep Daily`});function ju(){let{t:e}=I(),t=Er().date,{data:n,isLoading:r,isError:i,error:a}=ku(t||void 0);return r?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`animate-pulse text-slate-500`,children:`Loading...`})}):i?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsxs)(`div`,{className:`text-red-500`,children:[`Error: `,(a==null?void 0:a.message)||`Failed to load data`]})}):n?(0,z.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:(0,z.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,z.jsx)(pu,{score:n.score,maxScore:100,levelLabel:n.levelLabel,percentile:n.percentile,percentileMessage:n.percentileMessage,aiTags:n.aiTags,themeColor:`#FFD12D`,gradientEndColor:`#FF9D03`,title:e(`daily.todayEmotionScore`,`Today's emotion score`),icon:(0,z.jsx)(pe,{className:`w-6 h-6 text-white`})}),(0,z.jsx)(Cu,{data:n.chart}),(0,z.jsx)(vu,{mainEmotion:n.distribution.mainEmotion,mainEmotionLabel:n.distribution.mainEmotionLabel,items:n.distribution.items}),n.aiInsights.length>0&&(0,z.jsx)(mu,{insights:n.aiInsights,themeColor:W.primary}),(0,z.jsx)(hu,{suggestions:n.suggestions||[]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`)})]})})}):null}var Mu=rt(ju),Nu=e=>U[e.toLowerCase()]||`#94a3b8`,Pu=(e,t,n)=>n(`sleep.${e.toLowerCase()}`,t);const Fu=(e,t)=>e.map(e=>({type:e.type,label:Pu(e.type,e.label,t),percent:e.percent,color:Nu(e.type),duration:e.duration,status:e.status})),Iu=(0,L.memo)(({items:e,totalMinutes:t,className:n=``,isLoading:r=!1})=>{let{t:i}=I(),a=(0,L.useMemo)(()=>Fu(e,i),[e,i]),o=t?Math.floor(t/60):`--`,s=(0,z.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`});return(0,z.jsx)(un,{title:i(`daily.sleepDistribution`,`Sleep distribution`),iconElement:s,themeColor:B.sleep,items:a,centerValue:o,centerLabel:i(`daily.totalHours`,`Total hours`),centerValueColor:`#1e293b`,itemLayout:`with-duration`,pieChartSize:`medium`,showInfo:!0,className:n,isLoading:r})});var Lu=({label:e,value:t,unit:n,reference:r,t:i})=>(0,z.jsxs)(`div`,{className:`bg-slate-50 rounded-xl p-3`,children:[(0,z.jsx)(`div`,{className:`text-xs text-slate-500 mb-1`,children:e}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:t==null?`--`:t}),n&&(0,z.jsx)(`span`,{className:`text-sm text-slate-500`,children:n})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1 mt-1`,children:[(0,z.jsx)(Se,{className:`w-3 h-3 text-slate-400`}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[i(`daily.reference`,`Reference`),`: `,r]})]})]});const Ru=(0,L.memo)(({indicators:e,className:t=``})=>{let{t:n}=I(),r={bedTime:n(`sleep.bedTime`,`Bed rest time`),sleepTime:n(`sleep.sleepTime`,`Time to fall asleep`),wakeTime:n(`sleep.wakeTime`,`Post-awake time`),getUpTime:n(`sleep.getUpTime`,`Wake-up time`),sleepLatency:n(`sleep.sleepLatency`,`Falling asleep takes time`),sleepEfficiency:n(`sleep.sleepEfficiency`,`Sleep efficiency`)};return(0,z.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`daily.sleepQuality`,`Sleep quality indicators`)}),(0,z.jsx)(Se,{className:`w-4 h-4 text-slate-400 cursor-pointer`})]}),(0,z.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,z.jsx)(Lu,{label:r.bedTime,value:e.bedTime.value,reference:e.bedTime.reference,t:n}),(0,z.jsx)(Lu,{label:r.sleepTime,value:e.sleepTime.value,reference:e.sleepTime.reference,t:n}),(0,z.jsx)(Lu,{label:r.wakeTime,value:e.wakeTime.value,reference:e.wakeTime.reference,t:n}),(0,z.jsx)(Lu,{label:r.getUpTime,value:e.getUpTime.value,reference:e.getUpTime.reference,t:n}),(0,z.jsx)(Lu,{label:r.sleepLatency,value:e.sleepLatency.value,unit:e.sleepLatency.unit,reference:e.sleepLatency.reference,t:n}),(0,z.jsx)(Lu,{label:r.sleepEfficiency,value:e.sleepEfficiency.value,unit:e.sleepEfficiency.unit,reference:e.sleepEfficiency.reference,t:n})]})]})});var zu=ne(),Bu={deep:`#6366f1`,light:`#a5b4fc`,rem:`#e0e7ff`,awake:`#f97316`},Q={paddingTop:20,paddingBottom:30,paddingLeft:60,paddingRight:20,blockHeight:40,baseRadius:12,lineWidth:6,bufferLong:5,bufferShort:1},Vu=[{key:`awake`,label:`Awake`,order:0},{key:`rem`,label:`REM`,order:1},{key:`light`,label:`Light`,order:2},{key:`deep`,label:`Deep`,order:3}],Hu=(e,t=new Date(`2024-01-01`))=>{let[n,r]=e.split(`:`).map(Number),i=new Date(t);return i.setHours(n,r,0,0),n<12&&i.setDate(i.getDate()+1),i.getTime()},Uu=(e,t,n,r,i)=>{let a=Q.baseRadius,o={tl:a,tr:a,br:a,bl:a};return r&&t!==null&&(t<e?o.tl=0:t>e&&(o.bl=0)),i&&n!==null&&(n<e?o.tr=0:n>e&&(o.br=0)),o};const Wu=({data:e,height:t=320,colors:n=U||Bu,className:r=``})=>{let i=(0,L.useRef)(null),a=(0,L.useRef)(null),[o,s]=(0,L.useState)({x:0,y:0,visible:!1,segment:null,duration:0}),[c,l]=(0,L.useState)({width:0,height:0}),u=(0,L.useMemo)(()=>{if(!e||e.length===0)return[];let t=new Date(`2024-01-01`),n=[...e].sort((e,n)=>Hu(e.start,t)-Hu(n.start,t));return n.map((e,r)=>{var i,a;let o=Hu(e.start,t),s=Hu(e.end,t),c=Vu.find(t=>t.key===e.stage),l=r>0?n[r-1]:null,u=r<n.length-1?n[r+1]:null,d=l?Vu.find(e=>e.key===l.stage):null,f=u?Vu.find(e=>e.key===u.stage):null,p=!!(l&&d&&l.stage!==e.stage&&Hu(l.end,t)===o),m=!!(u&&f&&u.stage!==e.stage&&Hu(u.start,t)===s),h=Uu(c.order,(i=d==null?void 0:d.order)==null?null:i,(a=f==null?void 0:f.order)==null?null:a,p,m);return{...e,startTime:o,endTime:s,duration:Math.round((s-o)/1e3/60),stageInfo:c,prevStageInfo:d,prevConnected:p,nextConnected:m,radii:h}})},[e]),d=(0,L.useCallback)(()=>{let e=i.current;if(!e||!u.length)return;let t=e.getContext(`2d`);if(!t)return;let r=window.devicePixelRatio||1,{width:a,height:o}=c;e.width=a*r,e.height=o*r,t.scale(r,r),t.clearRect(0,0,a,o);let s=a-Q.paddingLeft-Q.paddingRight,l=u[0].startTime,d=u[u.length-1].endTime,f=d-l,p=e=>Q.paddingLeft+(e-l)/f*s,m=(o-Q.paddingTop-Q.paddingBottom)/Vu.length,h=e=>Q.paddingTop+e*m+m/2;t.font=`12px sans-serif`,t.textBaseline=`middle`,t.beginPath(),t.strokeStyle=`#e2e8f0`,t.setLineDash([4,4]),t.lineWidth=1;for(let e=0;e<=Vu.length;e++){let n=Q.paddingTop+e*m;t.moveTo(Q.paddingLeft,n),t.lineTo(a-Q.paddingRight,n)}t.stroke(),t.setLineDash([]),Vu.forEach(e=>{let n=h(e.order);t.fillStyle=`#64748b`,t.textAlign=`right`,t.fillText(e.label,Q.paddingLeft-15,n)}),u.forEach(e=>{if(e.prevConnected&&e.prevStageInfo){let r=p(e.startTime),i=h(e.stageInfo.order),a=h(e.prevStageInfo.order),o=n[e.stage]||n.light,s=n[e.prevStageInfo.key]||n.light,c=Math.abs(i-a),l=Q.blockHeight/2;if(c>1){let n=l+(Math.abs(e.stageInfo.order-e.prevStageInfo.order)===1?Q.bufferShort:Q.bufferLong);n*2>c&&(n=c*.45);let u=i>a,d=Math.min(a,i),f=Math.max(a,i),p=u?s:o,m=u?o:s,h=t.createLinearGradient(0,d,0,f),g=n/c,_=1-g;h.addColorStop(0,p),h.addColorStop(g,p),h.addColorStop(_,m),h.addColorStop(1,m),t.fillStyle=h,t.fillRect(r-Q.lineWidth/2,d,Q.lineWidth,f-d)}}}),u.forEach(e=>{let r=p(e.startTime),i=p(e.endTime),a=h(e.stageInfo.order),o=Math.max(i-r,1),s=r,c=o,l=Q.lineWidth/2;e.prevConnected&&(e.radii.tl===0||e.radii.bl===0)&&(s-=l,c+=l),e.nextConnected&&(e.radii.tr===0||e.radii.br===0)&&(c+=l);let u=a-Q.blockHeight/2;t.fillStyle=n[e.stage]||n.light,t.beginPath();let{tl:d,tr:f,br:m,bl:g}=e.radii,_=s,v=u,y=c,b=Q.blockHeight;t.moveTo(_+d,v),t.lineTo(_+y-f,v),t.quadraticCurveTo(_+y,v,_+y,v+f),t.lineTo(_+y,v+b-m),t.quadraticCurveTo(_+y,v+b,_+y-m,v+b),t.lineTo(_+g,v+b),t.quadraticCurveTo(_,v+b,_,v+b-g),t.lineTo(_,v+d),t.quadraticCurveTo(_,v,_+d,v),t.closePath(),t.fill()});let g=new Date(l).getHours(),_=new Date(d).getHours()+(new Date(d).getDate()===new Date(l).getDate()?0:24);t.textAlign=`center`,t.fillStyle=`#94a3b8`,t.font=`11px sans-serif`;for(let e=g;e<=_;e++){let n=new Date(l);n.setHours(e,0,0,0),n.getTime()<l&&n.setDate(n.getDate()+1);let r=p(n.getTime());if(r>=Q.paddingLeft&&r<=a-Q.paddingRight){let n=`${e%24}`.padStart(2,`0`)+`:00`;t.fillText(n,r,o-10),t.beginPath(),t.moveTo(r,o-25),t.lineTo(r,o-20),t.stroke()}}},[c,n,u]);return(0,L.useEffect)(()=>{let e=new ResizeObserver(e=>{let{width:t,height:n}=e[0].contentRect;l({width:t,height:n})});return a.current&&e.observe(a.current),()=>e.disconnect()},[]),(0,L.useEffect)(()=>{d()},[d]),(0,L.useEffect)(()=>{let e=()=>{s(e=>({...e,visible:!1}))};return window.addEventListener(`scroll`,e,!0),()=>window.removeEventListener(`scroll`,e,!0)},[]),(0,L.useEffect)(()=>{let e=e=>{a.current&&!a.current.contains(e.target)&&s(e=>({...e,visible:!1}))};return document.addEventListener(`click`,e),()=>document.removeEventListener(`click`,e)},[]),(0,z.jsxs)(`div`,{ref:a,className:`relative w-full transform-gpu will-change-transform ${r}`,style:{height:`${t}px`},children:[(0,z.jsx)(`canvas`,{ref:i,className:`w-full h-full block cursor-pointer`,onClick:e=>{let t=i.current.getBoundingClientRect(),n=e.clientX-t.left,{width:r}=c,a=r-Q.paddingLeft-Q.paddingRight;if(a<=0||!u.length)return;if(n<Q.paddingLeft||n>r-Q.paddingRight){s(e=>({...e,visible:!1}));return}let o=u[0].startTime,l=u[u.length-1].endTime-o,d=o+(n-Q.paddingLeft)/a*l,f=u.find(e=>d>=e.startTime&&d<=e.endTime);s(f?{x:e.clientX,y:e.clientY,visible:!0,segment:f,duration:f.duration}:e=>({...e,visible:!1}))}}),typeof document<`u`&&(0,zu.createPortal)((()=>{var e;let{x:t,y:r,visible:i,segment:a,duration:s}=o;if(!a)return null;let c=typeof window<`u`?window.innerWidth:1e3,l=typeof window<`u`?window.innerHeight:800,u=t>c/2,d=r>l/2;return(0,z.jsxs)(`div`,{className:`fixed z-50 pointer-events-none bg-white/95 backdrop-blur-sm border border-slate-200 shadow-xl rounded-lg p-3 text-sm transition-all duration-200 ease-out ${i?`opacity-100 scale-100`:`opacity-0 scale-95`}`,style:{left:0,top:0,transform:`translate3d(${t}px, ${r}px, 0) translate(${u?-15:15}px, ${d?-15:15}px) translate(${u?`-100%`:`0%`}, ${d?`-100%`:`0%`})`},children:[(0,z.jsx)(`div`,{className:`font-semibold text-slate-800 mb-1`,children:(e=Vu.find(e=>e.key===a.stage))==null?void 0:e.label}),(0,z.jsxs)(`div`,{className:`text-slate-500 text-xs tabular-nums`,children:[a.start,` - `,a.end]}),(0,z.jsxs)(`div`,{className:`text-slate-500 text-xs mt-1`,children:[`Duration: `,s,` min`]}),(0,z.jsx)(`div`,{className:`absolute left-0 top-3 w-1 h-4 rounded-r`,style:{backgroundColor:n[a.stage]}})]})})(),document.body)]})},Gu=(0,L.memo)(({totalDuration:e,deepDuration:t,segments:n,className:r=``})=>{let{t:i}=I();return(0,z.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${r}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,z.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`}),(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`daily.sleepStructure`,`Sleep structure diagram`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-8 mb-4`,children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`div`,{className:`text-2xl font-bold text-slate-800`,children:e}),(0,z.jsx)(`div`,{className:`text-xs text-slate-400`,children:i(`daily.totalDuration`,`Total sleep duration`)})]}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`div`,{className:`text-2xl font-bold text-violet-500`,children:t}),(0,z.jsx)(`div`,{className:`text-xs text-slate-400`,children:i(`daily.deepSleep`,`Deep sleep`)})]})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:U.deep}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.deep`,`Deep sleep`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:U.light}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.light`,`Light sleep`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:U.rem}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.rem`,`REM`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:U.awake}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.awake`,`Awake`)})]})]}),(0,z.jsx)(Wu,{data:n,height:240})]})});function Ku(){let{t:e}=I(),t=Er().date,{data:n,isLoading:r,isError:i,error:a}=Au(t||void 0);return r?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`animate-pulse text-slate-500`,children:`Loading...`})}):i?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsxs)(`div`,{className:`text-red-500`,children:[`Error: `,(a==null?void 0:a.message)||`Failed to load data`]})}):n?(0,z.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:(0,z.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,z.jsx)(pu,{score:n.score,maxScore:200,levelLabel:n.levelLabel,percentile:n.percentile,percentileMessage:n.percentileMessage,aiTags:n.aiTags,themeColor:B.sleep,title:e(`daily.todayScore`,`Today's score`),icon:(0,z.jsx)(pe,{className:`w-6 h-6 text-white`})}),(0,z.jsx)(Gu,{totalDuration:n.structureChart.totalDuration,deepDuration:n.structureChart.deepDuration,segments:n.structureChart.segments}),(0,z.jsx)(Iu,{items:n.structureAnalysis,totalMinutes:n.structureChart.totalMinutes}),(0,z.jsx)(Ru,{indicators:n.qualityIndicators}),n.aiInsights.length>0&&(0,z.jsx)(mu,{insights:n.aiInsights,themeColor:B.sleep}),(0,z.jsx)(hu,{suggestions:n.suggestions||[]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only.`)})]})})}):null}var qu=rt(Ku);const Ju=(0,L.memo)(({children:e,className:t=``})=>(0,z.jsx)(`div`,{className:`rounded-xl py-3 mb-4 ${t}`,style:{backgroundColor:`#F8F8F8`},children:e}));Ju.displayName=`StatBox`;var Yu=(0,L.memo)(({active:e,payload:t})=>{var n;if(!e||!t||t.length===0)return null;let r=(n=t[0])==null?void 0:n.payload;return r?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:r.time}),(0,z.jsxs)(`p`,{className:`text-orange-300`,children:[`SBP: `,r.systolic]}),(0,z.jsxs)(`p`,{className:`text-emerald-300`,children:[`DBP: `,r.diastolic]})]}):null});Yu.displayName=`BPCustomTooltip`;const Xu=(0,L.memo)(({latest:e,change:t,avg:n,reference:r,chart:i,yAxisRange:a,className:o=``})=>{let{t:s}=I(),c=B.bp,l=`#10B981`,u=(0,L.useMemo)(()=>!i||i.length===0?[{time:`00:00`,systolic:120,diastolic:80},{time:`04:00`,systolic:118,diastolic:78},{time:`08:00`,systolic:125,diastolic:82},{time:`12:00`,systolic:130,diastolic:85},{time:`16:00`,systolic:128,diastolic:84},{time:`20:00`,systolic:122,diastolic:80}]:i.map(e=>{var t,n;return{time:e.time,systolic:(t=e.systolic)==null?0:t,diastolic:(n=e.diastolic)==null?0:n}}),[i]),d=(0,L.useMemo)(()=>{if(!t||t.value===null||t.trend===null)return null;let e=t.trend===`up`?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:t.trend===`up`?`#EF4444`:`#10B981`},children:[(0,z.jsx)(e,{className:`w-3 h-3`}),t.value]})},[t]),f=(0,L.useMemo)(()=>a?[a.min,a.max]:[50,180],[a]),p=`${r.systolic}/${r.diastolic}`;return(0,z.jsxs)(G,{className:o,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Oe,{className:`w-5 h-5`,style:{color:c}}),(0,z.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:s(`vitals.bloodPressure`,`Blood pressure`)}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:`mmHg`})]}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[s(`daily.standard`,`Standard`),`: `,p]})]}),(0,z.jsx)(Ju,{children:(0,z.jsxs)(`div`,{className:`grid grid-cols-2`,children:[(0,z.jsxs)(`div`,{className:`pl-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:c},children:e?`${e.systolic}/${e.diastolic}`:`--`}),d]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:s(`daily.newestValue`,`Newest value`)})]}),(0,z.jsxs)(`div`,{className:`pl-5`,children:[(0,z.jsx)(`span`,{className:`text-2xl font-semibold text-slate-700`,children:n?`${n.systolic}/${n.diastolic}`:`--`}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:s(`daily.average`,`Average`)})]})]})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:c}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:`SBP`})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:l}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:`DBP`})]})]}),(0,z.jsx)(on,{data:u,lines:[{dataKey:`systolic`,color:c,label:`SBP`,showArea:!0,gradientId:`bpSbpGradient`,legendShape:`circle`},{dataKey:`diastolic`,color:l,label:`DBP`,showArea:!0,gradientId:`bpDbpGradient`,legendShape:`circle`}],xAxisKey:`time`,yAxisDomain:f,renderTooltip:e=>(0,z.jsx)(Yu,{...e}),height:180,showLegend:!1})]})});var Zu=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:i.time}),(0,z.jsxs)(`p`,{className:`text-red-300`,children:[r(`daily.average`,`Average`),`: `,i.avg]}),i.max!==void 0&&(0,z.jsxs)(`p`,{className:`text-red-200`,children:[r(`daily.highest`,`Highest`),`: `,i.max]}),i.min!==void 0&&(0,z.jsxs)(`p`,{className:`text-red-200`,children:[r(`daily.lowest`,`Lowest`),`: `,i.min]})]}):null});Zu.displayName=`HRCustomTooltip`;var Qu=(0,L.memo)(({value:e,label:t,isHighlighted:n,themeColor:r,changeIndicator:i})=>(0,z.jsxs)(`div`,{className:`pl-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`font-bold ${n?`text-3xl`:`text-2xl`}`,style:n&&r?{color:r}:{color:`#334155`},children:e==null?`--`:e}),i]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:t})]}));Qu.displayName=`StatItem`;const $u=(0,L.memo)(({latest:e,change:t,avg:n,max:r,min:i,reference:a,chart:o,yAxisRange:s,className:c=``})=>{let{t:l}=I(),u=B.heartRate,d=(0,L.useMemo)(()=>!o||o.length===0?[{time:`00:00`,avg:65,range:[60,70]},{time:`04:00`,avg:62,range:[58,68]},{time:`08:00`,avg:75,range:[70,85]},{time:`12:00`,avg:82,range:[75,90]},{time:`16:00`,avg:78,range:[72,88]},{time:`20:00`,avg:70,range:[65,78]}]:o.map(e=>{var t,n,r,i,a;return{time:e.time,avg:(t=e.avg)==null?0:t,range:[(n=(r=e.min)==null?e.avg:r)==null?0:n,(i=(a=e.max)==null?e.avg:a)==null?0:i]}}),[o]),f=(0,L.useMemo)(()=>{if(!t||t.value===null||t.trend===null)return null;let e=t.trend===`up`?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:t.trend===`up`?`#EF4444`:`#10B981`},children:[(0,z.jsx)(e,{className:`w-3 h-3`}),t.value]})},[t]),p=(0,L.useMemo)(()=>s?[s.min,s.max]:[40,120],[s]);return(0,z.jsxs)(G,{className:c,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(xe,{className:`w-5 h-5`,style:{color:u}}),(0,z.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:l(`vitals.heartRate`,`Heart rate`)}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:`bpm`})]}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[l(`daily.standard`,`Standard`),`: `,a]})]}),(0,z.jsx)(Ju,{children:(0,z.jsxs)(`div`,{className:`grid grid-cols-4`,children:[(0,z.jsx)(Qu,{value:e,label:l(`daily.newestValue`,`Newest value`),isHighlighted:!0,themeColor:u,changeIndicator:f}),(0,z.jsx)(Qu,{value:n,label:l(`daily.average`,`Average`)}),(0,z.jsx)(Qu,{value:r,label:l(`daily.highest`,`Highest`)}),(0,z.jsx)(Qu,{value:i,label:l(`daily.lowest`,`Lowest`)})]})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-4 mb-2 px-1`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-sm`,style:{backgroundColor:`${u}40`}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:l(`daily.range`,`Range`)})]}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:u}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:l(`daily.mean`,`Mean`)})]})]}),(0,z.jsx)(on,{data:d,lines:[{dataKey:`avg`,areaDataKey:`range`,color:u,label:l(`vitals.heartRate`,`Heart Rate`),showArea:!0,gradientId:`hrGradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:p,renderTooltip:e=>(0,z.jsx)(Zu,{...e}),height:180,showLegend:!1})]})});var ed=e=>{if(!e)return{bg:`bg-slate-100`,text:`text-slate-500`};let t=e.toLowerCase();return e.includes(`é«˜`)||t.includes(`high`)||t.includes(`exceed`)?{bg:`bg-orange-500`,text:`text-white`}:e.includes(`ä½Ž`)||t.includes(`low`)?{bg:`bg-blue-500`,text:`text-white`}:e.includes(`æ­£å¸¸`)||t.includes(`normal`)?{bg:`bg-green-500`,text:`text-white`}:{bg:`bg-amber-500`,text:`text-white`}},td=(e,t)=>e?e.includes(`åé«˜`)||e.includes(`é«˜`)?t(`status.exceed`,`Exceed`):e.includes(`åä½Ž`)||e.includes(`ä½Ž`)?t(`status.low`,`Low`):e.includes(`æ­£å¸¸`)?t(`status.normal`,`Normal`):e:``,nd=(0,L.memo)(({active:e,payload:t})=>{var n,r;let{t:i}=I();if(!e||!t||t.length===0)return null;let a=(n=t[0])==null?void 0:n.payload;return a?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:a.time}),(0,z.jsxs)(`p`,{className:`text-amber-300`,children:[i(`daily.average`,`Average`),`: `,(r=a.value)==null?void 0:r.toFixed(1)]})]}):null});nd.displayName=`GlucoseCustomTooltip`;var rd=(0,L.memo)(({value:e,label:t,isHighlighted:n,themeColor:r,changeIndicator:i,formatValue:a})=>(0,z.jsxs)(`div`,{className:`pl-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`font-bold ${n?`text-3xl`:`text-2xl`}`,style:n&&r?{color:r}:{color:`#334155`},children:e===null?`--`:a?a(e):e}),i]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:t})]}));rd.displayName=`StatItem`;const id=(0,L.memo)(({latest:e,change:t,avg:n,max:r,min:i,reference:a,status:o,chart:s,yAxisRange:c,className:l=``})=>{let{t:u}=I(),d=B.glucose,f=e=>e.toFixed(1),p=(0,L.useMemo)(()=>!s||s.length===0?[{time:`00:00`,value:5.2},{time:`04:00`,value:5.5},{time:`08:00`,value:7.5},{time:`12:00`,value:6.8},{time:`16:00`,value:6.2},{time:`20:00`,value:5.8}]:s.map(e=>{var t,n;return{time:e.time,value:(t=(n=e.value)==null?e.avg:n)==null?0:t}}),[s]),m=(0,L.useMemo)(()=>{if(!t||t.value===null||t.trend===null)return null;let e=t.trend===`up`?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:t.trend===`up`?`#EF4444`:`#10B981`},children:[(0,z.jsx)(e,{className:`w-3 h-3`}),t.value.toFixed(1)]})},[t]),h=(0,L.useMemo)(()=>c?[c.min,c.max]:[2,14],[c]),g=(0,L.useMemo)(()=>{if(!o)return null;let e=ed(o),t=td(o,u);return(0,z.jsx)(`span`,{className:`px-2 py-0.5 rounded text-xs font-medium ${e.bg} ${e.text}`,children:t})},[o,u]);return(0,z.jsxs)(G,{className:l,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(M,{className:`w-5 h-5`,style:{color:d}}),(0,z.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:`POCT`}),g,(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:`mmol/L`})]}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[u(`daily.standard`,`Standard`),`: `,a]})]}),(0,z.jsx)(Ju,{children:(0,z.jsxs)(`div`,{className:`grid grid-cols-4`,children:[(0,z.jsx)(rd,{value:e,label:u(`daily.newestValue`,`Newest value`),isHighlighted:!0,themeColor:d,changeIndicator:m,formatValue:f}),(0,z.jsx)(rd,{value:n,label:u(`daily.average`,`Average`),formatValue:f}),(0,z.jsx)(rd,{value:r,label:u(`daily.highest`,`Highest`),formatValue:f}),(0,z.jsx)(rd,{value:i,label:u(`daily.lowest`,`Lowest`),formatValue:f})]})}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2 px-1`,children:(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:d}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:u(`daily.mean`,`Mean`)})]})}),(0,z.jsx)(on,{data:p,lines:[{dataKey:`value`,color:d,label:`POCT`,showArea:!0,gradientId:`glucoseGradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:h,renderTooltip:e=>(0,z.jsx)(nd,{...e}),height:180,showLegend:!1})]})});var ad=(0,L.memo)(({active:e,payload:t})=>{var n;let{t:r}=I();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,z.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,z.jsx)(`p`,{className:`font-medium mb-1`,children:i.time}),(0,z.jsxs)(`p`,{className:`text-cyan-300`,children:[r(`daily.average`,`Average`),`: `,i.value]})]}):null});ad.displayName=`SpO2CustomTooltip`;var od=(0,L.memo)(({value:e,label:t,isHighlighted:n,themeColor:r,changeIndicator:i})=>(0,z.jsxs)(`div`,{className:`pl-5`,children:[(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,z.jsx)(`span`,{className:`font-bold ${n?`text-3xl`:`text-2xl`}`,style:n&&r?{color:r}:{color:`#334155`},children:e==null?`--`:e}),i]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:t})]}));od.displayName=`StatItem`;const sd=(0,L.memo)(({latest:e,change:t,avg:n,max:r,min:i,reference:a,chart:o,yAxisRange:s,className:c=``})=>{let{t:l}=I(),u=B.spo2,d=(0,L.useMemo)(()=>!o||o.length===0?[{time:`00:00`,value:97},{time:`04:00`,value:96},{time:`08:00`,value:98},{time:`12:00`,value:97},{time:`16:00`,value:98},{time:`20:00`,value:97}]:o.map(e=>{var t,n;return{time:e.time,value:(t=(n=e.value)==null?e.avg:n)==null?0:t}}),[o]),f=(0,L.useMemo)(()=>{if(!t||t.value===null||t.trend===null)return null;let e=t.trend===`up`?$e:ze;return(0,z.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:t.trend===`up`?`#10B981`:`#EF4444`},children:[(0,z.jsx)(e,{className:`w-3 h-3`}),t.value]})},[t]),p=(0,L.useMemo)(()=>s?[s.min,s.max]:[88,102],[s]);return(0,z.jsxs)(G,{className:c,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(Oe,{className:`w-5 h-5`,style:{color:u}}),(0,z.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:`SpO2`}),(0,z.jsx)(`span`,{className:`text-xs text-slate-400`,children:`%`})]}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[l(`daily.standard`,`Standard`),`: `,a]})]}),(0,z.jsx)(Ju,{children:(0,z.jsxs)(`div`,{className:`grid grid-cols-4`,children:[(0,z.jsx)(od,{value:e,label:l(`daily.newestValue`,`Newest value`),isHighlighted:!0,themeColor:u,changeIndicator:f}),(0,z.jsx)(od,{value:n,label:l(`daily.average`,`Average`)}),(0,z.jsx)(od,{value:r,label:l(`daily.highest`,`Highest`)}),(0,z.jsx)(od,{value:i,label:l(`daily.lowest`,`Lowest`)})]})}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2 px-1`,children:(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:u}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:l(`daily.mean`,`Mean`)})]})}),(0,z.jsx)(on,{data:d,lines:[{dataKey:`value`,color:u,label:`SpO2`,showArea:!0,gradientId:`spo2Gradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:p,renderTooltip:e=>(0,z.jsx)(ad,{...e}),height:180,showLegend:!1})]})});function cd(){let{t:e}=I(),t=Er().date,{data:n,isLoading:r,isError:i,error:a}=Ou(t||void 0);return r?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`animate-pulse text-slate-500`,children:`Loading...`})}):i?(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsxs)(`div`,{className:`text-red-500`,children:[`Error: `,(a==null?void 0:a.message)||`Failed to load data`]})}):n?(0,z.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,z.jsx)(`div`,{className:`${V.pageMaxWidth} mx-auto`,children:(0,z.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,z.jsx)(pu,{score:n.score,maxScore:100,percentile:n.percentile,percentileMessage:n.percentileMessage,aiTags:n.aiTags,themeColor:`#FB923D`,title:e(`daily.todayScore`,`Today's score`),icon:(0,z.jsx)(Oe,{className:`w-6 h-6 text-white`})}),(0,z.jsxs)(`div`,{className:`space-y-4`,children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800 px-1`,children:e(`daily.coreIndicators`,`Core indicator Analysis`)}),(0,z.jsx)(Xu,{latest:n.indicators.bloodPressure.latest,change:n.indicators.bloodPressure.change,avg:n.indicators.bloodPressure.avg,reference:n.indicators.bloodPressure.reference,status:n.indicators.bloodPressure.status,chart:n.indicators.bloodPressure.chart,yAxisRange:n.indicators.bloodPressure.yAxisRange}),(0,z.jsx)($u,{latest:n.indicators.heartRate.latest,change:n.indicators.heartRate.change,avg:n.indicators.heartRate.avg,max:n.indicators.heartRate.max,min:n.indicators.heartRate.min,reference:n.indicators.heartRate.reference,status:n.indicators.heartRate.status,chart:n.indicators.heartRate.chart,yAxisRange:n.indicators.heartRate.yAxisRange}),(0,z.jsx)(id,{latest:n.indicators.bloodGlucose.latest,change:n.indicators.bloodGlucose.change,avg:n.indicators.bloodGlucose.avg,max:n.indicators.bloodGlucose.max,min:n.indicators.bloodGlucose.min,reference:n.indicators.bloodGlucose.reference,status:n.indicators.bloodGlucose.status,chart:n.indicators.bloodGlucose.chart,yAxisRange:n.indicators.bloodGlucose.yAxisRange}),(0,z.jsx)(sd,{latest:n.indicators.bloodOxygen.latest,change:n.indicators.bloodOxygen.change,avg:n.indicators.bloodOxygen.avg,max:n.indicators.bloodOxygen.max,min:n.indicators.bloodOxygen.min,reference:n.indicators.bloodOxygen.reference,status:n.indicators.bloodOxygen.status,chart:n.indicators.bloodOxygen.chart,yAxisRange:n.indicators.bloodOxygen.yAxisRange})]}),n.aiInsights.length>0&&(0,z.jsx)(mu,{insights:n.aiInsights,themeColor:qt.primary}),(0,z.jsx)(hu,{suggestions:n.suggestions||[]}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only.`)})]})})}):null}var ld=rt(cd),$=`â€”`,ud=[`ä¸€`,`äºŒ`,`ä¸‰`,`å››`,`äº”`,`å…­`,`æ—¥`];function dd(e){return`${e.getMonth()+1}æœˆ${e.getDate()}æ—¥`}function fd(){let e=new Date,t=new Date(e);t.setDate(e.getDate()-6);let n=e=>e.toISOString().slice(0,10),r=Math.ceil(e.getDate()/7)||1;return{start_date:n(t),end_date:n(e),display_range:`${dd(t)} - ${dd(e)}`,week_number:r,title:$}}function pd(){let e=fd(),t=e=>({date:``,label:e,value:null}),n=e=>({date:``,label:e,value:{systolic:0,diastolic:0}}),r=ud.map((e,n)=>t(e)),i=ud.map(e=>n(e));return{report_exists:!0,week_range:e,generated_at:``,overall:{score:0,status:{level:`B`,label:$},evaluate:$,peer_compare:$,days_on_target:0,score_change:{value:0,text:$}},vital_signs:{ai_insight:$,heart_rate:{has_data:!1,avg:0,unit:`BPM`,status:{level:`B`,label:$},trend_chart:r},blood_pressure:{has_data:!1,systolic_avg:0,diastolic_avg:0,unit:`mmHg`,status:{level:`B`,label:$},trend_chart:i},blood_oxygen:{has_data:!1,avg:0,unit:`%`,status:{level:`B`,label:$},trend_chart:r},blood_glucose:{has_data:!1,avg:0,unit:`mmol/L`,status:{level:`B`,label:$},trend_chart:r}},sleep:{has_data:!1,ai_insight:$,status:{level:`B`,label:$},avg_duration:{value:0,display:$},sleep_structure:{stages:[{type:`deep`,label:$,percent:0},{type:`light`,label:$,percent:0},{type:`rem`,label:$,percent:0},{type:`awake`,label:$,percent:0}]},trend_chart:ud.map(e=>({date:``,label:e,total:null,total_text:null,stages:null}))},emotion:{has_data:!1,ai_insight:$,status:{level:`B`,label:$},avg_score:0,avg_distribution:[{type:`positive`,label:$,percent:0},{type:`neutral`,label:$,percent:0},{type:`negative`,label:$,percent:0}],trend_chart:ud.map(e=>({date:``,label:e,score:null,distribution:null}))},medication:{has_data:!1,ai_insight:$,status:{level:`B`,label:$},compliance_rate:0,miss_count:0,chart_data:ud.map(e=>({date:``,label:e,status:`taken`,status_label:$,detail:{taken:0,delayed:0,missed:0,total:0}}))},nutrition:{has_data:!1,ai_insight:$,status:{level:`B`,label:$},compliance_rate:0,avg_daily_calories:{label:$,value:0},meal_avg:[{type:`breakfast`,label:$,avg_calories:0},{type:`lunch`,label:$,avg_calories:0},{type:`dinner`,label:$,avg_calories:0}],chart_data:ud.map(e=>({date:``,label:e,calories:0,status:`on_target`,status_label:$}))},exercise:{has_data:!1,ai_insight:$,status:{level:`B`,label:$},avg_completion_rate:0,main_types:{title:$,types:[]},efficiency:{title:$,effect:$,change:{direction:`up`,value:0}},chart_data:ud.map(e=>({label:e,completion_rate:0,duration:0}))},correlation:[],improvement_suggestions:[]}}function md(e,t){if(t==null)return e;if(typeof e!=`object`||!e)return t==null?e:t;if(Array.isArray(e))return Array.isArray(t)?t:e;let n={...e};for(let r of Object.keys(e)){let i=e[r],a=t[r];n[r]=md(i,a)}return n}function hd(e){return md(pd(),e==null?{}:e)}function gd(e){return{taken:`#10B981`,delayed:`#F59E0B`,missed:`#EF4444`}[e]||`#6B7280`}const _d={all:[`weekly-report`],report:e=>[..._d.all,`report`,e]};async function vd(e){let t=e?{report_id:e}:{},n=await An.post(_n.weeklyReport,t);if(n.data.code!==200)throw Error(n.data.msg||`Failed to fetch weekly report`);return hd(n.data.data)}function yd(e){return Me({queryKey:_d.report(e==null?``:e),queryFn:()=>vd(e),staleTime:300*1e3,gcTime:600*1e3})}var bd={primary:`#F97316`,headerBg:`#FB923C`,primaryLight:`rgba(249, 115, 22, 0.1)`},xd=`/images/weekly_report/smile.png`;const Sd=(0,L.memo)(({overall:e,weekRange:t,className:n=``})=>{let{t:r}=I(),{score:i,evaluate:a,peer_compare:o,days_on_target:s,score_change:c}=e;return(0,z.jsxs)(`div`,{className:`bg-white ${n} overflow-hidden`,style:{borderRadius:V.cardBorderRadius},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between gap-4 px-6 py-4`,style:{backgroundColor:bd.headerBg},children:[(0,z.jsx)(`div`,{className:`px-4 py-1.5 rounded-full text-sm font-medium text-white`,style:{backgroundColor:`rgba(255, 255, 255, 0.14)`,border:`solid 1px #ffffff`},children:r(`weeklyReport.weekSummary`,{week:t.week_number})}),(0,z.jsx)(`div`,{className:`px-4 py-1.5 rounded-full text-sm font-medium text-white `,style:{backgroundColor:`rgba(255, 255, 255, 0.14)`,border:`solid 1px #ffffff`},children:t.display_range})]}),(0,z.jsxs)(`div`,{style:{paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:24,paddingBottom:24},children:[(0,z.jsxs)(`div`,{className:`flex items-flex-start justify-between gap-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`h3`,{className:`text-lg font-semibold text-slate-800`,children:r(`weeklyReport.overallScore`)}),(0,z.jsx)(`p`,{className:`text-4xl font-bold text-slate-900 mt-1 tracking-tight`,children:i}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-1 leading-relaxed`,children:a})]}),(0,z.jsxs)(`div`,{className:`relative flex-shrink-0 w-20 h-20 flex items-center justify-center`,children:[(0,z.jsx)(`img`,{src:xd,alt:``,className:`w-16 h-16 object-contain`}),(0,z.jsx)(`span`,{className:`absolute -top-0.5 -right-0.5 w-4 h-4 text-amber-400`,"aria-hidden":!0,children:(0,z.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`currentColor`,className:`w-full h-full`,children:(0,z.jsx)(`path`,{d:`M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.6-6.3 4.6 2.3-7-6-4.6h7.6L12 2z`})})}),(0,z.jsx)(`span`,{className:`absolute -bottom-0.5 -left-0.5 w-3 h-3 text-amber-400`,"aria-hidden":!0,children:(0,z.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`currentColor`,className:`w-full h-full`,children:(0,z.jsx)(`path`,{d:`M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.6-6.3 4.6 2.3-7-6-4.6h7.6L12 2z`})})}),(0,z.jsx)(`span`,{className:`absolute top-1 -right-2 w-2.5 h-2.5 text-blue-400`,"aria-hidden":!0,children:(0,z.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`currentColor`,className:`w-full h-full`,children:(0,z.jsx)(`path`,{d:`M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.6-6.3 4.6 2.3-7-6-4.6h7.6L12 2z`})})})]})]}),(0,z.jsxs)(`div`,{className:`mt-5 flex items-center gap-2 px-4 py-2 rounded-full`,style:{backgroundColor:`#FEE9D8`,color:`#FB923C`},children:[(0,z.jsx)(`div`,{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center flex-shrink-0`,style:{borderColor:`#FB923C`},children:(0,z.jsx)(`svg`,{className:`w-2.5 h-2.5`,style:{color:`#FB923C`},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,strokeWidth:2.5,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M5 13l4 4L19 7`})})}),(0,z.jsx)(`p`,{className:`text-xs font-medium leading-snug`,style:{color:`#FB923C`},children:o})]}),(0,z.jsxs)(`div`,{className:`mt-5 flex items-stretch gap-4`,children:[(0,z.jsxs)(`div`,{className:`flex-1 px-4 py-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-base font-semibold text-slate-900 mb-1`,children:r(`weeklyReport.goalDays`)}),(0,z.jsxs)(`p`,{className:`text-2xl font-bold`,style:{color:bd.primary},children:[s,` `,(0,z.jsx)(`span`,{className:`text-base font-normal text-slate-500`,children:r(`weeklyReport.days`)})]})]}),(0,z.jsxs)(`div`,{className:`flex-1 px-4 py-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-base font-semibold text-slate-900 mb-1`,children:r(`weeklyReport.vsLastWeek`)}),(0,z.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[c&&c.value>=0&&(0,z.jsx)(`svg`,{className:`w-5 h-5 flex-shrink-0`,style:{color:bd.primary},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,strokeWidth:2,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M5 15l7-7 7 7`})}),c&&c.value<0&&(0,z.jsx)(`svg`,{className:`w-5 h-5 flex-shrink-0 text-red-500 rotate-180`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,strokeWidth:2,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`M5 15l7-7 7 7`})}),(0,z.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:bd.primary},children:c==null?`â€”`:typeof c.value==`number`?Math.abs(c.value):c.text}),(0,z.jsx)(`span`,{className:`text-base font-normal text-slate-500 ml-0.5`,children:r(`weeklyReport.points`)})]})]})]})]})]})});var Cd={heartRate:B.heartRate,systolic:`#F97316`,diastolic:`#22C55E`,bloodOxygen:B.spo2,bloodGlucose:B.glucose},wd=({vitalSigns:e,className:t=``})=>{let{t:n}=I();if(!e)return null;let r=e.heart_rate,i=e.blood_pressure,a=e.blood_oxygen,o=e.blood_glucose;return(0,z.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 ${t}`,children:[(0,z.jsx)(Td,{title:n(`weeklyReport.avgHR`),value:r.avg,unit:r.unit,status:r.status.label,color:Cd.heartRate,trendData:r.trend_chart.map(e=>{var t;return{value:(t=e.value)==null?void 0:t}})}),(0,z.jsx)(Td,{title:n(`weeklyReport.avgBP`),value:`${i.systolic_avg}/${i.diastolic_avg}`,unit:i.unit,status:i.status.label,color:Cd.systolic,secondaryColor:Cd.diastolic,trendData:i.trend_chart.map(e=>({systolic:e.value.systolic,diastolic:e.value.diastolic})),isBP:!0}),(0,z.jsx)(Td,{title:n(`weeklyReport.avgSpO2`),value:a.avg,unit:a.unit,status:a.status.label,color:Cd.bloodOxygen,trendData:a.trend_chart.map(e=>{var t;return{value:(t=e.value)==null?void 0:t}})}),(0,z.jsx)(Td,{title:n(`weeklyReport.avgGlucose`),value:o.avg,unit:o.unit,status:o.status.label,color:Cd.bloodGlucose,trendData:o.trend_chart.map(e=>{var t;return{value:(t=e.value)==null?void 0:t}})})]})},Td=(0,L.memo)(({title:e,value:t,unit:n,status:r,color:i,secondaryColor:a,trendData:o,isBP:s=!1})=>{let c=r.includes(`æ­£å¸¸`)||r.includes(`Normal`)||r.includes(`å¹³ç¨³`)||r.includes(`Stable`)||r.includes(`ç†æƒ³`)||r.includes(`Ideal`)?`#10B981`:`#EC4899`;return(0,z.jsxs)(`div`,{className:`bg-white overflow-hidden`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h4`,{className:`text-sm font-medium text-slate-600 mb-2`,children:e}),(0,z.jsxs)(`div`,{className:`mb-3`,children:[(0,z.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:`#F97316`},children:t}),(0,z.jsx)(`span`,{className:`text-sm text-slate-500 ml-1.5`,children:n})]}),(0,z.jsx)(`div`,{className:`h-16 min-h-[4rem] -mx-2 mb-3`,children:(0,z.jsx)(g,{width:`100%`,height:`100%`,minHeight:64,children:(0,z.jsx)(E,{data:o,margin:{top:0,right:0,left:0,bottom:0},children:s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(v,{type:`monotone`,dataKey:`systolic`,stroke:i,strokeWidth:2,dot:!1,isAnimationActive:!1}),(0,z.jsx)(v,{type:`monotone`,dataKey:`diastolic`,stroke:a,strokeWidth:2,dot:!1,isAnimationActive:!1})]}):(0,z.jsx)(v,{type:`monotone`,dataKey:`value`,stroke:i,strokeWidth:2,dot:!1,isAnimationActive:!1})})})}),(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-sm flex-shrink-0`,style:{backgroundColor:c}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500 leading-none`,children:r})]})]})});Td.displayName=`VitalMiniCard`;const Ed=(0,L.memo)(wd);var Dd={background:`#FFF7ED`,badge:`#F97316`,iconBg:`rgba(249, 115, 22, 0.1)`};(0,L.memo)(({insight:e,title:t,className:n=``})=>{let{t:r}=I(),i=t==null?r(`weeklyReport.aiInsight.default`):t;return e?(0,z.jsxs)(`div`,{className:`${n}`,style:{backgroundColor:Dd.background,borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium mb-4`,style:{backgroundColor:Dd.badge},children:[(0,z.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z`})}),(0,z.jsx)(`span`,{children:i})]}),(0,z.jsx)(`div`,{className:`bg-white rounded-xl p-4 shadow-sm`,children:(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:e})})]}):null});var Od=({active:e,payload:t,label:n})=>{var r,i;let{t:a}=I();if(!e||!(t!=null&&t.length))return null;let o=(r=t[0])==null?void 0:r.payload;if(!o||o.total===null||o.total===void 0)return(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500`,children:n}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a(`weeklyReport.noData`)})]});let s=[{key:`deep`,label:a(`weeklyReport.sleepDeep`),color:U.deep},{key:`light`,label:a(`weeklyReport.sleepLight`),color:U.light},{key:`rem`,label:a(`weeklyReport.sleepRem`),color:U.rem},{key:`awake`,label:a(`weeklyReport.awake`),color:U.awake}];return(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3 min-w-[120px]`,children:[(0,z.jsx)(`p`,{className:`text-xs font-medium text-slate-600 mb-2`,children:n}),(0,z.jsx)(`p`,{className:`text-sm font-semibold text-slate-800 mb-2`,children:(i=o.totalText)==null?`-`:i}),(0,z.jsx)(`div`,{className:`space-y-1`,children:s.map(e=>{var t;return(0,z.jsxs)(`div`,{className:`flex items-center justify-between gap-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-2 h-2 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-600`,children:e.label})]}),(0,z.jsx)(`span`,{className:`text-xs text-slate-800`,children:(t=o[`${e.key}Text`])==null?`-`:t})]},e.key)})})]})};const kd=(0,L.memo)(({sleep:e,className:t=``})=>{let{t:n}=I();if(!e.has_data)return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.sleep`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-4`,children:n(`weeklyReport.noSleepData`)})]});let r=e.trend_chart.map(e=>{let t=e.stages||[],n=t.find(e=>e.type===`deep`),r=t.find(e=>e.type===`light`),i=t.find(e=>e.type===`rem`),a=t.find(e=>e.type===`awake`);return{label:e.label,total:e.total,totalText:e.total_text,deep:(n==null?void 0:n.value)||0,deepText:n==null?void 0:n.text,light:(r==null?void 0:r.value)||0,lightText:r==null?void 0:r.text,rem:(i==null?void 0:i.value)||0,remText:i==null?void 0:i.text,awake:(a==null?void 0:a.value)||0,awakeText:a==null?void 0:a.text}}),i=[{key:`deep`,label:n(`weeklyReport.sleepDeep`),color:U.deep},{key:`light`,label:n(`weeklyReport.sleepLight`),color:U.light},{key:`rem`,label:n(`weeklyReport.sleepRem`),color:U.rem},{key:`awake`,label:n(`weeklyReport.awake`),color:U.awake}],a=i.map(e=>({dataKey:e.key,color:e.color,label:e.label})),o=B.sleep;return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between pb-4 mb-4`,style:{borderBottom:`2px solid ${H.background.gray}`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,style:{backgroundColor:U.rem},children:(0,z.jsx)(`svg`,{className:`w-6 h-6`,style:{color:o},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z`})})}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:n(`weeklyReport.avgSleepTracking`)}),(0,z.jsx)(`p`,{className:`text-base font-bold text-slate-800 mt-0.5`,children:e.avg_duration.display})]})]}),(0,z.jsx)(`span`,{className:`text-xs font-medium px-3 py-1.5 rounded-full`,style:{backgroundColor:`#F5EFFF`,color:`#A27EFF`},children:e.status.label})]}),(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.sleepDurationTrend`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2`,children:i.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.key))}),(0,z.jsx)(_c,{data:r,layers:a,xAxisKey:`label`,renderTooltip:e=>(0,z.jsx)(Od,{...e}),yAxisFormatter:e=>`${Math.floor(Number(e)/60)}h`,showLegend:!1,height:250,barSize:12,showRoundedTop:!0,className:`-mx-2 mb-4`,stackId:`sleep`}),(0,z.jsxs)(`div`,{className:`rounded-2xl p-4 mb-4`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.avgSleepStages`)}),(0,z.jsx)(`div`,{className:`rounded-xl overflow-hidden mb-4`,style:{backgroundColor:`#f1f5f9`},children:(0,z.jsx)(`div`,{className:`flex h-3 rounded-full overflow-hidden`,children:e.sleep_structure.stages.map(e=>{var t,n;return(0,z.jsx)(`div`,{className:`flex items-center justify-center min-w-0 transition-all`,style:{width:`${(t=e.percent)==null?0:t}%`,backgroundColor:U[e.type]},title:`${e.label} ${(n=e.percent)==null?0:n}%`},e.type)})})}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 flex-wrap`,children:e.sleep_structure.stages.map(e=>{var t;return(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full flex-shrink-0`,style:{backgroundColor:U[e.type]}}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-600`,children:[e.label,` `,(t=e.percent)==null?0:t,`%`]})]},e.type)})})]}),e.ai_insight&&(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-white text-sm font-bold`,style:{backgroundColor:o},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]})});var Ad={negative:W.negative,neutral:W.neutral,positive:W.positive},jd=({active:e,payload:t,label:n})=>{var r;let{t:i}=I();if(!e||!(t!=null&&t.length))return null;let a=(r=t[0])==null?void 0:r.payload;if(!a||a.score===null||a.score===void 0)return(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500`,children:n}),(0,z.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:i(`weeklyReport.noData`)})]});let o=[{key:`positive`,label:i(`weeklyReport.positive`),color:Ad.positive},{key:`neutral`,label:i(`weeklyReport.neutral`),color:Ad.neutral},{key:`negative`,label:i(`weeklyReport.negative`),color:Ad.negative}];return(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3 min-w-[120px]`,children:[(0,z.jsx)(`p`,{className:`text-xs font-medium text-slate-600 mb-2`,children:n}),(0,z.jsxs)(`p`,{className:`text-sm font-semibold text-slate-800 mb-2`,children:[i(`weeklyReport.emotionScore`),`: `,a.score]}),(0,z.jsx)(`div`,{className:`space-y-1`,children:o.map(e=>{var t;return(0,z.jsxs)(`div`,{className:`flex items-center justify-between gap-3`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-2 h-2 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-600`,children:e.label})]}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-800`,children:[(t=a[e.key])==null?0:t,`%`]})]},e.key)})})]})};const Md=(0,L.memo)(({emotion:e,className:t=``})=>{let{t:n}=I();if(!e.has_data)return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.emotion`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-4`,children:n(`weeklyReport.noEmotionData`)})]});let r=e.trend_chart.map(e=>{var t,n,r;let i=e.distribution||[],a=((t=i.find(e=>e.type===`negative`))==null?void 0:t.percent)||0,o=((n=i.find(e=>e.type===`neutral`))==null?void 0:n.percent)||0,s=((r=i.find(e=>e.type===`positive`))==null?void 0:r.percent)||0;return{label:e.label,score:e.score,negative:a,neutral:o,positive:s}}),i=e.avg_distribution,a=W.primary,o=[{key:`negative`,label:n(`weeklyReport.negative`),color:Ad.negative},{key:`neutral`,label:n(`weeklyReport.neutral`),color:Ad.neutral},{key:`positive`,label:n(`weeklyReport.positive`),color:Ad.positive}],s=o.map(e=>({dataKey:e.key,color:e.color,label:e.label}));return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between pb-4 mb-4`,style:{borderBottom:`1px solid ${H.background.gray}`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,style:{backgroundColor:W.alpha},children:(0,z.jsx)(`svg`,{className:`w-6 h-6`,style:{color:a},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z`})})}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:n(`weeklyReport.avgMoodIndex`)}),(0,z.jsxs)(`p`,{className:`text-base font-normal text-slate-800 mt-0.5`,children:[e.avg_score,` `,n(`weeklyReport.points`)]})]})]}),(0,z.jsx)(`span`,{className:`text-xs font-medium px-3 py-1.5 rounded-full`,style:{backgroundColor:`rgba(251, 146, 61, 0.12)`,color:a},children:e.status.label})]}),(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.moodAndVolatility`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2`,children:o.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.key))}),(0,z.jsx)(_c,{data:r,layers:s,xAxisKey:`label`,renderTooltip:e=>(0,z.jsx)(jd,{...e}),yAxisDomain:[0,100],yAxisFormatter:e=>`${e}%`,showLegend:!1,height:200,barSize:12,showRoundedTop:!0,className:`-mx-2 mb-4`,stackId:`emotion`}),(0,z.jsxs)(`div`,{className:`rounded-2xl p-4 mb-4`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.avgMoodDistribution`)}),(0,z.jsx)(`div`,{className:`rounded-xl overflow-hidden mb-4`,style:{backgroundColor:`#f1f5f9`},children:(0,z.jsx)(`div`,{className:`flex h-3 rounded-full overflow-hidden`,children:i.map(e=>{var t,n;return(0,z.jsx)(`div`,{className:`flex items-center justify-center min-w-0 transition-all`,style:{width:`${(t=e.percent)==null?0:t}%`,backgroundColor:Ad[e.type]},title:`${e.label} ${(n=e.percent)==null?0:n}%`},e.type)})})}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 flex-wrap`,children:i.map(e=>{var t;return(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full flex-shrink-0`,style:{backgroundColor:Ad[e.type]}}),(0,z.jsxs)(`span`,{className:`text-xs text-slate-600`,children:[e.label,` `,(t=e.percent)==null?0:t,`%`]})]},e.type)})})]}),e.ai_insight&&(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-white text-sm font-bold`,style:{backgroundColor:a},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]})});var Nd=`#CCFBF1`,Pd=`#14B8A6`;const Fd=(0,L.memo)(({medication:e,className:t=``})=>{let{t:n}=I();if(!e.has_data)return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.medication`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-4`,children:n(`weeklyReport.noMedicationData`)})]});let r=[{status:`taken`,label:n(`weeklyReport.takenOnTime`),color:gd(`taken`)},{status:`delayed`,label:n(`weeklyReport.delayed`),color:gd(`delayed`)},{status:`missed`,label:n(`weeklyReport.missed`),color:gd(`missed`)}];return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between pb-4 mb-4`,style:{borderBottom:`1px solid ${H.background.gray}`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,style:{backgroundColor:Nd},children:(0,z.jsx)(`svg`,{className:`w-6 h-6`,style:{color:Pd},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z`})})}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:n(`weeklyReport.medAdherence`)}),(0,z.jsxs)(`p`,{className:`text-base font-normal text-slate-800 mt-0.5`,children:[e.compliance_rate,`%`]})]})]}),(0,z.jsx)(`span`,{className:`text-xs font-medium px-3 py-1.5 rounded-full`,style:{backgroundColor:Nd,color:Pd},children:e.status.label})]}),(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.adherenceTrend`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-4`,children:r.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.status))}),(0,z.jsxs)(`div`,{className:`mb-4`,children:[(0,z.jsx)(`div`,{className:`flex items-center justify-between mb-2`,children:e.chart_data.map(e=>(0,z.jsx)(`span`,{className:`text-xs text-slate-500 w-8 text-center`,children:e.label},`label-${e.date}`))}),(0,z.jsxs)(`div`,{className:`relative flex items-center justify-between h-8`,children:[(0,z.jsx)(`div`,{className:`absolute left-4 right-4 border-t border-dashed pointer-events-none border-slate-300 h-0`,style:{top:`calc(50% - 0.5px)`,zIndex:0}}),e.chart_data.map(e=>(0,z.jsxs)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ring-2 ring-white relative z-10`,style:{backgroundColor:gd(e.status)},title:e.status_label,children:[e.status===`taken`&&(0,z.jsx)(`svg`,{className:`w-4 h-4 text-white`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M5 13l4 4L19 7`})}),e.status===`delayed`&&(0,z.jsx)(`svg`,{className:`w-4 h-4 text-white`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z`})}),e.status===`missed`&&(0,z.jsx)(`svg`,{className:`w-4 h-4 text-white`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M6 18L18 6M6 6l12 12`})})]},e.date))]}),(0,z.jsx)(`div`,{className:`flex items-center justify-between mt-2`,children:e.chart_data.map(e=>(0,z.jsxs)(`span`,{className:`text-[10px] text-slate-400 w-8 text-center`,children:[e.detail.taken,`/`,e.detail.total]},`count-${e.date}`))})]}),e.ai_insight&&(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold`,style:{backgroundColor:Nd,color:Pd},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]})});var Id=`#EFFBF0`,Ld=`#8DC77A`,Rd={on_target:`#8DC77A`,over:`#ff6262`,under:`#B8DBFF`},zd=({active:e,payload:t,label:n})=>{var r,i,a;if(!e||!(t!=null&&t.length))return null;let o=(r=t[0])==null?void 0:r.payload;return!o||o.calories===void 0||o.status===void 0?null:(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3 min-w-[100px]`,children:[(0,z.jsx)(`p`,{className:`text-xs font-medium text-slate-600 mb-1`,children:n}),(0,z.jsxs)(`p`,{className:`text-sm font-semibold text-slate-800`,children:[o.calories,` kcal`]}),(0,z.jsx)(`p`,{className:`text-xs mt-1`,style:{color:(i=Rd[(a=o.status)==null?``:a])==null?`#64748b`:i},children:o.statusLabel})]})};const Bd=(0,L.memo)(({nutrition:e,className:t=``})=>{let{t:n}=I();if(!e.has_data)return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.nutritionIntake`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-4`,children:n(`weeklyReport.noNutritionData`)})]});let r=3e3,i=e.chart_data.map(e=>({label:e.label,calories:e.calories,status:e.status,statusLabel:e.status_label,on_target:e.status===`on_target`?e.calories:0,over:e.status===`over`?e.calories:0,under:e.status===`under`?e.calories:0})),a=Math.max(...i.map(e=>e.calories),r),o=Math.ceil(a*1.15/500)*500,s=[{dataKey:`on_target`,color:Rd.on_target,label:n(`weeklyReport.onTarget`)},{dataKey:`over`,color:Rd.over,label:n(`weeklyReport.over`)},{dataKey:`under`,color:Rd.under,label:n(`weeklyReport.under`)}],c=[{status:`on_target`,label:n(`weeklyReport.onTarget`),color:Rd.on_target},{status:`over`,label:n(`weeklyReport.over`),color:Rd.over},{status:`under`,label:n(`weeklyReport.under`),color:Rd.under}];return(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between pb-4 mb-4`,style:{borderBottom:`1px solid ${H.background.gray}`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,style:{backgroundColor:Id},children:(0,z.jsxs)(`svg`,{className:`w-6 h-6`,style:{color:Ld},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,z.jsx)(`path`,{d:`M8 2v20M8 12h8`}),(0,z.jsx)(`path`,{d:`M16 2v6c0 1.1.9 2 2 2h2v12h2V10h2c1.1 0 2-.9 2-2V2h-8z`})]})}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:n(`weeklyReport.dailyCalories`)}),(0,z.jsxs)(`p`,{className:`text-base font-normal text-slate-800 mt-0.5`,children:[e.avg_daily_calories.value,` kcal`]})]})]}),(0,z.jsx)(`span`,{className:`text-xs font-medium px-3 py-1.5 rounded-full`,style:{backgroundColor:Id,color:Ld},children:n(`weeklyReport.onTargetPercent`,{percent:e.compliance_rate})})]}),(0,z.jsx)(`p`,{className:`text-sm font-medium text-slate-700 mb-2`,children:n(`weeklyReport.calorieIntake`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-4 mb-2`,children:c.map(e=>(0,z.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,z.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:e.color}}),(0,z.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.status))}),(0,z.jsx)(_c,{data:i,layers:s,xAxisKey:`label`,yAxisDomain:[0,o],yAxisFormatter:e=>`${e/1e3}k`,legendShape:`circle`,renderTooltip:e=>(0,z.jsx)(zd,{...e}),showLegend:!1,height:200,barSize:12,showRoundedTop:!0,className:`-mx-2 mb-4`,stackId:`nutrition`,referenceLines:[{y:r,stroke:`#F59E0B`,strokeDasharray:`4 4`}]}),(0,z.jsx)(`div`,{className:`rounded-2xl p-4 mb-4`,style:{backgroundColor:H.background.gray},children:(0,z.jsx)(`div`,{className:`grid grid-cols-3 gap-3`,children:e.meal_avg.map(e=>(0,z.jsxs)(`div`,{className:`text-left p-3 rounded-xl bg-white/80`,children:[(0,z.jsx)(`p`,{className:`text-sm font-semibold text-slate-800 mb-1`,children:e.type===`breakfast`?n(`weeklyReport.breakfast`):e.type===`lunch`?n(`weeklyReport.lunch`):n(`weeklyReport.dinner`)}),(0,z.jsxs)(`p`,{className:`text-base font-semibold`,children:[(0,z.jsx)(`span`,{style:{color:Ld},children:e.avg_calories}),(0,z.jsx)(`span`,{className:`text-slate-600 ml-1`,children:`kcal`})]})]},e.type))})}),e.ai_insight&&(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-bold`,style:{backgroundColor:Id,color:Ld},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]})});var Vd=`#E3F1FF`,Hd=`#8EC5FF`,Ud=`#4A90E2`,Wd=`#B8DBFF`,Gd=({active:e,payload:t,label:n})=>{var r;let{t:i}=I();if(!e||!(t!=null&&t.length))return null;let a=(r=t[0])==null?void 0:r.payload;return!a||a.completion_rate===void 0||a.duration===void 0?null:(0,z.jsxs)(`div`,{className:`bg-white rounded-lg shadow-lg border border-slate-200 p-3 min-w-[100px]`,children:[(0,z.jsx)(`p`,{className:`text-xs font-medium text-slate-600 mb-1`,children:n}),(0,z.jsxs)(`p`,{className:`text-sm font-semibold text-slate-800`,children:[a.completion_rate,`%`]}),(0,z.jsxs)(`p`,{className:`text-xs text-slate-500 mt-1`,children:[a.duration,` `,i(`weeklyReport.minutes`)]})]})},Kd=({type:e})=>{let t={meditation:(0,z.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5,d:`M12 6v6l4 2m6-2a10 10 0 11-20 0 10 10 0 0120 0z`})}),yoga:(0,z.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5,d:`M12 4.5v15m7.5-7.5h-15`})}),running:(0,z.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:1.5,d:`M13 10V3L4 14h7v7l9-11h-7z`})})};return t[e]||t.running};const qd=(0,L.memo)(({exercise:e,className:t=``})=>{let{t:n}=I(),r=[{dataKey:`completion_rate`,color:Wd,label:n(`weeklyReport.exerciseCompletion`)}];return e.has_data?(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between pb-4 mb-4`,style:{borderBottom:`1px solid ${H.background.gray}`},children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,style:{backgroundColor:Vd},children:(0,z.jsx)(`svg`,{className:`w-6 h-6`,style:{color:Ud},fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 10V3L4 14h7v7l9-11h-7z`})})}),(0,z.jsxs)(`div`,{children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:n(`weeklyReport.exerciseCompletion`)}),(0,z.jsxs)(`p`,{className:`text-base font-normal text-slate-800 mt-0.5`,children:[e.avg_completion_rate,`%`]})]})]}),(0,z.jsx)(`span`,{className:`text-xs font-medium px-3 py-1.5 rounded-full`,style:{backgroundColor:Vd,color:Hd},children:e.status.label})]}),(0,z.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 mb-4`,children:[(0,z.jsxs)(`div`,{className:`p-3 rounded-xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-2`,children:e.main_types.title}),(0,z.jsx)(`div`,{className:`flex items-center gap-2`,children:e.main_types.types.map(e=>(0,z.jsx)(`div`,{className:`flex items-center justify-center w-8 h-8 rounded-full`,style:{backgroundColor:Vd},title:e.label,children:(0,z.jsx)(`span`,{style:{color:Ud},children:(0,z.jsx)(Kd,{type:e.icon})})},e.type))})]}),(0,z.jsxs)(`div`,{className:`p-3 rounded-xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-2`,children:e.efficiency.title}),(0,z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,z.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:e.efficiency.effect===`bp_ideal`?n(`weeklyReport.bpIdeal`):e.efficiency.effect}),(0,z.jsxs)(`span`,{className:`flex items-center text-xs`,style:{color:e.efficiency.change.direction===`down`?Ud:`rgb(248, 113, 113)`},children:[e.efficiency.change.direction===`down`?`â†“`:`â†‘`,e.efficiency.change.value]})]})]})]}),(0,z.jsx)(_c,{data:e.chart_data,layers:r,xAxisKey:`label`,yAxisDomain:[0,100],yAxisFormatter:e=>`${e}%`,legendShape:`circle`,renderTooltip:e=>(0,z.jsx)(Gd,{...e}),showLegend:!1,height:200,barSize:12,showRoundedTop:!0,className:`-mx-2 mb-4`,stackId:`exercise`}),e.ai_insight&&(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-white text-sm font-bold`,style:{backgroundColor:Wd},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]}):(0,z.jsxs)(`div`,{className:`bg-white ${t}`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.exercise`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 mt-4`,children:n(`weeklyReport.noExerciseData`)})]})});var Jd={positive:`#10B981`,negative:`#EF4444`,improving:`#22C55E`,stable:`#6B7280`,declining:`#EF4444`},Yd=`#FB923C`;const Xd=(0,L.memo)(({correlations:e,className:t=``})=>{let{t:n}=I();return!e||e.length===0?null:(0,z.jsxs)(`div`,{className:`space-y-4 ${t}`,children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`weeklyReport.correlationAnalysis`)}),e.map((e,t)=>(0,z.jsxs)(`div`,{className:`bg-white`,style:{borderRadius:V.cardBorderRadius,paddingLeft:V.cardPaddingX,paddingRight:V.cardPaddingX,paddingTop:`20px`,paddingBottom:`20px`},children:[(0,z.jsx)(`h4`,{className:`text-sm font-medium text-slate-800 mb-3`,children:e.title}),(0,z.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,z.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-2`,children:n(`weeklyReport.influencingFactors`)}),e.influencing_factors.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex items-start gap-2 p-3 rounded-xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0`,style:{backgroundColor:e.impact===`positive`?Jd.positive:Jd.negative}}),(0,z.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-700`,children:e.factor}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500`,children:e.description})]})]},t))]}),(0,z.jsx)(`div`,{className:`flex items-center justify-center w-8 h-8 flex-shrink-0 self-center`,children:(0,z.jsx)(qe,{className:`w-5 h-5 text-orange-500`,fill:`currentColor`,strokeWidth:0})}),(0,z.jsxs)(`div`,{className:`flex-1 space-y-2`,children:[(0,z.jsx)(`p`,{className:`text-xs text-slate-500 mb-2`,children:n(`weeklyReport.healthOutcome`)}),e.health_outcomes.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex items-start gap-2 p-3 rounded-xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`span`,{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0`,style:{backgroundColor:e.trend===`improving`?Jd.improving:e.trend===`declining`?Jd.declining:Jd.stable}}),(0,z.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,z.jsx)(`p`,{className:`text-sm text-slate-700`,children:e.outcome}),(0,z.jsx)(`p`,{className:`text-xs text-slate-500`,children:e.description})]})]},t))]})]}),(0,z.jsxs)(`div`,{className:`flex gap-3 p-4 rounded-2xl`,style:{backgroundColor:H.background.gray},children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-white text-sm font-bold`,style:{backgroundColor:Yd},children:`AI`}),(0,z.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed flex-1 min-w-0`,children:e.ai_insight})]})]},t))]})}),Zd=(0,L.memo)(({suggestions:e,className:t=``,onViewDetails:n})=>{let{t:r}=I();return!e||e.length===0?null:(0,z.jsxs)(`div`,{className:t,children:[(0,z.jsx)(`h3`,{className:`text-base font-semibold text-slate-800 mb-4`,children:r(`weeklyReport.improvementSuggestions`)}),(0,z.jsx)(`div`,{className:`space-y-4`,children:e.map((e,t)=>(0,z.jsxs)(`div`,{className:`bg-white`,style:{borderRadius:V.cardBorderRadius,padding:`20px 25px`},children:[(0,z.jsx)(`div`,{className:`flex flex-wrap gap-2 mb-3`,children:e.tags.slice(0,2).map(e=>(0,z.jsx)(`span`,{className:`px-2.5 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-600`,children:e},e))}),(0,z.jsx)(`h4`,{className:`text-base font-bold text-slate-900 mb-2`,children:e.title}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500 leading-relaxed mb-4`,children:e.description}),(0,z.jsx)(`hr`,{className:`border-0 border-t border-slate-200 mb-4`}),(0,z.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,z.jsxs)(`span`,{className:`text-sm text-slate-500`,children:[e.duration.text,` Â· `,e.difficulty.text]}),(0,z.jsxs)(`button`,{type:`button`,className:`text-sm font-medium text-orange-600 hover:text-orange-700 focus:outline-none focus:underline`,onClick:()=>n==null?void 0:n(e,t),children:[r(`weeklyReport.viewDetails`),` >`]})]})]},e.suggestion_id))})]})});var Qd=`1.5s`,$d=`ease-out`,ef=`#F3F1EF`,tf=`
  @keyframes lightPropagate {
    0% {
      background-position: 0% 100%;
    }
    100% {
      background-position: 0% 0%;
    }
  }
`,nf={bottomBg:ef,fullPageGradient:`linear-gradient(180deg, ${Ht} 0%, #F1F0EE 100%)`},rf=({message:e})=>{let{t}=I();return(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{background:nf.fullPageGradient},children:(0,z.jsxs)(`div`,{className:`text-center p-6`,children:[(0,z.jsx)(`div`,{className:`w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center`,children:(0,z.jsx)(`svg`,{className:`w-8 h-8 text-red-500`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z`})})}),(0,z.jsx)(`h3`,{className:`text-lg font-medium text-slate-800 mb-2`,children:t(`weeklyReport.loadFailed`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:e})]})})},af=()=>{let{t:e}=I();return(0,z.jsx)(`div`,{className:`min-h-screen flex items-center justify-center`,style:{background:nf.fullPageGradient},children:(0,z.jsxs)(`div`,{className:`text-center p-6`,children:[(0,z.jsx)(`div`,{className:`w-16 h-16 mx-auto mb-4 rounded-full bg-slate-100 flex items-center justify-center`,children:(0,z.jsx)(`svg`,{className:`w-8 h-8 text-slate-400`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})})}),(0,z.jsx)(`h3`,{className:`text-lg font-medium text-slate-800 mb-2`,children:e(`weeklyReport.noReport`)}),(0,z.jsx)(`p`,{className:`text-sm text-slate-500`,children:e(`weeklyReport.noReportHint`)})]})})};const of=(0,L.memo)(()=>{var e;let{t}=I(),{data:n,isLoading:r,error:i}=yd((e=Er().rid)==null?void 0:e),{send:a}=Li({pageId:`weekly-report`,pageName:`WeeklyReport`,debug:!1});if(i)return(0,z.jsx)(rf,{message:i.message||t(`weeklyReport.requestFailed`)});if(!r&&(!n||!n.report_exists))return(0,z.jsx)(af,{});let{week_range:o,overall:s,vital_signs:c,sleep:l,emotion:u,medication:d,nutrition:f,exercise:p,correlation:m,improvement_suggestions:h}=hd(n==null?pd():n);return(0,z.jsxs)(`div`,{className:`min-h-screen`,style:{backgroundColor:nf.bottomBg},children:[(0,z.jsx)(`style`,{children:tf}),(0,z.jsxs)(`div`,{className:`relative`,style:{backgroundImage:`linear-gradient(180deg, 
            ${Ht} 0%, 
            ${ef} 50%, 
            ${ef} 100%
          )`,backgroundSize:`100% 200%`,paddingBottom:`16px`,animation:`lightPropagate ${Qd} ${$d} forwards`},children:[(0,z.jsx)(`header`,{className:`pt-12 pb-8 relative z-[1]`,children:(0,z.jsxs)(`div`,{className:`max-w-xl mx-auto px-4`,children:[(0,z.jsx)(`h1`,{className:`text-3xl font-bold text-slate-900`,children:t(`weeklyReport.pageTitle`)}),(0,z.jsx)(`p`,{className:`text-sm text-orange-600 mt-1 font-normal`,children:t(`weeklyReport.pageSubtitle`)})]})}),(0,z.jsx)(`div`,{className:`max-w-xl mx-auto px-4 -mt-4 relative z-[1]`,children:(0,z.jsx)(Sd,{overall:s,weekRange:o})})]}),(0,z.jsxs)(`main`,{className:`max-w-xl mx-auto px-4 pb-8 space-y-4`,children:[(0,z.jsx)(Ed,{vitalSigns:c}),(0,z.jsx)(kd,{sleep:l}),(0,z.jsx)(Md,{emotion:u}),(0,z.jsx)(Fd,{medication:d}),(0,z.jsx)(Bd,{nutrition:f}),(0,z.jsx)(qd,{exercise:p}),(0,z.jsx)(Xd,{correlations:m}),(0,z.jsx)(Zd,{suggestions:h,onViewDetails:e=>{a(`click-weekly-suggestion`,{suggestionId:e.suggestion_id})}})]})]})});var sf=(0,L.createContext)({isComplete:!1,setIsComplete:()=>{}}),cf={primaryGradientBg:`linear-gradient(to bottom, #FF8C42 0%, #FFF5E6 40%, #F5F5F5 100%)`,primaryOrange:`#FF7A00`,secondaryOrange:`#FF9E4F`,textDark:`#333333`,textGray:`#888888`,textWhite:`#FFFFFF`,dangerRed:`#FF4D4F`,successGreen:`#52C41A`,cardBg:`#FFFFFF`,peachLight:`rgba(255, 158, 79, 0.15)`},lf={initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5}},uf={initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1}},df={initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{type:`spring`,stiffness:100,delay:.4}},ff={initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{type:`spring`,damping:20,stiffness:300}},pf=[{time:`13:55:12`,title:`Visual AI Triggered`,titleColor:`text-red-500`,icon:`activity`,description:`Abnormal body posture detected`},{time:`13:53:37`,title:`Multimodal Fusion`,titleColor:`text-orange-400`,icon:`sparkles`,description:`Comprehensive assessment: Fall detected; patient unable to get up; no other persons present.`}],mf=[{id:1,sender:`remote`,role:`120 Agent`,bgColor:`bg-white`,textColor:`text-gray-800`,text:`Hello, this is the 120 Emergency Center. What is the emergency?`,animationDelay:1e3},{id:2,sender:`local`,role:`AI System`,bgColor:``,textColor:`text-white`,text:`Emergency. Elderly fall detected at: Unit 3, Room 103, Joy City North Residential Area... Sudden fall, patient's consciousness is blurred.`,animationDelay:2500},{id:3,sender:`remote`,role:`120 Agent`,bgColor:`bg-white`,textColor:`text-gray-800`,text:`Received. Is the patient conscious? Is he breathing?`,animationDelay:4500},{id:4,sender:`local`,role:`AI System`,bgColor:``,textColor:`text-white`,text:`Sudden fall; patient is semi-conscious; weak breathing; HR 110; 55-year-old male.`,animationDelay:6e3},{id:5,sender:`remote`,role:`120 Agent`,bgColor:`bg-white`,textColor:`text-gray-800`,text:`Does the patient have any pre-existing medical conditions?`,animationDelay:8e3},{id:6,sender:`local`,role:`AI System`,bgColor:``,textColor:`text-white`,text:`Medical History: Hypertension, Coronary Heart Disease. Long-term Aspirin use. On-site contact: ... (Family).`,animationDelay:9500},{id:7,sender:`remote`,role:`120 Agent`,bgColor:`bg-white`,textColor:`text-gray-800`,text:`Understood. An ambulance has been dispatched.`,animationDelay:11500}],hf=({className:e})=>(0,z.jsx)(`svg`,{className:e,viewBox:`0 0 24 24`,fill:`currentColor`,children:(0,z.jsx)(`path`,{d:`M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178A1.17 1.17 0 0 1 4.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813 0c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178 1.17 1.17 0 0 1-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826 0 1.622-.12 2.361-.336a.722.722 0 0 1 .598.082l1.584.926a.272.272 0 0 0 .14.045c.133 0 .241-.108.241-.243 0-.06-.023-.118-.039-.177l-.326-1.233a.49.49 0 0 1 .178-.553C23.024 18.48 24 16.82 24 14.98c0-3.21-2.931-5.837-6.656-6.088V8.89c-.135-.01-.27-.02-.406-.032z`})}),gf=()=>{let{t:e}=I(),{isComplete:t}=(0,L.useContext)(sf);return(0,z.jsxs)(u.header,{className:`mb-6`,initial:lf.initial,animate:lf.animate,transition:lf.transition,children:[(0,z.jsx)(`h1`,{className:`text-lg font-semibold text-white/90 tracking-wide`,children:e(`aiSecurity.appName`,`AI Security Core`)}),(0,z.jsx)(`h2`,{className:`text-xl font-bold text-white mt-0.5`,children:e(`aiSecurity.moduleName`,`Smart Emergency Rescue System`)}),(0,z.jsx)(`div`,{className:`flex items-center gap-2 mt-2`,children:t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ye,{className:`w-4 h-4 text-green-300`}),(0,z.jsx)(`span`,{className:`text-sm text-green-200 font-medium`,children:e(`aiSecurity.status.complete`,`Complete`)})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(F,{className:`w-4 h-4 text-orange-200 animate-spin`}),(0,z.jsx)(`span`,{className:`text-sm text-orange-100 font-medium`,children:e(`aiSecurity.status.processing`,`Processing`)})]})})]})},_f=()=>{let{t:e}=I(),t=[{label:e(`aiSecurity.actions.message`,`Message`),icon:ge,badge:`9+`,isActive:!0},{label:e(`aiSecurity.actions.wechat`,`Wechat`),icon:hf,isActive:!1},{label:e(`aiSecurity.actions.app`,`APP`),icon:le,isActive:!1},{label:e(`aiSecurity.actions.emergency`,`120`),icon:ue,isActive:!1}];return(0,z.jsx)(u.div,{className:`grid grid-cols-4 gap-3 mb-6`,initial:`initial`,animate:`animate`,variants:{animate:{transition:{staggerChildren:.1,delayChildren:.2}}},children:t.map((e,t)=>{let n=e.icon;return(0,z.jsxs)(u.div,{variants:uf,transition:{type:`spring`,stiffness:300,damping:20},className:`flex flex-col items-center`,children:[(0,z.jsxs)(`div`,{className:`
                relative w-14 h-14 rounded-2xl flex items-center justify-center
                shadow-sm transition-all duration-200
                ${e.isActive?`bg-white shadow-md`:`bg-white/20 backdrop-blur-sm`}
              `,style:{borderRadius:`18px`},children:[(0,z.jsx)(n,{className:`w-6 h-6 ${e.isActive?`text-orange-500`:`text-white`}`}),e.badge&&(0,z.jsx)(`span`,{className:`absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center`,children:e.badge})]}),(0,z.jsx)(`span`,{className:`mt-2 text-xs font-medium ${e.isActive?`text-white`:`text-white/80`}`,children:e.label})]},e.label)})})},vf=()=>{let{t:e}=I();return(0,z.jsxs)(u.div,{className:`bg-white rounded-2xl shadow-sm p-4 mb-4`,initial:df.initial,animate:df.animate,transition:df.transition,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,z.jsx)(`span`,{className:`text-[10px] text-gray-400 uppercase tracking-widest font-medium`,children:e(`aiSecurity.systemLog`,`SYSTEM LOG`)}),(0,z.jsx)(`span`,{className:`text-[10px] text-gray-400 font-mono tracking-wide`,children:`13:55:12`})]}),(0,z.jsx)(`div`,{className:`space-y-3`,children:pf.map((e,t)=>(0,z.jsxs)(`div`,{className:`flex items-start gap-2.5`,children:[(0,z.jsx)(`div`,{className:`flex-shrink-0 mt-0.5`,children:e.icon===`activity`?(0,z.jsx)(Oe,{className:`w-4 h-4 text-red-500`}):(0,z.jsx)(dt,{className:`w-4 h-4 text-orange-400`})}),(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`span`,{className:`text-[10px] text-gray-400 font-mono`,children:e.time}),(0,z.jsx)(`p`,{className:`text-[13px] font-semibold ${e.titleColor} mt-0.5`,children:e.title}),(0,z.jsx)(`p`,{className:`text-[13px] text-gray-500 mt-0.5 leading-relaxed`,children:e.description})]})]},t))})]})},yf=({message:e})=>{let t=e.sender===`local`,n=t?{background:`linear-gradient(to right, #FF9E4F, #FF7A00)`,boxShadow:`0 2px 8px rgba(255, 122, 0, 0.25)`}:{};return(0,z.jsx)(u.div,{className:`flex ${t?`justify-end`:`justify-start`} mb-3`,variants:ff,initial:`initial`,animate:`animate`,children:(0,z.jsx)(`div`,{className:`
          w-fit max-w-[85%] px-4 py-3 rounded-2xl
          ${e.bgColor} ${e.textColor}
          ${t?``:`shadow-sm`}
        `,style:{borderBottomRightRadius:t?`6px`:`16px`,borderBottomLeftRadius:t?`16px`:`6px`,...n},children:(0,z.jsx)(`p`,{className:`text-sm leading-relaxed`,children:e.text})})})},bf=()=>{let{t:e}=I(),[t,n]=(0,L.useState)(0),[r,i]=(0,L.useState)(!1),a=(0,L.useRef)(null),{setIsComplete:o}=(0,L.useContext)(sf);return(0,L.useEffect)(()=>{let e=[];mf.forEach((t,r)=>{let i=setTimeout(()=>{n(r+1)},t.animationDelay);e.push(i)});let t=setTimeout(()=>{i(!0),o(!0)},mf[mf.length-1].animationDelay+1500);return e.push(t),()=>{e.forEach(e=>clearTimeout(e))}},[o]),(0,L.useEffect)(()=>{a.current&&a.current.scrollIntoView({behavior:`smooth`})},[t,r]),(0,z.jsxs)(u.div,{className:`flex flex-col rounded-3xl overflow-hidden shadow-md`,style:{backgroundColor:`rgba(249, 250, 251, 0.8)`,height:`95svh`},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[(0,z.jsxs)(`div`,{className:`px-4 py-3 flex items-center justify-between rounded-t-3xl flex-shrink-0`,style:{background:`linear-gradient(to right, #FF9E4F, #FF7A00)`},children:[(0,z.jsx)(`span`,{className:`text-white font-semibold text-sm tracking-wide`,children:e(`aiSecurity.chat.title`,`120 Emergency Call Log`)}),(0,z.jsx)(`span`,{className:`px-2.5 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs text-white font-medium`,children:e(`aiSecurity.chat.recording`,`Recording...`)})]}),(0,z.jsxs)(`div`,{className:`flex-1 p-4 overflow-y-auto`,children:[(0,z.jsx)(`div`,{className:`text-center mb-4`,children:(0,z.jsx)(`span`,{className:`text-xs text-gray-400`,children:`Jan 9, 14:49 Connected`})}),(0,z.jsx)(s,{children:mf.slice(0,t).map(e=>(0,z.jsx)(yf,{message:e},e.id))}),(0,z.jsx)(s,{children:r&&(0,z.jsx)(u.div,{className:`flex justify-end mb-3`,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{type:`spring`,damping:20,stiffness:300},children:(0,z.jsx)(`div`,{className:`w-fit max-w-[92%] px-4 py-3 rounded-2xl text-white`,style:{background:`linear-gradient(to right, #FF9E4F, #FF7A00)`,boxShadow:`0 2px 8px rgba(255, 122, 0, 0.25)`,borderBottomRightRadius:`6px`,borderBottomLeftRadius:`16px`},children:(0,z.jsx)(`p`,{className:`text-sm leading-relaxed`,children:e(`aiSecurity.chat.thankYou`,`Thank you.`)})})})}),(0,z.jsx)(`div`,{ref:a})]})]})};const xf=(0,L.memo)(()=>{let[e,t]=(0,L.useState)(!1);return(0,z.jsx)(sf.Provider,{value:{isComplete:e,setIsComplete:t},children:(0,z.jsx)(`div`,{className:`min-h-screen`,style:{background:cf.primaryGradientBg},children:(0,z.jsxs)(`div`,{className:`w-full max-w-md mx-auto px-4 pt-6 pb-6`,children:[(0,z.jsx)(gf,{}),(0,z.jsx)(_f,{}),(0,z.jsx)(vf,{}),(0,z.jsx)(bf,{})]})})})});var Sf,Cf=[{username:`fulai001`,password:`123456`},{username:`ceshi003`,password:`ceshi003`}],wf=(Sf=Cf.find(e=>e.username===_n.device.username))==null?Cf[0]:Sf;function Tf({isOpen:e,onClose:t,onLogin:n,isLoading:r=!1,error:i=null}){let{t:a}=I(),[o,s]=(0,L.useState)(wf.username),[c,l]=(0,L.useState)(wf.password),[u,d]=(0,L.useState)(wf.username);(0,L.useEffect)(()=>{e&&(s(wf.username),l(wf.password),d(wf.username))},[e]);let f=async e=>{e.preventDefault(),await n(o,c)},p=e=>{e.target===e.currentTarget&&!r&&t()},m=e=>{if(d(e),e===`custom`)return;let t=Cf.find(t=>t.username===e);t&&(s(t.username),l(t.password))},h=e=>{s(e),d(`custom`)},g=e=>{l(e),d(`custom`)};return e?(0,z.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm`,onClick:p,children:(0,z.jsxs)(`div`,{className:R(`relative w-full max-w-sm mx-4 bg-white rounded-2xl shadow-2xl`,`transform transition-all duration-200`,e?`scale-100 opacity-100`:`scale-95 opacity-0`),onClick:e=>e.stopPropagation(),children:[(0,z.jsxs)(`div`,{className:`px-6 pt-6 pb-4 border-b border-slate-100`,children:[(0,z.jsx)(`h2`,{className:`text-xl font-semibold text-slate-800`,children:a(`auth.login`)}),(0,z.jsx)(`p`,{className:`mt-1 text-sm text-slate-500`,children:a(`auth.loginDescription`)})]}),(0,z.jsxs)(`form`,{onSubmit:f,className:`px-6 py-4 space-y-4`,children:[i&&(0,z.jsx)(`div`,{className:`p-3 text-sm text-red-600 bg-red-50 rounded-lg border border-red-100`,children:i}),(0,z.jsxs)(`div`,{className:`space-y-2`,children:[(0,z.jsx)(`label`,{htmlFor:`preset-account`,className:`block text-sm font-medium text-slate-700`,children:a(`auth.presetAccount`)}),(0,z.jsxs)(`select`,{id:`preset-account`,value:u,onChange:e=>m(e.target.value),disabled:r,className:R(`w-full px-3 py-2 text-sm border rounded-lg bg-white`,`focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`,`disabled:bg-slate-50 disabled:text-slate-500`,`transition-colors`),children:[(0,z.jsx)(`option`,{value:`custom`,children:a(`auth.customAccount`)}),Cf.map(e=>(0,z.jsx)(`option`,{value:e.username,children:e.username},e.username))]})]}),(0,z.jsxs)(`div`,{className:`space-y-2`,children:[(0,z.jsx)(`label`,{htmlFor:`username`,className:`block text-sm font-medium text-slate-700`,children:a(`auth.username`)}),(0,z.jsx)(`input`,{id:`username`,type:`text`,value:o,onChange:e=>h(e.target.value),disabled:r,className:R(`w-full px-3 py-2 text-sm border rounded-lg`,`focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`,`disabled:bg-slate-50 disabled:text-slate-500`,`transition-colors`),placeholder:a(`auth.usernamePlaceholder`),required:!0})]}),(0,z.jsxs)(`div`,{className:`space-y-2`,children:[(0,z.jsx)(`label`,{htmlFor:`password`,className:`block text-sm font-medium text-slate-700`,children:a(`auth.password`)}),(0,z.jsx)(`input`,{id:`password`,type:`password`,value:c,onChange:e=>g(e.target.value),disabled:r,className:R(`w-full px-3 py-2 text-sm border rounded-lg`,`focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`,`disabled:bg-slate-50 disabled:text-slate-500`,`transition-colors`),placeholder:a(`auth.passwordPlaceholder`),required:!0})]}),(0,z.jsxs)(`div`,{className:`p-3 text-xs text-slate-500 bg-slate-50 rounded-lg space-y-1`,children:[(0,z.jsx)(`p`,{className:`font-medium text-slate-600`,children:a(`auth.testCredentials`)}),Cf.map(e=>(0,z.jsxs)(`p`,{children:[(0,z.jsx)(`code`,{className:`px-1 py-0.5 bg-slate-200 rounded`,children:e.username}),` / `,(0,z.jsx)(`code`,{className:`px-1 py-0.5 bg-slate-200 rounded`,children:e.password})]},e.username))]})]}),(0,z.jsxs)(`div`,{className:`px-6 py-4 bg-slate-50 rounded-b-2xl flex gap-3 justify-end`,children:[(0,z.jsx)(`button`,{type:`button`,onClick:t,disabled:r,className:R(`px-4 py-2 text-sm font-medium text-slate-600 rounded-lg`,`hover:bg-slate-200 transition-colors`,`disabled:opacity-50 disabled:cursor-not-allowed`),children:a(`auth.cancel`)}),(0,z.jsxs)(`button`,{type:`submit`,onClick:f,disabled:r||!o||!c,className:R(`px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg`,`hover:bg-blue-600 transition-colors`,`disabled:opacity-50 disabled:cursor-not-allowed`,`flex items-center gap-2`),children:[r&&(0,z.jsxs)(`svg`,{className:`w-4 h-4 animate-spin`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,z.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,z.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),a(r?`auth.loggingIn`:`auth.login`)]})]}),(0,z.jsx)(`button`,{onClick:t,disabled:r,className:R(`absolute top-4 right-4 p-1 text-slate-400 rounded-full`,`hover:text-slate-600 hover:bg-slate-100 transition-colors`,`disabled:opacity-50 disabled:cursor-not-allowed`),"aria-label":`Close`,children:(0,z.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M6 18L18 6M6 6l12 12`})})})]})}):null}const Ef=rt(function(){let{t:e}=I(),{isTestEnv:t}=Tn(),[n,r]=(0,L.useState)(!1),[i,a]=(0,L.useState)(null),[o,s]=(0,L.useState)(!1),[c,l]=(0,L.useState)(!1),[u,d]=(0,L.useState)(!1),[f,p]=(0,L.useState)(null),m=(0,L.useRef)(null),h=(0,L.useCallback)(()=>{let e=On.isAuthenticated();if(r(e),e){var t;let e=On.getAuthData();a((e==null?void 0:e.username)||(e==null||(t=e.user)==null?void 0:t.deviceId)||null)}else a(null)},[]);return(0,L.useEffect)(()=>{h();let e=setInterval(()=>{!On.isAuthenticated()&&On.getAuthData()&&(console.log(`Token expired, please login again`),h())},xn);return()=>clearInterval(e)},[h]),(0,L.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&s(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]),t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(`div`,{className:`relative`,ref:m,children:[n?(0,z.jsxs)(`button`,{onClick:()=>s(!o),className:R(`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors`,`text-slate-600 hover:text-slate-900 hover:bg-slate-100`,o&&`bg-slate-100`),children:[(0,z.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z`})}),(0,z.jsx)(`span`,{className:`max-w-[100px] truncate`,children:i}),(0,z.jsx)(`svg`,{className:R(`w-3 h-3 transition-transform`,o&&`rotate-180`),fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})]}):(0,z.jsxs)(`button`,{onClick:()=>l(!0),className:R(`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors`,`text-blue-600 hover:text-blue-700 hover:bg-blue-50`),children:[(0,z.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1`})}),(0,z.jsx)(`span`,{children:e(`auth.login`)})]}),o&&n&&(0,z.jsx)(`div`,{className:R(`absolute right-0 top-full mt-1 w-40 py-1`,`bg-white rounded-lg shadow-lg border border-slate-200`,`z-50`),children:(0,z.jsxs)(`button`,{onClick:()=>{On.logout(),s(!1),h()},className:R(`w-full flex items-center gap-2 px-4 py-2 text-sm text-left`,`text-red-600 hover:bg-red-50 transition-colors`),children:[(0,z.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,z.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1`})}),(0,z.jsx)(`span`,{children:e(`auth.logout`)})]})})]}),(0,z.jsx)(Tf,{isOpen:c,onClose:()=>{l(!1),p(null)},onLogin:async(t,n)=>{d(!0),p(null);try{await On.login({username:t,password:n}),h(),l(!1)}catch(t){console.error(`Login failed:`,t),p(t instanceof Error?t.message:e(`auth.loginFailed`))}finally{d(!1)}},isLoading:u,error:f})]}):null});function Df(e){let t=e==null?{}:e,n=typeof t.interval==`number`&&t.interval>0?t.interval:xn,r=t.autoReLogin!==!1;return{...t,interval:n,autoReLogin:r}}function Of(e={}){let{interval:t,onTokenExpired:n,autoReLogin:r}=Df(e),{isAuthenticated:i}=Cn(),{isTestEnv:a}=Tn(),[o,s]=(0,L.useState)({phase:`idle`,isRefreshing:!1,lastChecked:null}),c=(0,L.useRef)(!1),l=(0,L.useRef)(i);(0,L.useEffect)(()=>{let e=l.current;l.current=i,e&&!i&&!c.current&&(console.log(`[TokenValidation] Token expired, authentication lost`),s(e=>e.phase===`expired_notified`?e:{...e,phase:`expired_notified`}),n==null||n())},[i,n]);let u=(0,L.useCallback)(async()=>{if(a&&!c.current&&!i&&!Dn()&&!(!On.getAuthData()||!On.canRefresh())){if(s(e=>e.phase===`refreshing`?e:{...e,phase:`refreshing`,isRefreshing:!0}),c.current=!0,!r){c.current=!1,s(e=>({...e,phase:`idle`,isRefreshing:!1,lastChecked:Date.now()}));return}try{console.log(`[TokenValidation] Attempting auto re-login...`),await On.login(),console.log(`[TokenValidation] Re-login successful`),s({phase:`idle`,isRefreshing:!1,lastChecked:Date.now()})}catch(e){console.error(`[TokenValidation] Re-login failed:`,e),On.logout(),s({phase:`idle`,isRefreshing:!1,lastChecked:Date.now()})}finally{c.current=!1}}},[r,i,a]);return(0,L.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{s(e=>({...e,lastChecked:Date.now()})),i||u()},t);return()=>clearInterval(e)},[t,i,u,a]),{isExpired:!i,isRefreshing:o.isRefreshing,lastChecked:o.lastChecked,checkNow:u}}var kf={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.15}}},Af={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:`spring`,stiffness:100,damping:15}}},jf={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{type:`spring`,stiffness:100,damping:15}}};function Mf(){let{t:e,i18n:t}=I();Of();let n=()=>{t.changeLanguage(t.language.startsWith(`en`)?`zh`:`en`)},r=[{category:e(`home.detailPages`),items:[{path:`/details/healthy`,label:e(`nav.healthyDashboard`),icon:ie,color:Wt.primary,alphaColor:Wt.alpha},{path:`/details/blood-pressure`,label:e(`nav.bloodPressure`),icon:xe,color:B.bp,alphaColor:Ut.bp},{path:`/details/spo2`,label:e(`nav.spo2`),icon:M,color:B.spo2,alphaColor:Ut.spo2},{path:`/details/heart-rate`,label:e(`nav.heartRate`),icon:Oe,color:B.heartRate,alphaColor:Ut.heartRate},{path:`/details/glucose`,label:e(`nav.glucose`),icon:Ue,color:B.glucose,alphaColor:Ut.glucose},{path:`/details/sleep`,label:e(`vitals.sleep`),icon:pe,color:B.sleep,alphaColor:Ut.sleep},{path:`/details/emotion`,label:e(`vitals.emotion`),icon:je,color:W.primary,alphaColor:W.alpha},{path:`/details/nutrition`,label:e(`vitals.nutrition`),icon:at,color:B.nutrition,alphaColor:Ut.nutrition}]},{category:e(`home.dailyReportPages`),items:[{path:`/daily/healthy`,label:e(`nav.healthyDailyReport`),icon:ie,color:Wt.primary,alphaColor:Wt.alpha},{path:`/daily/emotion`,label:e(`nav.emotionDailyReport`),icon:je,color:W.primary,alphaColor:W.alpha},{path:`/daily/sleep`,label:e(`nav.sleepDailyReport`),icon:pe,color:B.sleep,alphaColor:Ut.sleep}]},{category:e(`home.weeklyReportCategory`),items:[{path:`/weekly/report`,label:e(`weeklyReport.title`),icon:Fe,color:`#F97316`,alphaColor:`rgba(249, 115, 22, 0.125)`}]},{category:e(`home.aiSecurityCategory`,`AI å®‰å…¨`),items:[{path:`/ai-security`,label:e(`aiSecurity.title`,`AI æ™ºèƒ½æ€¥æ•‘ç³»ç»Ÿ`),icon:lt,color:`#FF7A00`,alphaColor:`rgba(255, 122, 0, 0.125)`}]},{category:e(`home.widgetPages`),items:[{path:`/widget/type-1`,label:e(`home.widgetType1`),icon:pe,color:B.sleep,alphaColor:Ut.sleep,type:1},{path:`/widget/type-2`,label:e(`home.widgetType2`),icon:de,color:B.sleep,alphaColor:Ut.sleep,type:2},{path:`/widget/type-3`,label:e(`home.widgetType3`),icon:at,color:B.nutrition,alphaColor:Ut.nutrition,type:3},{path:`/widget/type-4`,label:e(`home.widgetType4`),icon:N,color:W.primary,alphaColor:W.alpha,type:4},{path:`/widget/type-5`,label:e(`home.widgetType5`),icon:fe,color:Wt.primary,alphaColor:Wt.alpha,type:5},{path:`/widget/type-6`,label:e(`home.widgetType6`),icon:Te,color:B.nutrition,alphaColor:Ut.nutrition,type:6},{path:`/widget/type-7`,label:e(`home.widgetType7`),icon:ot,color:Wt.primary,alphaColor:Wt.alpha,type:7},{path:`/widget/type-8`,label:e(`home.widgetType8`),icon:Qe,color:B.bp,alphaColor:Ut.bp,type:8},{path:`/widget/type-9`,label:e(`home.widgetType9`),icon:Ne,color:`#F97316`,alphaColor:`rgba(249, 115, 22, 0.125)`,type:9},{path:`/widget/type-10`,label:e(`home.widgetType10`),icon:ce,color:B.heartRate,alphaColor:Ut.heartRate,type:10},{path:`/widget/type-11`,label:e(`home.widgetType11`),icon:Ne,color:`#FF7F27`,alphaColor:`rgba(255, 127, 39, 0.125)`,type:11},{path:`/widget/type-12`,label:e(`home.widgetType12`),icon:dt,color:`#FF7F27`,alphaColor:`rgba(255, 127, 39, 0.125)`,type:12}]}],i=(e,t)=>{let n=e.icon,r=!!e.isExternal,i=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(`div`,{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-transform duration-200 group-hover:scale-105`,style:{backgroundColor:e.alphaColor},children:(0,z.jsx)(n,{className:`w-6 h-6`,style:{color:e.color}})}),(0,z.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,z.jsx)(`p`,{className:`font-medium text-slate-800 group-hover:text-slate-900 truncate`,children:e.label}),(0,z.jsx)(`p`,{className:`text-sm text-slate-400 font-mono truncate`,children:e.path})]}),(0,z.jsx)(Ze,{className:`w-5 h-5 text-slate-300 group-hover:text-slate-500 group-hover:translate-x-1 transition-all duration-200 flex-shrink-0`})]}),a=`
      flex items-center gap-4 p-4 bg-white rounded-2xl 
      shadow-sm hover:shadow-xl
      transition-shadow duration-300 ease-out
      group cursor-pointer
    `;return r?(0,z.jsx)(u.a,{href:e.path,className:a,variants:Af,whileHover:{x:4},transition:{type:`spring`,stiffness:400,damping:25},children:i},e.path):(0,z.jsx)(u.div,{variants:Af,custom:t,whileHover:{x:4},transition:{type:`spring`,stiffness:400,damping:25},children:(0,z.jsx)(ct,{to:e.path,className:a,children:i})},e.path)};return(0,z.jsx)(`div`,{className:`min-h-screen bg-[#F1EFEE] p-6`,children:(0,z.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,z.jsxs)(u.div,{className:`flex items-center justify-between mb-8`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,type:`spring`},children:[(0,z.jsxs)(`div`,{children:[(0,z.jsx)(u.h1,{className:`text-3xl font-bold text-slate-800`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,duration:.4},children:e(`home.title`)}),(0,z.jsx)(u.p,{className:`text-slate-500 mt-1`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.4},children:e(`home.subtitle`)})]}),(0,z.jsxs)(u.div,{className:`flex items-center gap-2`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3,type:`spring`},children:[(0,z.jsx)(Ef,{}),(0,z.jsx)(u.button,{onClick:n,className:`px-4 py-2 bg-white rounded-xl shadow-sm text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors`,whileHover:{scale:1.05},whileTap:{scale:.95},children:t.language.startsWith(`en`)?`ä¸­æ–‡`:`English`})]})]}),r.map((e,t)=>(0,z.jsxs)(u.div,{className:`mb-8`,initial:`hidden`,animate:`visible`,variants:kf,custom:t,children:[(0,z.jsx)(u.h2,{className:`text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4`,variants:jf,children:e.category}),(0,z.jsx)(u.div,{className:`grid gap-3`,variants:kf,children:e.items.map((e,t)=>i(e,t))})]},e.category)),(0,z.jsxs)(u.div,{className:`p-4 bg-white/50 rounded-2xl border border-slate-200 backdrop-blur-sm`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[(0,z.jsx)(`h3`,{className:`text-sm font-semibold text-slate-600 mb-2`,children:e(`home.urlParameters`)}),(0,z.jsxs)(`div`,{className:`text-sm text-slate-500 space-y-1 font-mono`,children:[(0,z.jsx)(`p`,{children:`?lang=en | ?lang=zh`}),(0,z.jsx)(`p`,{children:`?theme=light | ?theme=dark`})]})]})]})})}function Nf(e,t){let n=!!e.token;n&&(console.log(`ðŸ” [initPage] Token found in URL, setting auth state (Android)`),On.setTokenFromUrl(e.token),q.setAuthFromUrl(e.token));let r=e.theme;(r===`light`||r===`dark`)&&(console.log(`ðŸŽ¨ [initPage] Theme found in URL: ${r}`),q.setTheme(r));let i=e.lang;(i===`en`||i===`zh`)&&(console.log(`ðŸŒ [initPage] Language found in URL: ${i}`),q.setLanguage(i),t!=null&&t.i18n&&t.i18n.changeLanguage(i)),(t==null?void 0:t.autoLogin)!==!1&&!n&&On.ensureAuthenticated().catch(e=>{console.error(`[initPage] Auto login failed:`,e)})}function Pf(){let e=Er(),{i18n:t}=I(),n=(0,L.useRef)(``);(0,L.useEffect)(()=>{let r=JSON.stringify(e);r!==n.current&&(n.current=r,Nf(e,{i18n:t,autoLogin:!1}))},[e,t])}c.use(d).use(ft).init({resources:{en:{translation:{nav:{bloodPressure:`Blood Pressure`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`,healthyDashboard:`Healthy Dashboard`,healthyDailyReport:`Healthy Daily Report`,emotionDailyReport:`Emotion Daily Report`,sleepDailyReport:`Sleep Daily Report`,bpTrendWidget:`BP Trend Widget`,spo2TrendWidget:`SpO2 Trend Widget`,hrTrendWidget:`HR Trend Widget`,glucoseTrendWidget:`Glucose Trend Widget`},home:{title:`Health Vitals`,subtitle:`Visualization Library`,detailPages:`Details Pages`,widgetPages:`Widget Pages (for iframe embedding)`,dailyReportPages:`Daily Report Pages`,urlParameters:`URL Parameters`,weeklyReportCategory:`Weekly Report`,aiSecurityCategory:`AI Security`,widgetType1:`Sleep Score`,widgetType2:`Bar Chart Comparison`,widgetType3:`Nutrition Intake`,widgetType4:`Music Recommendation`,widgetType5:`Health Vitals Overview`,widgetType6:`Sodium & BP Correlation`,widgetType7:`Weekly Health Score`,widgetType8:`SBP & Sleep Trend`,widgetType9:`Improvement Plan`,widgetType10:`PPG Signal`,widgetType11:`Health Intervention`,widgetType12:`HRE Recommendation`},common:{loading:`Loading...`,error:`An error occurred`,retry:`Retry`,noData:`No data available`,insufficientData:`Insufficient data this week!`,noDataThisWeek:`No data this week`,noDiaryThisWeek:`No diary this week`,add:`Add`,average:`Average`,max:`Max`,min:`Min`,value:`Value`,times:`times`,time:`time`,good:`Good`,inAverage:`in average`,daily:`Daily`,weekly:`Weekly`,illustrate:`Illustrate`,close:`Close`,disclaimer:`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`},auth:{login:`Login`,logout:`Logout`,username:`Username`,password:`Password`,usernamePlaceholder:`Enter username`,passwordPlaceholder:`Enter password`,loginDescription:`Please enter your account credentials`,testCredentials:`Test credentials:`,presetAccount:`Preset account`,presetAccountPlaceholder:`Select account to auto-fill`,customAccount:`Custom`,cancel:`Cancel`,loggingIn:`Logging in...`,loginFailed:`Login failed, please try again`,tokenExpired:`Session expired, please login again`},vitals:{bloodPressure:`Blood Pressure`,systolic:`Systolic`,diastolic:`Diastolic`,sbp:`SBP`,dbp:`DBP`,pulse:`Pulse`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`,fasting:`Fasting`,postMeal:`Post-meal`,bloodSugar:`Blood Sugar`,bloodOxygen:`Blood Oxygen`,sleep:`Sleep`,emotion:`Emotion`,nutrition:`Nutrition`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`bpm`,minute:`minute`,hour:`hours`},status:{normal:`Normal`,elevated:`Elevated`,high:`High`,low:`Low`,slow:`Slow`,good:`Good`,warning:`Warning`,danger:`Danger`,normalHighValue:`Normal high value`,tooLow:`Too low`,tooHigh:`Too High`,exceed:`Exceed`,fair:`Fair`},trend:{up:`Increased`,down:`Decreased`,stable:`Stable`},time:{week:`Week`,month:`Month`,year:`Year`,today:`Today`,yesterday:`Yesterday`,lastWeek:`Last week`},weekdays:{mon:`Mon`,tue:`Tue`,wed:`Wed`,thu:`Thu`,fri:`Fri`,sat:`Sat`,sun:`Sun`},datePicker:{previousWeek:`Previous week`,nextWeek:`Next week`,previousMonth:`Previous month`,nextMonth:`Next month`,selectWeek:`Click a row to select week`},page:{bloodPressure:{title:`Blood Pressure Details`,trendyReport:`Trendy Report`,weeksAverageSBP:`Week's average SBP`,weeksAverageDBP:`Week's average DBP`,bpStatistics:`BP Statistics`,normalResults:`normal blood pressure results`,compareWithLastWeek:`Compare With Last Week`,averageSBP:`Average SBP`,averageDBP:`Average diastolic blood pressure`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`,bpClassification:`Blood Pressure Classification (unit: mmHg)

Low blood pressure: systolic pressure <90 / diastolic pressure <60

Normal blood pressure: systolic pressure <120 / diastolic pressure <80

High normal values (caution advised): systolic blood pressure 120-129 / diastolic blood pressure 80-89

Grade 1 hypertension: systolic blood pressure â‰¥130 mmHg`},spo2:{title:`Blood Oxygen Details`,trendTitle:`SpO2 Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average SpO2`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`SpO2 Statistics`,totalTests:`times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,rangeToday:`Today's Range`,defaultAnalysis1:`The average blood oxygen saturation this week was {{avg}}%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level ({{max}}%) from {{maxDay}}.`,defaultAnalysis3:`On {{minDay}}, a blood oxygen level of {{min}}% was recorded, slightly below the lower limit of the normal range.`,defaultOverview:`Your blood oxygen is generally within the ideal range. Although it has fluctuated slightly compared to last week, it remains within the normal fluctuation range.`,defaultHighlights:`The trend chart shows that your blood oxygen fluctuated significantly during the week. Meanwhile, the statistics show that your blood oxygen measurements varied across different levels. We will continue to monitor your condition and help you identify any possible causes for the low blood oxygen.`},heartRate:{title:`Heart Rate Details`,trendTitle:`Heart Rate Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average heart rate`,range:`Range`,mean:`Mean`,statistics:`Heart Rate Distribution`,totalTests:`times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,restingHR:`Resting HR`,maxHR:`Max HR`,defaultAnalysis1:`The average heart rate this week was {{avg}} bpm.`,defaultAnalysis2:`Your heart rate reached a peak of {{max}} bpm on {{maxDay}}.`,defaultAnalysis3:`The lowest heart rate of {{min}} bpm was recorded on {{minDay}}.`,defaultOverview:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`,defaultHighlights:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`},glucose:{title:`Blood Glucose Details`,trendTitle:`Blood Glucose Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average glucose`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`Glucose Statistics`,normalResults:`normal glucose results`,compareWithLastWeek:`Compare With Last Week`,averageGlucose:`Average glucose`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,fastingLevel:`Fasting Level`,postMealLevel:`Post-meal Level`,fastingNormal:`Fasting normal`,postMealNormal:`Post-meal normal`,defaultInsight:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`,defaultOverview:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`,defaultHighlights:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`},sleep:{title:`Sleep Details`,trendyReport:`Trendy Report`,weeksAverageSleep:`Week's average sleep`,sleepStructure:`Sleep Structure`,deepSleep:`Deep Sleep`,lightSleep:`Light Sleep`,remSleep:`REM Sleep`,awake:`Awake`,standard:`Standard`,dataAnalysis:`Data Analysis`,compareWithLastWeek:`Compare With Last Week`,avgSleepTime:`Avg. sleep time`,avgWakeTime:`Avg. wake time`,sameAsLastWeek:`Same as last week`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`,defaultOverview:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`,defaultHighlights:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`,defaultAnalysis1:`The average blood oxygen saturation this week was 97%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`,defaultAnalysis3:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`,highest:`Highest`,lowest:`Lowest`},emotion:{title:`Emotion Details`,trendyReport:`Trendy Report`,weeksAverage:`Week's average emotion`,points:`pts`,score:`Emotion score`,statistics:`Emotion Statistics`,distribution:`Emotion Distribution`,dataAnalysis:`Data Analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,diary:`Emotion Diary`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,defaultOverview:`Your emotional state has been generally positive this week. Keep maintaining a good mindset and healthy lifestyle habits!`,defaultHighlights:`The trend chart shows some fluctuations in your emotions during the week. This is normal and can be influenced by work stress, sleep quality, and social activities.`,defaultAnalysis1:`Your emotions are predominantly positive, with an overall good state`,defaultAnalysis2:`Emotional fluctuations are within normal range, showing good emotional regulation ability`,defaultAnalysis3:`It is recommended to continue maintaining a positive attitude and practice relaxation techniques`,demoMode:`Demo Mode`,toggleDemoMode:`Toggle demo mode`,demoModeOn:`Using dummy data`,demoModeOff:`Using backend data`},nutrition:{weeklyOverview:`Weekly Overview`,defaultOverview:`Your nutritional intake is generally balanced. Total calorie intake fluctuates slightly but remains within the target range.`,defaultHighlights:`The analysis shows that your protein intake has been consistent, but there was a slight excess in fat consumption over the weekend. We recommend increasing vegetable intake to balance the micronutrients.`,anomalyAlert:`Anomaly alert`}},healthy:{comprehensiveHealth:`Comprehensive health data`,aiGenerated:`AI Generated`,bpDescription:`Your average systolic blood pressure over the past {{period}} was `,bpDescriptionCont:`, and your average diastolic blood pressure was `,hrDescription:`Your average heart rate over the past {{period}} was `,hrDescriptionCont:`, with normal resting heart rate patterns.`,heartRateLabel:`Heart rate`,bsDescription:`Your average blood sugar over the past {{period}} was `,bsDescriptionCont:`, within the normal range.`,spo2Description:`Your average blood oxygen over the past {{period}} was `,spo2DescriptionCont:`, maintaining healthy oxygen levels.`,sleepDescription:`Your average sleep duration over the past {{period}} was `,sleepDescriptionCont:`, with good sleep quality.`,sleepTime:`Sleep time`,emotionDescription:`Your emotional state over the past {{period}} was `,emotionDescriptionCont:`, showing positive trends.`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,nutritionDescription:`Your nutrition intake over the past {{period}} was `,nutritionDescriptionCont:`, within recommended levels.`,demoMode:`Demo Mode`,toggleDemoMode:`Toggle demo mode`,demoModeOn:`Using dummy data`,demoModeOff:`Using backend data`},daily:{todayScore:`Today's score`,todayEmotionScore:`Today's emotion score`,aiAnalysis:`AI Analysis`,aiHealthInsights:`AI health related insights`,personalizedSuggestions:`Personalized suggestions`,defaultSuggestions:{soakingFeet:{title:`Soaking feet before bed`,description:`Relieve current anxiety and lower heart rate.`},napSuggestion:{title:`Today's nap suggestion`,description:`Relieve current anxiety and lower heart rate.`}},emotionProportion:`Emotional proportion analysis`,emotionDistribution:`Emotion distribution`,asMain:`as main`,sleepStructure:`Sleep structure diagram`,sleepDistribution:`Sleep distribution`,sleepQuality:`Sleep quality indicators`,totalDuration:`Total sleep duration`,deepSleep:`Deep sleep`,totalHours:`Total hours`,coreIndicators:`Core indicator Analysis`,reference:`Reference`,latest:`Latest`,weekAvg:`7d Avg`,newestValue:`Latest`,average:`Average`,standard:`Reference`,highest:`Highest`,lowest:`Lowest`,range:`Range`,mean:`Mean`,loading:`Loading...`,error:`Failed to load data`},sleep:{deep:`Deep sleep`,light:`Light sleep`,rem:`REM`,awake:`Awake`,bedTime:`Bed rest time`,sleepTime:`Time to fall asleep`,wakeTime:`Post-awake time`,getUpTime:`Wake-up time`,sleepLatency:`Falling asleep takes time`,sleepEfficiency:`Sleep efficiency`},emotion:{happy:`Happy`,calm:`Calm`,surprised:`Surprised`,sad:`Sad`,angry:`Angry`,fearful:`Fear`,disgusted:`Disgust`,neutral:`Neutral`},nutrition:{dataAnalysis:`Data Analysis`,dietAnalysis:`Diet analysis`,healthScore:`Health Score`,basalMetabolismTrend:`Basal metabolism trend`,avg:`Avg`,meet:`Meet`,insufficient:`Insufficient`,excess:`Excess`,microElementStatus:`Micro-element status`,normal:`Normal`,range:`Range`,viewAllElements:`View all elements`,weeklyAverageReport:`Weekly average report`,weeklyIntakeReport:`Weekly intake report`,excessiveIntake:`Excessive intake`,target:`Target`,calorieIntake:`Calorie intake`,averageConsumption:`Average consumption`,microElementStructure:`Micro-element structure`,macronutrientStructure:`Macronutrient structure`,ingestTargetStatistics:`Ingest target statistics`,balancedIntakeSummary:`Your intake of carbohydrates, protein, and fat is relatively balanced. Keep focusing on Vitamin intake.`,complicatedRecipes:`Complicated recipes`,kcal:`kcal`,goal:`Goal`,exceed:`Exceed`,comparison:{title:`Compare with last week`,avgCaloriesCompare:`Average calories compare to last week`,lastWeek:`Last week`,thisWeek:`This week`,lastWeekValue:`Last week`,mainCause:`Data attribution: Primarily caused by...`,breakfast:`Breakfast`,lunch:`Lunch`,dinner:`Dinner`,snacks:`Snacks`}},superPanel:{language:`Language`,user:`User`,theme:`Theme`,demoMode:`Demo Mode`,mockData:`Mock Data`,realData:`Real Data`},weeklyReport:{title:`My Weekly Report`,pageTitle:`My weekly health report`,pageSubtitle:`Updated on 12:30 every Monday - AI health advice`,loadFailed:`Load failed`,requestFailed:`Request failed, please try again later`,noReport:`No report yet`,noReportHint:`This week's health report is being generated. Please check back later.`,noReportId:`Please provide rid in the URL (?rid=)`,weekSummary:`Week {{week}} summary`,overallScore:`Weekly Health Score`,points:`pts`,goalDays:`Goal Days`,vsLastWeek:`Vs Last Week`,days:`days`,daysOnTarget:`{{count}} days on target this week`,scoreChange:`vs last week {{text}}`,aiInsight:{default:`AI health insight`,vitalSigns:`Vital signs AI insight`,sleep:`Sleep AI insight`,emotion:`Emotion AI insight`,medication:`Medication AI insight`,nutrition:`Nutrition AI insight`,exercise:`Exercise AI insight`},vitalSignsTrend:`Vital signs trend`,avgHR:`Avg HR`,avgBP:`Avg BP`,avgSpO2:`Avg SpO2`,avgGlucose:`Avg Glucose`,sleep:`Sleep`,avgSleepTracking:`Avg Sleep Tracking`,sleepDurationTrend:`Sleep Duration Trend`,avgSleepStages:`Avg Sleep Stages`,hours:`Hours`,noSleepData:`No sleep data`,avgSleep:`Avg. sleep`,sleepDeep:`Deep`,sleepLight:`Light`,sleepRem:`REM`,awake:`Awake`,emotion:`Emotion`,avgMoodIndex:`Avg Mood Index`,moodAndVolatility:`Mood & Volatility`,avgMoodDistribution:`Avg Mood Distribution`,noEmotionData:`No emotion data`,avgEmotionScore:`Avg. emotion score`,emotionScore:`Emotion score`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,medication:`Medication`,medAdherence:`Med Adherence`,adherenceTrend:`Adherence Trend`,noMedicationData:`No medication data`,complianceRate:`Compliance rate`,missedCount:`{{count}} times`,missed:`Missed`,takenOnTime:`On time`,delayed:`Delayed`,improvementSuggestions:`Improvement suggestions`,viewDetails:`View Details`,priority:`Priority`,exercise:`Exercise`,exerciseCompletion:`Exercise Completion`,noExerciseData:`No exercise data`,avgCompletionRate:`Avg. completion rate`,bpIdeal:`BP ideal`,minutes:`min`,nutritionIntake:`Nutrition intake`,dailyCalories:`Daily Calories`,calorieIntake:`Calorie Intake`,onTargetPercent:`On-Target: {{percent}}%`,noNutritionData:`No nutrition data`,kcalPerDay:`kcal / daily avg`,breakfast:`Breakfast`,lunch:`Lunch`,dinner:`Dinner`,onTarget:`On target`,over:`Over`,under:`Under`,correlationAnalysis:`Health correlation analysis`,influencingFactors:`Influencing factors`,healthOutcome:`Health outcome`,noData:`No data`},widgets:{nativeBridgeReady:`NativeBridge Ready`,type1:{title:`Sleep score`,hours:`hours`,minutes:`minutes`,totalSleepDuration:`Total sleep duration`,deepSleepDuration:`Deep sleep duration`},type2:{standard:`Standard`},type3:{nutritionalScore:`Nutritional score`,totalCalories:`Total calories`,thisMealIntake:`This meal intake`,totalDailyIntake:`Total daily intake`,recommended:`Recommended`,recommendedValue:`Recommended: {{value}} {{unit}}`,exceedPercent:`Exceed {{percent}}%`},type4:{title:`Music Recommendations`,subtitle:`Curated relaxing music for you`,viewAll:`View more`,recommendListen:`Recommend listen`,noMusic:`No music recommendations`},type5:{heartRate:`Heart rate`,bloodPressure:`Blood pressure`,spo2:`SpO2`,poct:`POCT`},type7:{weeklyHealthScore:`Weekly health score`,weekSummary:`Week {{week}} Summary`,sleepDuration:`Sleep duration`,exercise:`Exercise`,dietary:`Dietary`,min:`min`,h:`h`,times:`times`,goal:`Goal`,backTips:{main:{tip1:`Small daily habits lead to big changes!`,tip2:`Keep it up!`},sleep:{tip:`7-8h quality sleep
boosts energy`},exercise:{tip:`150 min/week
is ideal`},dietary:{tip:`Balanced diet
is key`}}},type8:{sbp:`SBP`,sleepDuration:`Sleep duration`},type9:{title:`Customized improvement plan`,add:`Add`,added:`Added`,cancel:`Cancel`,selected:`Selected`,completeSelection:`Complete selection`},type10:{title:`PPG Signal`,start:`Start`,restart:`Restart`,idleHint:`Click Start to begin measurement`,placeFinger:`Place your finger on the sensor to start measurement`,statusIdle:`Ready to measure`,statusMeasuring:`In acquiring infrared signals...`,statusCompleted:`Measurement ended`},type11:{urgencyBadge:`Recommendations for immediate action`,startButton:`Start`,minutes:`min`},type12:{urgencyBadge:`Recommendations for immediate action`,startButton:`Start`,minutes:`min`,textOnlyTitle:`Health Recommendation`,noRecommendation:`No recommendation available`}},aiSecurity:{title:`AI Smart Emergency Rescue`,appName:`AI Security Core`,moduleName:`Smart Emergency Rescue System`,systemLog:`SYSTEM LOG`,status:{processing:`Processing`,complete:`Complete`},actions:{message:`Message`,wechat:`Wechat`,app:`APP`,emergency:`120`},chat:{title:`120 Emergency Call Log`,recording:`Recording...`,thankYou:`Thank you.`}}}},zh:{translation:{nav:{bloodPressure:`è¡€åŽ‹`,spo2:`è¡€æ°§`,heartRate:`å¿ƒçŽ‡`,glucose:`è¡€ç³–`,healthyDashboard:`å¥åº·çœ‹æ¿`,healthyDailyReport:`å¥åº·æ—¥æŠ¥`,emotionDailyReport:`æƒ…ç»ªæ—¥æŠ¥`,sleepDailyReport:`ç¡çœ æ—¥æŠ¥`,bpTrendWidget:`è¡€åŽ‹è¶‹åŠ¿ç»„ä»¶`,spo2TrendWidget:`è¡€æ°§è¶‹åŠ¿ç»„ä»¶`,hrTrendWidget:`å¿ƒçŽ‡è¶‹åŠ¿ç»„ä»¶`,glucoseTrendWidget:`è¡€ç³–è¶‹åŠ¿ç»„ä»¶`},home:{title:`å¥åº·æŒ‡æ ‡`,subtitle:`å¯è§†åŒ–å›¾è¡¨åº“`,detailPages:`è¯¦æƒ…é¡µé¢`,widgetPages:`Widget ç»„ä»¶é¡µ (ç”¨äºŽ iframe åµŒå…¥)`,dailyReportPages:`æ—¥æŠ¥é¡µé¢`,urlParameters:`URL å‚æ•°`,weeklyReportCategory:`å‘¨æŠ¥`,aiSecurityCategory:`AI å®‰å…¨`,widgetType1:`ç¡çœ è¯„åˆ†`,widgetType2:`æŸ±çŠ¶å›¾å¯¹æ¯”`,widgetType3:`è¥å…»æ‘„å…¥`,widgetType4:`éŸ³ä¹æŽ¨è`,widgetType5:`å¥åº·ä½“å¾æ€»è§ˆ`,widgetType6:`é’ æ‘„å…¥è¡€åŽ‹å…³è”`,widgetType7:`æ¯å‘¨å¥åº·åˆ†æ•°`,widgetType8:`SBPä¸Žç¡çœ è¶‹åŠ¿å›¾`,widgetType9:`å®šåˆ¶æ”¹å–„è®¡åˆ’`,widgetType10:`PPG ä¿¡å·é‡‡é›†`,widgetType11:`å¥åº·å¹²é¢„è§†é¢‘`,widgetType12:`HRE æŽ¨è`},common:{loading:`åŠ è½½ä¸­...`,error:`å‘ç”Ÿé”™è¯¯`,retry:`é‡è¯•`,noData:`æš‚æ— æ•°æ®`,insufficientData:`æœ¬å‘¨æœ‰æ•ˆæ•°æ®ä¸è¶³ï¼`,noDataThisWeek:`æœ¬å‘¨æš‚æ— æ•°æ®`,noDiaryThisWeek:`æœ¬å‘¨æ— æ—¥è®°`,add:`æ·»åŠ `,average:`å¹³å‡`,max:`æœ€é«˜`,min:`æœ€ä½Ž`,value:`æ•°å€¼`,times:`æ¬¡`,time:`æ¬¡`,good:`è‰¯å¥½`,inAverage:`å¹³å‡`,daily:`æ¯æ—¥`,weekly:`æ¯å‘¨`,illustrate:`è¯´æ˜Ž`,close:`å…³é—­`,disclaimer:`æœ¬äº§å“çš„ç›‘æµ‹ç»“æžœä»…ä¾›å‚è€ƒã€‚éƒ¨åˆ†å†…å®¹ç”± AI ç”Ÿæˆï¼Œè¯·ä»”ç»†æ ¸å®žã€‚ä¸åº”ç”¨äºŽåŒ»ç–—è¯Šæ–­ã€‚å¦‚æžœæ‚¨æ„Ÿåˆ°ä¸é€‚ï¼Œè¯·åŠæ—¶å°±åŒ»ã€‚`},auth:{login:`ç™»å½•`,logout:`é€€å‡ºç™»å½•`,username:`ç”¨æˆ·å`,password:`å¯†ç `,usernamePlaceholder:`è¯·è¾“å…¥ç”¨æˆ·å`,passwordPlaceholder:`è¯·è¾“å…¥å¯†ç `,loginDescription:`è¯·è¾“å…¥æ‚¨çš„è´¦æˆ·ä¿¡æ¯`,testCredentials:`æµ‹è¯•è´¦å·ä¿¡æ¯ï¼š`,presetAccount:`é¢„è®¾è´¦å·`,presetAccountPlaceholder:`é€‰æ‹©è´¦å·å¿«é€Ÿå¡«å……`,customAccount:`è‡ªå®šä¹‰è¾“å…¥`,cancel:`å–æ¶ˆ`,loggingIn:`ç™»å½•ä¸­...`,loginFailed:`ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•`,tokenExpired:`ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•`},vitals:{bloodPressure:`è¡€åŽ‹`,systolic:`æ”¶ç¼©åŽ‹`,diastolic:`èˆ’å¼ åŽ‹`,sbp:`é«˜åŽ‹`,dbp:`ä½ŽåŽ‹`,pulse:`è„‰æ`,spo2:`è¡€æ°§`,heartRate:`å¿ƒçŽ‡`,glucose:`è¡€ç³–`,fasting:`ç©ºè…¹`,postMeal:`é¤åŽ`,bloodSugar:`è¡€ç³–`,bloodOxygen:`è¡€æ°§`,sleep:`ç¡çœ `,emotion:`æƒ…ç»ª`,nutrition:`è¥å…»`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`æ¬¡/åˆ†`,minute:`åˆ†é’Ÿ`,hour:`å°æ—¶`},status:{normal:`æ­£å¸¸`,elevated:`åé«˜`,high:`é«˜`,low:`åä½Ž`,slow:`è¿‡ç¼“`,good:`è‰¯å¥½`,warning:`è­¦å‘Š`,danger:`å±é™©`,normalHighValue:`æ­£å¸¸é«˜å€¼`,tooLow:`è¿‡ä½Ž`,tooHigh:`è¿‡é«˜`,exceed:`åé«˜`,fair:`ä¸€èˆ¬`},trend:{up:`ä¸Šå‡`,down:`ä¸‹é™`,stable:`å¹³ç¨³`},time:{week:`å‘¨`,month:`æœˆ`,year:`å¹´`,today:`ä»Šå¤©`,yesterday:`æ˜¨å¤©`,lastWeek:`ä¸Šå‘¨`},weekdays:{mon:`å‘¨ä¸€`,tue:`å‘¨äºŒ`,wed:`å‘¨ä¸‰`,thu:`å‘¨å››`,fri:`å‘¨äº”`,sat:`å‘¨å…­`,sun:`å‘¨æ—¥`},datePicker:{previousWeek:`ä¸Šä¸€å‘¨`,nextWeek:`ä¸‹ä¸€å‘¨`,previousMonth:`ä¸Šä¸€æœˆ`,nextMonth:`ä¸‹ä¸€æœˆ`,selectWeek:`ç‚¹å‡»é€‰æ‹©ä¸€å‘¨`},page:{bloodPressure:{title:`è¡€åŽ‹è¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverageSBP:`æœ¬å‘¨å¹³å‡é«˜åŽ‹`,weeksAverageDBP:`æœ¬å‘¨å¹³å‡ä½ŽåŽ‹`,bpStatistics:`è¡€åŽ‹ç»Ÿè®¡`,normalResults:`æ¬¡æ­£å¸¸è¡€åŽ‹ç»“æžœ`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,averageSBP:`å¹³å‡é«˜åŽ‹`,averageDBP:`å¹³å‡èˆ’å¼ åŽ‹`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,defaultInsight:`æ‚¨çš„è¡€åŽ‹æ•´ä½“å¤„äºŽç†æƒ³èŒƒå›´å†…ã€‚è™½ç„¶ä¸Žä¸Šå‘¨ç›¸æ¯”ï¼Œæ”¶ç¼©åŽ‹ç•¥æœ‰ä¸Šå‡ï¼Œä½†ä»å¤„äºŽæ­£å¸¸æ³¢åŠ¨èŒƒå›´å†…ã€‚`,bpClassification:`è¡€åŽ‹åˆ†ç±»æ ‡å‡†ï¼ˆå•ä½ï¼šmmHgï¼‰

ä½Žè¡€åŽ‹ï¼šæ”¶ç¼©åŽ‹ <90 / èˆ’å¼ åŽ‹ <60

æ­£å¸¸è¡€åŽ‹ï¼šæ”¶ç¼©åŽ‹ <120 / èˆ’å¼ åŽ‹ <80

æ­£å¸¸é«˜å€¼ï¼ˆéœ€æ³¨æ„ï¼‰ï¼šæ”¶ç¼©åŽ‹ 120-129 / èˆ’å¼ åŽ‹ 80-89

é«˜è¡€åŽ‹ï¼ˆ1çº§ï¼‰ï¼šæ”¶ç¼©åŽ‹ â‰¥130 mmHg`},spo2:{title:`è¡€æ°§è¯¦æƒ…`,trendTitle:`è¡€æ°§è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡è¡€æ°§`,normalRange:`æ­£å¸¸èŒƒå›´`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`è¡€æ°§ç»Ÿè®¡`,totalTests:`æ¬¡æ•°`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡è¡€æ°§`,lastReading:`æœ€è¿‘è¯»æ•°`,rangeToday:`ä»Šæ—¥èŒƒå›´`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡è¡€æ°§é¥±å’Œåº¦ä¸º {{avg}}%ï¼Œä¸Žä¸Šå‘¨æŒå¹³ã€‚`,defaultAnalysis2:`è¡€æ°§æ°´å¹³åœ¨{{maxDay}}ä¿æŒè¾ƒé«˜æ°´å¹³ï¼ˆ{{max}}%ï¼‰ã€‚`,defaultAnalysis3:`{{minDay}}è®°å½•åˆ°è¡€æ°§æ°´å¹³ä¸º {{min}}%ï¼Œç•¥ä½ŽäºŽæ­£å¸¸èŒƒå›´ä¸‹é™ã€‚`,defaultOverview:`æ‚¨çš„è¡€æ°§æ•´ä½“å¤„äºŽç†æƒ³èŒƒå›´å†…ã€‚è™½ç„¶ä¸Žä¸Šå‘¨ç›¸æ¯”ç•¥æœ‰æ³¢åŠ¨ï¼Œä½†ä»å¤„äºŽæ­£å¸¸æ³¢åŠ¨èŒƒå›´å†…ã€‚`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„è¡€æ°§åœ¨æœ¬å‘¨ä¸­æœ‰æ˜Žæ˜¾æ³¢åŠ¨ã€‚ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºæ‚¨çš„è¡€æ°§æµ‹é‡å€¼åœ¨ä¸åŒæ°´å¹³é—´æœ‰ä¸€å®šå˜åŒ–ã€‚æˆ‘ä»¬å°†ç»§ç»­ç›‘æµ‹æ‚¨çš„çŠ¶å†µï¼Œå¹¶å¸®åŠ©æ‚¨è¯†åˆ«ä»»ä½•å¯èƒ½å¯¼è‡´è¡€æ°§åä½Žçš„åŽŸå› ã€‚`},heartRate:{title:`å¿ƒçŽ‡è¯¦æƒ…`,trendTitle:`å¿ƒçŽ‡è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡å¿ƒçŽ‡`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`å¿ƒçŽ‡ç»Ÿè®¡`,totalTests:`æ¬¡æ•°`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡å¿ƒçŽ‡`,lastReading:`æœ€è¿‘è¯»æ•°`,restingHR:`é™æ¯å¿ƒçŽ‡`,maxHR:`æœ€é«˜å¿ƒçŽ‡`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡å¿ƒçŽ‡ä¸º {{avg}} æ¬¡/åˆ†ã€‚`,defaultAnalysis2:`å¿ƒçŽ‡åœ¨{{maxDay}}è¾¾åˆ°å³°å€¼ {{max}} æ¬¡/åˆ†ã€‚`,defaultAnalysis3:`{{minDay}}è®°å½•åˆ°æœ€ä½Žå¿ƒçŽ‡ {{min}} æ¬¡/åˆ†ã€‚`,defaultOverview:`æ‚¨çš„å¿ƒçŽ‡æœ¬å‘¨æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚ç»§ç»­ä¿æŒå¸¸è§„çš„è¿åŠ¨ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„å¿ƒçŽ‡åœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°ä½“åŠ›æ´»åŠ¨ã€åŽ‹åŠ›æ°´å¹³å’Œç¡çœ è´¨é‡çš„å½±å“ã€‚`},glucose:{title:`è¡€ç³–è¯¦æƒ…`,trendTitle:`è¡€ç³–è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡è¡€ç³–`,normalRange:`æ­£å¸¸èŒƒå›´`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`è¡€ç³–ç»Ÿè®¡`,normalResults:`æ¬¡æ­£å¸¸è¡€ç³–ç»“æžœ`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,averageGlucose:`å¹³å‡è¡€ç³–`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡è¡€ç³–`,lastReading:`æœ€è¿‘è¯»æ•°`,fastingLevel:`ç©ºè…¹è¡€ç³–`,postMealLevel:`é¤åŽè¡€ç³–`,fastingNormal:`ç©ºè…¹æ­£å¸¸å€¼`,postMealNormal:`é¤åŽæ­£å¸¸å€¼`,defaultInsight:`æ‚¨çš„è¡€ç³–æ°´å¹³æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚è¯·ç»§ç»­ä¿æŒå‡è¡¡çš„é¥®é£Ÿå’Œè§„å¾‹çš„è¿åŠ¨ä¹ æƒ¯ï¼Œä»¥ç»´æŒç¨³å®šçš„è¡€ç³–æ°´å¹³ã€‚`,defaultOverview:`æœ¬å‘¨æ‚¨çš„è¡€ç³–æ°´å¹³æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„é¥®é£Ÿå’Œè¿åŠ¨ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„è¡€ç³–åœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¯·æ³¨æ„é¥®é£Ÿï¼Œå°¤å…¶æ˜¯é¤åŽï¼Œä»¥ä¿æŒè¡€ç³–æ°´å¹³ç¨³å®šã€‚`},sleep:{title:`ç¡çœ è¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverageSleep:`æœ¬å‘¨å¹³å‡ç¡çœ `,sleepStructure:`ç¡çœ ç»“æž„`,deepSleep:`æ·±åº¦ç¡çœ `,lightSleep:`æµ…ç¡çœ `,remSleep:`å¿«é€Ÿçœ¼åŠ¨`,awake:`æ¸…é†’`,standard:`æ ‡å‡†`,dataAnalysis:`æ•°æ®åˆ†æž`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,avgSleepTime:`å¹³å‡å…¥ç¡æ—¶é—´`,avgWakeTime:`å¹³å‡èµ·åºŠæ—¶é—´`,sameAsLastWeek:`ä¸Žä¸Šå‘¨æŒå¹³`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,defaultInsight:`æœ¬å‘¨æ‚¨çš„ç¡çœ ä½œæ¯æ¯”è¾ƒè§„å¾‹ã€‚ä¿æŒè§„å¾‹çš„ç¡çœ ä¹ æƒ¯å¯¹æ‚¨çš„æ•´ä½“å¥åº·éžå¸¸æœ‰ç›Šã€‚`,defaultOverview:`æœ¬å‘¨æ‚¨çš„ç¡çœ è´¨é‡æ•´ä½“è‰¯å¥½ã€‚æ‚¨ä¿æŒäº†è¾ƒä¸ºè§„å¾‹çš„ç¡çœ ä½œæ¯ï¼Œè¿™å¯¹æ‚¨çš„æ•´ä½“å¥åº·éžå¸¸æœ‰ç›Šã€‚`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨æœ¬å‘¨çš„ç¡çœ æ¨¡å¼ç›¸å¯¹ç¨³å®šã€‚ä½†è¯·æ³¨æ„æ‚¨çš„å¿«é€Ÿçœ¼åŠ¨ç¡çœ æ¯”ä¾‹ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ‚¨çš„ç¡çœ è´¨é‡å’Œæ¢¦å¢ƒæ¨¡å¼ã€‚`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡è¡€æ°§é¥±å’Œåº¦ä¸º 97%ï¼Œä¸Žä¸Šå‘¨æŒå¹³ã€‚`,defaultAnalysis2:`è¡€æ°§æ°´å¹³åœ¨æœ¬å‘¨äºŒè‡³å‘¨å››ä¿æŒè¾ƒé«˜æ°´å¹³ï¼ˆ98%ï¼‰ã€‚`,defaultAnalysis3:`å‘¨äº”è®°å½•åˆ°è¡€æ°§æ°´å¹³ä¸º 94%ï¼Œç•¥ä½ŽäºŽæ­£å¸¸èŒƒå›´ä¸‹é™ã€‚`,highest:`æœ€é«˜`,lowest:`æœ€ä½Ž`},emotion:{title:`æƒ…ç»ªè¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡æƒ…ç»ª`,points:`åˆ†`,score:`æƒ…ç»ªåˆ†æ•°`,statistics:`æƒ…ç»ªç»Ÿè®¡`,distribution:`æƒ…ç»ªåˆ†å¸ƒ`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,diary:`æƒ…ç»ªæ—¥è®°`,positive:`ç§¯æž`,neutral:`ä¸­æ€§`,negative:`æ¶ˆæž`,defaultOverview:`æœ¬å‘¨æ‚¨çš„æƒ…ç»ªæ•´ä½“å¤„äºŽç§¯æžçŠ¶æ€ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„å¿ƒæ€å’Œç”Ÿæ´»ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„æƒ…ç»ªåœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°å·¥ä½œåŽ‹åŠ›ã€ç¡çœ è´¨é‡å’Œç¤¾äº¤æ´»åŠ¨çš„å½±å“ã€‚`,defaultAnalysis1:`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`,defaultAnalysis2:`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`,defaultAnalysis3:`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`},nutrition:{weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,defaultOverview:`æœ¬å‘¨æ‚¨çš„è¥å…»æ‘„å…¥æ•´ä½“å‡è¡¡ã€‚æ€»çƒ­é‡æ‘„å…¥ç•¥æœ‰æ³¢åŠ¨ï¼Œä½†ä¿æŒåœ¨ç›®æ ‡èŒƒå›´å†…ã€‚`,defaultHighlights:`åˆ†æžæ˜¾ç¤ºæ‚¨çš„è›‹ç™½è´¨æ‘„å…¥ä¿æŒç¨³å®šï¼Œä½†å‘¨æœ«è„‚è‚ªæ‘„å…¥ç•¥æœ‰è¶…æ ‡ã€‚å»ºè®®å¢žåŠ è”¬èœæ‘„å…¥ä»¥å¹³è¡¡å¾®é‡å…ƒç´ ã€‚`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`}},daily:{todayScore:`ä»Šæ—¥è¯„åˆ†`,todayEmotionScore:`ä»Šæ—¥æƒ…ç»ªè¯„åˆ†`,aiAnalysis:`AI åˆ†æž`,aiHealthInsights:`AI å¥åº·ç›¸å…³è§è§£`,personalizedSuggestions:`ä¸ªæ€§åŒ–å»ºè®®`,defaultSuggestions:{soakingFeet:{title:`ç¡å‰æ³¡è„š`,description:`ç¼“è§£å½“å‰ç„¦è™‘ï¼Œé™ä½Žå¿ƒçŽ‡ã€‚`},napSuggestion:{title:`ä»Šæ—¥åˆç¡å»ºè®®`,description:`ç¼“è§£å½“å‰ç„¦è™‘ï¼Œé™ä½Žå¿ƒçŽ‡ã€‚`}},emotionProportion:`æƒ…ç»ªæ¯”ä¾‹åˆ†æž`,emotionDistribution:`æƒ…ç»ªåˆ†å¸ƒ`,asMain:`ä¸ºä¸»`,sleepStructure:`ç¡çœ ç»“æž„å›¾`,sleepDistribution:`ç¡çœ åˆ†å¸ƒ`,sleepQuality:`ç¡çœ è´¨é‡æŒ‡æ ‡`,totalDuration:`æ€»ç¡çœ æ—¶é•¿`,deepSleep:`æ·±åº¦ç¡çœ `,totalHours:`æ€»æ—¶é•¿`,coreIndicators:`æ ¸å¿ƒæŒ‡æ ‡åˆ†æž`,reference:`å‚è€ƒå€¼`,latest:`æœ€æ–°å€¼`,weekAvg:`7æ—¥å‡å€¼`,newestValue:`æœ€æ–°å€¼`,average:`å¹³å‡å€¼`,standard:`å‚è€ƒå€¼`,highest:`æœ€é«˜`,lowest:`æœ€ä½Ž`,range:`èŒƒå›´`,mean:`å‡å€¼`,loading:`åŠ è½½ä¸­...`,error:`æ•°æ®åŠ è½½å¤±è´¥`,demoMode:`æ¼”ç¤ºæ¨¡å¼`,toggleDemoMode:`åˆ‡æ¢æ¼”ç¤ºæ¨¡å¼`,demoModeOn:`ä½¿ç”¨å‡æ•°æ®`,demoModeOff:`ä½¿ç”¨åŽç«¯æ•°æ®`},sleep:{deep:`æ·±åº¦ç¡çœ `,light:`æµ…ç¡çœ `,rem:`å¿«é€Ÿçœ¼åŠ¨`,awake:`æ¸…é†’`,bedTime:`ä¸ŠåºŠæ—¶é—´`,sleepTime:`å…¥ç¡æ—¶é—´`,wakeTime:`é†’æ¥æ—¶é—´`,getUpTime:`èµ·åºŠæ—¶é—´`,sleepLatency:`å…¥ç¡è€—æ—¶`,sleepEfficiency:`ç¡çœ æ•ˆçŽ‡`},emotion:{happy:`å¿«ä¹`,calm:`å¹³é™`,surprised:`æƒŠè®¶`,sad:`éš¾è¿‡`,angry:`æ„¤æ€’`,fearful:`ææƒ§`,disgusted:`åŽŒæ¶`,neutral:`ä¸­æ€§`},healthy:{comprehensiveHealth:`ç»¼åˆå¥åº·æ•°æ®`,aiGenerated:`AI ç”Ÿæˆ`,bpDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡æ”¶ç¼©åŽ‹ä¸º `,bpDescriptionCont:`ï¼Œå¹³å‡èˆ’å¼ åŽ‹ä¸º `,hrDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡å¿ƒçŽ‡ä¸º `,hrDescriptionCont:`ï¼Œé™æ¯å¿ƒçŽ‡æ¨¡å¼æ­£å¸¸ã€‚`,heartRateLabel:`å¿ƒçŽ‡`,bsDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡è¡€ç³–ä¸º `,bsDescriptionCont:`ï¼Œå¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚`,spo2Description:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡è¡€æ°§ä¸º `,spo2DescriptionCont:`ï¼Œä¿æŒå¥åº·çš„æ°§æ°”æ°´å¹³ã€‚`,sleepDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡ç¡çœ æ—¶é•¿ä¸º `,sleepDescriptionCont:`ï¼Œç¡çœ è´¨é‡è‰¯å¥½ã€‚`,sleepTime:`ç¡çœ æ—¶é•¿`,emotionDescription:`è¿‡åŽ»{{period}}æ‚¨çš„æƒ…ç»ªçŠ¶æ€ä¸º `,emotionDescriptionCont:`ï¼Œå‘ˆçŽ°ç§¯æžè¶‹åŠ¿ã€‚`,positive:`ç§¯æž`,neutral:`ä¸­æ€§`,negative:`æ¶ˆæž`,nutritionDescription:`è¿‡åŽ»{{period}}æ‚¨çš„è¥å…»æ‘„å…¥ä¸º `,nutritionDescriptionCont:`ï¼Œå¤„äºŽæŽ¨èæ°´å¹³å†…ã€‚`,demoMode:`æ¼”ç¤ºæ¨¡å¼`,toggleDemoMode:`åˆ‡æ¢æ¼”ç¤ºæ¨¡å¼`,demoModeOn:`ä½¿ç”¨å‡æ•°æ®`,demoModeOff:`ä½¿ç”¨åŽç«¯æ•°æ®`},nutrition:{dataAnalysis:`æ•°æ®åˆ†æž`,dietAnalysis:`é¥®é£Ÿåˆ†æž`,healthScore:`å¥åº·è¯„åˆ†`,basalMetabolismTrend:`åŸºç¡€ä»£è°¢è¶‹åŠ¿`,avg:`å¹³å‡`,meet:`è¾¾æ ‡`,insufficient:`ä¸è¶³`,excess:`è¶…æ ‡`,microElementStatus:`å¾®é‡å…ƒç´ çŠ¶æ€`,normal:`æ­£å¸¸`,range:`èŒƒå›´`,viewAllElements:`æŸ¥çœ‹æ‰€æœ‰å…ƒç´ `,weeklyAverageReport:`å‘¨å¹³å‡æŠ¥å‘Š`,weeklyIntakeReport:`å‘¨æ‘„å…¥æŠ¥å‘Š`,excessiveIntake:`æ‘„å…¥è¿‡é‡`,target:`ç›®æ ‡`,calorieIntake:`çƒ­é‡æ‘„å…¥`,averageConsumption:`å¹³å‡æ¶ˆè€—`,microElementStructure:`å¾®é‡å…ƒç´ ç»“æž„`,macronutrientStructure:`å®é‡è¥å…»ç´ ç»“æž„`,ingestTargetStatistics:`æ‘„å…¥ç›®æ ‡ç»Ÿè®¡`,balancedIntakeSummary:`æ‚¨çš„ç¢³æ°´åŒ–åˆç‰©ã€è›‹ç™½è´¨å’Œè„‚è‚ªæ‘„å…¥ç›¸å¯¹å‡è¡¡ã€‚ç»§ç»­å…³æ³¨ç»´ç”Ÿç´ æ‘„å…¥ã€‚`,complicatedRecipes:`æœ¬å‘¨vsä¸Šå‘¨`,kcal:`åƒå¡`,goal:`è¾¾æ ‡`,exceed:`è¶…æ ‡`,comparison:{title:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,avgCaloriesCompare:`å¹³å‡å¡è·¯é‡Œä¸Žä¸Šå‘¨å¯¹æ¯”`,lastWeek:`ä¸Šå‘¨`,thisWeek:`æœ¬å‘¨`,lastWeekValue:`ä¸Šå‘¨`,mainCause:`æ•°æ®å½’å› ï¼šä¸»è¦ç”±ä»¥ä¸‹é£Ÿç‰©å¯¼è‡´`,breakfast:`æ—©é¤`,lunch:`åˆé¤`,dinner:`æ™šé¤`,snacks:`åŠ é¤`}},superPanel:{language:`è¯­è¨€`,user:`ç”¨æˆ·`,theme:`ä¸»é¢˜`,demoMode:`Demo æ¨¡å¼`,mockData:`å‡æ•°æ®`,realData:`çœŸæ•°æ®`},weeklyReport:{title:`æˆ‘çš„å‘¨æŠ¥`,pageTitle:`æˆ‘çš„å‘¨å¥åº·æŠ¥å‘Š`,pageSubtitle:`æ¯å‘¨ä¸€ 12:30 æ›´æ–° - AI å¥åº·å»ºè®®`,loadFailed:`åŠ è½½å¤±è´¥`,requestFailed:`è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•`,noReport:`æš‚æ— å‘¨æŠ¥`,noReportHint:`æœ¬å‘¨çš„å¥åº·æŠ¥å‘Šæ­£åœ¨ç”Ÿæˆä¸­ï¼Œè¯·ç¨åŽå†æ¥æŸ¥çœ‹`,noReportId:`è¯·åœ¨ URL ä¸­æä¾› rid å‚æ•° (?rid=)`,weekSummary:`ç¬¬ {{week}} å‘¨`,overallScore:`å‘¨å¥åº·è¯„åˆ†`,points:`åˆ†`,goalDays:`è¾¾æ ‡å¤©æ•°`,vsLastWeek:`è¾ƒä¸Šå‘¨`,days:`å¤©`,daysOnTarget:`æœ¬å‘¨è¾¾æ ‡ {{count}} å¤©`,scoreChange:`è¾ƒä¸Šå‘¨{{text}}`,aiInsight:{default:`AI å¥åº·æ´žå¯Ÿ`,vitalSigns:`ç”Ÿå‘½ä½“å¾ AI æ´žå¯Ÿ`,sleep:`ç¡çœ  AI æ´žå¯Ÿ`,emotion:`æƒ…ç»ª AI æ´žå¯Ÿ`,medication:`ç”¨è¯ AI æ´žå¯Ÿ`,nutrition:`è¥å…» AI æ´žå¯Ÿ`,exercise:`è¿åŠ¨ AI æ´žå¯Ÿ`},vitalSignsTrend:`ç”Ÿå‘½ä½“å¾è¶‹åŠ¿`,avgHR:`å¹³å‡å¿ƒçŽ‡`,avgBP:`å¹³å‡è¡€åŽ‹`,avgSpO2:`å¹³å‡è¡€æ°§`,avgGlucose:`å¹³å‡è¡€ç³–`,sleep:`ç¡çœ `,avgSleepTracking:`å¹³å‡ç¡çœ è¿½è¸ª`,sleepDurationTrend:`ç¡çœ æ—¶é•¿è¶‹åŠ¿`,avgSleepStages:`å¹³å‡ç¡çœ é˜¶æ®µ`,hours:`å°æ—¶`,noSleepData:`æš‚æ— ç¡çœ æ•°æ®`,avgSleep:`å¹³å‡ç¡çœ `,sleepDeep:`æ·±ç¡`,sleepLight:`æµ…ç¡`,sleepRem:`çœ¼åŠ¨`,awake:`æ¸…é†’`,emotion:`æƒ…ç»ª`,avgMoodIndex:`å¹³å‡æƒ…ç»ªæŒ‡æ•°`,moodAndVolatility:`æƒ…ç»ªä¸Žæ³¢åŠ¨`,avgMoodDistribution:`å¹³å‡æƒ…ç»ªåˆ†å¸ƒ`,noEmotionData:`æš‚æ— æƒ…ç»ªæ•°æ®`,avgEmotionScore:`å¹³å‡æƒ…ç»ªåˆ†`,emotionScore:`æƒ…ç»ªåˆ†`,positive:`æ­£å‘`,neutral:`ä¸­æ€§`,negative:`è´Ÿå‘`,medication:`ç”¨è¯æé†’`,medAdherence:`ç”¨è¯ä¾ä»Ž`,adherenceTrend:`ä¾ä»Žè¶‹åŠ¿`,noMedicationData:`æš‚æ— ç”¨è¯æ•°æ®`,complianceRate:`ä¾ä»ŽçŽ‡`,missedCount:`{{count}} æ¬¡`,missed:`æ¼æœ`,takenOnTime:`æŒ‰æ—¶æœç”¨`,delayed:`è¿Ÿæœ`,improvementSuggestions:`æ”¹å–„å»ºè®®`,viewDetails:`æŸ¥çœ‹è¯¦æƒ…`,priority:`ä¼˜å…ˆ`,exercise:`è¿åŠ¨`,exerciseCompletion:`è¿åŠ¨å®Œæˆ`,noExerciseData:`æš‚æ— è¿åŠ¨æ•°æ®`,avgCompletionRate:`å¹³å‡å®ŒæˆçŽ‡`,bpIdeal:`è¡€åŽ‹ç†æƒ³`,minutes:`åˆ†é’Ÿ`,nutritionIntake:`è¥å…»æ‘„å…¥`,dailyCalories:`æ—¥å‡çƒ­é‡`,calorieIntake:`çƒ­é‡æ‘„å…¥`,onTargetPercent:`è¾¾æ ‡: {{percent}}%`,noNutritionData:`æš‚æ— è¥å…»æ•°æ®`,kcalPerDay:`kcal / æ—¥å‡çƒ­é‡`,breakfast:`æ—©é¤`,lunch:`åˆé¤`,dinner:`æ™šé¤`,onTarget:`è¾¾æ ‡`,over:`è¶…æ ‡`,under:`ä¸è¶³`,correlationAnalysis:`å¥åº·å…³è”åˆ†æž`,influencingFactors:`å½±å“å› ç´ `,healthOutcome:`å¥åº·ç»“æžœ`,noData:`æš‚æ— æ•°æ®`},widgets:{nativeBridgeReady:`NativeBridge Ready`,type1:{title:`ç¡çœ è¯„åˆ†`,hours:`å°æ—¶`,minutes:`åˆ†é’Ÿ`,totalSleepDuration:`æ€»ç¡çœ æ—¶é•¿`,deepSleepDuration:`æ·±ç¡æ—¶é•¿`},type2:{standard:`æ ‡å‡†çº¿`},type3:{nutritionalScore:`è¥å…»è¯„åˆ†`,totalCalories:`æ€»çƒ­é‡`,thisMealIntake:`æœ¬é¤æ‘„å…¥`,totalDailyIntake:`æ¯æ—¥æ€»æ‘„å…¥`,recommended:`æŽ¨èå€¼`,recommendedValue:`æŽ¨è: {{value}} {{unit}}`,exceedPercent:`è¶…æ ‡ {{percent}}%`},type4:{title:`éŸ³ä¹æŽ¨è`,subtitle:`ä¸ºä½ ç²¾é€‰çš„æ”¾æ¾éŸ³ä¹`,viewAll:`æŸ¥çœ‹æ›´å¤š`,recommendListen:`æŽ¨èæ”¶å¬`,noMusic:`æš‚æ— éŸ³ä¹æŽ¨è`},type5:{heartRate:`å¿ƒçŽ‡`,bloodPressure:`è¡€åŽ‹`,spo2:`è¡€æ°§`,poct:`POCT`},type7:{weeklyHealthScore:`æ¯å‘¨å¥åº·åˆ†æ•°`,weekSummary:`ç¬¬ {{week}} å‘¨ æ‘˜è¦`,sleepDuration:`ç¡çœ æ—¶é•¿`,exercise:`è¿åŠ¨`,dietary:`é¥®é£Ÿ`,min:`åˆ†`,h:`å°æ—¶`,times:`æ¬¡`,goal:`è¾¾æ ‡`,backTips:{main:{title:`å¥åº·å°è´´å£«`,tip1:`åšæŒæ˜¯å…³é”®ï¼æ¯å¤©çš„å°ä¹ æƒ¯ä¼šå¸¦æ¥å¥åº·çš„å¤§æ”¹å˜ã€‚`,tip2:`ç»§ç»­ä¿æŒï¼ŒåŠ æ²¹ï¼`},sleep:{title:`ç¡çœ ç›®æ ‡`,tip:`7-8å°æ—¶ä¼˜è´¨ç¡çœ 
æ¢å¤ç²¾åŠ›`},exercise:{title:`è¿åŠ¨ç›®æ ‡`,tip:`æ¯å‘¨150åˆ†é’Ÿ
ä¸­å¼ºåº¦è¿åŠ¨`},dietary:{title:`è¥å…»ç›®æ ‡`,tip:`å‡è¡¡æ­é…è”¬èœ
è›‹ç™½è´¨å’Œå…¨è°·`}}},type8:{sbp:`æ”¶ç¼©åŽ‹`,sleepDuration:`ç¡çœ æ—¶é•¿`},type9:{title:`å®šåˆ¶æ”¹å–„è®¡åˆ’`,add:`æ·»åŠ `,added:`å·²æ·»åŠ `,cancel:`æ’¤å›ž`,selected:`å·²é€‰æ‹©`,completeSelection:`å®Œæˆé€‰æ‹©`},type10:{title:`PPG ä¿¡å·`,start:`å¼€å§‹`,restart:`é‡æ–°å¼€å§‹`,idleHint:`ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹æµ‹é‡`,placeFinger:`è¯·å°†æ‰‹æŒ‡æ”¾åœ¨ä¼ æ„Ÿå™¨ä¸Šå¼€å§‹æµ‹é‡`,statusIdle:`å‡†å¤‡æµ‹é‡`,statusMeasuring:`æ­£åœ¨é‡‡é›†çº¢å¤–ä¿¡å·...`,statusCompleted:`ç»“æŸæµ‹é‡`},type11:{urgencyBadge:`ç«‹å³è¡ŒåŠ¨æŽ¨è`,startButton:`å¼€å§‹`,minutes:`åˆ†é’Ÿ`},type12:{urgencyBadge:`ç«‹å³å¼€å§‹è¡ŒåŠ¨`,startButton:`å¼€å§‹`,minutes:`åˆ†é’Ÿ`,textOnlyTitle:`å¥åº·å»ºè®®`,noRecommendation:`æš‚æ— æŽ¨è`}},aiSecurity:{title:`AI æ™ºèƒ½æ€¥æ•‘ç³»ç»Ÿ`,appName:`AI å®‰å…¨æ ¸å¿ƒ`,moduleName:`æ™ºèƒ½æ€¥æ•‘ç³»ç»Ÿ`,systemLog:`ç³»ç»Ÿæ—¥å¿—`,status:{processing:`å¤„ç†ä¸­`,complete:`å·²å®Œæˆ`},actions:{message:`æ¶ˆæ¯`,wechat:`å¾®ä¿¡`,app:`åº”ç”¨`,emergency:`120`},chat:{title:`120 æ€¥æ•‘é€šè¯è®°å½•`,recording:`å½•éŸ³ä¸­...`,thankYou:`è°¢è°¢ã€‚`}}}}},fallbackLng:`zh`,debug:!1,interpolation:{escapeValue:!1},detection:{order:[`querystring`,`localStorage`,`navigator`],lookupQuerystring:`lang`,lookupLocalStorage:`i18nextLng`,caches:[`localStorage`]}});var Ff=(0,L.lazy)(()=>re(()=>import(`./SuperPanel-i-fLg_G9.js`),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.SuperPanel})));function If(){return Pf(),null}var Lf=new ht({defaultOptions:{queries:{retry:2,refetchOnWindowFocus:!1}}}),Rf=()=>(0,z.jsx)(`div`,{className:`flex items-center justify-center h-screen bg-slate-50`,children:(0,z.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-2 border-orange-400 border-t-transparent`})});function zf(){return(0,z.jsx)(ut,{client:Lf,children:(0,z.jsxs)(ae,{children:[(0,z.jsx)(If,{}),(0,z.jsx)(L.Suspense,{fallback:null,children:(0,z.jsx)(Ff,{})}),(0,z.jsx)(L.Suspense,{fallback:(0,z.jsx)(Rf,{}),children:(0,z.jsxs)(se,{children:[(0,z.jsx)(P,{path:`/`,element:(0,z.jsx)(Mf,{})}),(0,z.jsx)(P,{path:`/details/blood-pressure`,element:(0,z.jsx)(Lr,{})}),(0,z.jsx)(P,{path:`/details/spo2`,element:(0,z.jsx)(ni,{})}),(0,z.jsx)(P,{path:`/details/heart-rate`,element:(0,z.jsx)(vi,{})}),(0,z.jsx)(P,{path:`/details/glucose`,element:(0,z.jsx)(Fi,{})}),(0,z.jsx)(P,{path:`/details/healthy`,element:(0,z.jsx)(mc,{})}),(0,z.jsx)(P,{path:`/details/sleep`,element:(0,z.jsx)(Rc,{})}),(0,z.jsx)(P,{path:`/details/emotion`,element:(0,z.jsx)(bl,{})}),(0,z.jsx)(P,{path:`/details/nutrition`,element:(0,z.jsx)(du,{})}),(0,z.jsx)(P,{path:`/daily/emotion`,element:(0,z.jsx)(Mu,{})}),(0,z.jsx)(P,{path:`/daily/sleep`,element:(0,z.jsx)(qu,{})}),(0,z.jsx)(P,{path:`/daily/healthy`,element:(0,z.jsx)(ld,{})}),(0,z.jsx)(P,{path:`/weekly/report`,element:(0,z.jsx)(of,{})}),(0,z.jsx)(P,{path:`/ai-security`,element:(0,z.jsx)(xf,{})}),(0,z.jsx)(P,{path:`/widget/blood-pressure/trend`,element:(0,z.jsx)(zr,{})}),(0,z.jsx)(P,{path:`/widget/spo2/trend`,element:(0,z.jsx)(ri,{})}),(0,z.jsx)(P,{path:`/widget/heart-rate/trend`,element:(0,z.jsx)(yi,{})}),(0,z.jsx)(P,{path:`/widget/glucose/trend`,element:(0,z.jsx)(Ii,{})}),(0,z.jsx)(P,{path:`/widget/type-1`,element:(0,z.jsx)(ma,{})}),(0,z.jsx)(P,{path:`/widget/type-2`,element:(0,z.jsx)(Ta,{})}),(0,z.jsx)(P,{path:`/widget/type-3`,element:(0,z.jsx)(La,{})}),(0,z.jsx)(P,{path:`/widget/type-4`,element:(0,z.jsx)(Ka,{})}),(0,z.jsx)(P,{path:`/widget/type-5`,element:(0,z.jsx)(so,{})}),(0,z.jsx)(P,{path:`/widget/type-6`,element:(0,z.jsx)(_o,{})}),(0,z.jsx)(P,{path:`/widget/type-7`,element:(0,z.jsx)(ko,{})}),(0,z.jsx)(P,{path:`/widget/type-8`,element:(0,z.jsx)(Fo,{})}),(0,z.jsx)(P,{path:`/widget/type-9`,element:(0,z.jsx)(Ko,{})}),(0,z.jsx)(P,{path:`/widget/type-10`,element:(0,z.jsx)(rs,{})}),(0,z.jsx)(P,{path:`/widget/type-11`,element:(0,z.jsx)(ds,{})}),(0,z.jsx)(P,{path:`/widget/type-12`,element:(0,z.jsx)(Ss,{})}),(0,z.jsx)(P,{path:`*`,element:(0,z.jsx)(be,{to:`/`,replace:!0})})]})})]})})}var Bf=zf;(0,gt.createRoot)(document.getElementById(`root`)).render((0,z.jsx)(Bf,{}));export{Tn as a,wn as i,On as n,bn as o,Cn as r,R as s,Tf as t};