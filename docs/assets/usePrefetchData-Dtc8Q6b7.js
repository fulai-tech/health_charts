import{at as e}from"./vendor-DxyDeVV0.js";import{r as t}from"./vendor-query-BzUZE9-d.js";import{n,t as r}from"./client-CzSh7g6B.js";function i(){let e=new Date,t=e.toISOString().split(`T`)[0],n=new Date(e);n.setDate(n.getDate()-6);let r=n.toISOString().split(`T`)[0];return console.log(`[DateRange]`,{start_date:r,end_date:t}),{start_date:r,end_date:t}}async function a(e,t){let a=t||i(),o={type:e,start_date:a.start_date,end_date:a.end_date},s=await r.post(n.trendReview.indicatorDetail,o);if(s.data.code!==200)throw Error(s.data.msg||`Failed to fetch indicator detail`);return s.data.data}async function o(e){return a(`blood_pressure`,e)}async function s(e){return a(`heart_rate`,e)}async function c(e){return a(`blood_glucose`,e)}async function l(e){return a(`blood_oxygen`,e)}async function u(e){return a(`sleep`,e)}var d=e();function f(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function p(e){let n=t(),{featureName:r,queryKeyFn:i,fetchFn:a,staleTime:o=300*1e3}=e;return{prefetchPreviousWeeks:(0,d.useCallback)((e,t=3)=>{console.log(`[${r} Prefetch] Starting prefetch of ${t} previous weeks`);for(let s=1;s<=t;s++){let t=new Date(e);t.setDate(t.getDate()-7*s);let c=new Date(t);c.setDate(c.getDate()-6);let l={startDate:f(c),endDate:f(t)};console.log(`[${r} Prefetch] Week ${s}: ${l.startDate} to ${l.endDate}`),n.prefetchQuery({queryKey:i(l),queryFn:()=>a(l),staleTime:o})}},[n,r,i,a,o])}}export{a,s as i,o as n,u as o,c as r,l as s,p as t};