System.register(["./vendor-legacy-CqM9a8gD.js","./vendor-charts-legacy-B8fWLVfV.js","./vendor-react-legacy-BV_bBpuC.js","./index-legacy-C-cC-8OD.js"],function(e,t){var s,n,a,l,r,o,i,c,d,x,m,u,h,g,p,f,b,j,w,v,N,y,C,S,k,T;function E({enabled:e,onChange:t,size:s="md"}){const n="sm"===s?"h-5 w-9":"h-6 w-11",a="sm"===s?"h-3 w-3":"h-4 w-4",l="sm"===s?e?"translate-x-5":"translate-x-1":e?"translate-x-6":"translate-x-1";return(0,S.jsx)("button",{onClick:()=>t(!e),className:N("relative inline-flex items-center rounded-full transition-colors","focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",n,e?"bg-orange-500":"bg-slate-300"),role:"switch","aria-checked":e,children:(0,S.jsx)("span",{className:N("inline-block transform rounded-full bg-white transition-transform",a,l)})})}function L({icon:e,label:t,children:s}){return(0,S.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-b-0",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600",children:e}),(0,S.jsx)("span",{className:"text-sm font-medium text-slate-700",children:t})]}),(0,S.jsx)("div",{className:"flex items-center gap-2",children:s})]})}function z(){try{return"true"===localStorage.getItem(T)}catch(e){return!1}}function O(){const{t:e,i18n:t}=o(),{isAuthenticated:s,username:u,logout:h}=v(),{language:O,setLanguage:P}=j(),{isTestEnv:R,setIsTestEnv:D}=b(),[F,I]=(0,C.useState)(()=>z()),[$,A]=(0,C.useState)(()=>z()),[J,M]=(0,C.useState)(!1),[W,B]=(0,C.useState)(!1),[G,U]=(0,C.useState)(null),[_,H]=(0,C.useState)([]),[K,q]=(0,C.useState)(!1),[Q,V]=(0,C.useState)(!1),X=(0,C.useRef)(null),Y=(0,C.useRef)(0),Z=(0,C.useRef)(!1),ee=(0,C.useRef)([]),te=(0,C.useRef)(null);(0,C.useEffect)(()=>{const e=()=>{V(window.innerWidth<360||window.innerHeight<500)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,C.useEffect)(()=>{const e={log:console.log,warn:console.warn,error:console.error,info:console.info};te.current=e;const t=setInterval(()=>{0!==ee.current.length&&H(e=>{let t=[...e];const s=[...ee.current];return ee.current=[],s.forEach(e=>{const s=t[t.length-1];s&&s.level===e.level&&s.message===e.message?t[t.length-1]={...s,count:s.count+1,lastTimestamp:e.timestamp,timestamp:e.timestamp}:t.push(e)}),t.length>k&&(t=t.slice(-k)),t})},500),s=t=>(...s)=>{if(e[t].apply(console,s),!Z.current)try{Z.current=!0;const e=s.join(" ");if(e.includes("i18next::translator: missingKey"))return;if(e.includes("SuperPanel")&&e.includes("translation"))return;const n=((e,t)=>{Y.current+=1;const s=(new Date).toLocaleTimeString(),n=t.map(e=>{if("object"==typeof e&&null!==e)try{const t=JSON.stringify(e,null,2);return t.length>2e3?t.slice(0,2e3)+"... (truncated)":t}catch(t){return"[Circular/Unserializable Object]"}return String(e)}).join(" ");return{id:Y.current,timestamp:s,level:e,message:n,args:t,count:1,firstTimestamp:s,lastTimestamp:s}})(t,s);ee.current.push(n)}catch(n){}finally{Z.current=!1}};return console.log=s("log"),console.warn=s("warn"),console.error=s("error"),console.info=s("info"),()=>{console.log=e.log,console.warn=e.warn,console.error=e.error,console.info=e.info,clearInterval(t)}},[]),(0,C.useEffect)(()=>{const e=e=>{$||X.current&&!X.current.contains(e.target)&&I(!1)};return F&&!$&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[F,$]);const se=t.language.startsWith("en");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{ref:X,className:N("fixed z-[9999]",Q?"bottom-3 right-3":"bottom-6 right-6"),children:[F&&(0,S.jsxs)("div",{className:N("absolute right-0",Q?"bottom-14":"bottom-16",Q?"w-[calc(100vw-24px)] max-w-72":"w-72",Q?"max-h-[calc(100vh-70px)]":"max-h-[calc(100vh-100px)]","overflow-hidden flex flex-col","bg-white rounded-2xl shadow-2xl border border-slate-200","transform transition-all duration-200 origin-bottom-right","animate-fade-in"),children:[(0,S.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)(p,{className:"w-5 h-5 text-orange-500"}),(0,S.jsx)("span",{className:"text-sm font-semibold text-slate-800",children:"Super Panel"})]}),(0,S.jsxs)("div",{className:"flex items-center gap-1",children:[(0,S.jsx)("button",{onClick:()=>{const e=!$;A(e);try{localStorage.setItem(T,String(e))}catch(t){}},className:N("p-1 rounded-lg transition-colors",$?"bg-orange-100 text-orange-500":"hover:bg-slate-100 text-slate-400 hover:text-slate-600"),title:$?se?"Unpin":"取消固定":se?"Pin":"固定",children:(0,S.jsx)(n,{className:N("w-4 h-4",$&&"rotate-45")})}),(0,S.jsx)("button",{onClick:()=>I(!1),className:"p-1 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors",children:(0,S.jsx)(m,{className:"w-4 h-4"})})]})]}),(0,S.jsxs)("div",{className:"px-4 py-2 overflow-y-auto flex-1 min-h-0",children:[(0,S.jsx)(L,{icon:(0,S.jsx)(f,{className:"w-4 h-4"}),label:se?"Test Mode":"测试模式",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-[10px] text-slate-400",children:R?se?"ON":"开":se?"OFF":"关"}),(0,S.jsx)(E,{enabled:R,onChange:D,size:"sm"})]})}),(0,S.jsx)(L,{icon:(0,S.jsx)(a,{className:"w-4 h-4"}),label:e("superPanel.language","语言"),children:(0,S.jsx)("button",{onClick:()=>{const e=t.language.startsWith("en")?"zh":"en";t.changeLanguage(e),P(e)},className:N("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-slate-100 hover:bg-slate-200 text-slate-700"),children:se?"中文":"English"})}),(0,S.jsx)(L,{icon:(0,S.jsx)(i,{className:"w-4 h-4"}),label:e("superPanel.user","用户"),children:s?(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-xs text-slate-500 max-w-[80px] truncate",children:u}),(0,S.jsx)("button",{onClick:()=>{h()},className:N("p-1.5 rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),title:e("auth.logout"),children:(0,S.jsx)(l,{className:"w-4 h-4"})})]}):(0,S.jsxs)("button",{onClick:()=>M(!0),className:N("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:[(0,S.jsx)(x,{className:"w-3.5 h-3.5"}),e("auth.login")]})}),(0,S.jsx)(L,{icon:(0,S.jsx)(c,{className:"w-4 h-4"}),label:se?"Console":"控制台",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsxs)("span",{className:"text-[10px] text-slate-400",children:[_.length," ",se?"logs":"条日志"]}),(0,S.jsx)("button",{onClick:()=>{H([])},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:se?"Clear logs":"清空日志",disabled:0===_.length,children:(0,S.jsx)(d,{className:"w-3 h-3"})}),(0,S.jsx)(E,{enabled:K,onChange:()=>{q(!K)},size:"sm"})]})}),(0,S.jsx)(L,{icon:(0,S.jsx)(g,{className:"w-4 h-4"}),label:se?"Reload":"重新加载",children:(0,S.jsx)("button",{onClick:()=>{window.location.reload()},className:N("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:se?"Reload Page":"重载页面"})}),(0,S.jsx)(L,{icon:(0,S.jsx)(r,{className:"w-4 h-4"}),label:se?"Storage":"存储",children:(0,S.jsx)("button",{onClick:()=>{try{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),s=t>-1?e.substr(0,t).trim():e.trim();document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`}),"indexedDB"in window&&indexedDB.databases().then(e=>{e.forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)})}).catch(()=>{}),alert(se?"All storage cleared! Page will reload.":"所有存储已清空！页面即将重新加载。"),window.location.reload()}catch(s){var e,t;null!==(e=te.current)&&void 0!==e&&null!==(t=e.error)&&void 0!==t&&t.call(e,"Clear storage failed:",s)||console.error("Clear storage failed:",s),alert(se?"Failed to clear storage completely":"清空存储失败")}},className:N("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),children:se?"Clear All":"清空全部"})})]}),K&&(0,S.jsxs)("div",{className:"border-t border-slate-100 flex-shrink-0",children:[(0,S.jsx)("div",{className:"px-4 py-2 bg-slate-50",children:(0,S.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,S.jsx)("span",{className:"text-xs font-medium text-slate-600",children:se?"Console Logs":"控制台日志"}),(0,S.jsx)("span",{className:"text-[10px] text-slate-400",children:se?"Latest 100":"最新 100 条"})]})}),(0,S.jsx)("div",{className:N("overflow-y-auto bg-slate-900 text-green-400 font-mono text-[10px]",Q?"max-h-32":"max-h-48"),children:0===_.length?(0,S.jsx)("div",{className:"p-3 text-slate-500 text-center",children:se?"No logs":"暂无日志"}):_.map(e=>(0,S.jsx)("div",{className:N("px-3 py-1 border-b border-slate-800","error"===e.level&&"text-red-400","warn"===e.level&&"text-yellow-400","info"===e.level&&"text-blue-400","log"===e.level&&"text-green-400"),children:(0,S.jsxs)("div",{className:"flex items-start gap-2",children:[(0,S.jsxs)("span",{className:"text-slate-500 shrink-0",children:["[",e.timestamp,"]"]}),(0,S.jsxs)("span",{className:"text-slate-400 shrink-0 uppercase",children:[e.level,":"]}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("span",{className:"break-all whitespace-pre-wrap",children:e.message}),e.count>1&&(0,S.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,S.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[8px] font-medium bg-orange-500 text-white",children:["× ",e.count]}),(0,S.jsxs)("span",{className:"text-[8px] text-slate-400",children:[e.firstTimestamp," - ",e.lastTimestamp]})]})]})]})},e.id))})]}),(0,S.jsx)("div",{className:"px-4 py-2 bg-slate-50 rounded-b-2xl",children:(0,S.jsx)("p",{className:"text-[10px] text-slate-400 text-center",children:"Test Environment Only"})})]}),(0,S.jsx)("button",{onClick:()=>I(!F),className:N("rounded-full shadow-lg","flex items-center justify-center","transition-all duration-200 transform","hover:scale-110 active:scale-95",Q?"w-11 h-11":"w-14 h-14",F?"bg-orange-500 text-white rotate-90":"bg-white text-orange-500 border border-slate-200"),"aria-label":"Open Super Panel",children:(0,S.jsx)(p,{className:N(Q?"w-5 h-5":"w-6 h-6")})})]}),(0,S.jsx)(y,{isOpen:J,onClose:()=>{M(!1),U(null)},onLogin:async(t,s)=>{B(!0),U(null);try{await w.login({username:t,password:s}),M(!1)}catch(l){var n,a;null!==(n=te.current)&&void 0!==n&&null!==(a=n.error)&&void 0!==a&&a.call(n,"Login failed:",l)||console.error("Login failed:",l),U(l instanceof Error?l.message:e("auth.loginFailed"))}finally{B(!1)}},isLoading:W,error:G})]})}return{setters:[function(e){s=e.At},function(e){},function(e){n=e.C,a=e.L,l=e.O,r=e.W,o=e.at,i=e.d,c=e.g,d=e.h,x=e.k,m=e.l,u=e.t,h=e.ut,g=e.x,p=e.y,f=e.z},function(e){b=e.a,j=e.i,w=e.n,e.o,v=e.r,N=e.s,y=e.t}],execute:function(){C=s(),S=h(),k=100,T="super_panel_pinned",e("SuperPanel",u(O))}}});