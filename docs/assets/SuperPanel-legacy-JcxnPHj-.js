System.register(["./vendor-legacy-DQMqWTf9.js","./vendor-charts-legacy-eJ-GhBIT.js","./vendor-react-legacy-DWsWXy8K.js","./index-legacy-D1H6Qx_T.js"],function(e,t){var s,n,l,a,r,o,i,c,d,x,m,u,h,g,p,f,b,j,v,w,N,y,C,k,S,T,E;function L({enabled:e,onChange:t,size:s="md"}){const n="sm"===s?"h-5 w-9":"h-6 w-11",l="sm"===s?"h-3 w-3":"h-4 w-4",a="sm"===s?e?"translate-x-5":"translate-x-1":e?"translate-x-6":"translate-x-1";return(0,S.jsx)("button",{onClick:()=>t(!e),className:y("relative inline-flex items-center rounded-full transition-colors","focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",n,e?"bg-orange-500":"bg-slate-300"),role:"switch","aria-checked":e,children:(0,S.jsx)("span",{className:y("inline-block transform rounded-full bg-white transition-transform",l,a)})})}function z({icon:e,label:t,children:s}){return(0,S.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-b-0",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600",children:e}),(0,S.jsx)("span",{className:"text-sm font-medium text-slate-700",children:t})]}),(0,S.jsx)("div",{className:"flex items-center gap-2",children:s})]})}function O(){try{return"true"===localStorage.getItem(E)}catch(e){return!1}}function P(){const{t:e,i18n:t}=i(),{isAuthenticated:s,username:h,logout:g}=N(),{language:P,setLanguage:R}=v(),{isTestEnv:D,setIsTestEnv:F}=j(),[I,$]=(0,k.useState)(()=>O()),[J,M]=(0,k.useState)(()=>O()),[W,A]=(0,k.useState)(!1),[B,G]=(0,k.useState)(!1),[U,_]=(0,k.useState)(null),[H,K]=(0,k.useState)([]),[Y,q]=(0,k.useState)(!1),[Q,V]=(0,k.useState)(!1),X=(0,k.useRef)(null),Z=(0,k.useRef)(0),ee=(0,k.useRef)(!1),te=(0,k.useRef)([]),se=(0,k.useRef)(null);(0,k.useEffect)(()=>{const e=()=>{V(window.innerWidth<360||window.innerHeight<500)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,k.useEffect)(()=>{const e={log:console.log,warn:console.warn,error:console.error,info:console.info};se.current=e;const t=setInterval(()=>{0!==te.current.length&&K(e=>{let t=[...e];const s=[...te.current];return te.current=[],s.forEach(e=>{const s=t[t.length-1];s&&s.level===e.level&&s.message===e.message?t[t.length-1]={...s,count:s.count+1,lastTimestamp:e.timestamp,timestamp:e.timestamp}:t.push(e)}),t.length>T&&(t=t.slice(-T)),t})},500),s=t=>(...s)=>{if(e[t].apply(console,s),!ee.current)try{ee.current=!0;const e=s.join(" ");if(e.includes("i18next::translator: missingKey"))return;if(e.includes("SuperPanel")&&e.includes("translation"))return;const n=((e,t)=>{Z.current+=1;const s=(new Date).toLocaleTimeString(),n=t.map(e=>{if("object"==typeof e&&null!==e)try{const t=JSON.stringify(e,null,2);return t.length>2e3?t.slice(0,2e3)+"... (truncated)":t}catch(t){return"[Circular/Unserializable Object]"}return String(e)}).join(" ");return{id:Z.current,timestamp:s,level:e,message:n,args:t,count:1,firstTimestamp:s,lastTimestamp:s}})(t,s);te.current.push(n)}catch(n){}finally{ee.current=!1}};return console.log=s("log"),console.warn=s("warn"),console.error=s("error"),console.info=s("info"),()=>{console.log=e.log,console.warn=e.warn,console.error=e.error,console.info=e.info,clearInterval(t)}},[]),(0,k.useEffect)(()=>{const e=e=>{J||X.current&&!X.current.contains(e.target)&&$(!1)};return I&&!J&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[I,J]);const ne=t.language.startsWith("en");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{ref:X,className:y("fixed z-[9999]",Q?"bottom-3 right-3":"bottom-6 right-6"),children:[I&&(0,S.jsxs)("div",{className:y("absolute right-0",Q?"bottom-14":"bottom-16",Q?"w-[calc(100vw-24px)] max-w-72":"w-72",Q?"max-h-[calc(100vh-70px)]":"max-h-[calc(100vh-100px)]","overflow-hidden flex flex-col","bg-white rounded-2xl shadow-2xl border border-slate-200","transform transition-all duration-200 origin-bottom-right","animate-fade-in"),children:[(0,S.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)(f,{className:"w-5 h-5 text-orange-500"}),(0,S.jsx)("span",{className:"text-sm font-semibold text-slate-800",children:"Super Panel"})]}),(0,S.jsxs)("div",{className:"flex items-center gap-1",children:[(0,S.jsx)("button",{onClick:()=>{const e=!J;M(e);try{localStorage.setItem(E,String(e))}catch(t){}},className:y("p-1 rounded-lg transition-colors",J?"bg-orange-100 text-orange-500":"hover:bg-slate-100 text-slate-400 hover:text-slate-600"),title:J?ne?"Unpin":"取消固定":ne?"Pin":"固定",children:(0,S.jsx)(n,{className:y("w-4 h-4",J&&"rotate-45")})}),(0,S.jsx)("button",{onClick:()=>$(!1),className:"p-1 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors",children:(0,S.jsx)(u,{className:"w-4 h-4"})})]})]}),(0,S.jsxs)("div",{className:"px-4 py-2 overflow-y-auto flex-1 min-h-0",children:[(0,S.jsx)(z,{icon:(0,S.jsx)(b,{className:"w-4 h-4"}),label:ne?"Test Mode":"测试模式",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-[10px] text-slate-400",children:D?ne?"ON":"开":ne?"OFF":"关"}),(0,S.jsx)(L,{enabled:D,onChange:F,size:"sm"})]})}),(0,S.jsx)(z,{icon:(0,S.jsx)(l,{className:"w-4 h-4"}),label:e("superPanel.language","语言"),children:(0,S.jsx)("button",{onClick:()=>{const e=t.language.startsWith("en")?"zh":"en";t.changeLanguage(e),R(e)},className:y("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-slate-100 hover:bg-slate-200 text-slate-700"),children:ne?"中文":"English"})}),(0,S.jsx)(z,{icon:(0,S.jsx)(c,{className:"w-4 h-4"}),label:e("superPanel.user","用户"),children:s?(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-xs text-slate-500 max-w-[80px] truncate",children:h}),(0,S.jsx)("button",{onClick:()=>{g()},className:y("p-1.5 rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),title:e("auth.logout"),children:(0,S.jsx)(a,{className:"w-4 h-4"})})]}):(0,S.jsxs)("button",{onClick:()=>A(!0),className:y("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:[(0,S.jsx)(m,{className:"w-3.5 h-3.5"}),e("auth.login")]})}),(0,S.jsx)(z,{icon:(0,S.jsx)(d,{className:"w-4 h-4"}),label:ne?"Console":"控制台",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsxs)("span",{className:"text-[10px] text-slate-400",children:[H.length," ",ne?"logs":"条日志"]}),(0,S.jsx)("button",{onClick:()=>{K([])},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:ne?"Clear logs":"清空日志",disabled:0===H.length,children:(0,S.jsx)(x,{className:"w-3 h-3"})}),(0,S.jsx)(L,{enabled:Y,onChange:()=>{q(!Y)},size:"sm"})]})}),(0,S.jsx)(z,{icon:(0,S.jsx)(p,{className:"w-4 h-4"}),label:ne?"Reload":"重新加载",children:(0,S.jsx)("button",{onClick:()=>{window.location.reload()},className:y("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:ne?"Reload Page":"重载页面"})}),(0,S.jsx)(z,{icon:(0,S.jsx)(r,{className:"w-4 h-4"}),label:ne?"Storage":"存储",children:(0,S.jsx)("button",{onClick:()=>{try{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),s=t>-1?e.substr(0,t).trim():e.trim();document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`}),"indexedDB"in window&&indexedDB.databases().then(e=>{e.forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)})}).catch(()=>{}),alert(ne?"All storage cleared! Page will reload.":"所有存储已清空！页面即将重新加载。"),window.location.reload()}catch(s){var e,t;null!==(e=se.current)&&void 0!==e&&null!==(t=e.error)&&void 0!==t&&t.call(e,"Clear storage failed:",s)||console.error("Clear storage failed:",s),alert(ne?"Failed to clear storage completely":"清空存储失败")}},className:y("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),children:ne?"Clear All":"清空全部"})})]}),Y&&(0,S.jsxs)("div",{className:"border-t border-slate-100 flex-shrink-0",children:[(0,S.jsx)("div",{className:"px-4 py-2 bg-slate-50",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsx)("span",{className:"text-xs font-medium text-slate-600",children:ne?"Console Logs":"控制台日志"}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-[10px] text-slate-400",children:ne?"Latest 100":"最新 100 条"}),(0,S.jsx)("button",{onClick:()=>q(!1),className:"p-1 rounded hover:bg-slate-200 text-slate-400 hover:text-slate-600 transition-colors",title:ne?"Collapse console":"收起控制台",children:(0,S.jsx)(o,{className:"w-3.5 h-3.5"})})]})]})}),(0,S.jsx)("div",{className:y("overflow-y-auto bg-slate-900 text-green-400 font-mono text-[10px]",Q?"max-h-32":"max-h-48"),children:0===H.length?(0,S.jsx)("div",{className:"p-3 text-slate-500 text-center",children:ne?"No logs":"暂无日志"}):H.map(e=>(0,S.jsx)("div",{className:y("px-3 py-1 border-b border-slate-800","error"===e.level&&"text-red-400","warn"===e.level&&"text-yellow-400","info"===e.level&&"text-blue-400","log"===e.level&&"text-green-400"),children:(0,S.jsxs)("div",{className:"flex items-start gap-2",children:[(0,S.jsxs)("span",{className:"text-slate-500 shrink-0",children:["[",e.timestamp,"]"]}),(0,S.jsxs)("span",{className:"text-slate-400 shrink-0 uppercase",children:[e.level,":"]}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("span",{className:"break-all whitespace-pre-wrap",children:e.message}),e.count>1&&(0,S.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,S.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[8px] font-medium bg-orange-500 text-white",children:["× ",e.count]}),(0,S.jsxs)("span",{className:"text-[8px] text-slate-400",children:[e.firstTimestamp," - ",e.lastTimestamp]})]})]})]})},e.id))})]}),(0,S.jsx)("div",{className:"px-4 py-2 bg-slate-50 rounded-b-2xl",children:(0,S.jsx)("p",{className:"text-[10px] text-slate-400 text-center",children:"Test Environment Only"})})]}),(0,S.jsx)("button",{onClick:()=>$(!I),className:y("rounded-full shadow-lg","flex items-center justify-center","transition-all duration-200 transform","hover:scale-110 active:scale-95",Q?"w-11 h-11":"w-14 h-14",I?"bg-orange-500 text-white rotate-90":"bg-white text-orange-500 border border-slate-200"),"aria-label":"Open Super Panel",children:(0,S.jsx)(f,{className:y(Q?"w-5 h-5":"w-6 h-6")})})]}),(0,S.jsx)(C,{isOpen:W,onClose:()=>{A(!1),_(null)},onLogin:async(t,s)=>{G(!0),_(null);try{await w.login({username:t,password:s}),A(!1)}catch(a){var n,l;null!==(n=se.current)&&void 0!==n&&null!==(l=n.error)&&void 0!==l&&l.call(n,"Login failed:",a)||console.error("Login failed:",a),_(a instanceof Error?a.message:e("auth.loginFailed"))}finally{G(!1)}},isLoading:B,error:U})]})}return{setters:[function(e){s=e.jt},function(e){},function(e){n=e.C,l=e.L,a=e.O,r=e.W,o=e.Y,i=e.at,c=e.d,d=e.g,x=e.h,m=e.k,u=e.l,h=e.t,g=e.ut,p=e.x,f=e.y,b=e.z},function(e){j=e.a,v=e.i,w=e.n,e.o,N=e.r,y=e.s,C=e.t}],execute:function(){k=s(),S=g(),T=100,E="super_panel_pinned",e("SuperPanel",h(P))}}});