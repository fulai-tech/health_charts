import{rt as e}from"./vendor-DxyDeVV0.js";import"./vendor-charts-B__IZl80.js";import"./vendor-query-BzUZE9-d.js";import{n as t}from"./vendor-i18n-BSzAmJZ7.js";import{t as n}from"./theme-XEO8amRP.js";import{a as r,i,n as a,r as o,t as s}from"./card-DR_iUne-.js";import"./client-CzSh7g6B.js";import"./DistributionCard-D_3pQ4Tr.js";import"./useChartAnimation-DiAB65-P.js";import"./TrendLineChart-B7CWIoTy.js";import"./WeeklyOverviewCard-DICJkH00.js";import"./usePrefetchData-Dtc8Q6b7.js";import{t as c}from"./api-DDK7QrcU.js";import{n as l,r as u}from"./MetricSummaryCard-CquAHZFy.js";var d=e();function f({showCard:e=!0,height:r=200,className:u}){let{t:f}=t(),{data:m,isLoading:h,isError:g,refetch:_}=c();if(h)return(0,d.jsx)(p,{showCard:e,className:u,children:(0,d.jsxs)(`div`,{className:`animate-pulse`,children:[(0,d.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,d.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,d.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(g||!m)return(0,d.jsx)(p,{showCard:e,className:u,children:(0,d.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,d.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:f(`common.error`)}),(0,d.jsx)(`button`,{onClick:()=>_(),className:`px-4 py-2 text-sm font-medium text-white bg-amber-400 rounded-lg hover:opacity-90 transition-opacity`,children:f(`common.retry`)})]})});let v=m.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:[e.min,e.max],date:e.date})),y=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,d.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,d.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${n.glucose.primary}40`}}),(0,d.jsx)(`span`,{className:`text-xs text-slate-500`,children:f(`page.glucose.rangeToday`)})]}),(0,d.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,d.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:n.glucose.primary}}),(0,d.jsx)(`span`,{className:`text-xs text-slate-500`,children:f(`common.average`)})]})]}),(0,d.jsx)(l,{data:v,type:`mixed`,color:n.glucose.primary,height:r,yDomain:[m.yAxisRange.min,m.yAxisRange.max]})]});return e?(0,d.jsxs)(s,{className:u,children:[(0,d.jsx)(o,{children:(0,d.jsx)(i,{children:f(`page.glucose.trendTitle`)})}),(0,d.jsx)(a,{children:y})]}):(0,d.jsx)(`div`,{className:u,children:y})}function p({showCard:e,className:t,children:n}){return e?(0,d.jsx)(s,{className:t,children:(0,d.jsx)(a,{className:`py-4`,children:n})}):(0,d.jsx)(`div`,{className:r(`p-4`,t),children:n})}function m(){return(0,d.jsx)(u,{children:(0,d.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,d.jsx)(f,{showCard:!1,height:200})})})}export{m as GlucoseTrendWidgetPage};