var e=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};function t(e,t){if(t.has(e))throw TypeError(`Cannot initialize the same private elements twice on an object`)}function n(e,n,r){t(e,n),n.set(e,r)}function r(e,t,n){if(typeof e==`function`?e===t:e.has(t))return arguments.length<3?t:n;throw TypeError(`Private element is not present on this object`)}function i(e,t){return e.get(r(e,t))}function a(e,t,n){return e.set(r(e,t),n),n}var o,s,c={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},l=new(o=new WeakMap,s=new WeakMap,class{constructor(){n(this,o,c),n(this,s,!1)}setTimeoutProvider(e){a(o,this,e)}setTimeout(e,t){return i(o,this).setTimeout(e,t)}clearTimeout(e){i(o,this).clearTimeout(e)}setInterval(e,t){return i(o,this).setInterval(e,t)}clearInterval(e){i(o,this).clearInterval(e)}});function u(e){setTimeout(e,0)}var d=typeof window>`u`||`Deno`in globalThis;function f(){}function p(e,t){return typeof e==`function`?e(t):e}function m(e){return typeof e==`number`&&e>=0&&e!==1/0}function h(e,t){return Math.max(e+(t||0)-Date.now(),0)}function g(e,t){return typeof e==`function`?e(t):e}function _(e,t){return typeof e==`function`?e(t):e}function v(e,t){let{type:n=`all`,exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:s}=e;if(o){if(r){if(t.queryHash!==b(o,t.options))return!1}else if(!S(t.queryKey,o))return!1}if(n!==`all`){let e=t.isActive();if(n===`active`&&!e||n===`inactive`&&e)return!1}return!(typeof s==`boolean`&&t.isStale()!==s||i&&i!==t.state.fetchStatus||a&&!a(t))}function y(e,t){let{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(x(t.options.mutationKey)!==x(a))return!1}else if(!S(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function b(e,t){return((t==null?void 0:t.queryKeyHashFn)||x)(e)}function x(e){return JSON.stringify(e,(e,t)=>re(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function S(e,t){return e===t?!0:typeof e==typeof t&&e&&t&&typeof e==`object`&&typeof t==`object`?Object.keys(t).every(n=>S(e[n],t[n])):!1}var ee=Object.prototype.hasOwnProperty;function te(e,t){if(e===t)return e;let n=ne(e)&&ne(t);if(!n&&!(re(e)&&re(t)))return t;let r=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),a=i.length,o=n?Array(a):{},s=0;for(let c=0;c<a;c++){let a=n?c:i[c],l=e[a],u=t[a];if(l===u){o[a]=l,(n?c<r:ee.call(e,a))&&s++;continue}if(l===null||u===null||typeof l!=`object`||typeof u!=`object`){o[a]=u;continue}let d=te(l,u);o[a]=d,d===l&&s++}return r===a&&s===r?e:o}function C(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}function ne(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function re(e){if(!ie(e))return!1;let t=e.constructor;if(t===void 0)return!0;let n=t.prototype;return!(!ie(n)||!n.hasOwnProperty(`isPrototypeOf`)||Object.getPrototypeOf(e)!==Object.prototype)}function ie(e){return Object.prototype.toString.call(e)===`[object Object]`}function ae(e){return new Promise(t=>{l.setTimeout(t,e)})}function oe(e,t,n){return typeof n.structuralSharing==`function`?n.structuralSharing(e,t):n.structuralSharing===!1?t:te(e,t)}function se(e){return e}function ce(e,t,n=0){let r=[...e,t];return n&&r.length>n?r.slice(1):r}function le(e,t,n=0){let r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ue=Symbol();function de(e,t){return!e.queryFn&&t!=null&&t.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===ue?()=>Promise.reject(Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function fe(e,t){return typeof e==`function`?e(...t):!!e}var pe,w,me,he=new(pe=new WeakMap,w=new WeakMap,me=new WeakMap,class extends e{constructor(){super(),n(this,pe,void 0),n(this,w,void 0),n(this,me,void 0),a(me,this,e=>{if(!d&&window.addEventListener){let t=()=>e();return window.addEventListener(`visibilitychange`,t,!1),()=>{window.removeEventListener(`visibilitychange`,t)}}})}onSubscribe(){i(w,this)||this.setEventListener(i(me,this))}onUnsubscribe(){if(!this.hasListeners()){var e;(e=i(w,this))==null||e.call(this),a(w,this,void 0)}}setEventListener(e){var t;a(me,this,e),(t=i(w,this))==null||t.call(this),a(w,this,e(e=>{typeof e==`boolean`?this.setFocused(e):this.onFocus()}))}setFocused(e){i(pe,this)!==e&&(a(pe,this,e),this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof i(pe,this)==`boolean`?i(pe,this):((e=globalThis.document)==null?void 0:e.visibilityState)!==`hidden`}});function ge(){let e,t,n=new Promise((n,r)=>{e=n,t=r});n.status=`pending`,n.catch(()=>{});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.resolve=t=>{r({status:`fulfilled`,value:t}),e(t)},n.reject=e=>{r({status:`rejected`,reason:e}),t(e)},n}var _e=u;function ve(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=_e,a=r=>{t?e.push(r):i(()=>{n(r)})},o=()=>{let t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{t--,t||o()}return n},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}var T=ve(),ye,E,be,xe=new(ye=new WeakMap,E=new WeakMap,be=new WeakMap,class extends e{constructor(){super(),n(this,ye,!0),n(this,E,void 0),n(this,be,void 0),a(be,this,e=>{if(!d&&window.addEventListener){let t=()=>e(!0),n=()=>e(!1);return window.addEventListener(`online`,t,!1),window.addEventListener(`offline`,n,!1),()=>{window.removeEventListener(`online`,t),window.removeEventListener(`offline`,n)}}})}onSubscribe(){i(E,this)||this.setEventListener(i(be,this))}onUnsubscribe(){if(!this.hasListeners()){var e;(e=i(E,this))==null||e.call(this),a(E,this,void 0)}}setEventListener(e){var t;a(be,this,e),(t=i(E,this))==null||t.call(this),a(E,this,e(this.setOnline.bind(this)))}setOnline(e){i(ye,this)!==e&&(a(ye,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return i(ye,this)}});function Se(e){return Math.min(1e3*2**e,3e4)}function Ce(e){return(e==null?`online`:e)===`online`?xe.isOnline():!0}var we=class extends Error{constructor(e){super(`CancelledError`),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Te(e){let t=!1,n=0,r,i=ge(),a=()=>i.status!==`pending`,o=t=>{if(!a()){var n;let r=new we(t);p(r),(n=e.onCancel)==null||n.call(e,r)}},s=()=>{t=!0},c=()=>{t=!1},l=()=>he.isFocused()&&(e.networkMode===`always`||xe.isOnline())&&e.canRun(),u=()=>Ce(e.networkMode)&&e.canRun(),f=e=>{a()||(r==null||r(),i.resolve(e))},p=e=>{a()||(r==null||r(),i.reject(e))},m=()=>new Promise(t=>{var n;r=e=>{(a()||l())&&t(e)},(n=e.onPause)==null||n.call(e)}).then(()=>{if(r=void 0,!a()){var t;(t=e.onContinue)==null||t.call(e)}}),h=()=>{if(a())return;let r,i=n===0?e.initialPromise:void 0;try{r=i==null?e.fn():i}catch(e){r=Promise.reject(e)}Promise.resolve(r).then(f).catch(r=>{var i,o,s;if(a())return;let c=(i=e.retry)==null?d?0:3:i,u=(o=e.retryDelay)==null?Se:o,f=typeof u==`function`?u(n,r):u,g=c===!0||typeof c==`number`&&n<c||typeof c==`function`&&c(n,r);if(t||!g){p(r);return}n++,(s=e.onFail)==null||s.call(e,n,r),ae(f).then(()=>l()?void 0:m()).then(()=>{t?p(r):h()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:s,continueRetry:c,canStart:u,start:()=>(u()?h():m().then(h),i)}}var D,Ee=(D=new WeakMap,class{constructor(){n(this,D,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),m(this.gcTime)&&a(D,this,l.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e==null?d?1/0:300*1e3:e)}clearGcTimeout(){i(D,this)&&(l.clearTimeout(i(D,this)),a(D,this,void 0))}});function De(e,n){t(e,n),n.add(e)}var O,Oe,k,A,j,ke,M,N,Ae=(O=new WeakMap,Oe=new WeakMap,k=new WeakMap,A=new WeakMap,j=new WeakMap,ke=new WeakMap,M=new WeakMap,N=new WeakSet,class extends Ee{constructor(e){var t;super(),De(this,N),n(this,O,void 0),n(this,Oe,void 0),n(this,k,void 0),n(this,A,void 0),n(this,j,void 0),n(this,ke,void 0),n(this,M,void 0),a(M,this,!1),a(ke,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],a(A,this,e.client),a(k,this,i(A,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,a(O,this,Ne(this.options)),this.state=(t=e.state)==null?i(O,this):t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=i(j,this))==null?void 0:e.promise}setOptions(e){if(this.options={...i(ke,this),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){let e=Ne(this.options);e.data!==void 0&&(this.setState(Me(e.data,e.dataUpdatedAt)),a(O,this,e))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus===`idle`&&i(k,this).remove(this)}setData(e,t){let n=oe(this.state.data,e,this.options);return r(N,this,P).call(this,{data:n,type:`success`,dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){r(N,this,P).call(this,{type:`setState`,state:e,setStateOptions:t})}cancel(e){var t,n;let r=(t=i(j,this))==null?void 0:t.promise;return(n=i(j,this))==null||n.cancel(e),r?r.then(f).catch(f):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(O,this))}isActive(){return this.observers.some(e=>_(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ue||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>g(e.options.staleTime,this)===`static`):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e===`static`?!1:this.state.isInvalidated?!0:!h(this.state.dataUpdatedAt,e)}onFocus(){var e;let t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=i(j,this))==null||e.continue()}onOnline(){var e;let t=this.observers.find(e=>e.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=i(j,this))==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),i(k,this).notify({type:`observerAdded`,query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(i(j,this)&&(i(M,this)?i(j,this).cancel({revert:!0}):i(j,this).cancelRetry()),this.scheduleGc()),i(k,this).notify({type:`observerRemoved`,query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||r(N,this,P).call(this,{type:`invalidate`})}async fetch(e,t){var n,o,s;if(this.state.fetchStatus!==`idle`&&((n=i(j,this))==null?void 0:n.status())!==`rejected`){if(this.state.data!==void 0&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(i(j,this))return i(j,this).continueRetry(),i(j,this).promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let c=new AbortController,l=e=>{Object.defineProperty(e,`signal`,{enumerable:!0,get:()=>(a(M,this,!0),c.signal)})},u=()=>{let e=de(this.options,t),n=(()=>{let e={client:i(A,this),queryKey:this.queryKey,meta:this.meta};return l(e),e})();return a(M,this,!1),this.options.persister?this.options.persister(e,n,this):e(n)},d=(()=>{let e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:i(A,this),state:this.state,fetchFn:u};return l(e),e})();if((o=this.options.behavior)==null||o.onFetch(d,this),a(Oe,this,this.state),this.state.fetchStatus===`idle`||this.state.fetchMeta!==((s=d.fetchOptions)==null?void 0:s.meta)){var f;r(N,this,P).call(this,{type:`fetch`,meta:(f=d.fetchOptions)==null?void 0:f.meta})}a(j,this,Te({initialPromise:t==null?void 0:t.initialPromise,fn:d.fetchFn,onCancel:e=>{e instanceof we&&e.revert&&this.setState({...i(Oe,this),fetchStatus:`idle`}),c.abort()},onFail:(e,t)=>{r(N,this,P).call(this,{type:`failed`,failureCount:e,error:t})},onPause:()=>{r(N,this,P).call(this,{type:`pause`})},onContinue:()=>{r(N,this,P).call(this,{type:`continue`})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{var p,m,h,g;let e=await i(j,this).start();if(e===void 0)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),(p=(m=i(k,this).config).onSuccess)==null||p.call(m,e,this),(h=(g=i(k,this).config).onSettled)==null||h.call(g,e,this.state.error,this),e}catch(e){var _,v,y,b;if(e instanceof we){if(e.silent)return i(j,this).promise;if(e.revert){if(this.state.data===void 0)throw e;return this.state.data}}throw r(N,this,P).call(this,{type:`error`,error:e}),(_=(v=i(k,this).config).onError)==null||_.call(v,e,this),(y=(b=i(k,this).config).onSettled)==null||y.call(b,this.state.data,e,this),e}finally{this.scheduleGc()}}});function P(e){this.state=(t=>{switch(e.type){case`failed`:return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case`pause`:return{...t,fetchStatus:`paused`};case`continue`:return{...t,fetchStatus:`fetching`};case`fetch`:var n;return{...t,...je(t.data,this.options),fetchMeta:(n=e.meta)==null?null:n};case`success`:let r={...t,...Me(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:`idle`,fetchFailureCount:0,fetchFailureReason:null}};return a(Oe,this,e.manual?r:void 0),r;case`error`:let i=e.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:`idle`,status:`error`};case`invalidate`:return{...t,isInvalidated:!0};case`setState`:return{...t,...e.state}}})(this.state),T.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),i(k,this).notify({query:this,type:`updated`,action:e})})}function je(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ce(t.networkMode)?`fetching`:`paused`,...e===void 0&&{error:null,status:`pending`}}}function Me(e,t){return{data:e,dataUpdatedAt:t==null?Date.now():t,error:null,isInvalidated:!1,status:`success`}}function Ne(e){let t=typeof e.initialData==`function`?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt==`function`?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r==null?Date.now():r:0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?`success`:`pending`,fetchStatus:`idle`}}var F,I,Pe,L,R,Fe,z,B,Ie,Le,Re,ze,Be,V,Ve,H,He=(F=new WeakMap,I=new WeakMap,Pe=new WeakMap,L=new WeakMap,R=new WeakMap,Fe=new WeakMap,z=new WeakMap,B=new WeakMap,Ie=new WeakMap,Le=new WeakMap,Re=new WeakMap,ze=new WeakMap,Be=new WeakMap,V=new WeakMap,Ve=new WeakMap,H=new WeakSet,class extends e{constructor(e,t){super(),De(this,H),n(this,F,void 0),n(this,I,void 0),n(this,Pe,void 0),n(this,L,void 0),n(this,R,void 0),n(this,Fe,void 0),n(this,z,void 0),n(this,B,void 0),n(this,Ie,void 0),n(this,Le,void 0),n(this,Re,void 0),n(this,ze,void 0),n(this,Be,void 0),n(this,V,void 0),n(this,Ve,new Set),this.options=t,a(F,this,e),a(B,this,null),a(z,this,ge()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(I,this).addObserver(this),$e(i(I,this),this.options)?r(H,this,Ue).call(this):this.updateResult(),r(H,this,qe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return et(i(I,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return et(i(I,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,r(H,this,Je).call(this),r(H,this,Ye).call(this),i(I,this).removeObserver(this)}setOptions(e){let t=this.options,n=i(I,this);if(this.options=i(F,this).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!=`boolean`&&typeof this.options.enabled!=`function`&&typeof _(this.options.enabled,i(I,this))!=`boolean`)throw Error(`Expected enabled to be a boolean or a callback that returns a boolean`);r(H,this,Xe).call(this),i(I,this).setOptions(this.options),t._defaulted&&!C(this.options,t)&&i(F,this).getQueryCache().notify({type:`observerOptionsUpdated`,query:i(I,this),observer:this});let a=this.hasListeners();a&&tt(i(I,this),n,this.options,t)&&r(H,this,Ue).call(this),this.updateResult(),a&&(i(I,this)!==n||_(this.options.enabled,i(I,this))!==_(t.enabled,i(I,this))||g(this.options.staleTime,i(I,this))!==g(t.staleTime,i(I,this)))&&r(H,this,We).call(this);let o=r(H,this,Ge).call(this);a&&(i(I,this)!==n||_(this.options.enabled,i(I,this))!==_(t.enabled,i(I,this))||o!==i(V,this))&&r(H,this,Ke).call(this,o)}getOptimisticResult(e){let t=i(F,this).getQueryCache().build(i(F,this),e),n=this.createResult(t,e);return rt(this,n)&&(a(L,this,n),a(Fe,this,this.options),a(R,this,i(I,this).state)),n}getCurrentResult(){return i(L,this)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),t==null||t(n),n===`promise`&&(this.trackProp(`data`),!this.options.experimental_prefetchInRender&&i(z,this).status===`pending`&&i(z,this).reject(Error(`experimental_prefetchInRender feature flag is not enabled`))),Reflect.get(e,n))})}trackProp(e){i(Ve,this).add(e)}getCurrentQuery(){return i(I,this)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=i(F,this).defaultQueryOptions(e),n=i(F,this).getQueryCache().build(i(F,this),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return r(H,this,Ue).call(this,{...e,cancelRefetch:(t=e.cancelRefetch)==null?!0:t}).then(()=>(this.updateResult(),i(L,this)))}createResult(e,t){let n=i(I,this),r=this.options,o=i(L,this),s=i(R,this),c=i(Fe,this),l=e===n?i(Pe,this):e.state,{state:u}=e,d={...u},f=!1,p;if(t._optimisticResults){let i=this.hasListeners(),a=!i&&$e(e,t),o=i&&tt(e,n,t,r);(a||o)&&(d={...d,...je(u.data,e.options)}),t._optimisticResults===`isRestoring`&&(d.fetchStatus=`idle`)}let{error:m,errorUpdatedAt:h,status:g}=d;p=d.data;let v=!1;if(t.placeholderData!==void 0&&p===void 0&&g===`pending`){let e;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(c==null?void 0:c.placeholderData))e=o.data,v=!0;else{var y;e=typeof t.placeholderData==`function`?t.placeholderData((y=i(Re,this))==null?void 0:y.state.data,i(Re,this)):t.placeholderData}e!==void 0&&(g=`success`,p=oe(o==null?void 0:o.data,e,t),f=!0)}if(t.select&&p!==void 0&&!v)if(o&&p===(s==null?void 0:s.data)&&t.select===i(Ie,this))p=i(Le,this);else try{a(Ie,this,t.select),p=t.select(p),p=oe(o==null?void 0:o.data,p,t),a(Le,this,p),a(B,this,null)}catch(e){a(B,this,e)}i(B,this)&&(m=i(B,this),p=i(Le,this),h=Date.now(),g=`error`);let b=d.fetchStatus===`fetching`,x=g===`pending`,S=g===`error`,ee=x&&b,te=p!==void 0,C={status:g,fetchStatus:d.fetchStatus,isPending:x,isSuccess:g===`success`,isError:S,isInitialLoading:ee,isLoading:ee,data:p,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:h,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!x,isLoadingError:S&&!te,isPaused:d.fetchStatus===`paused`,isPlaceholderData:f,isRefetchError:S&&te,isStale:nt(e,t),refetch:this.refetch,promise:i(z,this),isEnabled:_(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){let t=e=>{C.status===`error`?e.reject(C.error):C.data!==void 0&&e.resolve(C.data)},r=()=>{t(a(z,this,C.promise=ge()))},o=i(z,this);switch(o.status){case`pending`:e.queryHash===n.queryHash&&t(o);break;case`fulfilled`:(C.status===`error`||C.data!==o.value)&&r();break;case`rejected`:(C.status!==`error`||C.error!==o.reason)&&r();break}}return C}updateResult(){let e=i(L,this),t=this.createResult(i(I,this),this.options);a(R,this,i(I,this).state),a(Fe,this,this.options),i(R,this).data!==void 0&&a(Re,this,i(I,this)),!C(t,e)&&(a(L,this,t),r(H,this,Ze).call(this,{listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,n=typeof t==`function`?t():t;if(n===`all`||!n&&!i(Ve,this).size)return!0;let r=new Set(n==null?i(Ve,this):n);return this.options.throwOnError&&r.add(`error`),Object.keys(i(L,this)).some(t=>{let n=t;return i(L,this)[n]!==e[n]&&r.has(n)})})()}))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&r(H,this,qe).call(this)}});function Ue(e){r(H,this,Xe).call(this);let t=i(I,this).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(f)),t}function We(){r(H,this,Je).call(this);let e=g(this.options.staleTime,i(I,this));if(d||i(L,this).isStale||!m(e))return;let t=h(i(L,this).dataUpdatedAt,e)+1;a(ze,this,l.setTimeout(()=>{i(L,this).isStale||this.updateResult()},t))}function Ge(){var e;return(e=typeof this.options.refetchInterval==`function`?this.options.refetchInterval(i(I,this)):this.options.refetchInterval)==null?!1:e}function Ke(e){r(H,this,Ye).call(this),a(V,this,e),!(d||_(this.options.enabled,i(I,this))===!1||!m(i(V,this))||i(V,this)===0)&&a(Be,this,l.setInterval(()=>{(this.options.refetchIntervalInBackground||he.isFocused())&&r(H,this,Ue).call(this)},i(V,this)))}function qe(){r(H,this,We).call(this),r(H,this,Ke).call(this,r(H,this,Ge).call(this))}function Je(){i(ze,this)&&(l.clearTimeout(i(ze,this)),a(ze,this,void 0))}function Ye(){i(Be,this)&&(l.clearInterval(i(Be,this)),a(Be,this,void 0))}function Xe(){let e=i(F,this).getQueryCache().build(i(F,this),this.options);if(e===i(I,this))return;let t=i(I,this);a(I,this,e),a(Pe,this,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}function Ze(e){T.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(i(L,this))}),i(F,this).getQueryCache().notify({query:i(I,this),type:`observerResultsUpdated`})})}function Qe(e,t){return _(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status===`error`&&t.retryOnMount===!1)}function $e(e,t){return Qe(e,t)||e.state.data!==void 0&&et(e,t,t.refetchOnMount)}function et(e,t,n){if(_(t.enabled,e)!==!1&&g(t.staleTime,e)!==`static`){let r=typeof n==`function`?n(e):n;return r===`always`||r!==!1&&nt(e,t)}return!1}function tt(e,t,n,r){return(e!==t||_(r.enabled,e)===!1)&&(!n.suspense||e.state.status!==`error`)&&nt(e,n)}function nt(e,t){return _(t.enabled,e)!==!1&&e.isStaleByTime(g(t.staleTime,e))}function rt(e,t){return!C(e.getCurrentResult(),t)}function it(e){return{onFetch:(t,n)=>{var r,i,a;let o=t.options,s=(r=t.fetchOptions)==null||(r=r.meta)==null||(r=r.fetchMore)==null?void 0:r.direction,c=((i=t.state.data)==null?void 0:i.pages)||[],l=((a=t.state.data)==null?void 0:a.pageParams)||[],u={pages:[],pageParams:[]},d=0,f=async()=>{let n=!1,r=e=>{Object.defineProperty(e,`signal`,{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener(`abort`,()=>{n=!0}),t.signal)})},i=de(t.options,t.fetchOptions),a=async(e,a,o)=>{if(n)return Promise.reject();if(a==null&&e.pages.length)return Promise.resolve(e);let s=await i((()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:o?`backward`:`forward`,meta:t.options.meta};return r(e),e})()),{maxPages:c}=t.options,l=o?le:ce;return{pages:l(e.pages,s,c),pageParams:l(e.pageParams,a,c)}};if(s&&c.length){let e=s===`backward`,t=e?ot:at,n={pages:c,pageParams:l};u=await a(n,t(o,n),e)}else{let t=e==null?c.length:e;do{var f;let e=d===0?(f=l[0])==null?o.initialPageParam:f:at(o,u);if(d>0&&e==null)break;u=await a(u,e),d++}while(d<t)}return u};t.options.persister?t.fetchFn=()=>{var e,r;return(e=(r=t.options).persister)==null?void 0:e.call(r,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function at(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function ot(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var st,U,W,ct,G,lt=(st=new WeakMap,U=new WeakMap,W=new WeakMap,ct=new WeakMap,G=new WeakSet,class extends Ee{constructor(e){super(),De(this,G),n(this,st,void 0),n(this,U,void 0),n(this,W,void 0),n(this,ct,void 0),a(st,this,e.client),this.mutationId=e.mutationId,a(W,this,e.mutationCache),a(U,this,[]),this.state=e.state||ut(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(U,this).includes(e)||(i(U,this).push(e),this.clearGcTimeout(),i(W,this).notify({type:`observerAdded`,mutation:this,observer:e}))}removeObserver(e){a(U,this,i(U,this).filter(t=>t!==e)),this.scheduleGc(),i(W,this).notify({type:`observerRemoved`,mutation:this,observer:e})}optionalRemove(){i(U,this).length||(this.state.status===`pending`?this.scheduleGc():i(W,this).remove(this))}continue(){var e,t;return(e=(t=i(ct,this))==null?void 0:t.continue())==null?this.execute(this.state.variables):e}async execute(e){var t;let n=()=>{r(G,this,K).call(this,{type:`continue`})},o={client:i(st,this),meta:this.options.meta,mutationKey:this.options.mutationKey};a(ct,this,Te({fn:()=>this.options.mutationFn?this.options.mutationFn(e,o):Promise.reject(Error(`No mutationFn found`)),onFail:(e,t)=>{r(G,this,K).call(this,{type:`failed`,failureCount:e,error:t})},onPause:()=>{r(G,this,K).call(this,{type:`pause`})},onContinue:n,retry:(t=this.options.retry)==null?0:t,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(W,this).canRun(this)}));let s=this.state.status===`pending`,c=!i(ct,this).canStart();try{var l,u,d,f,p,m,h,g;if(s)n();else{var _,v,y,b;r(G,this,K).call(this,{type:`pending`,variables:e,isPaused:c}),await((_=(v=i(W,this).config).onMutate)==null?void 0:_.call(v,e,this,o));let t=await((y=(b=this.options).onMutate)==null?void 0:y.call(b,e,o));t!==this.state.context&&r(G,this,K).call(this,{type:`pending`,context:t,variables:e,isPaused:c})}let t=await i(ct,this).start();return await((l=(u=i(W,this).config).onSuccess)==null?void 0:l.call(u,t,e,this.state.context,this,o)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,t,e,this.state.context,o)),await((p=(m=i(W,this).config).onSettled)==null?void 0:p.call(m,t,null,this.state.variables,this.state.context,this,o)),await((h=(g=this.options).onSettled)==null?void 0:h.call(g,t,null,e,this.state.context,o)),r(G,this,K).call(this,{type:`success`,data:t}),t}catch(t){try{var x,S,ee,te,C,ne,re,ie;throw await((x=(S=i(W,this).config).onError)==null?void 0:x.call(S,t,e,this.state.context,this,o)),await((ee=(te=this.options).onError)==null?void 0:ee.call(te,t,e,this.state.context,o)),await((C=(ne=i(W,this).config).onSettled)==null?void 0:C.call(ne,void 0,t,this.state.variables,this.state.context,this,o)),await((re=(ie=this.options).onSettled)==null?void 0:re.call(ie,void 0,t,e,this.state.context,o)),t}finally{r(G,this,K).call(this,{type:`error`,error:t})}}finally{i(W,this).runNext(this)}}});function K(e){this.state=(t=>{switch(e.type){case`failed`:return{...t,failureCount:e.failureCount,failureReason:e.error};case`pause`:return{...t,isPaused:!0};case`continue`:return{...t,isPaused:!1};case`pending`:return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:`pending`,variables:e.variables,submittedAt:Date.now()};case`success`:return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:`success`,isPaused:!1};case`error`:return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:`error`}}})(this.state),T.batch(()=>{i(U,this).forEach(t=>{t.onMutationUpdate(e)}),i(W,this).notify({mutation:this,type:`updated`,action:e})})}function ut(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:`idle`,variables:void 0,submittedAt:0}}var q,J,dt,ft=(q=new WeakMap,J=new WeakMap,dt=new WeakMap,class extends e{constructor(e={}){super(),n(this,q,void 0),n(this,J,void 0),n(this,dt,void 0),this.config=e,a(q,this,new Set),a(J,this,new Map),a(dt,this,0)}build(e,t,n){var r;let o=new lt({client:e,mutationCache:this,mutationId:a(dt,this,(r=i(dt,this),++r)),options:e.defaultMutationOptions(t),state:n});return this.add(o),o}add(e){i(q,this).add(e);let t=pt(e);if(typeof t==`string`){let n=i(J,this).get(t);n?n.push(e):i(J,this).set(t,[e])}this.notify({type:`added`,mutation:e})}remove(e){if(i(q,this).delete(e)){let t=pt(e);if(typeof t==`string`){let n=i(J,this).get(t);if(n)if(n.length>1){let t=n.indexOf(e);t!==-1&&n.splice(t,1)}else n[0]===e&&i(J,this).delete(t)}}this.notify({type:`removed`,mutation:e})}canRun(e){let t=pt(e);if(typeof t==`string`){let n=i(J,this).get(t),r=n==null?void 0:n.find(e=>e.state.status===`pending`);return!r||r===e}else return!0}runNext(e){let t=pt(e);if(typeof t==`string`){var n,r;let a=(n=i(J,this).get(t))==null?void 0:n.find(t=>t!==e&&t.state.isPaused);return(r=a==null?void 0:a.continue())==null?Promise.resolve():r}else return Promise.resolve()}clear(){T.batch(()=>{i(q,this).forEach(e=>{this.notify({type:`removed`,mutation:e})}),i(q,this).clear(),i(J,this).clear()})}getAll(){return Array.from(i(q,this))}find(e){let t={exact:!0,...e};return this.getAll().find(e=>y(t,e))}findAll(e={}){return this.getAll().filter(t=>y(e,t))}notify(e){T.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(e.map(e=>e.continue().catch(f))))}});function pt(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Y,mt=(Y=new WeakMap,class extends e{constructor(e={}){super(),n(this,Y,void 0),this.config=e,a(Y,this,new Map)}build(e,t,n){var r;let i=t.queryKey,a=(r=t.queryHash)==null?b(i,t):r,o=this.get(a);return o||(o=new Ae({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){i(Y,this).has(e.queryHash)||(i(Y,this).set(e.queryHash,e),this.notify({type:`added`,query:e}))}remove(e){let t=i(Y,this).get(e.queryHash);t&&(e.destroy(),t===e&&i(Y,this).delete(e.queryHash),this.notify({type:`removed`,query:e}))}clear(){T.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(Y,this).get(e)}getAll(){return[...i(Y,this).values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>v(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>v(e,t)):t}notify(e){T.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){T.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),X,Z,Q,ht,gt,$,_t,vt,yt=(X=new WeakMap,Z=new WeakMap,Q=new WeakMap,ht=new WeakMap,gt=new WeakMap,$=new WeakMap,_t=new WeakMap,vt=new WeakMap,class{constructor(e={}){n(this,X,void 0),n(this,Z,void 0),n(this,Q,void 0),n(this,ht,void 0),n(this,gt,void 0),n(this,$,void 0),n(this,_t,void 0),n(this,vt,void 0),a(X,this,e.queryCache||new mt),a(Z,this,e.mutationCache||new ft),a(Q,this,e.defaultOptions||{}),a(ht,this,new Map),a(gt,this,new Map),a($,this,0)}mount(){var e;a($,this,(e=i($,this),e++,e)),i($,this)===1&&(a(_t,this,he.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(X,this).onFocus())})),a(vt,this,xe.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(X,this).onOnline())})))}unmount(){var e,t,n;a($,this,(e=i($,this),e--,e)),i($,this)===0&&((t=i(_t,this))==null||t.call(this),a(_t,this,void 0),(n=i(vt,this))==null||n.call(this),a(vt,this,void 0))}isFetching(e){return i(X,this).findAll({...e,fetchStatus:`fetching`}).length}isMutating(e){return i(Z,this).findAll({...e,status:`pending`}).length}getQueryData(e){var t;let n=this.defaultQueryOptions({queryKey:e});return(t=i(X,this).get(n.queryHash))==null?void 0:t.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=i(X,this).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(g(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return i(X,this).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let r=this.defaultQueryOptions({queryKey:e}),a=i(X,this).get(r.queryHash),o=p(t,a==null?void 0:a.state.data);if(o!==void 0)return i(X,this).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return T.batch(()=>i(X,this).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;let n=this.defaultQueryOptions({queryKey:e});return(t=i(X,this).get(n.queryHash))==null?void 0:t.state}removeQueries(e){let t=i(X,this);T.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=i(X,this);return T.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:`active`,...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t},r=T.batch(()=>i(X,this).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(f).catch(f)}invalidateQueries(e,t={}){return T.batch(()=>{var n,r;return i(X,this).findAll(e).forEach(e=>{e.invalidate()}),(e==null?void 0:e.refetchType)===`none`?Promise.resolve():this.refetchQueries({...e,type:(n=(r=e==null?void 0:e.refetchType)==null?e==null?void 0:e.type:r)==null?`active`:n},t)})}refetchQueries(e,t={}){var n;let r={...t,cancelRefetch:(n=t.cancelRefetch)==null?!0:n},a=T.batch(()=>i(X,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(f)),e.state.fetchStatus===`paused`?Promise.resolve():t}));return Promise.all(a).then(f)}fetchQuery(e){let t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);let n=i(X,this).build(this,t);return n.isStaleByTime(g(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(f).catch(f)}fetchInfiniteQuery(e){return e.behavior=it(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(f).catch(f)}ensureInfiniteQueryData(e){return e.behavior=it(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xe.isOnline()?i(Z,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(X,this)}getMutationCache(){return i(Z,this)}getDefaultOptions(){return i(Q,this)}setDefaultOptions(e){a(Q,this,e)}setQueryDefaults(e,t){i(ht,this).set(x(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...i(ht,this).values()],n={};return t.forEach(t=>{S(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){i(gt,this).set(x(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...i(gt,this).values()],n={};return t.forEach(t=>{S(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...i(Q,this).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=b(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!==`always`),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode=`offlineFirst`),t.queryFn===ue&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...i(Q,this).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){i(X,this).clear(),i(Z,this).clear()}});export{se as a,d as i,He as n,f as o,T as r,fe as s,yt as t};