import{ot as e}from"./vendor-i_a7m9KR.js";import{_ as t,c as n,d as r,g as i,h as a,o,s,t as c}from"./vendor-charts-uxJ0cBSP.js";import{E as l,j as u,s as d}from"./vendor-react-B4dzC9y_.js";import{c as f,i as p,t as m,u as h}from"./index-BZ-yxHS8.js";import{n as g,r as _,t as v}from"./SuggestionsList-B-Q21tHq.js";var y=e();function b(){return{score:88,level:`good`,levelLabel:`Good`,percentile:95,percentileMessage:`Exceeding 95% people with same age!`,aiTags:[`Strong self-regulation`,`Large mood swings`,`Afternoon Anxiety`],chart:[{hour:`08:00`,label:`8点-9点`,positive:60,neutral:30,negative:10},{hour:`10:00`,label:`10点-11点`,positive:50,neutral:40,negative:10},{hour:`12:00`,label:`12点-13点`,positive:40,neutral:60,negative:0},{hour:`14:00`,label:`14点-15点`,positive:30,neutral:50,negative:20},{hour:`16:00`,label:`16点-17点`,positive:20,neutral:65,negative:15},{hour:`18:00`,label:`18点-19点`,positive:35,neutral:50,negative:15},{hour:`20:00`,label:`20点-21点`,positive:45,neutral:45,negative:10},{hour:`22:00`,label:`22点-23点`,positive:55,neutral:40,negative:5}],distribution:{mainEmotion:`HAPPY`,mainEmotionLabel:`Happy`,items:[{type:`HAPPY`,label:`Happy`,count:42,percent:42},{type:`CALM`,label:`Calm`,count:30,percent:30},{type:`SURPRISED`,label:`Surprise`,count:10,percent:10},{type:`SAD`,label:`Sad`,count:8,percent:8},{type:`ANGRY`,label:`Angry`,count:5,percent:5},{type:`FEARFUL`,label:`Fear`,count:2,percent:2},{type:`DISGUSTED`,label:`Hate`,count:3,percent:3}]},aiInsights:[`The average blood oxygen saturation this week was 94.9%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`4-6-4 breathing method`,description:`Relieve current anxiety and lower heart rate.`}]}}var x=`emotion_daily_demo_mode`;function S(){try{return localStorage.getItem(x)===`true`}catch(e){return!1}}function C(){try{localStorage.setItem(x,`true`),console.log(`✅ [Emotion Daily Demo Mode] Enabled`)}catch(e){console.error(`[Demo Mode] Failed to enable:`,e)}}function w(){try{localStorage.setItem(x,`false`),console.log(`✅ [Emotion Daily Demo Mode] Disabled`)}catch(e){console.error(`[Demo Mode] Failed to disable:`,e)}}function T(){let e=!S();return e?C():w(),e}var E=u();const D=e=>{let t=e.toUpperCase();return{HAPPY:p.happy,CALM:p.calm,NEUTRAL:p.neutral,SURPRISED:p.surprised,SAD:p.sad,ANGRY:p.angry,FEARFUL:p.fearful,DISGUSTED:p.disgusted}[t]||`#94a3b8`},O=e=>e.map(e=>({type:e.type,label:e.label,percent:e.percent,count:e.count,color:D(e.type)})),k=(0,y.memo)(({mainEmotion:e,mainEmotionLabel:t,items:n,className:r=``,isLoading:i=!1})=>{let{t:a}=l(),o=(0,y.useMemo)(()=>O(n),[n]),s=(0,E.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`});return(0,E.jsx)(m,{title:a(`daily.emotionDistribution`,`Emotion distribution`),iconElement:s,themeColor:p.primary,items:o,donutThickness:12,centerValue:t,centerLabel:a(`daily.asMain`,`as main`),centerValueColor:D(e),itemLayout:`grid-2col`,pieChartSize:`medium`,showInfo:!0,className:r,isLoading:i})});var A=e=>{let[t]=e.split(`:`).map(Number);return t},j=(0,y.memo)(({active:e,payload:t,layers:n})=>{var r;if(!e||!t||t.length===0)return null;let i=(r=t[0])==null?void 0:r.payload;return i?(0,E.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,E.jsx)(`p`,{className:`font-medium mb-1`,children:i.label||i.hour}),n.map(e=>(0,E.jsxs)(`p`,{style:{color:e.color},children:[e.label,`: `,i[e.dataKey],`%`]},e.dataKey))]}):null}),M=(0,y.memo)(e=>{let{fill:t,x:n,y:r,width:a,height:o,payload:s,dataKey:c,layers:l,barRadius:u}=e,d=null;for(let e=l.length-1;e>=0;e--){let t=l[e].dataKey;if(s[t]&&s[t]>0){d=t;break}}let f=c===d?u:[0,0,0,0];return(0,E.jsx)(i,{...e,radius:f})});M.displayName=`RoundedTopBar`;const N=(0,y.memo)(({data:e,layers:i,height:l=200,yAxisDomain:u=[0,100],showLegend:d=!0,renderTooltip:f,maxBarSize:p=20,barRadius:m=[4,4,0,0],barGap:g,barCategoryGap:_,className:v=``})=>{let b=h(),x=(0,y.useMemo)(()=>e.map(e=>({...e,position:A(e.hour)})),[e]);return(0,E.jsxs)(`div`,{className:v,children:[d&&(0,E.jsx)(`div`,{className:`flex items-center gap-4 mb-3 flex-wrap`,children:i.map(e=>(0,E.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,E.jsx)(`span`,{className:`w-3 h-3 rounded-sm`,style:{backgroundColor:e.color}}),(0,E.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,E.jsx)(`div`,{style:{height:l},className:`-mx-2`,children:(0,E.jsx)(t,{width:`100%`,height:`100%`,children:(0,E.jsxs)(c,{data:x,margin:{top:10,right:10,left:-15,bottom:0},barGap:g,barCategoryGap:_,children:[(0,E.jsx)(r,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,E.jsx)(s,{dataKey:`hour`,type:`category`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,ticks:[`00:00`,`06:00`,`12:00`,`18:00`,`24:00`]}),(0,E.jsx)(o,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:u,tickFormatter:e=>`${e}`}),(0,E.jsx)(a,{content:f||(e=>(0,E.jsx)(j,{...e,layers:i})),wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),i.map(e=>(0,E.jsx)(n,{dataKey:e.dataKey,stackId:`stack`,fill:e.color,maxBarSize:p,shape:(0,E.jsx)(M,{layers:i,barRadius:m}),...b},e.dataKey))]})})})]})}),P=(0,y.memo)(({data:e,className:t=``})=>{let{t:n}=l(),r=[{dataKey:`positive`,color:p.positive,label:n(`page.emotion.positive`,`Positive`)},{dataKey:`neutral`,color:p.neutral,label:n(`page.emotion.neutral`,`Neutral`)},{dataKey:`negative`,color:p.negative,label:n(`page.emotion.negative`,`Negative`)}];return(0,E.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:f.cardBorderRadius,paddingLeft:f.cardPaddingX,paddingRight:f.cardPaddingX},children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,E.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`}),(0,E.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`daily.emotionProportion`,`Emotional proportion analysis`)})]}),(0,E.jsx)(N,{data:e,layers:r,height:200,yAxisDomain:[0,100],showLegend:!0,maxBarSize:10})]})});function F(){let{t:e}=l(),[t,n]=(0,y.useState)(null),[r,i]=(0,y.useState)(S());return(0,y.useEffect)(()=>{n(b())},[r]),t?(0,E.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,E.jsx)(`div`,{className:`${f.pageMaxWidth} mx-auto`,children:(0,E.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,E.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,E.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Demo Mode`}),(0,E.jsx)(`button`,{onClick:()=>{i(T())},className:`w-10 h-5 rounded-full transition-colors ${r?`bg-orange-400`:`bg-slate-300`}`,children:(0,E.jsx)(`span`,{className:`block w-4 h-4 bg-white rounded-full shadow transform transition-transform ${r?`translate-x-5`:`translate-x-0.5`}`})})]}),(0,E.jsx)(_,{score:t.score,maxScore:100,levelLabel:t.levelLabel,percentile:t.percentile,percentileMessage:t.percentileMessage,aiTags:t.aiTags,themeColor:`#FFD12D`,gradientEndColor:`#FF9D03`,title:e(`daily.todayEmotionScore`,`Today's emotion score`),icon:(0,E.jsx)(d,{className:`w-6 h-6 text-white`})}),(0,E.jsx)(P,{data:t.chart}),(0,E.jsx)(k,{mainEmotion:t.distribution.mainEmotion,mainEmotionLabel:t.distribution.mainEmotionLabel,items:t.distribution.items}),t.aiInsights.length>0&&(0,E.jsx)(g,{insights:t.aiInsights,themeColor:p.primary}),t.suggestions.length>0&&(0,E.jsx)(v,{suggestions:t.suggestions}),(0,E.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`)})]})})}):(0,E.jsx)(`div`,{className:`flex items-center justify-center h-64`,children:`Loading...`})}export{F as default};