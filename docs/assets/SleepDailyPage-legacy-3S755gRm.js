System.register(["./rolldown-runtime-legacy-DbTM_YVz.js","./vendor-legacy-BFWz_Ol4.js","./vendor-charts-legacy-T56nRIl-.js","./vendor-i18n-legacy-fjOwBjkb.js","./theme-legacy-BPmhlnTm.js","./card-legacy-BAqfJ-x3.js","./SuggestionsList-legacy-CgZv99SX.js","./DistributionCard-legacy-D0GcXimJ.js"],function(e,t){var a,s,l,n,i,r,o,d,c,u,g,m,p,h,f,x,b,v,y,w,j,T,N,k,D,S,L,C,M,R,E,I;function P(){try{return"true"===localStorage.getItem(f)}catch(e){return!1}}function $(){const e=!P();return e?function(){try{localStorage.setItem(f,"true"),console.log("✅ [Sleep Daily Demo Mode] Enabled")}catch(e){console.error("[Demo Mode] Failed:",e)}}():function(){try{localStorage.setItem(f,"false"),console.log("✅ [Sleep Daily Demo Mode] Disabled")}catch(e){console.error("[Demo Mode] Failed:",e)}}(),e}return e("default",function(){const{t:e}=r(),[t,a]=(0,h.useState)(()=>({score:88,level:"fair",levelLabel:"Fair",percentile:85,percentileMessage:"Your rating is lower than 85% of users",aiTags:["Excellent deep sleep","Time to bed late","Normal fragmented sleep"],structureChart:{totalDuration:"7h 11min",totalMinutes:431,deepDuration:"4h 8min",deepMinutes:248,segments:[{stage:"light",start:"23:30",end:"00:30"},{stage:"deep",start:"00:30",end:"02:00"},{stage:"light",start:"02:00",end:"03:00"},{stage:"rem",start:"03:00",end:"04:00"},{stage:"deep",start:"04:00",end:"05:30"},{stage:"light",start:"05:30",end:"06:30"},{stage:"awake",start:"06:30",end:"06:45"},{stage:"light",start:"06:45",end:"07:30"}]},structureAnalysis:[{type:"awake",label:"Awake",percent:4,duration:"2 times",status:"Good"},{type:"rem",label:"REM",percent:19,duration:"0 times",status:"Good"},{type:"light",label:"Light sleep",percent:62,duration:"0 times",status:"Good"},{type:"deep",label:"Deep sleep",percent:4,duration:"0 times",status:"Good"}],qualityIndicators:{bedTime:{value:"20:55",reference:"22:00",label:"Bed rest time"},sleepTime:{value:"23:42",reference:"23:00",label:"Time to fall asleep"},wakeTime:{value:"07:15",reference:"7:00",label:"Post-awake time"},getUpTime:{value:"09:03",reference:"8:00",label:"Wake-up time"},sleepLatency:{value:"45",reference:"<30min",label:"Falling asleep takes time",unit:"min"},sleepEfficiency:{value:"85",reference:">85%",label:"Sleep efficiency",unit:"%"}},aiInsights:["The average blood oxygen saturation this week was 94.0%, the same as last week.","Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week."],suggestions:[{icon:"/images/daily_report/1.webp",title:"Soaking feet before bed",description:"Relieve current anxiety and lower heart rate."},{icon:"/images/daily_report/2.webp",title:"Today's nap suggestion",description:"Relieve current anxiety and lower heart rate."}]})),[l,n]=(0,h.useState)(P());return(0,h.useEffect)(()=>{a({score:88,level:"fair",levelLabel:"Fair",percentile:85,percentileMessage:"Your rating is lower than 85% of users",aiTags:["Excellent deep sleep","Time to bed late","Normal fragmented sleep"],structureChart:{totalDuration:"7h 11min",totalMinutes:431,deepDuration:"4h 8min",deepMinutes:248,segments:[{stage:"light",start:"23:30",end:"00:30"},{stage:"deep",start:"00:30",end:"02:00"},{stage:"light",start:"02:00",end:"03:00"},{stage:"rem",start:"03:00",end:"04:00"},{stage:"deep",start:"04:00",end:"05:30"},{stage:"light",start:"05:30",end:"06:30"},{stage:"awake",start:"06:30",end:"06:45"},{stage:"light",start:"06:45",end:"07:30"}]},structureAnalysis:[{type:"awake",label:"Awake",percent:4,duration:"2 times",status:"Good"},{type:"rem",label:"REM",percent:19,duration:"0 times",status:"Good"},{type:"light",label:"Light sleep",percent:62,duration:"0 times",status:"Good"},{type:"deep",label:"Deep sleep",percent:4,duration:"0 times",status:"Good"}],qualityIndicators:{bedTime:{value:"20:55",reference:"22:00",label:"Bed rest time"},sleepTime:{value:"23:42",reference:"23:00",label:"Time to fall asleep"},wakeTime:{value:"07:15",reference:"7:00",label:"Post-awake time"},getUpTime:{value:"09:03",reference:"8:00",label:"Wake-up time"},sleepLatency:{value:"45",reference:"<30min",label:"Falling asleep takes time",unit:"min"},sleepEfficiency:{value:"85",reference:">85%",label:"Sleep efficiency",unit:"%"}},aiInsights:["The average blood oxygen saturation this week was 94.0%, the same as last week.","Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week."],suggestions:[{icon:"/images/daily_report/1.webp",title:"Soaking feet before bed",description:"Relieve current anxiety and lower heart rate."},{icon:"/images/daily_report/2.webp",title:"Today's nap suggestion",description:"Relieve current anxiety and lower heart rate."}]})},[l]),t?(0,x.jsx)("div",{className:"min-h-screen pb-20",style:{backgroundColor:"#F1EFEE"},children:(0,x.jsx)("div",{className:`${d.pageMaxWidth} mx-auto`,children:(0,x.jsxs)("div",{className:"p-4 space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,x.jsx)("span",{className:"text-xs text-slate-500",children:"Demo Mode"}),(0,x.jsx)("button",{onClick:()=>{n($())},className:"w-10 h-5 rounded-full transition-colors "+(l?"bg-violet-400":"bg-slate-300"),children:(0,x.jsx)("span",{className:"block w-4 h-4 bg-white rounded-full shadow transform transition-transform "+(l?"translate-x-5":"translate-x-0.5")})})]}),(0,x.jsx)(g,{score:t.score,maxScore:200,levelLabel:t.levelLabel,percentile:t.percentile,percentileMessage:t.percentileMessage,aiTags:t.aiTags,themeColor:"#A37EFE",title:e("daily.todayScore","Today's score"),icon:(0,x.jsx)(s,{className:"w-6 h-6 text-white"})}),(0,x.jsx)(I,{totalDuration:t.structureChart.totalDuration,deepDuration:t.structureChart.deepDuration,segments:t.structureChart.segments}),(0,x.jsx)(w,{items:t.structureAnalysis,totalMinutes:t.structureChart.totalMinutes}),(0,x.jsx)(N,{indicators:t.qualityIndicators}),t.aiInsights.length>0&&(0,x.jsx)(u,{insights:t.aiInsights,themeColor:c.sleep}),t.suggestions.length>0&&(0,x.jsx)(m,{suggestions:t.suggestions}),(0,x.jsx)("p",{className:"text-xs text-slate-400 text-center px-4 py-2",children:e("common.disclaimer","The monitoring results of this product are for reference only.")})]})})}):null}),{setters:[function(e){e.r},function(e){a=e.at,s=e.c,l=e.p,n=e.rt},function(e){i=e.y},function(e){r=e.n},function(e){o=e.a,d=e.c,c=e.l},function(e){},function(e){u=e.n,g=e.r,m=e.t},function(e){p=e.t}],execute:function(){h=a(),f="sleep_daily_demo_mode",x=n(),b=e=>o[e.toLowerCase()]||"#94a3b8",v=e=>e.map(e=>({type:e.type,label:e.label,percent:e.percent,color:b(e.type),duration:e.duration,status:e.status})),y=({items:e,totalMinutes:t,className:a="",isLoading:s=!1})=>{const{t:l}=r(),n=(0,h.useMemo)(()=>v(e),[e]),i=t?Math.floor(t/60):"--",o=(0,x.jsx)("span",{className:"w-1.5 h-4 rounded-full bg-violet-400"});return(0,x.jsx)(p,{title:l("daily.sleepDistribution","Sleep distribution"),iconElement:o,themeColor:c.sleep,items:n,centerValue:i,centerLabel:l("daily.totalHours","Total hours"),centerValueColor:"#1e293b",itemLayout:"with-duration",pieChartSize:"medium",showInfo:!0,className:a,isLoading:s})},w=(0,h.memo)(y),j=({label:e,value:t,unit:a,reference:s})=>(0,x.jsxs)("div",{className:"bg-slate-50 rounded-xl p-3",children:[(0,x.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:e}),(0,x.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,x.jsx)("span",{className:"text-xl font-bold text-slate-800",children:null!=t?t:"--"}),a&&(0,x.jsx)("span",{className:"text-sm text-slate-500",children:a})]}),(0,x.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,x.jsx)(l,{className:"w-3 h-3 text-slate-400"}),(0,x.jsxs)("span",{className:"text-xs text-slate-400",children:["Standard: ",s]})]})]}),T=({indicators:e,className:t=""})=>{const{t:a}=r();return(0,x.jsxs)("div",{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:d.cardBorderRadius,paddingLeft:d.cardPaddingX,paddingRight:d.cardPaddingX},children:[(0,x.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,x.jsx)("span",{className:"w-1.5 h-4 rounded-full bg-violet-400"}),(0,x.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:a("daily.sleepQuality","Sleep quality indicators")}),(0,x.jsx)(l,{className:"w-4 h-4 text-slate-400 cursor-pointer"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,x.jsx)(j,{label:e.bedTime.label,value:e.bedTime.value,reference:e.bedTime.reference}),(0,x.jsx)(j,{label:e.sleepTime.label,value:e.sleepTime.value,reference:e.sleepTime.reference}),(0,x.jsx)(j,{label:e.wakeTime.label,value:e.wakeTime.value,reference:e.wakeTime.reference}),(0,x.jsx)(j,{label:e.getUpTime.label,value:e.getUpTime.value,reference:e.getUpTime.reference}),(0,x.jsx)(j,{label:e.sleepLatency.label,value:e.sleepLatency.value,unit:e.sleepLatency.unit,reference:e.sleepLatency.reference}),(0,x.jsx)(j,{label:e.sleepEfficiency.label,value:e.sleepEfficiency.value,unit:e.sleepEfficiency.unit,reference:e.sleepEfficiency.reference})]})]})},N=(0,h.memo)(T),k=i(),D={deep:"#6366f1",light:"#a5b4fc",rem:"#e0e7ff",awake:"#f97316"},S={paddingTop:20,paddingBottom:30,paddingLeft:60,paddingRight:20,blockHeight:40,baseRadius:12,lineWidth:6,bufferLong:5,bufferShort:1},L=[{key:"awake",label:"Awake",order:0},{key:"rem",label:"REM",order:1},{key:"light",label:"Light",order:2},{key:"deep",label:"Deep",order:3}],C=(e,t=new Date("2024-01-01"))=>{const[a,s]=e.split(":").map(Number),l=new Date(t);return l.setHours(a,s,0,0),a<12&&l.setDate(l.getDate()+1),l.getTime()},M=(e,t,a,s,l)=>{const n=S.baseRadius,i={tl:n,tr:n,br:n,bl:n};return s&&null!==t&&(t<e?i.tl=0:t>e&&(i.bl=0)),l&&null!==a&&(a<e?i.tr=0:a>e&&(i.br=0)),i},R=({data:e,height:t=320,colors:a=o||D,className:s=""})=>{const l=(0,h.useRef)(null),n=(0,h.useRef)(null),[i,r]=(0,h.useState)({x:0,y:0,visible:!1,segment:null,duration:0}),[d,c]=(0,h.useState)({width:0,height:0}),u=(0,h.useMemo)(()=>{if(!e||0===e.length)return[];const t=new Date("2024-01-01"),a=[...e].sort((e,a)=>C(e.start,t)-C(a.start,t));return a.map((e,s)=>{var l,n;const i=C(e.start,t),r=C(e.end,t),o=L.find(t=>t.key===e.stage),d=s>0?a[s-1]:null,c=s<a.length-1?a[s+1]:null,u=d?L.find(e=>e.key===d.stage):null,g=c?L.find(e=>e.key===c.stage):null,m=Boolean(d&&u&&d.stage!==e.stage&&C(d.end,t)===i),p=Boolean(c&&g&&c.stage!==e.stage&&C(c.start,t)===r),h=M(o.order,null!==(l=null==u?void 0:u.order)&&void 0!==l?l:null,null!==(n=null==g?void 0:g.order)&&void 0!==n?n:null,m,p);return{...e,startTime:i,endTime:r,duration:Math.round((r-i)/1e3/60),stageInfo:o,prevStageInfo:u,prevConnected:m,nextConnected:p,radii:h}})},[e]),g=(0,h.useCallback)(()=>{const e=l.current;if(!e||!u.length)return;const t=e.getContext("2d");if(!t)return;const s=window.devicePixelRatio||1,{width:n,height:i}=d;e.width=n*s,e.height=i*s,t.scale(s,s),t.clearRect(0,0,n,i);const r=n-S.paddingLeft-S.paddingRight,o=u[0].startTime,c=u[u.length-1].endTime,g=c-o,m=e=>S.paddingLeft+(e-o)/g*r,p=(i-S.paddingTop-S.paddingBottom)/L.length,h=e=>S.paddingTop+e*p+p/2;t.font="12px sans-serif",t.textBaseline="middle",t.beginPath(),t.strokeStyle="#e2e8f0",t.setLineDash([4,4]),t.lineWidth=1;for(let a=0;a<=L.length;a++){const e=S.paddingTop+a*p;t.moveTo(S.paddingLeft,e),t.lineTo(n-S.paddingRight,e)}t.stroke(),t.setLineDash([]),L.forEach(e=>{const a=h(e.order);t.fillStyle="#64748b",t.textAlign="right",t.fillText(e.label,S.paddingLeft-15,a)}),u.forEach(e=>{if(e.prevConnected&&e.prevStageInfo){const s=m(e.startTime),l=h(e.stageInfo.order),n=h(e.prevStageInfo.order),i=a[e.stage]||a.light,r=a[e.prevStageInfo.key]||a.light,o=Math.abs(l-n);if(o>1){let a=S.blockHeight/2+(1===Math.abs(e.stageInfo.order-e.prevStageInfo.order)?S.bufferShort:S.bufferLong);2*a>o&&(a=.45*o);const d=l>n,c=Math.min(n,l),u=Math.max(n,l),g=d?r:i,m=d?i:r,p=t.createLinearGradient(0,c,0,u),h=a/o,f=1-h;p.addColorStop(0,g),p.addColorStop(h,g),p.addColorStop(f,m),p.addColorStop(1,m),t.fillStyle=p,t.fillRect(s-S.lineWidth/2,c,S.lineWidth,u-c)}}}),u.forEach(e=>{const s=m(e.startTime),l=m(e.endTime),n=h(e.stageInfo.order);let i=s,r=Math.max(l-s,1);const o=S.lineWidth/2;!e.prevConnected||0!==e.radii.tl&&0!==e.radii.bl||(i-=o,r+=o),!e.nextConnected||0!==e.radii.tr&&0!==e.radii.br||(r+=o);const d=n-S.blockHeight/2;t.fillStyle=a[e.stage]||a.light,t.beginPath();const{tl:c,tr:u,br:g,bl:p}=e.radii,f=i,x=d,b=r,v=S.blockHeight;t.moveTo(f+c,x),t.lineTo(f+b-u,x),t.quadraticCurveTo(f+b,x,f+b,x+u),t.lineTo(f+b,x+v-g),t.quadraticCurveTo(f+b,x+v,f+b-g,x+v),t.lineTo(f+p,x+v),t.quadraticCurveTo(f,x+v,f,x+v-p),t.lineTo(f,x+c),t.quadraticCurveTo(f,x,f+c,x),t.closePath(),t.fill()});const f=new Date(o).getHours(),x=new Date(c).getHours()+(new Date(c).getDate()!==new Date(o).getDate()?24:0);t.textAlign="center",t.fillStyle="#94a3b8",t.font="11px sans-serif";for(let a=f;a<=x;a++){const e=new Date(o);e.setHours(a,0,0,0),e.getTime()<o&&e.setDate(e.getDate()+1);const s=m(e.getTime());if(s>=S.paddingLeft&&s<=n-S.paddingRight){const e=(""+a%24).padStart(2,"0")+":00";t.fillText(e,s,i-10),t.beginPath(),t.moveTo(s,i-25),t.lineTo(s,i-20),t.stroke()}}},[d,a,u]);return(0,h.useEffect)(()=>{const e=new ResizeObserver(e=>{const{width:t,height:a}=e[0].contentRect;c({width:t,height:a})});return n.current&&e.observe(n.current),()=>e.disconnect()},[]),(0,h.useEffect)(()=>{g()},[g]),(0,x.jsxs)("div",{ref:n,className:`relative w-full transform-gpu will-change-transform ${s}`,style:{height:`${t}px`},children:[(0,x.jsx)("canvas",{ref:l,className:"w-full h-full block",onMouseMove:e=>{const t=l.current.getBoundingClientRect(),a=e.clientX-t.left,{width:s}=d,n=s-S.paddingLeft-S.paddingRight;if(n<=0||!u.length)return;if(a<S.paddingLeft||a>s-S.paddingRight)return void r(e=>({...e,visible:!1}));const i=u[0].startTime,o=u[u.length-1].endTime-i,c=i+(a-S.paddingLeft)/n*o,g=u.find(e=>c>=e.startTime&&c<=e.endTime);r(g?{x:e.clientX,y:e.clientY,visible:!0,segment:g,duration:g.duration}:e=>({...e,visible:!1}))},onMouseLeave:()=>r(e=>({...e,visible:!1}))}),"undefined"!=typeof document&&(0,k.createPortal)((()=>{var e;const{x:t,y:s,visible:l,segment:n,duration:r}=i;if(!n)return null;const o=t>("undefined"!=typeof window?window.innerWidth:1e3)/2,d=s>("undefined"!=typeof window?window.innerHeight:800)/2;return(0,x.jsxs)("div",{className:"fixed z-50 pointer-events-none bg-white/95 backdrop-blur-sm border border-slate-200 shadow-xl rounded-lg p-3 text-sm transition-all duration-200 ease-out "+(l?"opacity-100 scale-100":"opacity-0 scale-95"),style:{left:0,top:0,transform:`translate3d(${t}px, ${s}px, 0) translate(${o?-15:15}px, ${d?-15:15}px) translate(${o?"-100%":"0%"}, ${d?"-100%":"0%"})`},children:[(0,x.jsx)("div",{className:"font-semibold text-slate-800 mb-1",children:null===(e=L.find(e=>e.key===n.stage))||void 0===e?void 0:e.label}),(0,x.jsxs)("div",{className:"text-slate-500 text-xs tabular-nums",children:[n.start," - ",n.end]}),(0,x.jsxs)("div",{className:"text-slate-500 text-xs mt-1",children:["Duration: ",r," min"]}),(0,x.jsx)("div",{className:"absolute left-0 top-3 w-1 h-4 rounded-r",style:{backgroundColor:a[n.stage]}})]})})(),document.body)]})},E=({totalDuration:e,deepDuration:t,segments:a,className:s=""})=>{const{t:l}=r();return(0,x.jsxs)("div",{className:`bg-white py-5 shadow-sm ${s}`,style:{borderRadius:d.cardBorderRadius,paddingLeft:d.cardPaddingX,paddingRight:d.cardPaddingX},children:[(0,x.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,x.jsx)("span",{className:"w-1.5 h-4 rounded-full bg-violet-400"}),(0,x.jsx)("h3",{className:"text-base font-semibold text-slate-800",children:l("daily.sleepStructure","Sleep structure diagram")})]}),(0,x.jsxs)("div",{className:"flex items-center gap-8 mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:e}),(0,x.jsx)("div",{className:"text-xs text-slate-400",children:l("daily.totalDuration","Total sleep duration")})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-violet-500",children:t}),(0,x.jsx)("div",{className:"text-xs text-slate-400",children:l("daily.deepSleep","Deep sleep")})]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,x.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:o.deep}}),(0,x.jsx)("span",{className:"text-xs text-slate-500",children:l("sleep.deep","Deep sleep")})]}),(0,x.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,x.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:o.light}}),(0,x.jsx)("span",{className:"text-xs text-slate-500",children:l("sleep.light","Light sleep")})]}),(0,x.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,x.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:o.rem}}),(0,x.jsx)("span",{className:"text-xs text-slate-500",children:l("sleep.rem","REM")})]}),(0,x.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,x.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:o.awake}}),(0,x.jsx)("span",{className:"text-xs text-slate-500",children:l("sleep.awake","Awake")})]})]}),(0,x.jsx)(R,{data:a,height:240})]})},I=(0,h.memo)(E)}}});