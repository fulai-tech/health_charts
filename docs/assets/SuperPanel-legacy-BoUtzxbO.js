System.register(["./vendor-legacy-CqM9a8gD.js","./vendor-charts-legacy-B8fWLVfV.js","./vendor-react-legacy-B_Fnyupe.js","./index-legacy-DU15mOBV.js"],function(e,t){var s,n,l,a,r,o,i,c,d,x,u,m,h,g,f,p,b,j,w,v,N,y;function k({enabled:e,onChange:t,size:s="md"}){const n="sm"===s?"h-5 w-9":"h-6 w-11",l="sm"===s?"h-3 w-3":"h-4 w-4",a="sm"===s?e?"translate-x-5":"translate-x-1":e?"translate-x-6":"translate-x-1";return(0,N.jsx)("button",{onClick:()=>t(!e),className:b("relative inline-flex items-center rounded-full transition-colors","focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",n,e?"bg-orange-500":"bg-slate-300"),role:"switch","aria-checked":e,children:(0,N.jsx)("span",{className:b("inline-block transform rounded-full bg-white transition-transform",l,a)})})}function C({icon:e,label:t,children:s}){return(0,N.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-b-0",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-slate-600",children:e}),(0,N.jsx)("span",{className:"text-sm font-medium text-slate-700",children:t})]}),(0,N.jsx)("div",{className:"flex items-center gap-2",children:s})]})}function S(){const{t:e,i18n:t}=d(),{isAuthenticated:s,username:u,logout:m}=p(),{language:S,setLanguage:E}=f(),[L,T]=(0,v.useState)(!1),[P,z]=(0,v.useState)(!1),[O,R]=(0,v.useState)(!1),[D,$]=(0,v.useState)(null),[A,J]=(0,v.useState)([]),[B,F]=(0,v.useState)(!1),[G,I]=(0,v.useState)(!1),M=(0,v.useRef)(null),W=(0,v.useRef)(0),U=(0,v.useRef)(!1),H=(0,v.useRef)([]),K=(0,v.useRef)(null);(0,v.useEffect)(()=>{const e=()=>{I(window.innerWidth<360||window.innerHeight<500)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,v.useEffect)(()=>{const e={log:console.log,warn:console.warn,error:console.error,info:console.info};K.current=e;const t=setInterval(()=>{0!==H.current.length&&J(e=>{let t=[...e];const s=[...H.current];return H.current=[],s.forEach(e=>{const s=t[t.length-1];s&&s.level===e.level&&s.message===e.message?t[t.length-1]={...s,count:s.count+1,lastTimestamp:e.timestamp,timestamp:e.timestamp}:t.push(e)}),t.length>y&&(t=t.slice(-y)),t})},500),s=t=>(...s)=>{if(e[t].apply(console,s),!U.current)try{U.current=!0;const e=s.join(" ");if(e.includes("i18next::translator: missingKey"))return;if(e.includes("SuperPanel")&&e.includes("translation"))return;const n=((e,t)=>{W.current+=1;const s=(new Date).toLocaleTimeString(),n=t.map(e=>{if("object"==typeof e&&null!==e)try{const t=JSON.stringify(e,null,2);return t.length>2e3?t.slice(0,2e3)+"... (truncated)":t}catch(t){return"[Circular/Unserializable Object]"}return String(e)}).join(" ");return{id:W.current,timestamp:s,level:e,message:n,args:t,count:1,firstTimestamp:s,lastTimestamp:s}})(t,s);H.current.push(n)}catch(n){}finally{U.current=!1}};return console.log=s("log"),console.warn=s("warn"),console.error=s("error"),console.info=s("info"),()=>{console.log=e.log,console.warn=e.warn,console.error=e.error,console.info=e.info,clearInterval(t)}},[]),(0,v.useEffect)(()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&T(!1)};return L&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[L]);const q=t.language.startsWith("en");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{ref:M,className:b("fixed z-[9999]",G?"bottom-3 right-3":"bottom-6 right-6"),children:[L&&(0,N.jsxs)("div",{className:b("absolute right-0",G?"bottom-14":"bottom-16",G?"w-[calc(100vw-24px)] max-w-72":"w-72",G?"max-h-[calc(100vh-70px)]":"max-h-[calc(100vh-100px)]","overflow-hidden flex flex-col","bg-white rounded-2xl shadow-2xl border border-slate-200","transform transition-all duration-200 origin-bottom-right","animate-fade-in"),children:[(0,N.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)(g,{className:"w-5 h-5 text-orange-500"}),(0,N.jsx)("span",{className:"text-sm font-semibold text-slate-800",children:"Super Panel"})]}),(0,N.jsx)("button",{onClick:()=>T(!1),className:"p-1 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors",children:(0,N.jsx)(x,{className:"w-4 h-4"})})]}),(0,N.jsxs)("div",{className:"px-4 py-2 overflow-y-auto flex-1 min-h-0",children:[(0,N.jsx)(C,{icon:(0,N.jsx)(l,{className:"w-4 h-4"}),label:e("superPanel.language","语言"),children:(0,N.jsx)("button",{onClick:()=>{const e=t.language.startsWith("en")?"zh":"en";t.changeLanguage(e),E(e)},className:b("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-slate-100 hover:bg-slate-200 text-slate-700"),children:q?"中文":"English"})}),(0,N.jsx)(C,{icon:(0,N.jsx)(o,{className:"w-4 h-4"}),label:e("superPanel.user","用户"),children:s?(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)("span",{className:"text-xs text-slate-500 max-w-[80px] truncate",children:u}),(0,N.jsx)("button",{onClick:()=>{m()},className:b("p-1.5 rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),title:e("auth.logout"),children:(0,N.jsx)(n,{className:"w-4 h-4"})})]}):(0,N.jsxs)("button",{onClick:()=>z(!0),className:b("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:[(0,N.jsx)(a,{className:"w-3.5 h-3.5"}),e("auth.login")]})}),(0,N.jsx)(C,{icon:(0,N.jsx)(i,{className:"w-4 h-4"}),label:q?"Console":"控制台",children:(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsxs)("span",{className:"text-[10px] text-slate-400",children:[A.length," ",q?"logs":"条日志"]}),(0,N.jsx)("button",{onClick:()=>{J([])},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600",title:q?"Clear logs":"清空日志",disabled:0===A.length,children:(0,N.jsx)(c,{className:"w-3 h-3"})}),(0,N.jsx)(k,{enabled:B,onChange:()=>{F(!B)},size:"sm"})]})}),(0,N.jsx)(C,{icon:(0,N.jsx)(h,{className:"w-4 h-4"}),label:q?"Reload":"重新加载",children:(0,N.jsx)("button",{onClick:()=>{window.location.reload()},className:b("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-blue-50 hover:bg-blue-100 text-blue-600"),children:q?"Reload Page":"重载页面"})}),(0,N.jsx)(C,{icon:(0,N.jsx)(r,{className:"w-4 h-4"}),label:q?"Storage":"存储",children:(0,N.jsx)("button",{onClick:()=>{try{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),s=t>-1?e.substr(0,t).trim():e.trim();document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${s}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`}),"indexedDB"in window&&indexedDB.databases().then(e=>{e.forEach(e=>{e.name&&indexedDB.deleteDatabase(e.name)})}).catch(()=>{}),alert(q?"All storage cleared! Page will reload.":"所有存储已清空！页面即将重新加载。"),window.location.reload()}catch(s){var e,t;null!==(e=K.current)&&void 0!==e&&null!==(t=e.error)&&void 0!==t&&t.call(e,"Clear storage failed:",s)||console.error("Clear storage failed:",s),alert(q?"Failed to clear storage completely":"清空存储失败")}},className:b("px-3 py-1.5 text-xs font-medium rounded-lg transition-colors","bg-red-50 hover:bg-red-100 text-red-600"),children:q?"Clear All":"清空全部"})})]}),B&&(0,N.jsxs)("div",{className:"border-t border-slate-100 flex-shrink-0",children:[(0,N.jsx)("div",{className:"px-4 py-2 bg-slate-50",children:(0,N.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,N.jsx)("span",{className:"text-xs font-medium text-slate-600",children:q?"Console Logs":"控制台日志"}),(0,N.jsx)("span",{className:"text-[10px] text-slate-400",children:q?"Latest 100":"最新 100 条"})]})}),(0,N.jsx)("div",{className:b("overflow-y-auto bg-slate-900 text-green-400 font-mono text-[10px]",G?"max-h-32":"max-h-48"),children:0===A.length?(0,N.jsx)("div",{className:"p-3 text-slate-500 text-center",children:q?"No logs":"暂无日志"}):A.map(e=>(0,N.jsx)("div",{className:b("px-3 py-1 border-b border-slate-800","error"===e.level&&"text-red-400","warn"===e.level&&"text-yellow-400","info"===e.level&&"text-blue-400","log"===e.level&&"text-green-400"),children:(0,N.jsxs)("div",{className:"flex items-start gap-2",children:[(0,N.jsxs)("span",{className:"text-slate-500 shrink-0",children:["[",e.timestamp,"]"]}),(0,N.jsxs)("span",{className:"text-slate-400 shrink-0 uppercase",children:[e.level,":"]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("span",{className:"break-all whitespace-pre-wrap",children:e.message}),e.count>1&&(0,N.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,N.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[8px] font-medium bg-orange-500 text-white",children:["× ",e.count]}),(0,N.jsxs)("span",{className:"text-[8px] text-slate-400",children:[e.firstTimestamp," - ",e.lastTimestamp]})]})]})]})},e.id))})]}),(0,N.jsx)("div",{className:"px-4 py-2 bg-slate-50 rounded-b-2xl",children:(0,N.jsx)("p",{className:"text-[10px] text-slate-400 text-center",children:"Test Environment Only"})})]}),(0,N.jsx)("button",{onClick:()=>T(!L),className:b("rounded-full shadow-lg","flex items-center justify-center","transition-all duration-200 transform","hover:scale-110 active:scale-95",G?"w-11 h-11":"w-14 h-14",L?"bg-orange-500 text-white rotate-90":"bg-white text-orange-500 border border-slate-200"),"aria-label":"Open Super Panel",children:(0,N.jsx)(g,{className:b(G?"w-5 h-5":"w-6 h-6")})})]}),(0,N.jsx)(w,{isOpen:P,onClose:()=>{z(!1),$(null)},onLogin:async(t,s)=>{R(!0),$(null);try{await j.login({username:t,password:s}),z(!1)}catch(a){var n,l;null!==(n=K.current)&&void 0!==n&&null!==(l=n.error)&&void 0!==l&&l.call(n,"Login failed:",a)||console.error("Login failed:",a),$(a instanceof Error?a.message:e("auth.loginFailed"))}finally{R(!1)}},isLoading:O,error:D})]})}return{setters:[function(e){s=e.At},function(e){},function(e){n=e.D,l=e.I,a=e.O,r=e.U,o=e.d,i=e.g,c=e.h,d=e.it,x=e.l,u=e.lt,m=e.t,h=e.x,g=e.y},function(e){f=e.a,p=e.i,e.n,b=e.o,j=e.r,w=e.t}],execute:function(){v=s(),N=u(),y=100,e("SuperPanel",m(S))}}});