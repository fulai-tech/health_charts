export function __vite_legacy_guard(){import.meta.url,import(`_`).catch(()=>1),(async function*(){})().next()}import{r as t}from"./rolldown-runtime-DGruFWvd.js";import{it as n,n as r,nt as i,ot as a,t as o,tt as s}from"./vendor-i_a7m9KR.js";import{_ as c,a as l,c as u,d,f,g as p,h as m,i as h,l as g,m as _,n as v,o as y,p as b,r as x,s as S,t as C,u as w,v as T,y as E}from"./vendor-charts-24VY1h7I.js";import{A as D,B as ee,C as O,D as k,E as A,F as te,H as ne,I as j,L as M,M as N,N as P,O as F,P as re,R as I,S as ie,T as L,V as ae,_ as oe,a as se,b as ce,c as le,d as ue,f as de,g as fe,h as pe,i as me,j as he,k as R,l as ge,m as _e,n as ve,o as ye,p as be,r as z,s as xe,t as Se,u as B,v as Ce,w as we,x as Te,y as Ee,z as De}from"./vendor-react-DTLp0eX6.js";import{t as Oe}from"./vendor-query-yIoHt1uW.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ke=ne(),V=a();const Ae={animationDuration:300,animationEasing:`linear`,isAnimationActive:!0,animationBegin:0},je={animationDuration:200,animationEasing:`linear`,isAnimationActive:!0},Me={animationDuration:800,animationEasing:`ease-in-out`,isAnimationActive:!0};function Ne(){return!0}function Pe(){if(typeof navigator>`u`)return!1;let e=navigator.hardwareConcurrency||4,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e<=4||t}function Fe(){return Ne()?(console.log(`ðŸ“Š Chart config: WebView mode [true] - simplified animations (300ms)`),Ae):Pe()?(console.log(`ðŸ“Š Chart config: Low-end device - minimal animations (200ms)`),je):(console.log(`ðŸ“Š Chart config: Standard device - full animations (800ms)`),Me)}const Ie={defaultMargin:{top:5,right:15,left:0,bottom:5},gridStyle:{strokeDasharray:`4 4`,stroke:`#E5E7EB`},axisStyle:{fontSize:12,fill:`#94a3b8`},animation:Fe()};function H(...e){return s(i(e))}function Le(){return Ie.animation}var U=re();function Re({startDate:e,endDate:t,onPrevious:n,onNext:r,disableNext:i=!1,className:a}){return(0,U.jsxs)(`div`,{className:H(`flex items-center justify-center gap-4 py-3 px-4 bg-white rounded-full shadow-sm border border-slate-100`,a),children:[(0,U.jsx)(`button`,{onClick:n,className:`p-1 text-slate-400 hover:text-slate-600 transition-colors`,"aria-label":`Previous period`,children:(0,U.jsx)(Te,{className:`w-5 h-5`})}),(0,U.jsxs)(`span`,{className:`text-sm font-medium text-slate-700`,children:[e,` ---- `,t]}),i?(0,U.jsx)(`div`,{className:`w-7 h-7`}):(0,U.jsx)(`button`,{onClick:r,className:`p-1 text-slate-400 hover:text-slate-600 transition-colors`,"aria-label":`Next period`,children:(0,U.jsx)(ce,{className:`w-5 h-5`})})]})}const W={bp:`rgb(244, 162, 97)`,spo2:`rgb(76, 201, 240)`,heartRate:`rgb(248, 113, 113)`,glucose:`rgb(233, 196, 106)`,sleep:`rgb(167, 139, 250)`,nutrition:`rgb(251, 146, 61)`},G={bp:`rgba(244, 162, 97, 0.125)`,spo2:`rgba(76, 201, 240, 0.125)`,heartRate:`rgba(248, 113, 113, 0.125)`,glucose:`rgba(233, 196, 106, 0.125)`,sleep:`rgba(167, 139, 250, 0.125)`,nutrition:`rgba(251, 146, 61, 0.125)`},ze={primary:`rgb(16, 185, 129)`,alpha:`rgba(16, 185, 129, 0.125)`},K={bp:{primary:`rgb(244, 162, 97)`,secondary:`rgba(244, 162, 97, 0.5)`,gradient:{start:`rgb(244, 162, 97)`,end:`rgba(244, 162, 97, 0.125)`}},spo2:{primary:`rgb(76, 201, 240)`,secondary:`rgba(76, 201, 240, 0.5)`,gradient:{start:`rgb(76, 201, 240)`,end:`rgba(76, 201, 240, 0.125)`}},heartRate:{primary:`rgb(248, 113, 113)`,secondary:`rgba(248, 113, 113, 0.5)`,gradient:{start:`rgb(248, 113, 113)`,end:`rgba(248, 113, 113, 0.125)`}},glucose:{primary:`rgb(233, 196, 106)`,secondary:`rgba(233, 196, 106, 0.5)`,gradient:{start:`rgb(233, 196, 106)`,end:`rgba(233, 196, 106, 0.125)`}}},q={loadingOverlay:`rgba(0, 0, 0, 0)`,cardBorderRadius:`30px`,cardPaddingX:`25px`,pageMaxWidth:`max-w-xl`},J={card:{background:`rgb(255, 255, 255)`,border:`rgb(229, 231, 235)`},page:{background:`rgb(248, 249, 250)`},text:{primary:`rgb(31, 41, 55)`,secondary:`rgb(107, 114, 128)`,muted:`rgb(156, 163, 175)`},status:{normal:`rgb(16, 185, 129)`,warning:`rgb(245, 158, 11)`,danger:`rgb(239, 68, 68)`},trend:{up:`rgb(239, 68, 68)`,down:`rgb(16, 185, 129)`,stable:`rgb(107, 114, 128)`},background:{warning:`rgb(248, 248, 248)`,neutral:`rgb(248, 248, 248)`,summaryBox:`rgb(248, 248, 248)`},chart:{grid:`rgb(226, 232, 240)`,tick:`rgb(148, 163, 184)`,activeDot:{fill:`rgb(255, 255, 255)`}}},Be={spo2:{normal:`rgb(178, 238, 177)`,low:`rgb(105, 218, 252)`,too_low:`rgb(248, 113, 113)`},bp:{normal:`rgb(145, 198, 255)`,high_normal:`rgb(178, 238, 177)`,low_bp:`rgb(255, 147, 147)`,high_bp:`rgb(255, 208, 36)`},glucose:{normal:`rgb(178, 238, 177)`,high:`rgb(251, 191, 36)`,too_high:`rgb(248, 113, 113)`,too_low:`rgb(96, 165, 250)`},heartRate:{normal:`rgb(95, 228, 143)`,high:`rgb(251, 191, 36)`,too_high:`rgb(248, 113, 113)`,slow:`rgb(96, 165, 250)`,low:`rgb(96, 165, 250)`}},Ve={deep:`rgb(162, 126, 253)`,light:`rgb(217, 203, 254)`,rem:`rgb(236, 229, 254)`,awake:`rgb(249, 147, 59)`},Y={primary:`rgb(251, 146, 61)`,positive:`rgb(251, 146, 60)`,neutral:`rgb(178, 237, 181)`,negative:`rgb(87, 158, 255)`,happy:`rgb(251, 211, 77)`,surprised:`rgb(251, 146, 60)`,calm:`rgb(178, 237, 181)`,sad:`rgb(148, 163, 184)`,angry:`rgb(87, 158, 255)`,fearful:`rgb(34, 211, 238)`,disgusted:`rgb(167, 139, 250)`},He={primary:`rgb(251, 146, 61)`,targetLine:`rgb(251, 146, 61)`};var X=(0,V.forwardRef)(({className:e,asChild:t=!1,...n},r)=>(0,U.jsx)(t?Se:`div`,{ref:r,className:H(`shadow-sm bg-white py-4 border border-slate-100`,e),style:{borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX,...n.style},...n}));X.displayName=`Card`;var Ue=(0,V.forwardRef)(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:H(`flex flex-col space-y-1.5 pb-4`,e),...t}));Ue.displayName=`CardHeader`;var We=(0,V.forwardRef)(({className:e,...t},n)=>(0,U.jsx)(`h3`,{ref:n,className:H(`text-lg font-semibold text-slate-800`,e),...t}));We.displayName=`CardTitle`;var Ge=(0,V.forwardRef)(({className:e,...t},n)=>(0,U.jsx)(`p`,{ref:n,className:H(`text-sm text-slate-500`,e),...t}));Ge.displayName=`CardDescription`;var Z=(0,V.forwardRef)(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:H(``,e),...t}));Z.displayName=`CardContent`;var Ke=(0,V.forwardRef)(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:H(`flex items-center pt-4`,e),...t}));Ke.displayName=`CardFooter`;const qe=(e=100)=>{let[t,n]=(0,V.useState)(!1);(0,V.useEffect)(()=>{let t=setTimeout(()=>{n(!0)},e);return()=>clearTimeout(t)},[e]);let r=Le();return{...r,isAnimationActive:r.isAnimationActive&&t}};function Je(){let e=(0,V.useRef)(null),t=(0,V.useCallback)(()=>{if(e.current){let t=new MouseEvent(`mouseout`,{bubbles:!0,cancelable:!0,view:window,relatedTarget:document.body}),n=new MouseEvent(`mouseleave`,{bubbles:!1,cancelable:!0,view:window}),r=e.current.querySelector(`.recharts-wrapper`);r&&(r.dispatchEvent(t),r.dispatchEvent(n));let i=e.current.querySelector(`.recharts-surface`);i&&(i.dispatchEvent(t),i.dispatchEvent(n))}},[]);return(0,V.useEffect)(()=>{let e=()=>{t()};return window.addEventListener(`scroll`,e,!0),window.addEventListener(`touchmove`,e,!0),window.addEventListener(`wheel`,e,!0),()=>{window.removeEventListener(`scroll`,e,!0),window.removeEventListener(`touchmove`,e,!0),window.removeEventListener(`wheel`,e,!0)}},[t]),e}var Ye=(e,t)=>`gradient-${e}-${t}`,Xe=({data:e,lines:t,xAxisKey:n,yAxisDomain:r,yAxisFormatter:i,height:a=224,className:o=``,renderTooltip:s,referenceLine:c,showLegend:l=!0,chartMargin:u={top:10,right:10,left:-15,bottom:0}})=>{let p=qe(),h=Je(),_=t.map((e,t)=>{var n;return{...e,gradientId:e.gradientId||Ye(e.dataKey,t),legendShape:e.legendShape||`circle`,strokeWidth:(n=e.strokeWidth)==null?2:n}}),v=e=>{let{legendShape:t,color:n}=e;return t===`circle`?(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:n}}):t===`square`?(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${n}40`}}):t===`line`?(0,U.jsx)(`span`,{className:`w-4 h-0.5`,style:{backgroundColor:n}}):null};return(0,U.jsxs)(`div`,{className:`w-full transform-gpu will-change-transform ${o}`,children:[l&&(0,U.jsx)(`div`,{className:`flex items-center gap-4 mb-2 flex-wrap`,children:_.map(e=>(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[v(e),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,U.jsx)(`div`,{ref:h,style:{height:a},className:`-mx-2`,children:(0,U.jsx)(T,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,U.jsxs)(C,{data:e,margin:u,children:[(0,U.jsx)(`defs`,{children:_.filter(e=>e.showArea).map(e=>(0,U.jsxs)(`linearGradient`,{id:e.gradientId,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,U.jsx)(`stop`,{offset:`5%`,stopColor:e.color,stopOpacity:.3}),(0,U.jsx)(`stop`,{offset:`95%`,stopColor:e.color,stopOpacity:.1})]},e.gradientId))}),(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:n,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,U.jsx)(y,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:i}),s&&(0,U.jsx)(m,{content:s,wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),c&&c.show!==!1&&(0,U.jsx)(f,{y:c.value,stroke:c.color,strokeDasharray:c.strokeDasharray||`4 4`,strokeWidth:c.strokeWidth||1.5}),_.filter(e=>e.showArea).map(e=>(0,U.jsx)(g,{type:`monotone`,dataKey:e.areaDataKey||e.dataKey,stroke:`transparent`,fill:`url(#${e.gradientId})`,name:`${e.dataKey}-area`,...p},`area-${e.dataKey}`)),_.map(e=>(0,U.jsx)(w,{type:`monotone`,dataKey:e.dataKey,stroke:e.color,strokeWidth:e.strokeWidth,dot:{fill:e.color,strokeWidth:0,r:4},activeDot:{r:6,stroke:e.color,strokeWidth:2,fill:`#fff`},name:e.dataKey,...p},`line-${e.dataKey}`))]})})})]})};Xe.displayName=`TrendLineChart`,console.log(`TrendLineChart module loaded`);const Ze=(0,V.memo)(Xe);var Qe=(0,V.memo)(({active:e,payload:t,label:n})=>{if(!e||!t||t.length===0)return null;let r=t.find(e=>e.dataKey===`systolic`&&e.name===`systolic`),i=t.find(e=>e.dataKey===`diastolic`&&e.name===`diastolic`);return(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:n}),r&&(0,U.jsxs)(`p`,{className:`text-orange-300`,children:[`SBP: `,r.value]}),i&&(0,U.jsxs)(`p`,{className:`text-emerald-300`,children:[`DBP: `,i.value]})]})});const $e=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=R(),c=W.bp,l=[{name:`Mon`,systolic:120,diastolic:80},{name:`Tues`,systolic:118,diastolic:78},{name:`Wed`,systolic:122,diastolic:82},{name:`Thu`,systolic:119,diastolic:79},{name:`Fri`,systolic:121,diastolic:81},{name:`Sat`,systolic:117,diastolic:77},{name:`Sun`,systolic:120,diastolic:80}],u=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],systolic:e.systolic,diastolic:e.diastolic})))==null?l:t},[e==null?void 0:e.chartData]);return(0,U.jsxs)(X,{className:`${t} relative`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:c}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`page.bloodPressure.trendyReport`)})]}),n&&(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,U.jsx)(B,{className:`w-3 h-3 animate-spin`}),(0,U.jsx)(`span`,{children:s(`common.loading`)})]})]}),(0,U.jsxs)(`div`,{className:`flex gap-3 mb-5`,children:[(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:c},children:(r=e==null||(i=e.summary)==null?void 0:i.avgSystolic)==null?`--`:r}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:s(`units.mmHg`)})]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:s(`page.bloodPressure.weeksAverageSBP`)})]}),(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-orange-50`,children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:c},children:(a=e==null||(o=e.summary)==null?void 0:o.avgDiastolic)==null?`--`:a}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:s(`units.mmHg`)})]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:s(`page.bloodPressure.weeksAverageDBP`)})]})]}),(0,U.jsx)(Ze,{data:u,lines:[{dataKey:`systolic`,color:c,label:s(`vitals.sbp`),showArea:!0,gradientId:`sbpGradient`,legendShape:`circle`},{dataKey:`diastolic`,color:`#10B981`,label:s(`vitals.dbp`),showArea:!0,gradientId:`dbpGradient`,legendShape:`circle`}],xAxisKey:`name`,yAxisDomain:[50,150],renderTooltip:e=>(0,U.jsx)(Qe,{...e}),height:224})]})}),et=(0,V.memo)(({data:e,innerRadius:t,outerRadius:n,paddingAngle:r=0,startAngle:i=90,endAngle:a=-270,children:o,widthClass:s=`w-full`,heightClass:c=`h-full`,animationProps:l=Le(),className:u=``,useCornerRadius:d=!0,smallSectorThreshold:f=.02})=>(0,U.jsxs)(`div`,{className:`relative transform-gpu will-change-transform ${s} ${c} ${u}`,children:[(0,U.jsx)(T,{width:`100%`,height:`100%`,children:(0,U.jsx)(x,{margin:{top:0,right:0,bottom:0,left:0},children:(0,U.jsx)(b,{data:e,cx:`50%`,cy:`50%`,innerRadius:t,outerRadius:n,paddingAngle:r,dataKey:`value`,startAngle:i,endAngle:a,strokeWidth:0,shape:e=>{let{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o,fill:s}=e,c=(r+i)/2,l=Math.abs(o-a)*Math.PI/180*c;if(d&&l<14){let e=(a+o)/2,l=Math.PI/180,u=t+c*Math.cos(-e*l),d=n+c*Math.sin(-e*l),f=i-r;return(0,U.jsx)(`circle`,{cx:u,cy:d,r:Math.min(f/2,5),fill:s})}return(0,U.jsx)(p,{...e,cornerRadius:d?5:0,strokeWidth:0})},...l,children:e.map((e,t)=>(0,U.jsx)(_,{fill:e.color,style:{outline:`none`}},`cell-${t}`))})})}),o&&(0,U.jsx)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center pointer-events-none`,children:o})]})),tt=(0,V.memo)(({title:e,icon:t,iconElement:n,themeColor:r,items:i,centerValue:a,centerLabel:o,centerValueColor:s,showCount:c=!0,columns:l=1,gridColumns:u=1,highlightValue:d,highlightLabel:f,highlightDescription:p,itemLayout:m=`default`,pieChartSize:h=`auto`,donutThickness:g=12,className:_=``,isLoading:v=!1,showInfo:y=!0,infoContent:b})=>{let{t:x}=R(),S=Le(),[C,w]=(0,V.useState)(!1),T=(0,V.useCallback)(()=>{w(!0)},[]),E=(0,V.useCallback)(()=>{w(!1)},[]),D=(0,V.useMemo)(()=>{let e=i.filter(e=>e.percent>0||e.count!==void 0&&e.count>0).map(e=>({name:e.label,value:e.percent>0?e.percent:.1,color:e.color,count:e.count}));return e.length===0?[{name:`No Data`,value:100,color:`#E5E7EB`}]:e},[i]),ee=(()=>h===`small`?`w-32 h-32`:h===`medium`?`w-40 h-40`:h===`large`||l===2||d!==void 0?`w-48 h-48`:`w-32 h-32`)(),{innerRadius:O,outerRadius:k}=(()=>l===2||d!==void 0||m===`grid-2col`?{innerRadius:`${98-g}%`,outerRadius:`98%`}:{innerRadius:`${80-(g||20)}%`,outerRadius:`80%`})();return(0,U.jsxs)(X,{className:`${_} relative overflow-hidden`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,U.jsxs)(`div`,{className:`flex-1 min-w-0 flex flex-col`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[n||t&&(0,U.jsx)(t,{className:`w-5 h-5`,style:{color:r}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e}),y&&(0,U.jsx)(be,{className:`w-4 h-4 text-slate-400 cursor-pointer hover:text-slate-600 transition-colors`,onClick:T})]}),(0,U.jsx)(`div`,{className:`flex-1`,children:d===void 0?m===`with-duration`?(0,U.jsx)(`div`,{className:`space-y-2`,children:i.map(e=>(0,U.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,U.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.duration&&(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.duration}),e.status&&(0,U.jsx)(`span`,{className:`text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-600`,children:e.status})]})]},e.type))}):m===`grid-2col`?(0,U.jsx)(`div`,{className:`grid grid-cols-2 gap-x-4 gap-y-2`,children:i.slice(0,8).map(e=>(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label}),(0,U.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[e.percent,`%`]})]},e.type))}):l===2?(0,U.jsx)(`div`,{className:`grid grid-cols-2 gap-x-6 gap-y-3`,children:i.map(e=>(0,U.jsxs)(`div`,{className:`flex items-center gap-2 min-w-0`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-700 flex-shrink-0`,children:e.label}),(0,U.jsxs)(`span`,{className:`text-sm font-medium ml-auto flex-shrink-0`,style:{color:e.color},children:[e.percent,`%`]})]},e.type))}):(0,U.jsx)(`div`,{className:`space-y-2`,children:i.map(e=>{var t;return(0,U.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,U.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600 w-14`,children:e.label}),(0,U.jsxs)(`span`,{className:`text-sm font-semibold w-10`,style:{color:e.color},children:[e.percent,`%`]}),c&&(0,U.jsxs)(`span`,{className:`text-sm`,style:{color:e.color},children:[(t=e.count)==null?0:t,` `,x(`common.times`)]})]},e.type)})}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(`div`,{className:`mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-4xl font-bold`,style:{color:r},children:d}),f&&(0,U.jsx)(`span`,{className:`text-base text-slate-400`,children:f})]}),p&&(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:p})]}),(0,U.jsx)(`div`,{className:`grid ${u===2?`grid-cols-2`:`grid-cols-1`} gap-x-4 gap-y-2`,children:i.map(e=>(0,U.jsxs)(`div`,{className:`flex flex-col`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-2.5 h-2.5 rounded-full flex-shrink-0`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:e.label})]}),(0,U.jsxs)(`span`,{className:`text-base font-semibold ml-[18px]`,style:{color:e.color},children:[e.count,` `,e.count===1?x(`common.time`):x(`common.times`)]})]},e.type))})]})})]}),(0,U.jsxs)(et,{data:D,innerRadius:O,outerRadius:k,paddingAngle:l===2?2:d===void 0?3:2,widthClass:ee,heightClass:``,animationProps:S,children:[(0,U.jsx)(`span`,{className:`text-2xl font-bold text-center px-2`,style:{color:s||r},children:a}),o&&(0,U.jsx)(`span`,{className:`text-xs text-slate-400 mt-1`,children:o})]})]}),C&&(0,U.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4`,style:{backgroundColor:`rgba(0, 0, 0, 0.5)`},onClick:E,children:(0,U.jsxs)(`div`,{className:`bg-white shadow-2xl max-w-md w-full mx-4 overflow-hidden`,style:{borderRadius:q.cardBorderRadius},onClick:e=>e.stopPropagation(),children:[(0,U.jsx)(`div`,{className:`px-6 pt-6 pb-4`,children:(0,U.jsx)(`h3`,{className:`text-xl font-bold text-slate-800 text-center`,children:x(`common.illustrate`)})}),(0,U.jsx)(`div`,{className:`px-6 pb-6 max-h-96 overflow-y-auto`,children:(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-2xl p-4`,children:b?typeof b==`string`?(0,U.jsx)(`div`,{className:`text-sm text-slate-700 whitespace-pre-line leading-relaxed`,children:b}):b:(0,U.jsx)(`div`,{className:`space-y-3`,children:i.map(e=>(0,U.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,U.jsx)(`span`,{className:`w-4 h-4 rounded-full flex-shrink-0 mt-0.5`,style:{backgroundColor:e.color}}),(0,U.jsxs)(`div`,{className:`flex-1`,children:[(0,U.jsx)(`p`,{className:`text-sm font-medium text-slate-800`,children:e.label}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-500 mt-0.5`,children:[e.percent,`% (`,e.count||0,` `,x(`common.times`),`)`]})]})]},e.type))})})}),(0,U.jsx)(`div`,{className:`px-6 pb-6`,children:(0,U.jsx)(`button`,{onClick:E,className:`w-full py-3 rounded-full font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-95`,style:{backgroundColor:r},children:x(`common.close`)})})]})})]})});var nt={normal:`status.normal`,high_normal:`status.normalHighValue`,low_bp:`status.tooLow`,high_bp:`status.tooHigh`},rt=[`normal`,`high_normal`,`low_bp`,`high_bp`];const it=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=R(),c=W.bp,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=(0,V.useMemo)(()=>rt.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(nt[e]),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Be.bp[e]||`#94A3B8`}}),[l,s]),f=(0,V.useMemo)(()=>d.filter(e=>e.type===`normal`||e.type===`high_normal`).reduce((e,t)=>e+(t.count||0),0),[d]),p=(0,V.useMemo)(()=>s(`page.bloodPressure.bpClassification`),[s]);return(0,U.jsx)(tt,{title:s(`page.bloodPressure.bpStatistics`),icon:F,themeColor:c,pieChartSize:`medium`,items:d,centerValue:s(`common.good`),centerLabel:s(`common.inAverage`),highlightValue:f,highlightLabel:`/ ${u} ${s(`common.times`)}`,highlightDescription:s(`page.bloodPressure.normalResults`),gridColumns:2,infoContent:p,className:t,isLoading:n})}),at=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=R(),o=W.bp,s=(r=e==null?void 0:e.comparison)==null?{current:{systolic:0,diastolic:0},previous:{systolic:0,diastolic:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{systolicChange:0,diastolicChange:0,systolicTrend:`stable`,diastolicTrend:`stable`}:i,l=(0,V.useMemo)(()=>e=>e===`up`?(0,U.jsx)(L,{className:`w-4 h-4`}):e===`down`?(0,U.jsx)(A,{className:`w-4 h-4`}):null,[]),u=(0,V.useMemo)(()=>s.insight||a(`page.bloodPressure.defaultInsight`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),[s.insight,a]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(O,{className:`w-5 h-5`,style:{color:o}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.bloodPressure.compareWithLastWeek`)})]}),(0,U.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageSBP`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.systolic:`--`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.systolicChange!==0&&(0,U.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.systolicTrend),Math.abs(c.systolicChange)]})]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.systolic:`--`,a(`units.mmHg`)]})]}),(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.bloodPressure.averageDBP`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.diastolic:`--`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmHg`)}),c.diastolicChange!==0&&(0,U.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:o},children:[l(c.diastolicTrend),Math.abs(c.diastolicChange)]})]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?s.previous.diastolic:`--`,a(`units.mmHg`)]})]})]}),(0,U.jsx)(`div`,{className:`p-4 rounded-2xl bg-sky-50`,children:(0,U.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:u})})]})}),ot=(0,V.memo)(({titleKey:e=`common.weeklyOverview`,Icon:t,overallText:n,highlightText:r,highlightLabelKey:i=`page.sleep.needsAttention`,highlightColor:a=`#FBBF24`,suggestions:o=[],themeColor:s,className:c,isLoading:l})=>{let{t:u}=R();return(0,U.jsxs)(X,{className:`${c} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${l?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(t,{className:`w-5 h-5`,style:{color:s}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:u(e)})]}),(0,U.jsxs)(`div`,{className:`mb-5`,children:[(0,U.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:s},children:u(`page.bloodPressure.overallSituation`)}),(0,U.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,U.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:n})})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`inline-block px-3 py-1 rounded-full text-white text-xs font-medium mb-2`,style:{backgroundColor:a},children:u(i)}),(0,U.jsx)(`div`,{className:`p-4 rounded-lg`,style:{backgroundColor:`#F8F9FA`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.08)`},children:(0,U.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:r})})]}),o&&o.length>0&&(0,U.jsx)(`div`,{className:`mt-4 pt-4 border-t border-slate-100`,children:(0,U.jsx)(`ul`,{className:`space-y-2`,children:o.map((e,t)=>(0,U.jsxs)(`li`,{className:`flex items-start gap-2 text-sm text-slate-600`,children:[(0,U.jsx)(`span`,{style:{color:s},children:`â€¢`}),e]},t))})})]})}),st=(0,V.memo)(({data:e,weeklySummary:t,className:n,isLoading:r})=>{let{t:i}=R(),a=W.bp;return(0,U.jsx)(ot,{titleKey:`page.bloodPressure.weeklyOverview`,Icon:pe,overallText:(0,V.useMemo)(()=>(t==null?void 0:t.overview)||i(`page.bloodPressure.defaultOverview`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),[t==null?void 0:t.overview,i]),highlightText:(0,V.useMemo)(()=>(t==null?void 0:t.highlights)||i(`page.bloodPressure.defaultHighlights`,{defaultValue:`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`}),[t==null?void 0:t.highlights,i]),highlightLabelKey:`page.bloodPressure.needsAttention`,highlightColor:`#FBBF24`,suggestions:t==null?void 0:t.suggestions,themeColor:a,className:n,isLoading:r})}),ct={baseURL:`https://test.fulai.tech`,auth:{deviceLogin:`/auth/app/login`},trendReview:{overview:`/trend-review/overview`,indicatorDetail:`/trend-review/indicator-detail`},currentStatus:{dimensionDetail:`/current-status/dimension-detail`},device:{username:`ceshi001`,password:`ceshi001`}},lt={accessToken:10080*60*1e3,refreshToken:720*60*60*1e3},ut=`fulai_auth_data`,dt=new class{constructor(){this.authData=null,this.loadFromStorage()}loadFromStorage(){try{let e=localStorage.getItem(ut);e&&(this.authData=JSON.parse(e))}catch(e){console.error(`Failed to load auth data from storage:`,e),this.authData=null}}saveToStorage(){try{this.authData?localStorage.setItem(ut,JSON.stringify(this.authData)):localStorage.removeItem(ut)}catch(e){console.error(`Failed to save auth data to storage:`,e)}}async login(e){let t=e||{username:ct.device.username,password:ct.device.password},n=await r.post(`${ct.baseURL}${ct.auth.deviceLogin}`,t,{headers:{"Content-Type":`application/json`,Accept:`application/json`}});if(n.data.code!==0)throw Error(n.data.msg||`Login failed`);let i=Date.now();return this.authData={user:n.data.data.user,accessToken:n.data.data.accessToken,refreshToken:n.data.data.refreshToken,accessTokenExpiry:i+lt.accessToken,refreshTokenExpiry:i+lt.refreshToken},this.saveToStorage(),this.authData}isAuthenticated(){return this.authData?Date.now()<this.authData.accessTokenExpiry-300*1e3:!1}canRefresh(){return this.authData?Date.now()<this.authData.refreshTokenExpiry:!1}getAccessToken(){return this.authData?this.authData.accessToken:null}getRefreshToken(){return this.authData?this.authData.refreshToken:null}getAuthData(){return this.authData}logout(){this.authData=null,this.saveToStorage()}async ensureAuthenticated(){return this.isAuthenticated()||await this.login(),this.authData.accessToken}};function ft(){let e=r.create({baseURL:ct.baseURL,headers:{"Content-Type":`application/json`,Accept:`application/json`},timeout:3e4});return e.interceptors.request.use(async e=>{var t;try{let t=await dt.ensureAuthenticated();t&&(e.headers.Authorization=`Bearer ${t}`)}catch(e){console.error(`Failed to get auth token:`,e)}return console.log(`[API Request]`,(t=e.method)==null?void 0:t.toUpperCase(),e.url,e.data),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async t=>{var n;let r=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!r._retry){r._retry=!0;try{dt.logout();let t=await dt.ensureAuthenticated();return r.headers.Authorization=`Bearer ${t}`,e(r)}catch(e){return Promise.reject(e)}}return Promise.reject(t)}),e}const pt=ft();function mt(){let e=new Date,t=e.toISOString().split(`T`)[0],n=new Date(e);n.setDate(n.getDate()-6);let r=n.toISOString().split(`T`)[0];return console.log(`[DateRange]`,{start_date:r,end_date:t}),{start_date:r,end_date:t}}async function ht(e,t){let n=t||mt(),r={type:e,start_date:n.start_date,end_date:n.end_date},i=await pt.post(ct.trendReview.indicatorDetail,r);if(i.data.code!==200)throw Error(i.data.msg||`Failed to fetch indicator detail`);return i.data.data}async function gt(e){return ht(`blood_pressure`,e)}async function _t(e){return ht(`heart_rate`,e)}async function vt(e){return ht(`blood_glucose`,e)}async function yt(e){return ht(`blood_oxygen`,e)}async function bt(e){return ht(`sleep`,e)}var xt={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`},St={æ­£å¸¸è¡€åŽ‹:`normal`,æ­£å¸¸:`normal`,æ­£å¸¸é«˜å€¼:`high_normal`,ä½Žè¡€åŽ‹:`low_bp`,é«˜è¡€åŽ‹:`high_bp`,è¿‡ä½Ž:`low_bp`,è¿‡é«˜:`high_bp`};function Ct(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function wt(e,t){return e<90||t<60?`low`:e<120&&t<80?`normal`:e<130&&t<80?`elevated`:`high`}function Tt(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:Ct(e.date),weekdayKey:xt[e.label]||`weekdays.mon`,systolic:e.systolic||0,diastolic:e.diastolic||0})),g=(e==null||(n=e.overview)==null?void 0:n.systolic_avg)||0,_=(e==null||(r=e.overview)==null?void 0:r.diastolic_avg)||0,v=wt(g,_),y=(e==null?void 0:e.comparison)||{},b=((i=y.current)==null?void 0:i.systolic_avg)||g,x=((a=y.previous)==null?void 0:a.systolic_avg)||0,S=((o=y.current)==null?void 0:o.diastolic_avg)||_,C=((s=y.previous)==null?void 0:s.diastolic_avg)||0,w=b-x,T=S-C,E=w>0?`up`:w<0?`down`:`stable`,D=T>0?`up`:T<0?`down`:`stable`,ee=Math.abs(w),O=Math.abs(T),k=h.length>0?{systolic:h[h.length-1].systolic,diastolic:h[h.length-1].diastolic,date:h[h.length-1].date}:null,A=((e==null||(c=e.statistics)==null?void 0:c.distribution)||[]).map(e=>({...e,type:St[e.label]||e.type||`normal`}));return{chartData:h,yAxisRange:(e==null||(l=e.trend_chart)==null?void 0:l.y_axis_range)||{min:60,max:160},summary:{avgSystolic:g,avgDiastolic:_,status:v,statusKey:`status.${v}`,systolicTrend:E,diastolicTrend:D,systolicChange:ee,diastolicChange:O,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:A},comparison:{current:{systolic:((d=y.current)==null?void 0:d.systolic_avg)||g,diastolic:((f=y.current)==null?void 0:f.diastolic_avg)||_},previous:{systolic:((p=y.previous)==null?void 0:p.systolic_avg)||0,diastolic:((m=y.previous)==null?void 0:m.diastolic_avg)||0},insight:y.insight||null},latestReading:k}}function Et(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Dt(e){let t=P(),{featureName:n,queryKeyFn:r,fetchFn:i,staleTime:a=300*1e3}=e;return{prefetchPreviousWeeks:(0,V.useCallback)((e,o=3)=>{console.log(`[${n} Prefetch] Starting prefetch of ${o} previous weeks`);for(let s=1;s<=o;s++){let o=new Date(e);o.setDate(o.getDate()-7*s);let c=new Date(o);c.setDate(c.getDate()-6);let l={startDate:Et(c),endDate:Et(o)};console.log(`[${n} Prefetch] Week ${s}: ${l.startDate} to ${l.endDate}`),t.prefetchQuery({queryKey:r(l),queryFn:()=>i(l),staleTime:a})}},[t,n,r,i,a])}}const Ot={all:[`blood-pressure`],trend:e=>[...Ot.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Ot.all,`details`]};function kt(e){return he({queryKey:Ot.trend(e),queryFn:async()=>{console.log(`[BP API] Fetching with dateRange:`,e);let t=await gt(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[BP API] Result:`,t),t},select:e=>Tt(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function At(){return Dt({featureName:`BP`,queryKeyFn:Ot.trend,fetchFn:e=>gt({start_date:e.startDate,end_date:e.endDate})})}const jt={light:{mode:`light`,background:`#F1EFEE`,cardBackground:`#FFFFFF`,textPrimary:`#1E293B`,textSecondary:`#64748B`,border:`#E2E8F0`},dark:{mode:`dark`,background:`#0F172A`,cardBackground:`#1E293B`,textPrimary:`#F1F5F9`,textSecondary:`#94A3B8`,border:`#334155`}};function Mt(){let[e]=ae(),t=e.get(`theme`);return(0,V.useMemo)(()=>t===`dark`?jt.dark:jt.light,[t])}function Nt(){let[e]=ae(),{i18n:t}=R(),n=e.get(`lang`);return(0,V.useEffect)(()=>{n&&(n===`en`||n===`zh`)&&t.changeLanguage(n)},[n,t]),t.language}function Pt(){return{theme:Mt(),language:Nt()}}function Ft(){let{t:e}=R(),{theme:t}=Pt();return(0,U.jsx)(`div`,{className:`rounded-lg`,style:{backgroundColor:`transparent`,padding:`clamp(12px, 5vw, 20px)`,paddingLeft:`clamp(16px, 4vw, 24px)`,paddingRight:`clamp(16px, 4vw, 24px)`,fontSize:`clamp(12px, 3.5vw, 14px)`,lineHeight:`1.6`,color:t.textSecondary,textAlign:`center`},children:e(`common.disclaimer`)})}function It(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Lt(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Rt(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=At(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:It(r.start),endDate:It(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:Lt(r.start),end:Lt(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=kt(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,U.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)($e,{data:u}),(0,U.jsx)(it,{data:u}),(0,U.jsx)(at,{data:u}),(0,U.jsx)(st,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}function zt({children:e,className:t}){return(0,U.jsx)(`div`,{className:H(`min-h-screen bg-transparent flex items-center justify-center`,t),children:e})}var Bt=(0,V.memo)(({active:e,payload:t,label:n})=>{let{t:r}=R();if(!e||!t||t.length===0)return null;let i=t.filter(e=>e.dataKey!==`range`&&e.value!==void 0),a=e=>({high:r(`vitals.systolic`),low:r(`vitals.diastolic`),avg:r(`common.average`,`Avg`),max:r(`common.max`,`Max`),min:r(`common.min`,`Min`),value:r(`common.value`,`Value`)})[e]||e;return(0,U.jsxs)(`div`,{className:`bg-white/95 backdrop-blur-sm px-3 py-2 rounded-lg shadow-lg border border-slate-100`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:n}),i.map((e,t)=>(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-2 h-2 rounded-full`,style:{backgroundColor:e.color}}),(0,U.jsxs)(`span`,{className:`text-sm font-medium text-slate-800`,children:[a(e.name),`: `,e.value]})]},t))]})});function Vt({data:e,type:t=`line`,color:n,secondaryColor:r,height:i=200,className:a,showGrid:o=!0,animationDuration:s=300,domainPadding:c=5,yDomain:f}){let p=(0,V.useMemo)(()=>({data:e,margin:{top:10,right:10,left:-20,bottom:0}}),[e]),h=(0,V.useMemo)(()=>({tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),[]),b=qe(),x=Je(),E=(0,V.useMemo)(()=>()=>f||[`dataMin - ${c}`,`dataMax + ${c}`],[f,c]);return(0,U.jsx)(`div`,{ref:x,className:H(`w-full transform-gpu will-change-transform`,a),style:{height:i},children:(0,U.jsx)(T,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(()=>{if(t===`mixed`){let t=(0,V.useMemo)(()=>e.map(e=>{var t,n,r,i,a,o,s,c,l;return{...e,rangeBase:(t=(n=e.min)==null?(r=e.range)==null?void 0:r[0]:n)==null?0:t,rangeHeight:((i=(a=e.max)==null?(o=e.range)==null?void 0:o[1]:a)==null?0:i)-((s=(c=e.min)==null?(l=e.range)==null?void 0:l[0]:c)==null?0:s)}}),[e]);return(0,U.jsxs)(C,{...p,data:t,children:[o&&(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:`dateLabel`,...h}),(0,U.jsx)(y,{...h,domain:E()}),(0,U.jsx)(m,{content:(0,U.jsx)(Bt,{})}),(0,U.jsx)(u,{dataKey:`rangeBase`,stackId:`range`,fill:`transparent`,...b}),(0,U.jsx)(u,{dataKey:`rangeHeight`,stackId:`range`,fill:`${n}40`,radius:[4,4,4,4],...b,children:t.map((e,t)=>(0,U.jsx)(_,{fill:`${n}40`},`cell-${t}`))}),(0,U.jsx)(w,{type:`monotone`,dataKey:`avg`,stroke:n,strokeWidth:2.5,dot:{fill:n,strokeWidth:0,r:4},activeDot:{r:6,stroke:n,strokeWidth:2,fill:`#fff`},...b})]})}return t===`area`?(0,U.jsxs)(v,{...p,children:[o&&(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:`dateLabel`,...h}),(0,U.jsx)(y,{...h,domain:E()}),(0,U.jsx)(m,{content:(0,U.jsx)(Bt,{})}),(0,U.jsx)(`defs`,{children:(0,U.jsxs)(`linearGradient`,{id:`gradient-${n}`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,U.jsx)(`stop`,{offset:`5%`,stopColor:n,stopOpacity:.3}),(0,U.jsx)(`stop`,{offset:`95%`,stopColor:n,stopOpacity:0})]})}),(0,U.jsx)(g,{type:`monotone`,dataKey:`value`,stroke:n,strokeWidth:2,fill:`url(#gradient-${n})`,...b})]}):t===`range`?(0,U.jsxs)(l,{...p,children:[o&&(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:`dateLabel`,...h}),(0,U.jsx)(y,{...h,domain:E()}),(0,U.jsx)(m,{content:(0,U.jsx)(Bt,{})}),(0,U.jsx)(w,{type:`monotone`,dataKey:`high`,stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:0,r:3},activeDot:{r:5,stroke:n,strokeWidth:2,fill:`#fff`},...b}),(0,U.jsx)(w,{type:`monotone`,dataKey:`low`,stroke:r||n,strokeWidth:2,strokeDasharray:`5 5`,dot:{fill:r||n,strokeWidth:0,r:3},activeDot:{r:5,stroke:r||n,strokeWidth:2,fill:`#fff`},...b})]}):(0,U.jsxs)(l,{...p,children:[o&&(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:`dateLabel`,...h}),(0,U.jsx)(y,{...h,domain:E()}),(0,U.jsx)(m,{content:(0,U.jsx)(Bt,{})}),(0,U.jsx)(w,{type:`monotone`,dataKey:`value`,stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:0,r:3},activeDot:{r:5,stroke:n,strokeWidth:2,fill:`#fff`},...b})]})})()})})}const Ht=(0,V.memo)(({showCard:e=!0,height:t=200,className:n})=>{let{t:r}=R(),{data:i,isLoading:a,isError:o,refetch:s}=kt();if(o||!i)return(0,U.jsx)(Ut,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,U.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-bp rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=(0,V.useMemo)(()=>i.chartData.map(e=>({dateLabel:e.dateLabel,high:e.systolic,low:e.diastolic,date:e.date})),[i.chartData]),l=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:K.bp.primary}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`vitals.systolic`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-0.5 rounded border-dashed`,style:{borderBottomWidth:2,borderColor:K.bp.secondary}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`vitals.diastolic`)})]}),a&&(0,U.jsxs)(`div`,{className:`ml-auto flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,U.jsx)(B,{className:`w-3 h-3 animate-spin`}),(0,U.jsx)(`span`,{children:r(`common.loading`)})]})]}),(0,U.jsx)(Vt,{data:c,type:`range`,color:K.bp.primary,secondaryColor:K.bp.secondary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,U.jsxs)(X,{className:n,children:[(0,U.jsx)(Ue,{children:(0,U.jsx)(We,{children:r(`page.bloodPressure.trendTitle`)})}),(0,U.jsx)(Z,{children:l})]}):(0,U.jsx)(`div`,{className:n,children:l})});function Ut({showCard:e,className:t,children:n}){return e?(0,U.jsx)(X,{className:t,children:(0,U.jsx)(Z,{className:`py-4`,children:n})}):(0,U.jsx)(`div`,{className:H(`p-4`,t),children:n})}function Wt({titleKey:e,value:t,unit:n,trend:r=`stable`,trendValue:i,subMetrics:a=[],accentColor:o,className:s,loadingIndicator:c}){let{t:l}=R(),u={up:z,down:me,stable:ge}[r]||ge,d={up:J.trend.up,down:J.trend.down,stable:J.trend.stable}[r]||J.trend.stable;return(0,U.jsxs)(X,{className:H(`relative overflow-hidden`,s),style:{borderLeftWidth:o?`4px`:void 0,borderLeftColor:o},children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsx)(`span`,{className:`text-sm font-medium text-slate-600`,children:l(e)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[c,(0,U.jsxs)(`div`,{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium`,style:{backgroundColor:`${d}15`,color:d},children:[(0,U.jsx)(u,{className:`w-3 h-3`}),i&&(0,U.jsx)(`span`,{children:i})]})]})]}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-2 mb-4`,children:[(0,U.jsx)(`span`,{className:`text-4xl font-bold text-slate-900`,children:t}),(0,U.jsx)(`span`,{className:`text-lg text-slate-500`,children:n})]}),a.length>0&&(0,U.jsx)(`div`,{className:`flex gap-4 pt-3 border-t border-slate-100`,children:a.map((e,t)=>(0,U.jsxs)(`div`,{className:`flex-1`,children:[(0,U.jsx)(`div`,{className:`text-xs text-slate-500 mb-0.5`,children:l(e.labelKey)}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-lg font-semibold text-slate-800`,children:e.value}),e.unit&&(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]})]},t))})]})}(0,V.memo)(({className:e})=>{let{t}=R(),{data:n,isLoading:r,isError:i}=kt();if(i||!n||!n.latestReading)return(0,U.jsx)(X,{className:e,children:(0,U.jsx)(Z,{className:`py-8 text-center`,children:(0,U.jsx)(`p`,{className:`text-sm text-slate-500`,children:t(`common.noData`)})})});let{summary:a,latestReading:o}=n,s=(0,V.useMemo)(()=>a.systolicChange===0?void 0:`${a.systolicChange>0?`+`:``}${a.systolicChange}`,[a.systolicChange]),c=(0,V.useMemo)(()=>[{labelKey:`page.bloodPressure.averageReading`,value:`${a.avgSystolic}/${a.avgDiastolic}`,unit:t(`units.mmHg`)},{labelKey:`status.`+a.status,value:t(a.statusKey)}],[a.avgSystolic,a.avgDiastolic,a.status,a.statusKey,t]);return(0,U.jsx)(Wt,{className:e,titleKey:`vitals.bloodPressure`,value:`${o.systolic}/${o.diastolic}`,unit:t(`units.mmHg`),trend:a.systolicTrend,trendValue:s,accentColor:W.bp,subMetrics:c,loadingIndicator:r&&(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,U.jsx)(B,{className:`w-3 h-3 animate-spin`}),(0,U.jsx)(`span`,{children:t(`common.loading`)})]})})});function Gt(){return(0,U.jsx)(zt,{children:(0,U.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,U.jsx)(Ht,{showCard:!1,height:200})})})}var Kt=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,U.jsxs)(`p`,{className:`text-cyan-300`,children:[r(`common.max`),`: `,i.max,`%`]}),(0,U.jsxs)(`p`,{className:`text-cyan-200`,children:[r(`common.min`),`: `,i.min,`%`]})]}):null});function qt({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u,d,f,p,m,h;let{t:g}=R(),_=W.spo2,v=(0,V.useMemo)(()=>[{name:`Mon`,weekdayKey:`weekday.mon`,range:[96,99],avg:97,max:99,min:96},{name:`Tues`,weekdayKey:`weekday.tue`,range:[95,98],avg:97,max:98,min:95},{name:`Wed`,weekdayKey:`weekday.wed`,range:[96,99],avg:98,max:99,min:96},{name:`Thu`,weekdayKey:`weekday.thu`,range:[95,98],avg:97,max:98,min:95},{name:`Fri`,weekdayKey:`weekday.fri`,range:[96,99],avg:97,max:99,min:96},{name:`Sat`,weekdayKey:`weekday.sat`,range:[97,99],avg:98,max:99,min:97},{name:`Sun`,weekdayKey:`weekday.sun`,range:[96,98],avg:97,max:98,min:96}],[]),y=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?v:t},[e==null?void 0:e.chartData,v]),b=(0,V.useMemo)(()=>()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`,i=r?L:A;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?J.trend.down:J.trend.up},children:[(0,U.jsx)(i,{className:`w-3 h-3`}),Math.abs(n)]})},[e,J.trend]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:_}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:g(`page.spo2.trendyReport`)})]}),(0,U.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:J.background.summaryBox},children:[(0,U.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:g(`page.spo2.weeksAverage`)}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:_},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,U.jsx)(`span`,{className:`text-lg text-slate-500`,children:`%`}),b()]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[g(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,`%`]})]}),(0,U.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,U.jsxs)(`p`,{children:[g(`page.spo2.normalRange`),`: 95% - 100%`]})})]}),(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.max`),`(`,e?g(e.summary.maxWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:_},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.min`),`(`,e?g(e.summary.minWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:`%`})]})]})]})]}),(0,U.jsx)(Ze,{data:y,lines:[{dataKey:`avg`,areaDataKey:`range`,color:_,label:g(`page.spo2.mean`),showArea:!0,gradientId:`spo2RangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?90:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?100:p],renderTooltip:e=>(0,U.jsx)(Kt,{...e}),referenceLine:{value:(h=e==null?void 0:e.averageLine)==null?97:h,color:_},height:224})]})}var Jt=[`normal`,`low`,`too_low`],Yt={normal:`status.normal`,low:`status.low`,too_low:`status.tooLow`};function Xt({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=R(),c=W.spo2,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=Jt.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(Yt[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Be.spo2[e]||`#94A3B8`}});return(0,U.jsx)(tt,{title:s(`page.spo2.statistics`),icon:F,themeColor:c,donutThickness:12,pieChartSize:`small`,items:d,centerValue:u,centerLabel:s(`common.times`),showCount:!0,columns:1,className:t,isLoading:n})}const Zt=(0,V.memo)(({titleKey:e=`dataAnalysis`,Icon:t,items:n,themeColor:r,className:i,isLoading:a,topContent:o})=>{let{t:s}=R();return(0,U.jsxs)(X,{className:`${i} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${a?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(t,{className:`w-5 h-5`,style:{color:r}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(e)})]}),o&&(0,U.jsx)(`div`,{className:`mb-4`,children:o}),(0,U.jsx)(`div`,{className:`space-y-3`,children:n.map((e,t)=>(0,U.jsxs)(`div`,{className:`flex items-start gap-3 rounded-xl px-4 py-3`,style:{backgroundColor:`#F8F8F8`},children:[(0,U.jsx)(`span`,{className:`w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0`,style:{backgroundColor:r}}),(0,U.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:e})]},t))})]})});function Qt({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=R(),f=W.spo2,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=[d(`page.spo2.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),d(`page.spo2.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`}),d(`page.spo2.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})];return(0,U.jsx)(Zt,{titleKey:`page.spo2.dataAnalysis`,Icon:O,items:(p.length>0?p:m).map(e=>typeof e==`string`?e:e.content),themeColor:f,className:t,isLoading:n})}function $t({data:e,className:t,isLoading:n}){let{t:r}=R(),i=W.spo2,a=e==null?void 0:e.weeklySummary;return(0,U.jsx)(ot,{titleKey:`page.spo2.weeklyOverview`,Icon:pe,overallText:(a==null?void 0:a.overview)||r(`page.spo2.defaultOverview`,{defaultValue:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`}),highlightText:(a==null?void 0:a.highlights)||r(`page.spo2.defaultHighlights`,{defaultValue:`The trend chart shows that your blood pressure rose significantly during the week (Wednesday and Thursday), with a peak systolic pressure approaching 150 mmHg. Meanwhile, the statistics show that your blood pressure measurements fluctuated considerably across different levels. We will continue to monitor your condition and help you identify any possible causes for the elevated blood pressure.`}),highlightLabelKey:`page.spo2.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}var en={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`};function tn(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function nn(e){return e>=95?`normal`:e>=90?`low`:`too_low`}function rn(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function an(e){return e&&en[e]||`weekdays.mon`}function on(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h;console.log(`[SpO2 Adapter] Input:`,e);let g=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t;let n=new Date(e.date),r=(t=e.avg)==null?Math.round((e.max+e.min)/2):t;return{date:n,dateLabel:tn(e.date),weekdayKey:en[e.label]||`weekdays.mon`,max:e.max||0,min:e.min||0,avg:r,range:[e.min||0,e.max||0]}}),_=(e==null||(n=e.overview)==null?void 0:n.average)||0,v=(e==null||(r=e.overview)==null?void 0:r.min)||0,y=(e==null||(i=e.overview)==null?void 0:i.max)||0,b=an(e==null||(a=e.overview)==null?void 0:a.max_label),x=an(e==null||(o=e.overview)==null?void 0:o.min_label),S=nn(_),C=(e==null?void 0:e.comparison)||{},w=C.changes||{},T=rn((s=w.average)==null?void 0:s.trend),E=((c=w.average)==null?void 0:c.value)||0,D=((l=C.previous)==null?void 0:l.average)||0,ee=g.length>0?{avg:g[g.length-1].avg,min:g[g.length-1].min,max:g[g.length-1].max,date:g[g.length-1].date}:null,O=(e==null?void 0:e.weekly_summary)||{},k={overview:O.overview||null,highlights:O.highlights||null,suggestions:O.suggestions||[],dataAnalysis:(O.data_analysis||[]).map(e=>({content:e}))},A={chartData:g,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:85,max:100},averageLine:(e==null||(d=e.trend_chart)==null?void 0:d.average_line)||_,summary:{avgValue:_,minValue:v,maxValue:y,maxWeekdayKey:b,minWeekdayKey:x,status:S,statusKey:`status.${S}`,trend:T,changeValue:E,totalCount:(e==null||(f=e.statistics)==null?void 0:f.total_count)||0,distribution:(e==null||(p=e.statistics)==null?void 0:p.distribution)||[],previousAvg:D},comparison:{current:{average:((m=C.current)==null?void 0:m.average)||_},previous:{average:((h=C.previous)==null?void 0:h.average)||0},insight:C.insight||null},weeklySummary:k,latestReading:ee};return console.log(`[SpO2 Adapter] Output:`,A),A}const sn={all:[`spo2`],trend:e=>[...sn.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...sn.all,`details`]};function cn(e){return he({queryKey:sn.trend(e),queryFn:async()=>{console.log(`[SpO2 API] Fetching with dateRange:`,e);let t=await yt(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[SpO2 API] Result:`,t),t},select:e=>on(e),staleTime:300*1e3,gcTime:600*1e3})}function ln(){return Dt({featureName:`SpO2`,queryKeyFn:sn.trend,fetchFn:e=>yt({start_date:e.startDate,end_date:e.endDate})})}function un(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function dn(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function fn(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=ln(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:un(r.start),endDate:un(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:dn(r.start),end:dn(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=cn(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,U.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(qt,{data:u}),(0,U.jsx)(Xt,{data:u}),(0,U.jsx)(Qt,{data:u}),(0,U.jsx)($t,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}function pn({showCard:e=!0,height:t=200,className:n}){let{t:r}=R(),{data:i,isLoading:a,isError:o,refetch:s}=cn();if(a)return(0,U.jsx)(mn,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`animate-pulse`,children:[(0,U.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,U.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,U.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,U.jsx)(mn,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,U.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-spo2 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:e.range,date:e.date})),l=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${K.spo2.primary}40`}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.spo2.rangeToday`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:K.spo2.primary}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,U.jsx)(Vt,{data:c,type:`mixed`,color:K.spo2.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,U.jsxs)(X,{className:n,children:[(0,U.jsx)(Ue,{children:(0,U.jsx)(We,{children:r(`page.spo2.trendTitle`)})}),(0,U.jsx)(Z,{children:l})]}):(0,U.jsx)(`div`,{className:n,children:l})}function mn({showCard:e,className:t,children:n}){return e?(0,U.jsx)(X,{className:t,children:(0,U.jsx)(Z,{className:`py-4`,children:n})}):(0,U.jsx)(`div`,{className:H(`p-4`,t),children:n})}function hn(){return(0,U.jsx)(zt,{children:(0,U.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,U.jsx)(pn,{showCard:!1,height:200})})})}var gn=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,U.jsxs)(`p`,{className:`text-red-300`,children:[r(`common.average`),`: `,i.avg]}),(0,U.jsxs)(`p`,{className:`text-red-200`,children:[r(`common.max`),`: `,i.max]}),(0,U.jsxs)(`p`,{className:`text-red-100`,children:[r(`common.min`),`: `,i.min]})]}):null});const _n=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h;let{t:g}=R(),_=W.heartRate,v=(0,V.useMemo)(()=>[{name:`Mon`,weekdayKey:`weekday.mon`,range:[60,85],avg:72,max:85,min:60},{name:`Tues`,weekdayKey:`weekday.tue`,range:[62,88],avg:75,max:88,min:62},{name:`Wed`,weekdayKey:`weekday.wed`,range:[58,82],avg:70,max:82,min:58},{name:`Thu`,weekdayKey:`weekday.thu`,range:[65,90],avg:78,max:90,min:65},{name:`Fri`,weekdayKey:`weekday.fri`,range:[60,84],avg:72,max:84,min:60},{name:`Sat`,weekdayKey:`weekday.sat`,range:[55,80],avg:68,max:80,min:55},{name:`Sun`,weekdayKey:`weekday.sun`,range:[58,83],avg:70,max:83,min:58}],[]),y=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?v:t},[e==null?void 0:e.chartData,v]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:_}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:g(`page.heartRate.trendyReport`)})]}),(0,U.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:J.background.summaryBox},children:[(0,U.jsx)(`div`,{className:`flex items-start justify-between mb-4`,children:(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:g(`page.heartRate.weeksAverage`)}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:_},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,U.jsxs)(`span`,{className:`text-lg text-slate-500`,children:[`/`,g(`units.minute`)]}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`,i=r?L:A;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?J.trend.up:J.trend.down},children:[(0,U.jsx)(i,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[g(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,`/`,g(`units.minute`)]})]})}),(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.max`),`(`,e?g(e.summary.maxWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:_},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,U.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,g(`units.minute`)]})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[g(`common.min`),`(`,e?g(e.summary.minWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,U.jsxs)(`span`,{className:`text-sm font-normal`,children:[`/`,g(`units.minute`)]})]})]})]})]}),(0,U.jsx)(Ze,{data:y,lines:[{dataKey:`avg`,areaDataKey:`range`,color:_,label:g(`page.heartRate.mean`),showArea:!0,gradientId:`hrRangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?50:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?120:p],renderTooltip:e=>(0,U.jsx)(gn,{...e}),referenceLine:{value:(h=e==null?void 0:e.averageLine)==null?72:h,color:_},height:224})]})});var vn=[`too_high`,`high`,`normal`,`slow`],yn={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,slow:`status.slow`,low:`status.low`};function bn({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=R(),c=W.heartRate,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=vn.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(yn[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Be.heartRate[e]||`#94A3B8`}});return(0,U.jsx)(tt,{title:s(`page.heartRate.statistics`),icon:F,themeColor:c,pieChartSize:`medium`,donutThickness:12,items:d,centerValue:u,centerLabel:s(`page.heartRate.totalTests`),showCount:!0,columns:1,className:t,isLoading:n})}function xn({data:e,className:t,isLoading:n}){var r,i,a,o,s,c,l,u;let{t:d}=R(),f=W.heartRate,p=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,m=[d(`page.heartRate.defaultAnalysis1`,{avg:(a=e==null||(o=e.summary)==null?void 0:o.avgValue)==null?`--`:a}),d(`page.heartRate.defaultAnalysis2`,{max:(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,maxDay:e?d(e.summary.maxWeekdayKey):`--`}),d(`page.heartRate.defaultAnalysis3`,{min:(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,minDay:e?d(e.summary.minWeekdayKey):`--`})];return(0,U.jsx)(Zt,{titleKey:`page.heartRate.dataAnalysis`,Icon:O,items:(p.length>0?p:m).map(e=>typeof e==`string`?e:e.content),themeColor:f,className:t,isLoading:n})}function Sn({data:e,className:t,isLoading:n}){let{t:r}=R(),i=W.heartRate,a=e==null?void 0:e.weeklySummary;return(0,U.jsx)(ot,{titleKey:`page.heartRate.weeklyOverview`,Icon:pe,overallText:(a==null?void 0:a.overview)||r(`page.heartRate.defaultOverview`,{defaultValue:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`}),highlightText:(a==null?void 0:a.highlights)||r(`page.heartRate.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`}),highlightLabelKey:`page.heartRate.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}var Cn={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`};function wn(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Tn(e){return e<60?`low`:e<=100?`normal`:e<=120?`elevated`:`high`}function En(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function Dn(e){var t,n,r,i,a,o,s,c,l,u,d;let f=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t,n,r,i,a,o;let s=new Date(e.date),c=(t=(n=e.max)==null?e.value:n)==null?0:t,l=(r=(i=e.min)==null?e.value:i)==null?0:r,u=(a=(o=e.avg)==null?e.value:o)==null?Math.round((c+l)/2):a;return{date:s,dateLabel:wn(e.date),weekdayKey:Cn[e.label]||`weekdays.mon`,max:c,min:l,avg:u}}),p=(e==null?void 0:e.overview)||{},m=p.average||0,h=(n=p.max)==null?f.length>0?Math.max(...f.map(e=>e.max)):0:n,g=(r=p.min)==null?f.length>0?Math.min(...f.map(e=>e.min)):0:r,_=p.max_label&&Cn[p.max_label]||`weekdays.mon`,v=p.min_label&&Cn[p.min_label]||`weekdays.mon`,y=p.resting_avg,b=Tn(y||m),x=(e==null?void 0:e.comparison)||{},S=x.changes||{},C=En((i=S.average)==null?void 0:i.trend),w=((a=S.average)==null?void 0:a.value)||0,T=((o=x.previous)==null?void 0:o.average)||0,E=f.length>0?{value:f[f.length-1].avg,date:f[f.length-1].date}:null,D=(e==null?void 0:e.weekly_summary)||{};return{chartData:f,yAxisRange:(e==null||(s=e.trend_chart)==null?void 0:s.y_axis_range)||{min:40,max:160},averageLine:(e==null||(c=e.trend_chart)==null?void 0:c.average_line)||m,summary:{avgValue:m,minValue:g,maxValue:h,minWeekdayKey:v,maxWeekdayKey:_,previousAvg:T,avgResting:y,status:b,statusKey:`status.${b}`,trend:C,changeValue:w,totalCount:(e==null||(l=e.statistics)==null?void 0:l.total_count)||0,distribution:(e==null||(u=e.statistics)==null?void 0:u.distribution)||[]},comparison:{current:{average:((d=x.current)==null?void 0:d.average)||m},previous:{average:T},insight:x.insight||null},weeklySummary:{overview:D.overview||null,highlights:D.highlights||null,suggestions:D.suggestions||[],dataAnalysis:D.data_analysis||[]},latestReading:E}}const On={all:[`heart-rate`],trend:e=>[...On.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...On.all,`details`]};function kn(e){return he({queryKey:On.trend(e),queryFn:async()=>{console.log(`[HR API] Fetching with dateRange:`,e);let t=await _t(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[HR API] Result:`,t),t},select:e=>Dn(e),staleTime:300*1e3,gcTime:600*1e3})}function An(){return Dt({featureName:`HR`,queryKeyFn:On.trend,fetchFn:e=>_t({start_date:e.startDate,end_date:e.endDate})})}function jn(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Mn(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Nn(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=An(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:jn(r.start),endDate:jn(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:Mn(r.start),end:Mn(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=kn(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`text-center py-12`,children:(0,U.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(_n,{data:u}),(0,U.jsx)(bn,{data:u}),(0,U.jsx)(xn,{data:u}),(0,U.jsx)(Sn,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}function Pn({showCard:e=!0,height:t=200,className:n}){let{t:r}=R(),{data:i,isLoading:a,isError:o,refetch:s}=kn();if(a)return(0,U.jsx)(Fn,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`animate-pulse`,children:[(0,U.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,U.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,U.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,U.jsx)(Fn,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,U.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-red-400 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:[e.min,e.max],date:e.date})),l=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${K.heartRate.primary}40`}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.heartRate.rangeToday`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:K.heartRate.primary}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,U.jsx)(Vt,{data:c,type:`mixed`,color:K.heartRate.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,U.jsxs)(X,{className:n,children:[(0,U.jsx)(Ue,{children:(0,U.jsx)(We,{children:r(`page.heartRate.trendTitle`)})}),(0,U.jsx)(Z,{children:l})]}):(0,U.jsx)(`div`,{className:n,children:l})}function Fn({showCard:e,className:t,children:n}){return e?(0,U.jsx)(X,{className:t,children:(0,U.jsx)(Z,{className:`py-4`,children:n})}):(0,U.jsx)(`div`,{className:H(`p-4`,t),children:n})}function In(){return(0,U.jsx)(zt,{children:(0,U.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,U.jsx)(Pn,{showCard:!1,height:200})})})}var Ln=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,U.jsxs)(`p`,{className:`text-amber-300`,children:[r(`common.max`),`: `,i.max,` `,r(`units.mmolL`)]}),(0,U.jsxs)(`p`,{className:`text-amber-200`,children:[r(`common.min`),`: `,i.min,` `,r(`units.mmolL`)]})]}):null});const Rn=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y;let{t:b}=R(),x=W.glucose,S=(0,V.useMemo)(()=>[{name:`Mon`,weekdayKey:`weekday.mon`,range:[4.5,6.5],avg:5.5,max:6.5,min:4.5},{name:`Tues`,weekdayKey:`weekday.tue`,range:[4.8,7],avg:5.8,max:7,min:4.8},{name:`Wed`,weekdayKey:`weekday.wed`,range:[4.6,6.8],avg:5.6,max:6.8,min:4.6},{name:`Thu`,weekdayKey:`weekday.thu`,range:[4.4,6.4],avg:5.4,max:6.4,min:4.4},{name:`Fri`,weekdayKey:`weekday.fri`,range:[4.7,6.9],avg:5.7,max:6.9,min:4.7},{name:`Sat`,weekdayKey:`weekday.sat`,range:[4.5,6.6],avg:5.5,max:6.6,min:4.5},{name:`Sun`,weekdayKey:`weekday.sun`,range:[4.6,6.7],avg:5.6,max:6.7,min:4.6}],[]),C=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tues`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,range:[e.min,e.max],avg:e.avg,max:e.max,min:e.min})))==null?S:t},[e==null?void 0:e.chartData,S]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:x}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:b(`page.glucose.trendyReport`)})]}),(0,U.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:J.background.warning},children:[(0,U.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:b(`page.glucose.weeksAverage`)}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:x},children:(r=e==null||(i=e.summary)==null||(i=i.avgValue)==null?void 0:i.toFixed(1))==null?`--`:r}),(0,U.jsx)(`span`,{className:`text-lg text-slate-500`,children:b(`units.mmolL`)}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#EF4444`:`#10B981`},children:[(0,U.jsx)(r?L:A,{className:`w-3 h-3`}),Math.abs(n).toFixed(1)]})})()]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[b(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null||(o=o.previousAvg)==null?void 0:o.toFixed(1))==null?`--`:a,` `,b(`units.mmolL`)]})]}),(0,U.jsx)(`div`,{className:`text-right text-xs text-slate-400 px-3 py-1.5 rounded-lg bg-white/60`,children:(0,U.jsxs)(`p`,{children:[b(`page.glucose.normalRange`),`: `,(s=e==null||(c=e.normalRange)==null?void 0:c.min)==null?3.9:s,`-`,(l=e==null||(u=e.normalRange)==null?void 0:u.max)==null?6.1:l,` `,b(`units.mmolL`)]})})]}),(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[b(`common.max`),`(`,e?b(e.summary.maxWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:x},children:[(d=e==null||(f=e.summary)==null||(f=f.maxValue)==null?void 0:f.toFixed(1))==null?`--`:d,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:b(`units.mmolL`)})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[b(`common.min`),`(`,e?b(e.summary.minWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(p=e==null||(m=e.summary)==null||(m=m.minValue)==null?void 0:m.toFixed(1))==null?`--`:p,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:b(`units.mmolL`)})]})]})]})]}),(0,U.jsx)(Ze,{data:C,lines:[{dataKey:`avg`,areaDataKey:`range`,color:x,label:b(`page.glucose.mean`),showArea:!0,gradientId:`glucoseRangeGradient`,legendShape:`line`}],xAxisKey:`name`,yAxisDomain:[(h=e==null||(g=e.yAxisRange)==null?void 0:g.min)==null?3:h,(_=e==null||(v=e.yAxisRange)==null?void 0:v.max)==null?10:_],renderTooltip:e=>(0,U.jsx)(Ln,{...e}),referenceLine:{value:(y=e==null?void 0:e.averageLine)==null?5.5:y,color:x},height:224,chartMargin:{top:10,right:10,left:-15,bottom:0}})]})});var zn=[`normal`,`high`,`too_high`,`too_low`],Bn={normal:`status.normal`,high:`status.high`,too_high:`status.tooHigh`,too_low:`status.tooLow`};function Vn({data:e,className:t,isLoading:n}){var r,i,a,o;let{t:s}=R(),c=W.glucose,l=(r=e==null||(i=e.summary)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.summary)==null?void 0:o.totalCount)==null?0:a,d=(0,V.useMemo)(()=>zn.map(e=>{let t=l.find(t=>t.type===e);return{type:e,label:s(Bn[e]||`status.${e}`),count:(t==null?void 0:t.count)||0,percent:(t==null?void 0:t.percent)||0,color:Be.glucose[e]||`#94A3B8`}}),[l,s]),f=(0,V.useMemo)(()=>d.filter(e=>e.type===`normal`).reduce((e,t)=>e+(t.count||0),0),[d]);return(0,U.jsx)(tt,{title:s(`page.glucose.statistics`),icon:F,themeColor:c,items:d,pieChartSize:`medium`,centerValue:s(`common.good`),centerLabel:s(`common.inAverage`),highlightValue:f,highlightLabel:`/ ${u} ${s(`common.times`)}`,highlightDescription:s(`page.glucose.normalResults`),gridColumns:2,className:t,isLoading:n})}function Hn({data:e,className:t,isLoading:n}){var r,i;let{t:a}=R(),o=W.glucose,s=(r=e==null?void 0:e.comparison)==null?{current:{average:0},previous:{average:0},insight:null}:r,c=(i=e==null?void 0:e.summary)==null?{changeValue:0,trend:`stable`,previousAvg:0,avgFasting:null,avgPostMeal:null}:i,l=e=>e===`up`?(0,U.jsx)(L,{className:`w-4 h-4`}):e===`down`?(0,U.jsx)(A,{className:`w-4 h-4`}):null,u=e=>e===`up`?`#EF4444`:e===`down`?`#10B981`:o,d=s.insight||a(`page.glucose.defaultInsight`,{defaultValue:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`});return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(O,{className:`w-5 h-5`,style:{color:o}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.glucose.compareWithLastWeek`)})]}),(0,U.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.averageGlucose`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:e?s.current.average.toFixed(1):`--`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)}),c.changeValue!==0&&(0,U.jsxs)(`div`,{className:`flex items-center gap-0.5 text-sm font-medium`,style:{color:u(c.trend)},children:[l(c.trend),Math.abs(c.changeValue).toFixed(1)]})]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`time.lastWeek`),`: `,e?e.summary.previousAvg.toFixed(1):`--`,a(`units.mmolL`)]})]}),c.avgFasting&&(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.fastingLevel`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgFasting.toFixed(1)}),(0,U.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.fastingNormal`),`: 3.9-6.1`]})]}),!c.avgFasting&&c.avgPostMeal&&(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:a(`page.glucose.postMealLevel`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:o},children:c.avgPostMeal.toFixed(1)}),(0,U.jsx)(`span`,{className:`text-sm text-slate-400`,children:a(`units.mmolL`)})]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-1`,children:[a(`page.glucose.postMealNormal`),`: <7.8`]})]})]}),(0,U.jsx)(`div`,{className:`p-4 rounded-2xl bg-amber-50`,children:(0,U.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:d})})]})}function Un({data:e,className:t,isLoading:n}){let{t:r}=R(),i=W.glucose,a=e==null?void 0:e.weeklySummary;return(0,U.jsx)(ot,{titleKey:`page.glucose.weeklyOverview`,Icon:pe,overallText:(a==null?void 0:a.overview)||r(`page.glucose.defaultOverview`,{defaultValue:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`}),highlightText:(a==null?void 0:a.highlights)||r(`page.glucose.defaultHighlights`,{defaultValue:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`}),highlightLabelKey:`page.glucose.needsAttention`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}var Wn={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`},Gn={ç©ºè…¹:`vitals.fasting`,é¤åŽ:`vitals.postMeal`,éšæœº:`common.value`};function Kn(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function qn(e){return e<3.9?`low`:e<=6.1?`normal`:e<=7?`elevated`:`high`}function Jn(e){return e===`up`||e===`down`||e===`stable`?e:`stable`}function Yn(e){var t,n,r,i,a,o,s,c,l,u,d,f;console.log(`[Glucose Adapter] Input:`,e);let p=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>{var t,n,r,i;let a=new Date(e.date),o=(t=(n=e.max)==null?e.value:n)==null?0:t,s=(r=(i=e.min)==null?e.value:i)==null?0:r;return{date:a,dateLabel:Kn(e.date),weekdayKey:Wn[e.label]||`weekdays.mon`,max:o,min:s,avg:(o+s)/2,typeKey:e.type?Gn[e.type]:void 0}}),m=(e==null?void 0:e.overview)||{},h=m.average||0,g=(n=m.max)==null?p.length>0?Math.max(...p.map(e=>e.max)):0:n,_=(r=m.min)==null?p.length>0?Math.min(...p.map(e=>e.min)):0:r,v=m.max_label&&Wn[m.max_label]||`weekdays.mon`,y=m.min_label&&Wn[m.min_label]||`weekdays.mon`,b=m.fasting_avg,x=m.post_meal_avg,S=qn(b||h),C=(e==null?void 0:e.comparison)||{},w=C.changes||{},T=Jn((i=w.average)==null?void 0:i.trend),E=((a=w.average)==null?void 0:a.value)||0,D=((o=C.previous)==null?void 0:o.average)||0,ee=p.length>0?{value:p[p.length-1].avg,typeKey:p[p.length-1].typeKey,date:p[p.length-1].date}:null,O=(e==null?void 0:e.normal_range)||(e==null||(s=e.trend_chart)==null?void 0:s.normal_range)||{min:3.9,max:6.1},k=(e==null?void 0:e.weekly_summary)||{},A={chartData:p,yAxisRange:(e==null||(c=e.trend_chart)==null?void 0:c.y_axis_range)||{min:2,max:9},averageLine:(e==null||(l=e.trend_chart)==null?void 0:l.average_line)||h,normalRange:O,summary:{avgValue:h,minValue:_,maxValue:g,minWeekdayKey:y,maxWeekdayKey:v,previousAvg:D,avgFasting:b,avgPostMeal:x,status:S,statusKey:`status.${S}`,trend:T,changeValue:E,totalCount:(e==null||(u=e.statistics)==null?void 0:u.total_count)||0,distribution:(e==null||(d=e.statistics)==null?void 0:d.distribution)||[]},comparison:{current:{average:((f=C.current)==null?void 0:f.average)||h},previous:{average:D},insight:C.insight||null},weeklySummary:{overview:k.overview||null,highlights:k.highlights||null,suggestions:k.suggestions||[],dataAnalysis:k.data_analysis||[]},latestReading:ee};return console.log(`[Glucose Adapter] Output:`,A),A}const Xn={all:[`glucose`],trend:e=>[...Xn.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...Xn.all,`details`]};function Zn(e){return he({queryKey:Xn.trend(e),queryFn:async()=>{console.log(`[Glucose API] Fetching with dateRange:`,e);let t=await vt(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Glucose API] Result:`,t),t},select:e=>Yn(e),staleTime:300*1e3,gcTime:600*1e3})}function Qn(){return Dt({featureName:`Glucose`,queryKeyFn:Xn.trend,fetchFn:e=>vt({start_date:e.startDate,end_date:e.endDate})})}function $n(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function er(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function tr(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=Qn(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:$n(r.start),endDate:$n(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:er(r.start),end:er(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=Zn(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`text-center py-12`,children:(0,U.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(Rn,{data:u}),(0,U.jsx)(Vn,{data:u}),(0,U.jsx)(Hn,{data:u}),(0,U.jsx)(Un,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}function nr({showCard:e=!0,height:t=200,className:n}){let{t:r}=R(),{data:i,isLoading:a,isError:o,refetch:s}=Zn();if(a)return(0,U.jsx)(rr,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`animate-pulse`,children:[(0,U.jsx)(`div`,{className:`h-4 bg-slate-200 rounded w-1/3 mb-4`}),(0,U.jsx)(`div`,{className:`space-y-2`,children:[...[,,,,,]].map((e,t)=>(0,U.jsx)(`div`,{className:`h-3 bg-slate-200 rounded`,style:{width:`${60+Math.random()*40}%`}},t))})]})});if(o||!i)return(0,U.jsx)(rr,{showCard:e,className:n,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-8 text-center`,children:[(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mb-3`,children:r(`common.error`)}),(0,U.jsx)(`button`,{onClick:()=>s(),className:`px-4 py-2 text-sm font-medium text-white bg-amber-400 rounded-lg hover:opacity-90 transition-opacity`,children:r(`common.retry`)})]})});let c=i.chartData.map(e=>({dateLabel:e.dateLabel,avg:e.avg,min:e.min,max:e.max,range:[e.min,e.max],date:e.date})),l=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:`${K.glucose.primary}40`}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`page.glucose.rangeToday`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-0.5 rounded`,style:{backgroundColor:K.glucose.primary}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r(`common.average`)})]})]}),(0,U.jsx)(Vt,{data:c,type:`mixed`,color:K.glucose.primary,height:t,yDomain:[i.yAxisRange.min,i.yAxisRange.max]})]});return e?(0,U.jsxs)(X,{className:n,children:[(0,U.jsx)(Ue,{children:(0,U.jsx)(We,{children:r(`page.glucose.trendTitle`)})}),(0,U.jsx)(Z,{children:l})]}):(0,U.jsx)(`div`,{className:n,children:l})}function rr({showCard:e,className:t,children:n}){return e?(0,U.jsx)(X,{className:t,children:(0,U.jsx)(Z,{className:`py-4`,children:n})}):(0,U.jsx)(`div`,{className:H(`p-4`,t),children:n})}function ir(){return(0,U.jsx)(zt,{children:(0,U.jsx)(`div`,{className:`w-full max-w-md p-4`,children:(0,U.jsx)(nr,{showCard:!1,height:200})})})}function ar(e){return[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`][new Date(e).getDay()]||e}function or(e){return e.split(` `)[1]||e}function sr(e){return e?e.trend===`up`?`up`:e.trend===`down`?`down`:`stable`:`stable`}function cr(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,ee,O;let{overview:k,indicators:A}=e.data,te=k.chart_data.filter(e=>e.score!==null).map(e=>{var t;return{day:e.label,score:(t=e.score)==null?0:t,date:new Date(e.date)}}),ne=te.length>0?te:void 0,j=A[0],M=A[1],N=A[2],P=A[3],F=A[4],re=A[5],I=A[6],ie=(j==null||(t=j.chart)==null?void 0:t.map(e=>({day:or(e.time),systolic:e.systolic,diastolic:e.diastolic})))||[],L=(M==null||(n=M.chart)==null?void 0:n.map((e,t)=>({x:t,value:e.value})))||[],ae=L.length>0?L:void 0,oe=(N==null||(r=N.chart)==null?void 0:r.map((e,t)=>({x:t,value:e.value})))||[],se=oe.length>0?oe:void 0,ce=(P==null||(i=P.chart)==null?void 0:i.map(e=>({day:or(e.time),value:e.value})))||[],le=ce.length>0?ce:void 0,ue=(F==null||(a=F.chart_data)==null?void 0:a.map(e=>({day:ar(e.date),hours:e.total_minutes/60,quality:(e.deep_sleep_percent+e.rem_percent)*100,deepPercent:e.deep_sleep_percent,lightPercent:e.light_sleep_percent,awakePercent:e.awake_percent,remPercent:e.rem_percent})))||[],de=ue.length>0?ue:void 0,fe=(re==null||(o=re.chart_data)==null?void 0:o.map(e=>({day:ar(e.date),positive:e.positive,neutral:e.neutral,negative:e.negative})))||[],pe=fe.length>0?fe:void 0,me=(I==null||(s=I.chart_data)==null?void 0:s.map((e,t)=>({x:t,value:e.value})))||[],he=me.length>0?me:void 0,R=(c=F==null||(l=F.statistic)==null?void 0:l.average)==null?0:c,ge=Math.floor(R/60),_e=Math.round(R%60);return{comprehensiveHealth:{chartData:ne,weeklyAverage:(u=k.average_score)==null?0:u,aiSummary:k.ai_insight||``,targetScore:60,trend:sr(j==null?void 0:j.change)},bloodPressure:{avgSystolic:(d=j==null||(f=j.avg)==null?void 0:f.systolic)==null?0:d,avgDiastolic:(p=j==null||(m=j.avg)==null?void 0:m.diastolic)==null?0:p,latestSystolic:j==null||(h=j.latest)==null?void 0:h.systolic,latestDiastolic:j==null||(g=j.latest)==null?void 0:g.diastolic,maxSystolic:j==null||(_=j.max)==null?void 0:_.systolic,maxDiastolic:j==null||(v=j.max)==null?void 0:v.diastolic,minSystolic:j==null||(y=j.min)==null?void 0:y.systolic,minDiastolic:j==null||(b=j.min)==null?void 0:b.diastolic,reference:j==null?void 0:j.reference,status:j==null?void 0:j.status,periodDescription:`12 weeks`,chartData:ie},heartRate:{avgHeartRate:(x=M==null?void 0:M.avg)==null?0:x,latestValue:M==null?void 0:M.latest,maxValue:M==null?void 0:M.max,minValue:M==null?void 0:M.min,reference:M==null?void 0:M.reference,status:M==null?void 0:M.status,periodDescription:`12 weeks`,chartData:ae,referenceLine:(S=M==null?void 0:M.avg)==null?70:S},bloodSugar:{poctValue:(C=N==null?void 0:N.latest)==null?0:C,avgValue:N==null?void 0:N.avg,maxValue:N==null?void 0:N.max,minValue:N==null?void 0:N.min,reference:N==null?void 0:N.reference,status:N==null?void 0:N.status,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:se},bloodOxygen:{avgSpO2:(w=P==null?void 0:P.avg)==null?0:w,latestValue:P==null?void 0:P.latest,maxValue:P==null?void 0:P.max,minValue:P==null?void 0:P.min,reference:P==null?void 0:P.reference,status:P==null?void 0:P.status,periodDescription:`12 weeks`,chartData:le,referenceLine:95},sleep:{avgSleepTime:{hours:ge,minutes:_e},label:F==null||(T=F.statistic)==null?void 0:T.label,periodDescription:`12 weeks`,chartData:de},emotion:{dominantEmotion:`positive`,label:re==null||(E=re.statistic)==null?void 0:E.label,periodDescription:`12 weeks`,chartData:pe},nutrition:{avgValue:(D=I==null||(ee=I.statistic)==null?void 0:ee.average)==null?0:D,label:I==null||(O=I.statistic)==null?void 0:O.label,unit:`/ minute`,periodDescription:`12 weeks`,chartData:he,referenceLine:70}}}function lr(){let e=[{day:`Mon`,score:52,date:new Date},{day:`Tue`,score:78,date:new Date},{day:`Wed`,score:48,date:new Date},{day:`Thu`,score:92,date:new Date},{day:`Fri`,score:68,date:new Date},{day:`Sat`,score:45,date:new Date},{day:`Sun`,score:28,date:new Date}],t=Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:120+Math.random()*30,diastolic:75+Math.random()*15})),n=Array.from({length:12},(e,t)=>({x:t,value:74+Math.sin(t*.6)*30+Math.random()*20})),r=Array.from({length:12},(e,t)=>({x:t,value:6.5+Math.sin(t*.5)*2.5+Math.random()*1.5})),i=Array.from({length:12},(e,t)=>({day:`D${t+1}`,value:95+Math.sin(t*.5)*3+Math.random()*2})),a=Array.from({length:12},(e,t)=>({day:`D${t+1}`,hours:7+Math.sin(t*.4)*2+Math.random()*1.5,quality:65+Math.sin(t*.4)*20+Math.random()*15})),o=Array.from({length:12},(e,t)=>({day:`D${t+1}`,positive:35+Math.sin(t*.5)*25+Math.random()*15,neutral:25+Math.random()*20,negative:15+Math.random()*15})),s=Array.from({length:12},(e,t)=>({x:t,value:75+Math.sin(t*.4)*25+Math.random()*20}));return{comprehensiveHealth:{chartData:e,weeklyAverage:72,aiSummary:`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`,targetScore:60,trend:`up`},bloodPressure:{avgSystolic:136,avgDiastolic:86,periodDescription:`12 weeks`,chartData:t},heartRate:{avgHeartRate:74,periodDescription:`12 weeks`,chartData:n,referenceLine:70},bloodSugar:{poctValue:7.4,unit:`mmol/L`,periodDescription:`12 weeks`,chartData:r},bloodOxygen:{avgSpO2:94.9,periodDescription:`12 weeks`,chartData:i,referenceLine:95},sleep:{avgSleepTime:{hours:7,minutes:11},periodDescription:`12 weeks`,chartData:a},emotion:{dominantEmotion:`positive`,periodDescription:`12 weeks`,chartData:o},nutrition:{avgValue:74,unit:`/ minute`,periodDescription:`12 weeks`,chartData:s,referenceLine:70}}}var ur=`healthy_demo_mode`;function dr(){try{return localStorage.getItem(ur)===`true`}catch(e){return console.warn(`[Demo Mode] Failed to read from localStorage:`,e),!1}}function fr(){try{localStorage.setItem(ur,`true`),console.log(`âœ… [Demo Mode] Enabled - Using dummy data`)}catch(e){console.error(`[Demo Mode] Failed to enable:`,e)}}function pr(){try{localStorage.setItem(ur,`false`),console.log(`âœ… [Demo Mode] Disabled - Using backend data`)}catch(e){console.error(`[Demo Mode] Failed to disable:`,e)}}function mr(){let e=!dr();return e?fr():pr(),e}const hr={all:[`healthy`],data:e=>[...hr.all,`data`,e]};async function gr(e){if(dr())return console.log(`ðŸŽ­ [Demo Mode] Using dummy data instead of backend API`),lr();try{let t=await pt.post(`/trend-review/overview`,{view_type:e});if(console.log(`[Healthy API] Response code:`,t.data.code,`msg:`,t.data.msg),t.data.code!==200)throw console.error(`[Healthy API] Unexpected code:`,t.data.code),Error(t.data.msg||`Failed to fetch healthy data`);return cr(t.data)}catch(e){return console.error(`[Healthy API] Failed to fetch healthy data:`,e),console.warn(`[Healthy API] Using mock data as fallback`),lr()}}function _r(e=`day`){return he({queryKey:hr.data(e),queryFn:()=>gr(e),staleTime:300*1e3,gcTime:600*1e3})}function vr(e={}){let{threshold:t=.1,rootMargin:n=`50px`,root:r=null,triggerOnce:i=!0}=e,a=(0,V.useRef)(null),[o,s]=(0,V.useState)(!1),[c,l]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{let e=a.current;if(!e||i&&c)return;let o=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.isIntersecting;s(t),t&&!c&&l(!0),i&&t&&o.disconnect()})},{threshold:t,rootMargin:n,root:r});return o.observe(e),()=>{o.disconnect()}},[t,n,r,i,c]),{ref:a,isInViewport:o,hasBeenInViewport:c}}var yr=({height:e})=>(0,U.jsx)(`div`,{className:`animate-pulse bg-gradient-to-r from-slate-100 via-slate-50 to-slate-100 rounded-lg`,style:{height:typeof e==`number`?`${e}px`:e,backgroundSize:`200% 100%`,animation:`shimmer 1.5s infinite`},children:(0,U.jsx)(`style`,{children:`
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
    `})});function br({children:e,height:t=200,className:n=``,skeleton:r,threshold:i=.1,rootMargin:a=`100px`}){let{ref:o,hasBeenInViewport:s}=vr({threshold:i,rootMargin:a,triggerOnce:!0});return(0,U.jsx)(`div`,{ref:o,className:n,style:{height:typeof t==`number`?`${t}px`:t,position:`relative`},children:s?e:r||(0,U.jsx)(yr,{height:t})})}var xr=`#FB923D`,Sr=`#FB923D`,Cr=()=>(0,U.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,children:[(0,U.jsx)(`rect`,{x:`4`,y:`4`,width:`6`,height:`16`,rx:`1`,fill:xr}),(0,U.jsx)(`rect`,{x:`14`,y:`8`,width:`6`,height:`12`,rx:`1`,fill:xr,opacity:`0.6`})]});const wr=(0,V.memo)(({data:e,period:t=`weekly`,onPeriodChange:n,className:r,isLoading:i})=>{var a,o;let{t:s}=R(),c=[{day:`Mon`,score:52},{day:`Tues`,score:78},{day:`Wed`,score:48},{day:`Thur`,score:92},{day:`Fri`,score:68},{day:`Sat`,score:45},{day:`Sun`,score:28}],l=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),p=(a=e==null?void 0:e.weeklyAverage)==null?72:a,m=(o=e==null?void 0:e.aiSummary)==null?`This week's average score is 72. Your overall condition is steadily improving; please continue to maintain your normal routine.`:o;e?!e.chartData||e.chartData.length===0?console.log(`âš ï¸ ComprehensiveHealthCard: Empty chartData from API, using placeholder`):console.log(`âœ… ComprehensiveHealthCard: Using API data, points:`,e.chartData.length):console.log(`âš ï¸ ComprehensiveHealthCard: No data provided, using dummy data`);let g=()=>{if(!p||!m)return m;let e=String(p),t=m.split(e);return t.length===1?m:t.map((n,r)=>(0,U.jsxs)(`span`,{children:[n,r<t.length-1&&(0,U.jsx)(`span`,{style:{color:xr,fontWeight:600},children:e})]},r))};return(0,U.jsxs)(X,{className:`${r} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${i?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(Cr,{}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`healthy.comprehensiveHealth`,`Comprehensive health data`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center bg-slate-100 rounded-full p-0.5`,children:[(0,U.jsx)(`button`,{onClick:()=>n==null?void 0:n(`daily`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`daily`?`text-slate-800`:`text-slate-400 hover:text-slate-600`}`,children:s(`common.daily`,`Daily`)}),(0,U.jsx)(`button`,{onClick:()=>n==null?void 0:n(`weekly`),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${t===`weekly`?`text-white`:`text-slate-400 hover:text-slate-600`}`,style:t===`weekly`?{backgroundColor:xr}:{},children:s(`common.weekly`,`Weekly`)})]})]}),(0,U.jsx)(`div`,{className:`text-xs text-slate-400 mb-1 ml-1`,children:`Score`}),(0,U.jsx)(`div`,{className:`-mx-1 mb-5`,children:(0,U.jsx)(br,{height:176,children:(0,U.jsx)(T,{width:`100%`,height:176,children:(0,U.jsxs)(h,{data:l,margin:{top:5,right:15,left:0,bottom:5},barCategoryGap:`25%`,children:[(0,U.jsx)(d,{horizontal:!0,vertical:!1,strokeDasharray:`4 4`,stroke:`#E5E7EB`}),(0,U.jsx)(S,{dataKey:`day`,tick:{fontSize:12,fill:`#94a3b8`},tickLine:!1,axisLine:!1,dy:8}),(0,U.jsx)(y,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:[0,100],ticks:[0,20,40,60,80,100],width:30}),(0,U.jsx)(u,{dataKey:`score`,radius:[20,20,4,4],maxBarSize:36,...Ie.animation,children:l.map((e,t)=>(0,U.jsx)(_,{fill:xr},`cell-${t}`))}),(0,U.jsx)(f,{y:p,stroke:Sr,strokeDasharray:`6 4`,strokeWidth:1.5,label:{position:`left`,value:`â–¶`,fill:Sr,fontSize:10,dx:-5}})]})})})}),(0,U.jsxs)(`div`,{className:`rounded-xl p-4 relative`,style:{backgroundColor:`#ECFDF5`},children:[(0,U.jsx)(`div`,{className:`absolute -top-3 right-4`,children:(0,U.jsx)(`span`,{className:`px-3 py-1.5 text-xs font-medium text-white rounded-full shadow-sm`,style:{background:`linear-gradient(90deg, #FFCC2B 0%, #FEA80D 100%)`},children:s(`healthy.aiGenerated`,`AI Generated`)})}),(0,U.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed pt-1`,children:g()})]})]})});var Tr=`#F97316`,Er=`#4ADE80`,Dr=`#E2E8F0`;const Or=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:s}=R(),c=Tr,l=Array.from({length:14},(e,t)=>({day:`D${t+1}`,systolic:100+Math.random()*60,diastolic:60+Math.random()*40})),d=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?l:t},[e==null?void 0:e.chartData]),f=(i=e==null?void 0:e.avgSystolic)==null?136:i,p=(a=e==null?void 0:e.avgDiastolic)==null?86:a,m=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`âš ï¸ HealthBloodPressureCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(_e,{className:`w-5 h-5`,style:{color:c}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`vitals.bloodPressure`,`Blood pressure`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[s(`healthy.bpDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:m}),(0,U.jsxs)(`span`,{style:{color:Tr,fontWeight:600},children:[f,` mmHg`]}),s(`healthy.bpDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsxs)(`span`,{style:{color:Tr,fontWeight:600},children:[p,` mmHg`]}),`.`]})}),(0,U.jsxs)(br,{height:224,children:[(0,U.jsx)(T,{width:`100%`,height:224,children:(0,U.jsxs)(h,{data:d,margin:{top:10,right:10,left:10,bottom:0},barGap:2,barCategoryGap:`30%`,children:[(0,U.jsx)(S,{dataKey:`day`,hide:!0}),(0,U.jsx)(y,{domain:[40,180],hide:!0}),(0,U.jsx)(u,{dataKey:`systolic`,radius:[4,4,4,4],maxBarSize:16,...Ie.animation,children:d.map((e,t)=>(0,U.jsx)(_,{fill:Dr},`systolic-${t}`))}),(0,U.jsx)(u,{dataKey:`diastolic`,radius:[4,4,4,4],maxBarSize:16,...Ie.animation,children:d.map((e,t)=>(0,U.jsx)(_,{fill:Dr},`diastolic-${t}`))})]})}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`35%`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Tr}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Tr}}),(0,U.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Tr},children:[`SBP: `,f,`mmHg`]}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Tr}`}})]}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`65%`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${Er}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Er}}),(0,U.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-4 py-1.5 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:Er},children:[`DBP: `,p,`mmHg`]}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${Er}`}})]})]})]})});var kr=`#F87171`;const Ar=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=R(),s=[{x:0,value:68},{x:1,value:70},{x:2,value:76},{x:3,value:78},{x:4,value:88},{x:5,value:90},{x:6,value:85},{x:7,value:75},{x:8,value:68}],c=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?s:t},[e==null?void 0:e.chartData]),u=(i=e==null?void 0:e.avgHeartRate)==null?74:i,d=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e?!e.chartData||e.chartData.length===0?console.log(`âš ï¸ HealthHeartRateCard: Empty chartData from API, using placeholder`):console.log(`âœ… HealthHeartRateCard: Using API data, points:`,e.chartData.length):console.log(`âš ï¸ HealthHeartRateCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(_e,{className:`w-5 h-5`,style:{color:kr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.heartRate`,`Heart rate`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[o(`healthy.hrDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:d}),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),o(`healthy.hrDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,U.jsxs)(br,{height:208,children:[(0,U.jsx)(T,{width:`100%`,height:208,children:(0,U.jsxs)(l,{data:c,margin:{top:20,right:10,left:10,bottom:20},children:[(0,U.jsx)(y,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,U.jsx)(w,{type:`linear`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:kr},...Ie.animation})]})}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`40%`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${kr}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:kr}}),(0,U.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:kr},children:[o(`healthy.heartRateLabel`,`Heart rate`),`: `,u,` / minute`]}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${kr}`}})]})]})]})});var jr=`#F59E0B`;const Mr=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o;let{t:s}=R(),c=[{x:0,value:5.2},{x:1,value:4.8},{x:2,value:8.5},{x:3,value:9.2},{x:4,value:7.8},{x:5,value:6.5},{x:6,value:5.8},{x:7,value:4.2},{x:8,value:3.8},{x:9,value:5.5},{x:10,value:6.8},{x:11,value:8.2},{x:12,value:9.5},{x:13,value:8.8},{x:14,value:7.2}],l=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),u=(i=e==null?void 0:e.poctValue)==null?7.4:i,d=(a=e==null?void 0:e.unit)==null?`mmol/L`:a,f=(o=e==null?void 0:e.periodDescription)==null?`12 weeks`:o;return e||console.log(`âš ï¸ HealthBloodSugarCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(Ce,{className:`w-5 h-5`,style:{color:jr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:s(`vitals.bloodSugar`,`Blood Sugar`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[s(`healthy.bsDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:f}),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),s(`healthy.bsDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,U.jsxs)(br,{height:208,children:[(0,U.jsx)(T,{width:`100%`,height:208,children:(0,U.jsxs)(v,{data:l,margin:{top:20,right:10,left:10,bottom:20},children:[(0,U.jsx)(`defs`,{children:(0,U.jsxs)(`linearGradient`,{id:`bloodSugarGradient`,x1:`0`,y1:`0`,x2:`0`,y2:`1`,children:[(0,U.jsx)(`stop`,{offset:`5%`,stopColor:`#CBD5E1`,stopOpacity:.5}),(0,U.jsx)(`stop`,{offset:`95%`,stopColor:`#CBD5E1`,stopOpacity:.05})]})}),(0,U.jsx)(y,{hide:!0,domain:[2,12]}),(0,U.jsx)(g,{type:`monotone`,dataKey:`value`,stroke:`#CBD5E1`,strokeWidth:2,fill:`url(#bloodSugarGradient)`,dot:{fill:`#CBD5E1`,stroke:`#CBD5E1`,strokeWidth:2,r:4},activeDot:{r:5,fill:jr},...Ie.animation})]})}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center`,style:{top:`46%`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`8px solid ${jr}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:jr}}),(0,U.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 px-5 py-2 rounded-full text-white text-sm font-semibold whitespace-nowrap z-10`,style:{backgroundColor:jr},children:[`POCT: `,u,` `,d]}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`8px solid ${jr}`}})]})]})]})});var Nr=()=>(0,U.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:[(0,U.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`4`,stroke:`#A78BFA`,strokeWidth:`2`,fill:`none`}),(0,U.jsx)(`text`,{x:`12`,y:`15`,textAnchor:`middle`,fill:`#A78BFA`,fontSize:`8`,fontWeight:`600`,children:`Oâ‚‚`})]});const Pr=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=R(),s=W.spo2,c=Array.from({length:20},(e,t)=>({day:`D${t+1}`,value:94+Math.random()*4})),l=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?c:t},[e==null?void 0:e.chartData]),d=(i=e==null?void 0:e.avgSpO2)==null?94.9:i;e==null||e.referenceLine;let f=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`âš ï¸ HealthBloodOxygenCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(Nr,{}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.bloodOxygen`,`Blood Oxygen`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.spo2Description`,`Your average systolic blood pressure over the past {{period}} was `,{period:f}),(0,U.jsx)(`span`,{style:{color:s,fontWeight:600},children:`136 mmHg`}),o(`healthy.spo2DescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:s,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,U.jsxs)(`div`,{className:`relative`,children:[(0,U.jsx)(br,{height:112,children:(0,U.jsx)(T,{width:`100%`,height:112,children:(0,U.jsxs)(h,{data:l,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,U.jsx)(y,{hide:!0,domain:[90,100]}),(0,U.jsx)(u,{dataKey:`value`,radius:[3,3,0,0],maxBarSize:12,...Ie.animation,children:l.map((e,t)=>(0,U.jsx)(_,{fill:`#D1D5DB`},`cell-${t}`))})]})})}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.5)`},children:[(0,U.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #A78BFA`,marginLeft:`4px`}}),(0,U.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #A78BFA 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,U.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #A78BFA`,marginRight:`4px`}})]}),(0,U.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.5 - 14px)`},children:(0,U.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:`#A78BFA`},children:[`SpO2: `,d,`%`]})})]})]})});var Fr=`#818CF8`;const Ir=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a;let{t:o}=R(),s=Array.from({length:14},(e,t)=>({day:`D${t+1}`,hours:6+Math.random()*3,quality:60+Math.random()*30})),c=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?s:t},[e==null?void 0:e.chartData]),l=(i=e==null?void 0:e.avgSleepTime)==null?{hours:7,minutes:11}:i,d=(a=e==null?void 0:e.periodDescription)==null?`12 weeks`:a;return e||console.log(`âš ï¸ HealthSleepCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(le,{className:`w-5 h-5`,style:{color:Fr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:o(`vitals.sleep`,`Sleep`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[o(`healthy.sleepDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:d}),(0,U.jsx)(`span`,{style:{color:Fr,fontWeight:600},children:`136 mmHg`}),o(`healthy.sleepDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:Fr,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,U.jsxs)(`div`,{className:`relative`,children:[(0,U.jsx)(br,{height:112,children:(0,U.jsx)(T,{width:`100%`,height:112,children:(0,U.jsxs)(h,{data:c,margin:{top:10,right:15,left:15,bottom:0},barCategoryGap:`20%`,children:[(0,U.jsx)(y,{hide:!0,domain:[0,12]}),(0,U.jsx)(u,{dataKey:`hours`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Ie.animation,children:c.map((e,t)=>(0,U.jsx)(_,{fill:`#9CA3AF`},`cell-${t}`))}),(0,U.jsx)(u,{dataKey:`quality`,radius:[3,3,0,0],maxBarSize:12,stackId:`sleep`,...Ie.animation,children:c.map((e,t)=>(0,U.jsx)(_,{fill:`#D1D5DB`},`cell-light-${t}`))})]})})}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(10px + 112px * 0.45)`},children:[(0,U.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderRight:`6px solid #818CF8`,marginLeft:`4px`}}),(0,U.jsx)(`div`,{className:`flex-1 mx-0`,style:{height:`1px`,backgroundImage:`linear-gradient(to right, #818CF8 50%, transparent 50%)`,backgroundSize:`8px 1px`}}),(0,U.jsx)(`div`,{style:{width:0,height:0,borderTop:`5px solid transparent`,borderBottom:`5px solid transparent`,borderLeft:`6px solid #818CF8`,marginRight:`4px`}})]}),(0,U.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2 z-10`,style:{top:`calc(10px + 112px * 0.45 - 14px)`},children:(0,U.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium whitespace-nowrap`,style:{backgroundColor:Fr},children:[o(`healthy.sleepTime`,`Sleep time`),`: `,l.hours,` hours `,l.minutes,` minutes`]})})]})]})});var Q={positive:`#FBBF24`,neutral:`#93C5FD`,negative:`#3B82F6`};const Lr=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i;let{t:a}=R(),o=[{day:`D1`,positive:35,neutral:45,negative:20},{day:`D2`,positive:30,neutral:50,negative:20},{day:`D3`,positive:40,neutral:40,negative:20},{day:`D4`,positive:25,neutral:55,negative:20},{day:`D5`,positive:45,neutral:40,negative:15},{day:`D6`,positive:35,neutral:45,negative:20},{day:`D7`,positive:30,neutral:45,negative:25},{day:`D8`,positive:40,neutral:40,negative:20},{day:`D9`,positive:35,neutral:45,negative:20},{day:`D10`,positive:45,neutral:40,negative:15},{day:`D11`,positive:38,neutral:42,negative:20},{day:`D12`,positive:32,neutral:48,negative:20},{day:`D13`,positive:28,neutral:52,negative:20},{day:`D14`,positive:50,neutral:35,negative:15}],s=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?o:t},[e==null?void 0:e.chartData]),c=(i=e==null?void 0:e.periodDescription)==null?`12 weeks`:i;return e||console.log(`âš ï¸ HealthEmotionCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(ye,{className:`w-5 h-5`,style:{color:Q.positive}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`vitals.emotion`,`Emotion`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-xl p-4 mb-5`,children:(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 leading-relaxed`,children:[a(`healthy.emotionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:c}),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`136 mmHg`}),a(`healthy.emotionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:`#F97316`,fontWeight:600},children:`86 mmHg`}),`.`]})}),(0,U.jsxs)(br,{height:224,children:[(0,U.jsx)(`div`,{className:`absolute left-0 right-0 flex items-center justify-between px-4`,style:{top:`8px`,height:`180px`},children:s.map((e,t)=>(0,U.jsxs)(`div`,{className:`flex flex-col gap-1`,style:{height:`100%`,width:`3%`},children:[(0,U.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:Q.positive,flex:e.positive}}),(0,U.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:Q.neutral,flex:e.neutral}}),(0,U.jsx)(`div`,{className:`w-full rounded-md transition-all duration-500 ease-out`,style:{backgroundColor:Q.negative,flex:e.negative}})]},t))}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.18)`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${Q.positive}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Q.positive}}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${Q.positive}`}})]}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.52)`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${Q.neutral}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Q.neutral}}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${Q.neutral}`}})]}),(0,U.jsxs)(`div`,{className:`absolute left-0 right-0 flex items-center pointer-events-none`,style:{top:`calc(8px + 180px * 0.85)`},children:[(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderLeft:`6px solid ${Q.negative}`}}),(0,U.jsx)(`div`,{className:`flex-1 border-t-2 border-dashed`,style:{borderColor:Q.negative}}),(0,U.jsx)(`div`,{className:`w-0 h-0`,style:{borderTop:`4px solid transparent`,borderBottom:`4px solid transparent`,borderRight:`6px solid ${Q.negative}`}})]}),(0,U.jsxs)(`div`,{className:`absolute bottom-0 left-0 right-0 flex justify-center gap-6`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:Q.positive}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.positive`,`ç§¯æž`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:Q.neutral}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.neutral`,`ä¸­æ€§`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-4 h-4 rounded-sm`,style:{backgroundColor:Q.negative}}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:a(`healthy.negative`,`æ¶ˆæž`)})]})]})]})]})});var Rr=W.heartRate;const zr=(0,V.memo)(({data:e,className:t,isLoading:n,onClick:r})=>{var i,a,o,s;let{t:c}=R(),u=Array.from({length:15},(e,t)=>({x:t,value:70+Math.sin(t*.3)*20+Math.random()*10})),d=(0,V.useMemo)(()=>{var t;return(t=e==null?void 0:e.chartData)==null?u:t},[e==null?void 0:e.chartData]),p=(i=e==null?void 0:e.avgValue)==null?74:i,m=(a=e==null?void 0:e.unit)==null?`/ minute`:a,h=(o=e==null?void 0:e.referenceLine)==null?70:o,g=(s=e==null?void 0:e.periodDescription)==null?`12 weeks`:s;return e||console.log(`âš ï¸ HealthNutritionCard: No data provided, using dummy data`),(0,U.jsxs)(X,{className:`${t} relative overflow-hidden cursor-pointer hover:shadow-md transition-shadow`,onClick:r,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(k,{className:`w-5 h-5`,style:{color:Rr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.nutrition`,`Nutrition`)})]}),(0,U.jsx)(ce,{className:`w-5 h-5 text-slate-400`})]}),(0,U.jsxs)(`p`,{className:`text-sm text-slate-600 mb-4 leading-relaxed`,children:[c(`healthy.nutritionDescription`,`Your average systolic blood pressure over the past {{period}} was `,{period:g}),(0,U.jsx)(`span`,{style:{color:Rr,fontWeight:600},children:`136 mmHg`}),c(`healthy.nutritionDescriptionCont`,`, and your average diastolic blood pressure was `),(0,U.jsx)(`span`,{style:{color:Rr,fontWeight:600},children:`86 mmHg`}),`.`]}),(0,U.jsxs)(`div`,{className:`relative`,children:[(0,U.jsx)(br,{height:80,children:(0,U.jsx)(T,{width:`100%`,height:80,children:(0,U.jsxs)(l,{data:d,margin:{top:10,right:10,left:10,bottom:10},children:[(0,U.jsx)(y,{hide:!0,domain:[`dataMin - 10`,`dataMax + 10`]}),(0,U.jsx)(f,{y:h,stroke:Rr,strokeDasharray:`4 4`,strokeWidth:1,strokeOpacity:.5}),(0,U.jsx)(w,{type:`monotone`,dataKey:`value`,stroke:Rr,strokeWidth:2,dot:!1,activeDot:{r:4,fill:Rr},...Ie.animation})]})})}),(0,U.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,U.jsxs)(`div`,{className:`px-4 py-1.5 rounded-full text-white text-sm font-medium`,style:{backgroundColor:Rr},children:[c(`healthy.heartRateLabel`,`Heart rate`),`: `,p,` `,m]})})]})]})});function Br({className:e=``,onChange:t}){let{t:n}=R(),[r,i]=(0,V.useState)(dr);return(0,V.useEffect)(()=>{i(dr())},[]),(0,U.jsxs)(`div`,{className:`flex items-center gap-3 ${e}`,children:[(0,U.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:n(`healthy.demoMode`,`Demo Mode`)}),(0,U.jsx)(`button`,{onClick:()=>{let e=mr();i(e),t==null||t(e),window.location.reload()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${r?`bg-orange-500`:`bg-slate-300`}`,role:`switch`,"aria-checked":r,"aria-label":n(`healthy.toggleDemoMode`,`Toggle demo mode`),children:(0,U.jsx)(`span`,{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?`translate-x-6`:`translate-x-1`}`})}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r?n(`healthy.demoModeOn`,`Using dummy data`):n(`healthy.demoModeOff`,`Using backend data`)})]})}function Vr(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Hr(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Ur(){let{t:e}=R(),t=ee(),{theme:n}=Pt(),[r,i]=(0,V.useState)(`weekly`),a=r===`daily`?`day`:`week`,[o,s]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}}),c=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(o.end);return t.setHours(0,0,0,0),t<e},[o.end]);(0,V.useMemo)(()=>({startDate:Vr(o.start),endDate:Vr(o.end)}),[o]);let l=(0,V.useMemo)(()=>({start:Hr(o.start),end:Hr(o.end)}),[o]),u=()=>{s(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},d=()=>{c&&s(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:f,isLoading:p,isFetching:m,error:h}=_r(a);return h?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:n.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:n.textSecondary},children:String(h)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:n.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsxs)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:n.background},children:[(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:l.start,endDate:l.end,onPrevious:u,onNext:d,disableNext:!c})}),(0,U.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,U.jsx)(Br,{})})]}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!f&&!p?(0,U.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,U.jsx)(`p`,{style:{color:n.textSecondary},children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(wr,{data:f==null?void 0:f.comprehensiveHealth,period:r,onPeriodChange:i}),(0,U.jsx)(Or,{data:f==null?void 0:f.bloodPressure,onClick:()=>t(`/details/blood-pressure`)}),(0,U.jsx)(Ar,{data:f==null?void 0:f.heartRate,onClick:()=>t(`/details/heart-rate`)}),(0,U.jsx)(Mr,{data:f==null?void 0:f.bloodSugar,onClick:()=>t(`/details/glucose`)}),(0,U.jsx)(Pr,{data:f==null?void 0:f.bloodOxygen,onClick:()=>t(`/details/spo2`)}),(0,U.jsx)(Ir,{data:f==null?void 0:f.sleep,onClick:()=>console.log(`Navigate to sleep details`)}),(0,U.jsx)(Lr,{data:f==null?void 0:f.emotion,onClick:()=>console.log(`Navigate to emotion details`)}),(0,U.jsx)(zr,{data:f==null?void 0:f.nutrition,onClick:()=>console.log(`Navigate to nutrition details`)}),(0,U.jsx)(Ft,{})]})})]})})}var Wr=(0,V.memo)(e=>{let{fill:t,x:n,y:r,width:i,height:a,payload:o,dataKey:s,layers:l}=e,u=null;for(let e=l.length-1;e>=0;e--){let t=l[e].dataKey;if(o[t]&&o[t]>0){u=t;break}}let d=s===u?[3,3,0,0]:[0,0,0,0];return(0,U.jsx)(c,{...e,radius:d})});Wr.displayName=`RoundedTopBar`;var Gr=({data:e,layers:t,xAxisKey:n,yAxisDomain:r,yAxisFormatter:i,legendShape:a=`circle`,barSize:o=12,height:s=176,className:c=``,renderTooltip:l,showRoundedTop:f=!0,stackId:p=`stack`,showLegend:h=!0})=>{let g=qe(),_=Je(),v=a===`circle`?`rounded-full`:`rounded`;return(0,U.jsxs)(`div`,{className:`transform-gpu will-change-transform ${c}`,children:[h&&(0,U.jsx)(`div`,{className:`flex items-center gap-4 mb-2 flex-wrap`,children:t.map(e=>(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 ${v}`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,U.jsx)(`div`,{ref:_,style:{height:s},className:`-mx-2`,children:(0,U.jsx)(T,{width:`100%`,height:`100%`,minWidth:0,minHeight:0,children:(0,U.jsxs)(C,{data:e,margin:{top:10,right:10,left:-15,bottom:0},barCategoryGap:`40%`,children:[(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:n,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1}),(0,U.jsx)(y,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:i}),l&&(0,U.jsx)(m,{content:l,wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),t.map(e=>(0,U.jsx)(u,{dataKey:e.dataKey,stackId:p,fill:e.color,barSize:o,shape:f?(0,U.jsx)(Wr,{layers:t}):void 0,...g},e.dataKey))]})})})]})};Gr.displayName=`StackedBarChart`;const Kr=(0,V.memo)(Gr);var qr=(0,V.memo)(({active:e,payload:t,label:n})=>{let{t:r}=R();if(!e||!t||t.length===0)return null;let i=t.find(e=>e.dataKey===`deep`),a=t.find(e=>e.dataKey===`light`),o=t.find(e=>e.dataKey===`rem`),s=t.find(e=>e.dataKey===`awake`),c=e=>{let t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`};return(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:n}),i&&(0,U.jsxs)(`p`,{style:{color:i.fill},children:[r(`page.sleep.deepSleep`),`: `,c(i.value)]}),a&&(0,U.jsxs)(`p`,{style:{color:a.fill},children:[r(`page.sleep.lightSleep`),`: `,c(a.value)]}),o&&(0,U.jsxs)(`p`,{style:{color:o.fill},children:[r(`page.sleep.remSleep`),`: `,c(o.value)]}),s&&(0,U.jsxs)(`p`,{style:{color:s.fill},children:[r(`page.sleep.awake`),`: `,c(s.value)]})]})}),Jr=`#A78BFA`;const Yr=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w;let{t:T}=R(),E=(e==null?void 0:e.stageColors)||{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},D=[{name:`Mon`,deep:60,light:180,rem:90,awake:10},{name:`Tue`,deep:50,light:190,rem:100,awake:15},{name:`Wed`,deep:70,light:170,rem:80,awake:10},{name:`Thu`,deep:55,light:185,rem:95,awake:12},{name:`Fri`,deep:65,light:175,rem:85,awake:8},{name:`Sat`,deep:80,light:160,rem:110,awake:20},{name:`Sun`,deep:60,light:180,rem:90,awake:10}],ee=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.chartData)==null?void 0:n.map(e=>({name:T(e.weekdayKey),deep:e.deep,light:e.light,rem:e.rem,awake:e.awake,total:e.total})))==null?D:t},[e==null?void 0:e.chartData,T]),O=(0,V.useMemo)(()=>Math.max(...ee.map(e=>(e.deep||0)+(e.light||0)+(e.rem||0)+(e.awake||0))),[ee]),k=Math.ceil(O/60)+1,A=[{dataKey:`deep`,color:E.deep,label:T(`page.sleep.deepSleep`)},{dataKey:`light`,color:E.light,label:T(`page.sleep.lightSleep`)},{dataKey:`rem`,color:E.rem,label:T(`page.sleep.remSleep`)},{dataKey:`awake`,color:E.awake,label:T(`page.sleep.awake`)}];return(0,U.jsxs)(X,{className:`${t} relative`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(le,{className:`w-5 h-5`,style:{color:Jr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:T(`page.sleep.trendyReport`)})]}),n&&(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 text-xs text-slate-400`,children:[(0,U.jsx)(B,{className:`w-3 h-3 animate-spin`}),(0,U.jsx)(`span`,{children:T(`common.loading`)})]})]}),(0,U.jsxs)(`div`,{className:`bg-gray-100 rounded-xl p-4 mb-4`,children:[(0,U.jsx)(`p`,{className:`text-sm text-slate-500 mb-2`,children:T(`page.sleep.weeksAverageSleep`)}),(0,U.jsxs)(`div`,{className:`flex items-center gap-3 mb-2`,children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:`#FB923D`},children:(r=e==null||(i=e.summary)==null?void 0:i.avgHours)==null?`--`:r}),(0,U.jsx)(`span`,{className:`text-base text-slate-600`,children:T(`units.hour`,`hours`)}),(0,U.jsx)(`span`,{className:`text-3xl font-bold ml-1`,style:{color:`#FB923D`},children:(a=e==null||(o=e.summary)==null?void 0:o.avgMinutes)==null?`--`:a}),(0,U.jsx)(`span`,{className:`text-base text-slate-600`,children:T(`units.minute`,`minutes`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(e==null||(s=e.summary)==null?void 0:s.trend)===`down`&&(0,U.jsx)(me,{className:`w-5 h-5 text-cyan-500`}),(e==null||(c=e.summary)==null?void 0:c.trend)===`up`&&(0,U.jsx)(z,{className:`w-5 h-5 text-orange-500`}),(0,U.jsx)(`span`,{className:`text-lg font-semibold text-cyan-500`,children:(l=e==null||(u=e.summary)==null?void 0:u.durationChange)==null?`--`:l})]})]}),(0,U.jsxs)(`p`,{className:`text-sm text-slate-500 mb-4`,children:[T(`time.lastWeek`),`: `,(d=e==null||(f=e.summary)==null?void 0:f.lastWeekDurationText)==null?`-- hours -- minutes`:d]}),(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`p`,{className:`text-sm text-slate-500 mb-1`,children:[T(`page.sleep.highest`),`(`,(p=e==null||(m=e.summary)==null?void 0:m.highestDay)==null?`--`:p,`)`]}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:`#FB923D`},children:(h=e==null||(g=e.summary)==null?void 0:g.highestHours)==null?`--`:h}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.hour`,`hours`)}),(0,U.jsx)(`span`,{className:`text-2xl font-bold ml-1`,style:{color:`#FB923D`},children:(_=e==null||(v=e.summary)==null?void 0:v.highestMinutes)==null?`--`:_}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.minute`,`minutes`)})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`p`,{className:`text-sm text-slate-500 mb-1`,children:[T(`page.sleep.lowest`),`(`,(y=e==null||(b=e.summary)==null?void 0:b.lowestDay)==null?`--`:y,`)`]}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-2xl font-bold`,style:{color:`#FB923D`},children:(x=e==null||(S=e.summary)==null?void 0:S.lowestHours)==null?`--`:x}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.hour`,`hours`)}),(0,U.jsx)(`span`,{className:`text-2xl font-bold ml-1`,style:{color:`#FB923D`},children:(C=e==null||(w=e.summary)==null?void 0:w.lowestMinutes)==null?`--`:C}),(0,U.jsx)(`span`,{className:`text-sm text-slate-600`,children:T(`units.minute`,`minutes`)})]})]})]})]}),(0,U.jsx)(Kr,{data:ee,layers:A,xAxisKey:`name`,yAxisDomain:[0,k*60],yAxisFormatter:e=>`${Math.round(e/60)}h`,legendShape:`circle`,renderTooltip:e=>(0,U.jsx)(qr,{...e}),stackId:`sleep`,height:224})]})});var Xr={deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},Zr=`#A78BFA`;const Qr=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=R(),o=(r=e==null||(i=e.sleepStructure)==null?void 0:i.stages)==null?[]:r,s=o.length>0?o:[{type:`deep`,percent:0,reference:``,status:`normal`,statusText:``},{type:`light`,percent:0,reference:``,status:`normal`,statusText:``},{type:`rem`,percent:0,reference:``,status:`normal`,statusText:``},{type:`awake`,percent:0,reference:``,status:`normal`,statusText:``}],c=e=>{switch(e){case`deep`:return a(`page.sleep.deepSleep`);case`light`:return a(`page.sleep.lightSleep`);case`rem`:return a(`page.sleep.remSleep`);case`awake`:return a(`page.sleep.awake`);default:return e}},l=e=>{switch(e){case`deep`:return Xr.deep;case`light`:return Xr.light;case`rem`:return Xr.rem;case`awake`:return Xr.awake;default:return`#94a3b8`}},u=e=>{switch(e){case`high`:case`low`:return`#F97316`;default:return`#64748b`}};return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(F,{className:`w-5 h-5`,style:{color:Zr}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.sleep.sleepStructure`)})]}),(0,U.jsx)(`div`,{className:`space-y-3`,children:s.map(e=>{let t=l(e.type),n=u(e.status),r=e.status!==`normal`&&e.statusText;return(0,U.jsxs)(`div`,{className:`p-4 rounded-xl`,style:{backgroundColor:`#F8F9FA`},children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,U.jsxs)(`span`,{className:`font-semibold text-sm text-slate-800`,children:[c(e.type),` `,e.percent>0?`(${e.percent}%)`:``]}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.reference?`${a(`page.sleep.standard`)}: ${e.reference}`:``})]}),(0,U.jsx)(`div`,{className:`relative h-2.5 bg-slate-200 rounded-full overflow-hidden mb-2`,children:(0,U.jsx)(`div`,{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(e.percent,100)}%`,backgroundColor:t}})}),r&&(0,U.jsxs)(`div`,{className:`flex items-start gap-1.5`,children:[(0,U.jsx)(`p`,{className:`text-xs font-medium flex-1`,style:{color:n},children:e.statusText}),(0,U.jsx)(be,{className:`w-3.5 h-3.5 flex-shrink-0 mt-0.5`,style:{color:n}})]}),e.status===`normal`&&e.percent>0&&(0,U.jsx)(`p`,{className:`text-xs text-slate-500`,children:`Normal`})]},e.type)})})]})});var $r=`#A78BFA`;const ei=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=R(),o=(r=e==null||(i=e.weeklySummary)==null?void 0:i.dataAnalysis)==null?[]:r,s=[a(`page.sleep.defaultAnalysis1`,{defaultValue:`The average blood oxygen saturation this week was 97%, the same as last week.`}),a(`page.sleep.defaultAnalysis2`,{defaultValue:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`}),a(`page.sleep.defaultAnalysis3`,{defaultValue:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`})];return(0,U.jsx)(Zt,{titleKey:`page.sleep.dataAnalysis`,Icon:oe,items:o.length>0?o:s,themeColor:$r,className:t,isLoading:n})});var ti=`#A78BFA`;const ni=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=R(),a=(r=e==null?void 0:e.routine)==null?{hasData:!1,avgSleepTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},avgWakeTime:{text:`--:--`,changeValue:0,trend:`stable`,changeText:``},insight:null}:r,o=(0,V.useMemo)(()=>a.insight||i(`page.sleep.defaultInsight`,{defaultValue:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`}),[a.insight,i]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${n?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(O,{className:`w-5 h-5`,style:{color:ti}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`page.sleep.compareWithLastWeek`)})]}),(0,U.jsxs)(`div`,{className:`flex gap-3 mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgSleepTime`)}),(0,U.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:ti},children:a.avgSleepTime.text})}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgSleepTime.changeText||i(`page.sleep.sameAsLastWeek`)})]}),(0,U.jsxs)(`div`,{className:`flex-1 p-3 rounded-xl bg-slate-50`,children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:i(`page.sleep.avgWakeTime`)}),(0,U.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,U.jsx)(`span`,{className:`text-xl font-bold`,style:{color:ti},children:a.avgWakeTime.text})}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:a.avgWakeTime.changeText||i(`page.sleep.sameAsLastWeek`)})]})]}),(0,U.jsx)(`div`,{className:`p-4 rounded-2xl bg-purple-50`,children:(0,U.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:o})})]})});var ri=`#A78BFA`;const ii=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r;let{t:i}=R(),a=(r=e==null?void 0:e.weeklySummary)==null?{overview:null,highlights:null,suggestions:[],dataAnalysis:[]}:r;return(0,U.jsx)(ot,{titleKey:`page.sleep.weeklyOverview`,Icon:pe,overallText:(0,V.useMemo)(()=>a.overview||i(`page.sleep.defaultOverview`,{defaultValue:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`}),[a.overview,i]),highlightText:(0,V.useMemo)(()=>a.highlights||i(`page.sleep.defaultHighlights`,{defaultValue:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`}),[a.highlights,i]),highlightLabelKey:`page.sleep.needsAttention`,highlightColor:`#FBBF24`,suggestions:a.suggestions,themeColor:ri,className:t,isLoading:n})});var ai={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`},oi={deep:`page.sleep.deepSleep`,light:`page.sleep.lightSleep`,rem:`page.sleep.remSleep`,awake:`page.sleep.awake`};function si(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function ci(e){switch(e){case`up`:return`up`;case`dn`:case`down`:return`down`;default:return`stable`}}function li(e){switch(e){case`high`:return`high`;case`low`:return`low`;default:return`normal`}}function ui(e){var t,n,r,i,a,o,s,c,l,u,d,f,p,m;let h=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:si(e.date),weekdayKey:ai[e.label]||`weekdays.mon`,total:e.total||0,totalText:e.total_text||``,deep:e.deep||0,light:e.light||0,rem:e.rem||0,awake:e.awake||0})),g=(e==null?void 0:e.overview)||{},_=g.change||{},v=(e==null?void 0:e.sleep_structure)||{has_data:!1,stages:[]},y=(v.stages||[]).map(e=>({type:e.type,labelKey:oi[e.type]||e.label,percent:e.percent||0,reference:e.reference||``,status:li(e.evaluation),statusText:e.evaluation_text||``,color:e.color||`#ccc`})),b=(e==null?void 0:e.sleep_routine)||{has_data:!1},x={hasData:b.has_data||!1,avgSleepTime:{text:((n=b.avg_sleep_time)==null?void 0:n.time_text)||`--:--`,changeValue:((r=b.avg_sleep_time)==null||(r=r.change)==null?void 0:r.value)||0,trend:ci(((i=b.avg_sleep_time)==null||(i=i.change)==null?void 0:i.trend)||`same`),changeText:((a=b.avg_sleep_time)==null||(a=a.change)==null?void 0:a.text)||``},avgWakeTime:{text:((o=b.avg_wake_time)==null?void 0:o.time_text)||`--:--`,changeValue:((s=b.avg_wake_time)==null||(s=s.change)==null?void 0:s.value)||0,trend:ci(((c=b.avg_wake_time)==null||(c=c.change)==null?void 0:c.trend)||`same`),changeText:((l=b.avg_wake_time)==null||(l=l.change)==null?void 0:l.text)||``},insight:b.insight||null};return{chartData:h,yAxisRange:(e==null||(u=e.trend_chart)==null?void 0:u.y_axis_range)||{min:0,max:10},stageColors:{deep:`#A27EFD`,light:`#D9CBFE`,rem:`#ECE5FE`,awake:`#F9933B`},summary:{avgDuration:g.average||0,avgDurationText:g.average_text||`--`,avgHours:Math.floor((g.average||0)/60),avgMinutes:(g.average||0)%60,durationChange:_.value||0,durationChangeText:_.value_text||``,lastWeekDurationText:g.previous_average_text||`--`,trend:ci(_.trend),maxDurationText:g.max_text||`--`,maxDay:g.max_label||``,highestHours:Math.floor((g.max||0)/60),highestMinutes:(g.max||0)%60,highestDay:g.max_label||`--`,minDurationText:g.min_text||`--`,minDay:g.min_label||``,lowestHours:Math.floor((g.min||0)/60),lowestMinutes:(g.min||0)%60,lowestDay:g.min_label||`--`},sleepStructure:{hasData:v.has_data||!1,stages:y},routine:x,weeklySummary:{overview:(e==null||(d=e.weekly_summary)==null?void 0:d.overview)||null,highlights:(e==null||(f=e.weekly_summary)==null?void 0:f.highlights)||null,suggestions:(e==null||(p=e.weekly_summary)==null?void 0:p.suggestions)||[],dataAnalysis:(e==null||(m=e.weekly_summary)==null?void 0:m.data_analysis)||[]}}}const di={all:[`sleep`],trend:e=>[...di.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate],details:()=>[...di.all,`details`]};function fi(e){return he({queryKey:di.trend(e),queryFn:async()=>{console.log(`[Sleep API] Fetching with dateRange:`,e);let t=await bt(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Sleep API] Result:`,t),t},select:e=>ui(e),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function pi(){return Dt({featureName:`Sleep`,queryKeyFn:di.trend,fetchFn:e=>bt({start_date:e.startDate,end_date:e.endDate})})}function mi(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function hi(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function gi(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=pi(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:mi(r.start),endDate:mi(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:hi(r.start),end:hi(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=fi(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`flex items-center justify-center py-20`,children:(0,U.jsx)(`p`,{style:{color:t.textSecondary},children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(Yr,{data:u}),(0,U.jsx)(Qr,{data:u}),(0,U.jsx)(ei,{data:u}),(0,U.jsx)(ni,{data:u}),(0,U.jsx)(ii,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}const _i=(0,V.memo)(({level:e,size:t=48,className:n=``})=>{let r=t/48,i=14*r,a=8*r,o=18*r,s=10*r,c=3*r,l=18*r,u=12*r,d=14*r,f=e===`good`||e===`bad`?16*r:12*r,p=e===`good`||e===`bad`?8*r:2*r;return(0,U.jsxs)(`div`,{className:`relative rounded-full flex items-center justify-center ${n}`,style:{width:`${t}px`,height:`${t}px`,background:`#FFFFFF`,boxShadow:`0 0 0 ${1*r}px rgba(0, 0, 0, 0.06), 0 ${2*r}px ${10*r}px rgba(15, 23, 42, 0.06)`},children:[(0,U.jsx)(`div`,{className:`absolute rounded-full pointer-events-none`,style:{width:`${t*1.9}px`,height:`${t*1.9}px`,background:`radial-gradient(circle at 30% 35%, rgba(255, 168, 90, 0.95) 0%, rgba(255, 168, 90, 0.0) 55%), radial-gradient(circle at 65% 70%, rgba(255, 120, 200, 0.85) 0%, rgba(255, 120, 200, 0.0) 60%)`,filter:`blur(${22*r}px)`,opacity:.55,zIndex:-1,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`}}),(0,U.jsx)(`div`,{className:`absolute flex items-center justify-center`,style:{top:`${e===`good`?o:l}px`,left:`50%`,transform:`translateX(-50%)`,gap:`${e===`good`?s:u}px`},children:e===`good`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{style:{width:`${i}px`,height:`${a}px`,borderTop:`${3*r}px solid #F59E0B`,borderRadius:`${i/2}px ${i/2}px 0 0`,background:`transparent`}}),(0,U.jsx)(`div`,{style:{width:`${i}px`,height:`${a}px`,borderTop:`${3*r}px solid #F59E0B`,borderRadius:`${i/2}px ${i/2}px 0 0`,background:`transparent`}})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{className:`rounded-full`,style:{width:`${c}px`,height:`${c}px`,background:`#FFA500`}}),(0,U.jsx)(`div`,{className:`rounded-full`,style:{width:`${c}px`,height:`${c}px`,background:`#FFA500`}})]})}),(0,U.jsx)(`div`,{className:`absolute left-1/2 -translate-x-1/2`,style:{bottom:`${d}px`},children:e===`good`?null:e===`bad`?(0,U.jsx)(`div`,{style:{width:`${f}px`,height:`${p}px`,borderTop:`${2*r}px solid #94A3B8`,borderRadius:`${f/2}px ${f/2}px 0 0`,transform:`translateY(${4*r}px)`}}):(0,U.jsx)(`div`,{className:`rounded-full`,style:{width:`${f}px`,height:`${p}px`,background:`#94A3B8`}})})]})});_i.displayName=`EmotionFaceIcon`;var vi=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return!i||i.score===null?null:(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,U.jsxs)(`p`,{style:{color:Y.primary},children:[r(`page.emotion.score`),`: `,i.score]})]})});const yi=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o,s,c,l,u,d,f,p,m;let{t:h}=R(),g=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.trendChartData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,score:e.score})))==null?[]:t},[e==null?void 0:e.trendChartData]);return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:Y.primary}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:h(`page.emotion.trendyReport`)})]}),(0,U.jsxs)(`div`,{className:`rounded-xl px-5 py-4 mb-4 mx-1`,style:{backgroundColor:J.background.warning},children:[(0,U.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-xs text-slate-500 mb-1`,children:h(`page.emotion.weeksAverage`)}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:Y.primary},children:(r=e==null||(i=e.summary)==null?void 0:i.avgValue)==null?`--`:r}),(0,U.jsx)(`span`,{className:`text-lg text-slate-500`,children:h(`page.emotion.points`)}),(()=>{if(!e)return null;let{trend:t,changeValue:n}=e.summary;if(n===0)return null;let r=t===`up`;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:r?`#10B981`:`#EF4444`},children:[(0,U.jsx)(r?L:A,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,U.jsxs)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:[h(`time.lastWeek`),`: `,(a=e==null||(o=e.summary)==null?void 0:o.previousAvg)==null?`--`:a,` `,h(`page.emotion.points`)]})]}),(()=>{var t,n;let r=(e==null||(t=e.summary)==null?void 0:t.emotionLevel)||`neutral`,i=(e==null||(n=e.summary)==null?void 0:n.emotionLabel)||`--`;return(0,U.jsxs)(`div`,{className:`flex flex-col items-center gap-1.5`,children:[(0,U.jsx)(_i,{level:r,size:48}),(0,U.jsx)(`span`,{className:`text-[10px] font-medium text-slate-500 whitespace-nowrap`,children:i})]})})()]}),(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[h(`common.max`),`(`,e?h(e.summary.maxWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold`,style:{color:Y.primary},children:[(s=e==null||(c=e.summary)==null?void 0:c.maxValue)==null?`--`:s,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:h(`page.emotion.points`)})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[h(`common.min`),`(`,e?h(e.summary.minWeekdayKey):`--`,`)`]}),(0,U.jsxs)(`p`,{className:`text-xl font-semibold text-slate-600`,children:[(l=e==null||(u=e.summary)==null?void 0:u.minValue)==null?`--`:l,` `,(0,U.jsx)(`span`,{className:`text-sm font-normal`,children:h(`page.emotion.points`)})]})]})]})]}),(0,U.jsx)(Ze,{data:g,lines:[{dataKey:`score`,color:Y.primary,label:h(`page.emotion.score`),showArea:!0,gradientId:`emotionLineGradient`,legendShape:`circle`}],xAxisKey:`name`,yAxisDomain:[(d=e==null||(f=e.yAxisRange)==null?void 0:f.min)==null?0:d,(p=e==null||(m=e.yAxisRange)==null?void 0:m.max)==null?100:p],renderTooltip:e=>(0,U.jsx)(vi,{...e}),showLegend:!1,height:224})]})});var bi=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r(i.weekdayKey)}),(0,U.jsxs)(`p`,{style:{color:Y.positive},children:[r(`page.emotion.positive`),`: `,i.positivePercent,`%`]}),(0,U.jsxs)(`p`,{style:{color:Y.neutral},children:[r(`page.emotion.neutral`),`: `,i.neutralPercent,`%`]}),(0,U.jsxs)(`p`,{style:{color:Y.negative},children:[r(`page.emotion.negative`),`: `,i.negativePercent,`%`]})]}):null});const xi=(0,V.memo)(({data:e,className:t,isLoading:n})=>{let{t:r}=R(),i=(0,V.useMemo)(()=>{var t,n;return(t=e==null||(n=e.compositionData)==null?void 0:n.map((e,t)=>({name:[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`][t%7],weekdayKey:e.weekdayKey,positivePercent:e.positivePercent,neutralPercent:e.neutralPercent,negativePercent:e.negativePercent})))==null?[]:t},[e==null?void 0:e.compositionData]),a=[{dataKey:`positivePercent`,color:Y.positive,label:r(`page.emotion.positive`)},{dataKey:`neutralPercent`,color:Y.neutral,label:r(`page.emotion.neutral`)},{dataKey:`negativePercent`,color:Y.negative,label:r(`page.emotion.negative`)}];return(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(O,{className:`w-5 h-5`,style:{color:Y.primary}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:r(`page.emotion.statistics`)})]}),(0,U.jsx)(Kr,{data:i,layers:a,xAxisKey:`name`,yAxisDomain:[0,100],yAxisFormatter:e=>`${e}%`,legendShape:`square`,renderTooltip:e=>(0,U.jsx)(bi,{...e}),stackId:`emotion`,height:224})]})});var Si={happy:Y.happy,surprised:Y.surprised,calm:Y.calm,sad:Y.sad,angry:Y.angry,fearful:Y.fearful,disgusted:Y.disgusted,neutral:Y.calm};const Ci=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i,a,o;let{t:s}=R(),c=Y.primary,l=(r=e==null||(i=e.distribution)==null?void 0:i.distribution)==null?[]:r,u=(a=e==null||(o=e.distribution)==null?void 0:o.dominantEmotion)==null?``:a,d=(0,V.useMemo)(()=>l.map(e=>({type:e.type,label:e.label,percent:e.percent,count:e.count,color:Si[e.type]||Y.calm})),[l]);return(0,U.jsx)(tt,{title:s(`page.emotion.distribution`),icon:ie,themeColor:c,pieChartSize:`medium`,items:d,centerValue:u||s(`page.emotion.neutral`),centerLabel:`as main`,showCount:!1,columns:2,className:t})});function wi({data:e,className:t}){var n;let{t:r}=R(),i=(e==null||(n=e.weeklySummary)==null?void 0:n.dataAnalysis)||[],a=[r(`page.emotion.defaultAnalysis1`,{defaultValue:`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`}),r(`page.emotion.defaultAnalysis2`,{defaultValue:`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`}),r(`page.emotion.defaultAnalysis3`,{defaultValue:`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`})];return(0,U.jsx)(Zt,{titleKey:`page.emotion.dataAnalysis`,Icon:fe,items:i.length>0?i:a,themeColor:Y.primary,className:t})}function Ti({data:e,className:t}){let{t:n}=R(),r=e==null?void 0:e.weeklySummary;return(0,U.jsx)(ot,{titleKey:`page.emotion.weeklyOverview`,Icon:pe,overallText:(r==null?void 0:r.overview)||n(`page.emotion.defaultOverview`,{defaultValue:`æœ¬å‘¨æ‚¨çš„æƒ…ç»ªæ•´ä½“å¤„äºŽç§¯æžçŠ¶æ€ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„å¿ƒæ€å’Œç”Ÿæ´»ä¹ æƒ¯ï¼`}),highlightText:(r==null?void 0:r.highlights)||n(`page.emotion.defaultHighlights`,{defaultValue:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„æƒ…ç»ªåœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°å·¥ä½œåŽ‹åŠ›ã€ç¡çœ è´¨é‡å’Œç¤¾äº¤æ´»åŠ¨çš„å½±å“ã€‚`}),highlightLabelKey:`page.emotion.needsAttention`,highlightColor:`#FBBF24`,suggestions:r==null?void 0:r.suggestions,themeColor:Y.primary,className:t})}var Ei={å¼€å¿ƒ:Y.happy,ç”Ÿæ°”:Y.angry,å¹³é™:Y.calm,åº†å¹¸:Y.surprised,æ‚²ä¼¤:Y.sad,ææƒ§:Y.fearful,åŽŒæ¶:Y.disgusted,Happy:Y.happy,Angry:Y.angry,Calm:Y.calm,Surprised:Y.surprised,Sad:Y.sad,Fearful:Y.fearful,Disgusted:Y.disgusted},Di=`#FB923D`,Oi=`#D1D5DB`,ki=(0,V.memo)(({diary:e})=>(0,U.jsx)(`div`,{className:`w-full flex-shrink-0 px-1`,children:(0,U.jsxs)(`div`,{className:`bg-slate-50 rounded-2xl p-4 relative overflow-hidden`,children:[(0,U.jsxs)(`div`,{className:`mb-3`,children:[(0,U.jsx)(`h4`,{className:`text-base font-semibold text-slate-800 mb-1`,children:e.title}),(0,U.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[e.dateLabel,` `,e.weekLabel,` `,e.timeLabel]})]}),(0,U.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed mb-4`,children:e.content}),e.imageUrl&&(0,U.jsx)(`div`,{className:`mb-4 -mx-4 px-4`,children:(0,U.jsx)(`div`,{className:`rounded-xl overflow-hidden`,children:(0,U.jsx)(`img`,{src:e.imageUrl,alt:e.title,className:`w-full h-auto max-h-64 object-contain`,style:{backgroundColor:`transparent`},onError:e=>{e.currentTarget.style.display=`none`}})})}),(0,U.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:e.emotionTags.map((e,t)=>(0,U.jsxs)(`span`,{className:`px-3 py-1 rounded-full text-xs text-white font-medium`,style:{backgroundColor:Ei[e]||Y.calm},children:[`# `,e]},t))}),(0,U.jsx)(`div`,{className:`absolute bottom-0 right-0 w-12 h-12`,style:{background:`linear-gradient(135deg, transparent 50%, rgba(148, 163, 184, 0.15) 50%)`}})]})})),Ai=(0,V.memo)(({total:e,current:t,onSelect:n})=>e<=1?null:(0,U.jsx)(`div`,{className:`flex justify-center items-center gap-2 mt-4`,children:Array.from({length:e}).map((e,r)=>(0,U.jsx)(`button`,{onClick:()=>n(r),className:`transition-all duration-300`,style:{width:r===t?24:8,height:8,borderRadius:4,backgroundColor:r===t?Di:Oi},"aria-label":`Go to slide ${r+1}`},r))}));const ji=(0,V.memo)(({data:e,className:t,isLoading:n})=>{var r,i;let{t:a}=R(),[o,s]=(0,V.useState)(0),c=(0,V.useRef)(null),l=(0,V.useRef)(0),u=(0,V.useRef)(0),d=(0,V.useRef)(0),f=(0,V.useRef)(!1),[p,m]=(0,V.useState)(0),h=(r=e==null?void 0:e.diaries)==null?[]:r;(0,V.useEffect)(()=>{s(0)},[h.length]);let g=(0,V.useCallback)(e=>{l.current=e.touches[0].clientX,u.current=e.touches[0].clientY,f.current=!1,m(0)},[]),_=(0,V.useCallback)(e=>{let t=e.touches[0].clientX,n=e.touches[0].clientY,r=t-l.current,i=n-u.current;if(Math.abs(r)>Math.abs(i)&&Math.abs(r)>10){f.current=!0,e.preventDefault();let t=r;(o===0&&r>0||o===h.length-1&&r<0)&&(t=r*.3),m(t)}d.current=t},[o,h.length]),v=(0,V.useCallback)(()=>{let e=d.current-l.current;f.current&&(e>50&&o>0?s(e=>e-1):e<-50&&o<h.length-1&&s(e=>e+1)),m(0),f.current=!1,l.current=0,d.current=0},[o,h.length]),y=(0,V.useCallback)(e=>{s(e)},[]),b=((i=c.current)==null?void 0:i.offsetWidth)||0,x=-o*100;return b>0&&p/b*100,(0,U.jsxs)(X,{className:`${t} relative overflow-hidden`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(we,{className:`w-5 h-5`,style:{color:Y.primary}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:a(`page.emotion.diary`)})]}),h.length>0?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{ref:c,className:`relative overflow-hidden touch-pan-y`,onTouchStart:g,onTouchMove:_,onTouchEnd:v,style:{touchAction:`pan-y pinch-zoom`},children:(0,U.jsx)(`div`,{className:`flex`,style:{transform:`translateX(calc(${x}% + ${p}px))`,transition:p===0?`transform 0.3s ease-out`:`none`},children:h.map(e=>(0,U.jsx)(ki,{diary:e},e.diaryId))})}),(0,U.jsx)(Ai,{total:h.length,current:o,onSelect:y})]}):(0,U.jsx)(`div`,{className:`text-center py-8 text-slate-400 text-sm`,children:a(`common.noData`)})]})});var Mi=`emotion_demo_mode`;function Ni(){try{return localStorage.getItem(Mi)===`true`}catch(e){return console.warn(`[Emotion Demo Mode] Failed to read from localStorage:`,e),!1}}function Pi(){try{localStorage.setItem(Mi,`true`),console.log(`âœ… [Emotion Demo Mode] Enabled - Using dummy data`)}catch(e){console.error(`[Emotion Demo Mode] Failed to enable:`,e)}}function Fi(){try{localStorage.setItem(Mi,`false`),console.log(`âœ… [Emotion Demo Mode] Disabled - Using backend data`)}catch(e){console.error(`[Emotion Demo Mode] Failed to disable:`,e)}}function Ii(){let e=!Ni();return e?Pi():Fi(),e}function Li({className:e=``,onChange:t}){let{t:n}=R(),[r,i]=(0,V.useState)(Ni);return(0,V.useEffect)(()=>{i(Ni())},[]),(0,U.jsxs)(`div`,{className:`flex items-center gap-3 ${e}`,children:[(0,U.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:n(`page.emotion.demoMode`,`Demo Mode`)}),(0,U.jsx)(`button`,{onClick:()=>{let e=Ii();i(e),t==null||t(e),window.location.reload()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ${r?`bg-purple-500`:`bg-slate-300`}`,role:`switch`,"aria-checked":r,"aria-label":n(`page.emotion.toggleDemoMode`,`Toggle demo mode`),children:(0,U.jsx)(`span`,{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r?`translate-x-6`:`translate-x-1`}`})}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:r?n(`page.emotion.demoModeOn`,`Using dummy data`):n(`page.emotion.demoModeOff`,`Using backend data`)})]})}var Ri={å‘¨ä¸€:`weekdays.mon`,å‘¨äºŒ:`weekdays.tue`,å‘¨ä¸‰:`weekdays.wed`,å‘¨å››:`weekdays.thu`,å‘¨äº”:`weekdays.fri`,å‘¨å…­:`weekdays.sat`,å‘¨æ—¥:`weekdays.sun`};function zi(e){let t=new Date(e);return`${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`}function Bi(e){return e===`up`||e===`dn`||e===`same`?e:`same`}function Vi(e){return e===`good`||e===`neutral`||e===`bad`?e:`neutral`}function Hi(){let e=new Date,t=[],n=[],r=[78,82,75,88,85,90,86],i=[25,30,20,35,32,40,38],a=[55,50,60,45,48,42,44],o=[20,20,20,20,20,18,18];for(let s=6;s>=0;s--){let c=new Date(e);c.setDate(c.getDate()-s);let l=c.getDay(),u=[`weekdays.sun`,`weekdays.mon`,`weekdays.tue`,`weekdays.wed`,`weekdays.thu`,`weekdays.fri`,`weekdays.sat`],d=6-s;t.push({date:c,dateLabel:zi(c.toISOString().split(`T`)[0]),weekdayKey:u[l],score:r[d]}),n.push({date:c,dateLabel:zi(c.toISOString().split(`T`)[0]),weekdayKey:u[l],positivePercent:i[d],neutralPercent:a[d],negativePercent:o[d],positiveCount:Math.round(i[d]/5),neutralCount:Math.round(a[d]/5),negativeCount:Math.round(o[d]/5)})}return{trendChartData:t,yAxisRange:{min:0,max:100},compositionData:n,summary:{avgValue:85,previousAvg:86,maxValue:88,maxWeekdayKey:`weekdays.tue`,minValue:82,minWeekdayKey:`weekdays.mon`,emotionLevel:`good`,emotionLabel:`ç§¯æžå‘å¥½`,trend:`dn`,changeValue:1},distribution:{totalCount:55,dominantEmotion:`å¹³é™`,distribution:[{type:`happy`,label:`å¼€å¿ƒ`,count:4,percent:7},{type:`angry`,label:`ç”Ÿæ°”`,count:5,percent:9},{type:`neutral`,label:`å¹³é™`,count:45,percent:82},{type:`surprised`,label:`åº†å¹¸`,count:0,percent:0},{type:`sad`,label:`æ‚²ä¼¤`,count:1,percent:2},{type:`fearful`,label:`ææƒ§`,count:0,percent:0},{type:`disgusted`,label:`åŽŒæ¶`,count:0,percent:0}]},comparison:{current:{average:85},previous:{average:86},insight:null},weeklySummary:{overview:`æœ¬å‘¨"å¼€å¿ƒ"ä¸Ž"å¹³é™"å æ¯”åˆè®¡è¾¾ 72%ã€‚å‘¨å…­çš„æˆ·å¤–æ´»åŠ¨æ˜¾è‘—æå‡äº†æ‚¨çš„æ„‰æ‚¦æŒ‡æ•°ã€‚`,highlights:`å‘¨äºŒå‡ºçŽ°çŸ­æš‚çš„"ç–²æƒ«/æ‚²ä¼¤"æƒ…ç»ªï¼Œä¸»è¦ä¸Žå·¥ä½œåŽ‹åŠ›åŠå‰ä¸€æ™šç¡çœ ä¸è¶³æœ‰å…³ã€‚`,suggestions:[],dataAnalysis:[`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`,`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`,`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`]},diaries:[{diaryId:`dummy-1`,title:`é’±åŒ…å¤±è€Œå¤å¾—`,weekLabel:`å‘¨å›› Thu`,dateLabel:`Nov.21`,timeLabel:`20:22`,content:`ä»Šå¤©å‡ºé—¨ä¹°èœæ—¶ä¸å°å¿ƒæŠŠé’±åŒ…è½åœ¨äº†è¶…å¸‚ï¼Œå›žå®¶æ‰å‘çŽ°ã€‚æ­£ç€æ€¥çš„æ—¶å€™ï¼Œè¶…å¸‚æ‰“æ¥ç”µè¯è¯´æœ‰äººæ¡åˆ°äº¤ç»™äº†æœåŠ¡å°ã€‚çœŸæ˜¯å¤ªæ„Ÿè°¢é‚£ä½å¥½å¿ƒäººäº†ï¼Œä¸–ç•Œè¿˜æ˜¯å¥½äººå¤šå•Šï¼`,emotionTags:[`åº†å¹¸`],imageUrl:`/images/emotion/wallet.png`},{diaryId:`dummy-2`,title:`ç¤¾åŒºæ´»åŠ¨çœŸçƒ­é—¹`,weekLabel:`å‘¨äº” Fri`,dateLabel:`Nov.22`,timeLabel:`15:30`,content:`ä»Šå¤©å‚åŠ äº†ç¤¾åŒºç»„ç»‡çš„è€å¹´äººè”è°Šä¼šï¼Œè§åˆ°äº†å¥½å¤šè€æœ‹å‹ã€‚å¤§å®¶ä¸€èµ·èŠå¤©ã€ä¸‹æ£‹ã€å”±æ­Œï¼Œåº¦è¿‡äº†æ„‰å¿«çš„ä¸‹åˆã€‚æ´»åŠ¨ç»“æŸåŽè¿˜ä¸€èµ·åˆå½±ç•™å¿µï¼ŒçœŸå¸Œæœ›è¿™æ ·çš„æ´»åŠ¨èƒ½å¤šä¸¾åŠžå‡ æ¬¡ã€‚`,emotionTags:[`å¼€å¿ƒ`],imageUrl:`/images/emotion/meeting.png`},{diaryId:`dummy-3`,title:`æœŸå¾…å·²ä¹…çš„å®¶åº­èšé¤`,weekLabel:`å‘¨ä¸€ Mon`,dateLabel:`Nov.24`,timeLabel:`19:33`,content:`ä»Šå¤©å­©å­ä»¬éƒ½å›žæ¥äº†ï¼Œæˆ‘ç‰¹æ„åšäº†ä»–ä»¬çˆ±åƒçš„çº¢çƒ§è‚‰ã€‚å°å­™å­è®²äº†å¾ˆå¤šå­¦æ ¡çš„äº‹æƒ…ï¼Œå¥³å„¿ä¹Ÿåˆ†äº«äº†å·¥ä½œä¸Šçš„è¶£äº‹ã€‚ä¸€å®¶äººå›´ååœ¨ä¸€èµ·åƒé¥­èŠå¤©ï¼Œè¿™ç§æ¸©é¦¨çš„æ„Ÿè§‰çœŸå¥½ã€‚`,emotionTags:[`å¼€å¿ƒ`],imageUrl:`/images/emotion/daughter.png`}]}}function Ui(e){var t,n,r,i,a;if(console.log(`[Emotion Adapter] Input:`,e),!e)return console.warn(`[Emotion Adapter] No API data, using dummy data`),Hi();let o=((e==null||(t=e.trend_chart)==null?void 0:t.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:zi(e.date),weekdayKey:Ri[e.label]||`weekdays.mon`,score:e.score})),s=((e==null||(n=e.emotion_composition)==null?void 0:n.chart_data)||[]).map(e=>({date:new Date(e.date),dateLabel:zi(e.date),weekdayKey:Ri[e.label]||`weekdays.mon`,positivePercent:e.positive_percent,neutralPercent:e.neutral_percent,negativePercent:e.negative_percent,positiveCount:e.positive_count,neutralCount:e.neutral_count,negativeCount:e.negative_count})),c=((e==null?void 0:e.emotion_diaries)||[]).map(e=>({diaryId:e.diary_id,title:e.title,weekLabel:e.week_label,dateLabel:e.date_label,timeLabel:e.time_label,content:e.content,emotionTags:e.emotion_tag||[],imageUrl:e.image_url})),l=(e==null?void 0:e.overview)||{},u=l.average||0,d=l.previous_average||0,f=l.max||0,p=l.min||0,m=l.max_label&&Ri[l.max_label]||`weekdays.mon`,h=l.min_label&&Ri[l.min_label]||`weekdays.mon`,g=Vi(l.emotion_level),_=l.emotion_label||``,v=l.change||{},y=Bi(v.trend),b=v.value||0,x=(e==null?void 0:e.emotion_distribution)||{},S={totalCount:x.total_count||0,dominantEmotion:x.dominant_emotion||``,distribution:(x.distribution||[]).map(e=>({type:e.type,label:e.label,count:e.count,percent:e.percent}))},C=(e==null?void 0:e.comparison)||{},w=(e==null?void 0:e.weekly_summary)||{},T={trendChartData:o.length>0?o:Hi().trendChartData,yAxisRange:(e==null||(r=e.trend_chart)==null?void 0:r.y_axis_range)||{min:0,max:100},compositionData:s.length>0?s:Hi().compositionData,summary:{avgValue:u,previousAvg:d,maxValue:f,maxWeekdayKey:m,minValue:p,minWeekdayKey:h,emotionLevel:g,emotionLabel:_,trend:y,changeValue:b},distribution:S,comparison:{current:{average:((i=C.current)==null?void 0:i.average)||u},previous:{average:((a=C.previous)==null?void 0:a.average)||d},insight:C.insight||null},weeklySummary:{overview:w.overview||null,highlights:w.highlights||null,suggestions:w.suggestions||[],dataAnalysis:w.data_analysis||[]},diaries:c.length>0?c:Hi().diaries};return console.log(`[Emotion Adapter] Output:`,T),T}const Wi={all:[`emotion`],trend:(e,t)=>[...Wi.all,`trend`,e==null?void 0:e.startDate,e==null?void 0:e.endDate,t?`demo`:`live`],details:()=>[...Wi.all,`details`]};async function Gi(e){try{return await ht(`emotion`,e)}catch(e){return console.warn(`[Emotion API] API not available, using dummy data:`,e),null}}function Ki(e){let t=Ni();return he({queryKey:Wi.trend(e,t),queryFn:async()=>{if(t)return console.log(`ðŸŽ­ [Emotion Demo Mode] Using dummy data instead of backend API`),Hi();console.log(`[Emotion API] Fetching with dateRange:`,e);let n=await Gi(e?{start_date:e.startDate,end_date:e.endDate}:void 0);return console.log(`[Emotion API] Result:`,n),Ui(n)},staleTime:300*1e3,gcTime:600*1e3})}function qi(){let e=Ni();return Dt({featureName:`Emotion`,queryKeyFn:t=>Wi.trend(t,e),fetchFn:async t=>{if(e)return Hi();try{return Ui(await Gi({start_date:t.startDate,end_date:t.endDate}))}catch(e){return Hi()}}})}function Ji(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Yi(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function Xi(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=qi(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:Ji(r.start),endDate:Ji(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:Yi(r.start),end:Yi(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=Ki(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsxs)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:[(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})}),(0,U.jsx)(`div`,{className:`flex justify-center mt-3`,children:(0,U.jsx)(Li,{})})]}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`text-center py-12`,children:(0,U.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(yi,{data:u}),(0,U.jsx)(xi,{data:u}),(0,U.jsx)(Ci,{data:u}),(0,U.jsx)(wi,{data:u}),(0,U.jsx)(Ti,{data:u}),(0,U.jsx)(ji,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}const Zi=({data:e,className:t})=>{let{t:n}=R();if(!e)return null;let r=[{name:`Low`,value:30,color:`#93C5FD`},{name:`Normal`,value:25,color:`#86EFAC`},{name:`Excess`,value:45,color:`#FB923D`}],i=4500,a=Math.min(i,Math.max(0,e.currentCal))/i;return(0,U.jsxs)(X,{className:`${t} p-5 relative overflow-hidden bg-white rounded-[24px]`,children:[(0,U.jsx)(`div`,{className:`flex items-center justify-between mb-4`,children:(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5 text-orange-500`}),(0,U.jsx)(`h3`,{className:` font-semibold `,children:n(`nutrition.weeklyAverageReport`,`Weekly average report`)})]})}),e.status===`alert`&&(0,U.jsxs)(`div`,{className:`absolute top-5 right-5 flex items-center gap-1 text-orange-500 text-xs`,children:[(0,U.jsx)(Ee,{className:`w-3 h-3`}),n(`nutrition.excessiveIntake`,`Excessive intake`)]}),(0,U.jsxs)(`div`,{className:`relative h-[220px] -mt-4 flex justify-center`,children:[(0,U.jsx)(T,{width:`100%`,height:`100%`,children:(0,U.jsx)(x,{children:(0,U.jsx)(b,{data:r,cx:`50%`,cy:`85%`,startAngle:180,endAngle:0,innerRadius:125,outerRadius:145,paddingAngle:3,dataKey:`value`,stroke:`none`,cornerRadius:8,children:r.map((e,t)=>(0,U.jsx)(_,{fill:e.color},`cell-${t}`))})})}),(0,U.jsx)(`div`,{className:`absolute inset-0 pointer-events-none z-10`,children:(0,U.jsx)(`div`,{className:`absolute left-1/2 top-[85%] w-0 h-0`,children:(0,U.jsx)(`div`,{className:`absolute left-0 top-0 w-0 h-0 flex items-center justify-start transition-transform duration-1000 ease-out`,style:{transform:`rotate(${-180+a*180}deg)`},children:(0,U.jsxs)(`div`,{className:`relative flex items-center`,style:{transformOrigin:`left center`},children:[(0,U.jsx)(`div`,{className:`absolute -left-[10px] -top-[10px] w-[20px] h-[20px] bg-[#FB923D] rounded-full z-20 border-[3px] border-white box-border shadow-sm`}),(0,U.jsx)(`div`,{className:`absolute left-[0px] top-[-3px] h-[6px] w-[65px] bg-[#FB923D] rounded-l-none`}),(0,U.jsx)(`div`,{className:`absolute left-[58px] top-[-7px] h-[14px] w-[50px] bg-[#FB923D] rounded-full shadow-sm`})]})})})}),(0,U.jsxs)(`div`,{className:`absolute top-[75px] flex flex-col items-center pointer-events-none z-0`,children:[(0,U.jsx)(`div`,{className:`text-[40px] font-bold text-[#FB923D] leading-none tracking-tight`,children:e.currentCal}),(0,U.jsx)(`div`,{className:`text-[14px] text-slate-400 font-medium mt-0.5`,children:n(`nutrition.kcal`,`kcal`)}),(0,U.jsxs)(`div`,{className:`text-[12px] text-slate-400 mt-1 opacity-90`,children:[n(`nutrition.target`,`Target`),`: `,e.targetCal,` `,n(`nutrition.kcal`,`kcal`)]})]})]}),(0,U.jsxs)(`div`,{className:`grid grid-cols-2 gap-3 -mt-2`,children:[(0,U.jsxs)(`div`,{className:`bg-[#F8FAFC] rounded-[16px] py-4 px-4 flex flex-col items-center justify-center`,children:[(0,U.jsx)(`span`,{className:`text-[12px] text-slate-400 mb-1`,children:n(`nutrition.calorieIntake`,`Calorie intake`)}),(0,U.jsxs)(`span`,{className:`text-[20px] font-bold text-orange-500 whitespace-nowrap`,children:[e.remainingCal>0?`+${e.remainingCal}`:e.remainingCal,(0,U.jsx)(`span`,{className:`text-[12px] font-normal text-slate-500 ml-1`,children:n(`nutrition.kcal`,`kcal`)})]})]}),(0,U.jsxs)(`div`,{className:`bg-[#F8FAFC] rounded-[16px] py-4 px-4 flex flex-col items-center justify-center`,children:[(0,U.jsx)(`span`,{className:`text-[12px] text-slate-400 mb-1`,children:n(`nutrition.averageConsumption`,`Average consumption`)}),(0,U.jsxs)(`span`,{className:`text-[20px] font-bold text-[#FB923D] whitespace-nowrap`,children:[`--- `,(0,U.jsx)(`span`,{className:`text-[12px] font-normal text-slate-500 ml-1`,children:n(`nutrition.kcal`,`kcal`)})]})]})]})]})};function Qi({title:e,icon:t,themeColor:n,data:r,unit:i=``,avgValue:a,className:o,isLoading:s}){let{t:c}=R(),l=(e,t)=>e>t?`#FB923D`:e<t*.8?`#93C5FD`:`#86EFAC`;return r?(0,U.jsxs)(X,{className:`${o} relative overflow-hidden p-5`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[t&&(0,U.jsx)(t,{className:`w-5 h-5`,style:{color:n}}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:e}),typeof a==`number`&&(0,U.jsxs)(`span`,{className:`ml-auto flex items-center gap-1 text-xs text-slate-500 bg-white border border-slate-200 px-2 py-1 rounded-full shadow-sm`,children:[c(`nutrition.avg`,`Avg`),` `,a,` `,i]})]}),(0,U.jsxs)(`div`,{className:`flex justify-start gap-6 mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-green-300`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.meet`,`Goal`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-blue-300`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.insufficient`,`Insufficient`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-sm bg-orange-400`}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:c(`nutrition.excess`,`Exceed`)})]})]}),(0,U.jsx)(`div`,{className:`h-48 w-full`,children:(0,U.jsx)(T,{width:`100%`,height:`100%`,children:(0,U.jsxs)(h,{data:r,margin:{top:10,right:0,left:-20,bottom:0},barSize:12,children:[(0,U.jsx)(d,{strokeDasharray:`3 3`,vertical:!1,stroke:`#F1F5F9`}),(0,U.jsx)(S,{dataKey:`label`,axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`},dy:10}),(0,U.jsx)(y,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:`#94A3B8`}}),(0,U.jsx)(u,{dataKey:`value`,radius:[6,6,0,0],children:r.map((e,t)=>(0,U.jsx)(_,{fill:l(e.value,e.target)},`cell-${t}`))})]})})})]}):null}const $i=({data:e,className:t,isLoading:n})=>{let{t:r}=R(),i=W.nutrition||`#FB923D`,a=(e==null?void 0:e.map(e=>({label:e.date,value:e.value,target:e.target})))||[],o=e&&e.length>0?Math.round(e.reduce((e,t)=>e+t.value,0)/e.length):0;return(0,U.jsx)(Qi,{title:r(`nutrition.ingestTargetStatistics`,`Ingest target statistics`),icon:z,themeColor:i,data:a,unit:r(`nutrition.kcal`,`kcal`),avgValue:o,className:t,isLoading:n})},ea=({data:e,className:t,isLoading:n})=>{let{t:r}=R(),i=W.nutrition||`#FB923D`;return(0,U.jsx)(Zt,{titleKey:`nutrition.dataAnalysis`,Icon:pe,items:(e==null?void 0:e.details)||[],themeColor:i,className:t,isLoading:n})};function ta(e,t){let n=e/t*100;return n>=90&&n<=110?`goal`:n>110?`exceed`:`insufficient`}function na(e,t){switch(e){case`goal`:return{bg:`bg-green-100`,text:`text-green-600`,label:t(`nutrition.goal`,`Goal`)};case`exceed`:return{bg:`bg-orange-100`,text:`text-orange-600`,label:t(`nutrition.exceed`,`Exceed`)};case`insufficient`:return{bg:`bg-blue-100`,text:`text-blue-600`,label:t(`nutrition.insufficient`,`Insufficient`)}}}const ra=({data:e,className:t})=>{let{t:n}=R();return e?(0,U.jsxs)(X,{className:`${t} p-5`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(ie,{className:`w-5 h-5 text-orange-500`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`nutrition.macronutrientStructure`,`Macronutrient structure`)})]}),(0,U.jsx)(`div`,{className:`flex flex-col gap-4`,children:e.map((e,t)=>{let r=na(ta(e.current,e.total),n);return(0,U.jsxs)(`div`,{className:`bg-slate-50 rounded-xl p-4`,children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,U.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:e.label}),(0,U.jsx)(`span`,{className:`text-xs font-medium px-3 py-1 rounded-full ${r.bg} ${r.text}`,children:r.label})]}),(0,U.jsxs)(`div`,{className:`flex justify-between items-baseline mb-3`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:e.color},children:e.current}),(0,U.jsx)(`span`,{className:`text-sm text-slate-500 ml-1`,children:e.unit})]}),(0,U.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[n(`nutrition.target`,`Target`),`: `,e.total,` `,e.unit]})]}),(0,U.jsx)(`div`,{className:`h-2 w-full bg-slate-200 rounded-full overflow-hidden`,children:(0,U.jsx)(`div`,{className:`h-full rounded-full transition-all duration-500`,style:{width:`${Math.min(100,e.current/e.total*100)}%`,backgroundColor:e.color}})})]},t)})}),(0,U.jsx)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-sm text-slate-600 leading-relaxed`,children:n(`nutrition.balancedIntakeSummary`,`Your macronutrient balance is generally good. Protein intake hits the target, while fat intake is slightly high. We recommend maintaining current protein levels while reducing fat consumption.`)})]}):null},ia=({data:e,className:t})=>{let{t:n}=R();return e?(0,U.jsxs)(X,{className:`${t} p-5`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(ue,{className:`w-5 h-5 text-orange-500`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`nutrition.microElementStatus`,`Micro-element status`)})]}),(0,U.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,t)=>{let r=e.status===`normal`?`bg-green-100 text-green-600`:e.status===`low`?`bg-blue-100 text-blue-600`:`bg-orange-100 text-orange-600`,i=e.status===`normal`?n(`nutrition.normal`,`Normal`):e.status===`low`?n(`nutrition.insufficient`,`Insufficient`):n(`nutrition.excess`,`Excess`),a=e.status===`normal`?`#86EFAC`:e.status===`low`?`#93C5FD`:`#FB923D`,o=e.status===`low`?`30%`:e.status===`normal`?`60%`:`90%`;return(0,U.jsxs)(`div`,{className:`bg-slate-50 p-3 rounded-xl border border-slate-100`,children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-start mb-2`,children:[(0,U.jsx)(`span`,{className:`text-sm font-semibold text-slate-700`,children:e.name}),(0,U.jsx)(`span`,{className:`text-[10px] px-1.5 py-0.5 rounded-md font-medium ${r}`,children:i})]}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1 mb-2`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:e.value}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:e.unit})]}),(0,U.jsx)(`div`,{className:`relative h-1.5 bg-slate-200 rounded-full w-full overflow-hidden`,children:(0,U.jsx)(`div`,{className:`absolute h-full rounded-full`,style:{width:o,backgroundColor:a}})}),(0,U.jsxs)(`div`,{className:`flex justify-between text-[10px] text-slate-400 mt-1`,children:[(0,U.jsx)(`span`,{children:n(`nutrition.range`,`Range`)}),(0,U.jsxs)(`span`,{children:[e.range[0],`-`,e.range[1]]})]})]},t)})}),(0,U.jsxs)(`div`,{className:`mt-4 p-3 bg-blue-50 rounded-xl text-center text-sm font-medium text-blue-600`,children:[n(`nutrition.viewAllElements`,`View all elements`),` >`]})]}):null};var aa=`#FB923D`,oa=`#D1D5DB`,sa=({total:e,current:t,onSelect:n,activeColor:r=aa,inactiveColor:i=oa})=>e<=1?null:(0,U.jsx)(`div`,{className:`flex justify-center items-center gap-2 mt-4`,children:Array.from({length:e}).map((e,a)=>(0,U.jsx)(`button`,{onClick:()=>n(a),className:`transition-all duration-300`,style:{width:a===t?24:8,height:8,borderRadius:4,backgroundColor:a===t?r:i},"aria-label":`Go to slide ${a+1}`},a))});const ca=({items:e,renderItem:t,className:n,isLoading:r,header:i,emptyMessage:a=`No data available`,indicatorActiveColor:o,indicatorInactiveColor:s})=>{let[c,l]=(0,V.useState)(0),u=(0,V.useRef)(null),d=(0,V.useRef)(0),f=(0,V.useRef)(0),p=(0,V.useRef)(0),m=(0,V.useRef)(!1),[h,g]=(0,V.useState)(0);(0,V.useEffect)(()=>{l(0)},[e.length]);let _=(0,V.useCallback)(e=>{d.current=e.touches[0].clientX,f.current=e.touches[0].clientY,m.current=!1,g(0)},[]),v=(0,V.useCallback)(t=>{let n=t.touches[0].clientX,r=t.touches[0].clientY,i=n-d.current,a=r-f.current;if(Math.abs(i)>Math.abs(a)&&Math.abs(i)>10){m.current=!0;let t=i;(c===0&&i>0||c===e.length-1&&i<0)&&(t=i*.3),g(t)}p.current=n},[c,e.length]),y=(0,V.useCallback)(()=>{let t=p.current-d.current;m.current&&(t>50&&c>0?l(e=>e-1):t<-50&&c<e.length-1&&l(e=>e+1)),g(0),m.current=!1,d.current=0,p.current=0},[c,e.length]),b=(0,V.useCallback)(e=>{l(e)},[]),x=-c*100;return(0,U.jsxs)(X,{className:`${n} relative overflow-hidden`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-2xl flex items-center justify-center z-10 transition-all duration-300 ease-in-out ${r?`opacity-100`:`opacity-0 pointer-events-none`}`,style:{backgroundColor:q.loadingOverlay},children:(0,U.jsx)(B,{className:`w-8 h-8 text-white animate-spin`})}),i&&(0,U.jsx)(`div`,{className:`mb-4`,children:i}),e.length>0?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{ref:u,className:`relative overflow-hidden touch-pan-y`,onTouchStart:_,onTouchMove:v,onTouchEnd:y,style:{touchAction:`pan-y pinch-zoom`},children:(0,U.jsx)(`div`,{className:`flex`,style:{transform:`translateX(calc(${x}% + ${h}px))`,transition:h===0?`transform 0.3s ease-out`:`none`},children:e.map((e,n)=>(0,U.jsx)(`div`,{className:`w-full flex-shrink-0 px-1`,children:t(e,n)},n))})}),(0,U.jsx)(sa,{total:e.length,current:c,onSelect:b,activeColor:o,inactiveColor:s})]}):(0,U.jsx)(`div`,{className:`text-center py-8 text-slate-400 text-sm`,children:a})]})},la=({data:e,className:t})=>{let{t:n}=R();if(!e)return null;let r=(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(ve,{className:`w-5 h-5 text-orange-500`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`nutrition.complicatedRecipes`,`Complicated recipes`)})]});return(0,U.jsx)(ca,{className:t,items:e,renderItem:e=>(0,U.jsxs)(`div`,{className:`bg-orange-50 rounded-2xl p-4 flex gap-4 items-center`,children:[(0,U.jsx)(`div`,{className:`w-20 h-20 rounded-xl overflow-hidden flex-shrink-0 bg-gray-200`,children:(0,U.jsx)(`img`,{src:e.imageUrl,alt:e.title,className:`w-full h-full object-cover`})}),(0,U.jsxs)(`div`,{className:`flex-1`,children:[(0,U.jsx)(`h4`,{className:`text-base font-bold text-slate-800 mb-1`,children:e.title}),(0,U.jsx)(`div`,{className:`flex gap-2 mb-2`,children:e.tags.map(e=>(0,U.jsx)(`span`,{className:`text-[10px] bg-white text-orange-600 px-2 py-0.5 rounded-full border border-orange-100`,children:e},e))}),(0,U.jsxs)(`div`,{className:`text-lg font-bold text-orange-500`,children:[`+`,e.calories,` `,(0,U.jsx)(`span`,{className:`text-xs font-normal text-slate-500`,children:n(`nutrition.kcal`,`kcal`)})]})]}),(0,U.jsx)(`div`,{className:`w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white shadow-md shadow-orange-200`,children:`>`})]}),header:r,indicatorActiveColor:`#FB923D`,indicatorInactiveColor:`#FED7AA`})};function ua({data:e,className:t,isLoading:n}){let{t:r}=R(),i=W.nutrition,a=e==null?void 0:e.weeklySummary;return(0,U.jsx)(ot,{titleKey:`page.nutrition.weeklyOverview`,Icon:pe,overallText:(a==null?void 0:a.overview)||r(`page.nutrition.defaultOverview`,{defaultValue:`Your nutritional intake is generally balanced. Total calorie intake fluctuates slightly but remains within the target range.`}),highlightText:(a==null?void 0:a.highlights)||r(`page.nutrition.defaultHighlights`,{defaultValue:`The analysis shows that your protein intake has been consistent, but there was a slight excess in fat consumption over the weekend. We recommend increasing vegetable intake to balance the micronutrients.`}),highlightLabelKey:`page.nutrition.anomalyAlert`,highlightColor:`#FBBF24`,suggestions:a==null?void 0:a.suggestions,themeColor:i,className:t,isLoading:n})}function da(e,t){var n;if(!(!(e==null||(n=e.data)==null||(n=n.report)==null||(n=n.nutrition_status)==null)&&n.èƒ½é‡))return t;let r=e.data.report.nutrition_status.èƒ½é‡,i=r.value,a=r.target,o=r.percentage,s=`good`;return o<80?s=`warning`:o>120&&(s=`alert`),{currentCal:Math.round(i),targetCal:Math.round(a),remainingCal:Math.round(a-i),percentage:Math.round(o),status:s}}function fa(e,t){return t}function pa(e,t){var n;if(!(!(e==null||(n=e.data)==null||(n=n.report)==null)&&n.nutrition_status))return t;let r=e.data.report.nutrition_status,i=[];return r.ç¢³æ°´åŒ–åˆç‰©&&i.push({label:`Carbs`,current:Math.round(r.ç¢³æ°´åŒ–åˆç‰©.value*10)/10,total:r.ç¢³æ°´åŒ–åˆç‰©.target,unit:`g`,color:`#86EFAC`}),r.è„‚è‚ª&&i.push({label:`Fat`,current:Math.round(r.è„‚è‚ª.value*10)/10,total:r.è„‚è‚ª.target,unit:`g`,color:`#FB923D`}),r.è›‹ç™½è´¨&&i.push({label:`Protein`,current:Math.round(r.è›‹ç™½è´¨.value*10)/10,total:r.è›‹ç™½è´¨.target,unit:`g`,color:`#93C5FD`}),i.length===3?i:t}function ma(e,t){var n;if(!(!(e==null||(n=e.data)==null||(n=n.report)==null)&&n.nutrition_status))return t;let r=e.data.report.nutrition_status,i=[];return[{key:`é’™`,name:`Calcium (Ca)`,unit:`mg`},{key:`é’ `,name:`Sodium (Na)`,unit:`mg`},{key:`é“`,name:`Iron (Fe)`,unit:`mg`},{key:`é”Œ`,name:`Zinc (Zn)`,unit:`mg`},{key:`ç»´ç”Ÿç´ C`,name:`Vitamin C`,unit:`mg`},{key:`ç»´ç”Ÿç´ D`,name:`Vitamin D`,unit:`Î¼g`}].forEach(({key:e,name:t,unit:n})=>{let a=r[e];if(a){let e=`normal`;a.status===`ä¸è¶³`?e=`low`:a.status===`è¶…æ ‡`&&(e=`high`);let r=a.target*.8,o=a.target*1.2;i.push({name:t,value:Math.round(a.value*10)/10,unit:n,range:[Math.round(r),Math.round(o)],status:e})}}),i.length>=4?i:t}function ha(e,t){var n;if(!(!(e==null||(n=e.data)==null)&&n.report))return t;let r=e.data.report,i=85;if(r.nutrition_status){let e=Object.values(r.nutrition_status),t=e.filter(e=>e.status===`è¾¾æ ‡`).length,n=e.length;i=Math.round(t/n*100)}let a=r.data_analysis||t.summary,o=[];return r.dietary_insights&&r.dietary_insights.length>0&&o.push(...r.dietary_insights),r.category_evaluations&&(r.category_evaluations.macro_nutrients&&o.push(r.category_evaluations.macro_nutrients),r.category_evaluations.micro_nutrients&&o.push(r.category_evaluations.micro_nutrients),r.category_evaluations.dietary_components&&o.push(r.category_evaluations.dietary_components)),o.length===0?t:{score:i,summary:a,details:o}}function ga(e,t){var n;if(!(!(e==null||(n=e.data)==null||(n=n.report)==null)&&n.weekly_overview))return t;let r=e.data.report.weekly_overview,i=e.data.report.weekly_calories_overview,a=e.data.report.dietary_insights;return{overview:r.overall_trend||t.overview,highlights:(i==null?void 0:i.evaluation)||t.highlights,suggestions:a&&a.length>0?a:t.suggestions}}const _a=(e,t)=>(console.log(`[Nutrition Adapter] Adapting data, backend available:`,!!e),{weeklyManagement:da(e,t.weeklyManagement),metabolismTrend:fa(e,t.metabolismTrend),nutrientStructure:pa(e,t.nutrientStructure),microElements:ma(e,t.microElements),recipes:t.recipes,analysis:ha(e,t.analysis),weeklySummary:ga(e,t.weeklySummary)});var va=`https://test.fulai.tech/ns`,ya=`sk-proj-VvBPGYkFpr0SFMfZJvwDfNwJV4N_hdx5`,ba=`69521a739c443012172f98b3`;async function xa(e){try{let t=await fetch(`${va}/nutrition/calc/weekly_nutrition_report_app_new`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${ya}`},body:JSON.stringify({user_id:ba,force_refresh:!1,week_start_date:e})});if(!t.ok)return console.warn(`[Nutrition API] Backend request failed:`,t.status),null;let n=await t.json();return n.code===200?n:(console.warn(`[Nutrition API] Backend returned error code:`,n.code),null)}catch(e){return console.warn(`[Nutrition API] Backend request error:`,e),null}}var Sa={weeklyManagement:{currentCal:3350,targetCal:2350,remainingCal:2350,percentage:75,status:`good`},metabolismTrend:[{date:`Mon`,value:2050,target:2e3},{date:`Tue`,value:2493,target:2e3},{date:`Wed`,value:1520,target:2e3},{date:`Thu`,value:2680,target:2e3},{date:`Fri`,value:2380,target:2e3},{date:`Sat`,value:1850,target:2e3},{date:`Sun`,value:1980,target:2e3}],nutrientStructure:[{label:`Carbs`,current:300,total:350,unit:`g`,color:`#86EFAC`},{label:`Fat`,current:62.3,total:50,unit:`g`,color:`#FB923D`},{label:`Protein`,current:13,total:65,unit:`mg`,color:`#93C5FD`}],microElements:[{name:`Calcium (Ca)`,value:721,unit:`mg`,range:[800,1200],status:`low`},{name:`Sodium (Na)`,value:2543,unit:`mg`,range:[1e3,2e3],status:`high`},{name:`Iron (Fe)`,value:15,unit:`mg`,range:[10,20],status:`normal`},{name:`Zinc (Zn)`,value:8,unit:`mg`,range:[10,15],status:`low`},{name:`Vitamin A`,value:113,unit:`Î¼g`,range:[600,900],status:`low`},{name:`Vitamin C`,value:95,unit:`mg`,range:[60,100],status:`normal`},{name:`Vitamin D`,value:22,unit:`Î¼g`,range:[10,20],status:`high`},{name:`Vitamin E`,value:18,unit:`mg`,range:[12,20],status:`normal`}],recipes:[{id:`1`,title:`Grilled Salmon with Quinoa`,calories:485,imageUrl:`https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=800&q=80`,tags:[`High Protein`,`Omega-3`,`Dinner`]},{id:`2`,title:`Mediterranean Salad Bowl`,calories:320,imageUrl:`https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80`,tags:[`Healthy`,`Vegetarian`,`Lunch`]},{id:`3`,title:`Chicken Stir-Fry`,calories:425,imageUrl:`https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=800&q=80`,tags:[`High Protein`,`Low Carb`,`Dinner`]}],analysis:{score:85,summary:`Your diet structure is good, but you need to pay attention to Vitamin intake.`,details:[`Fat intake is slightly high, consider reducing oil usage.`,`Protein intake is good, keep it up.`,`Micro-elements Calcium and Vitamin A are insufficient.`,`Sodium levels are above the recommended range, try to reduce salt intake.`,`Your carbohydrate intake is well balanced and within the healthy range.`]},weeklySummary:{overview:`Your nutritional intake this week has been generally balanced. Total calorie consumption fluctuated slightly but remained within the target range. Most macronutrient goals were met, with a slight variation in fat intake.`,highlights:`Analysis indicates consistent protein intake throughout the week. However, fat consumption exceeded recommended levels on the weekend. We suggest incorporating more vegetables to optimize micronutrient balance and offset calorie surplus.`,suggestions:[]}};const Ca={all:[`nutrition`],detail:e=>[...Ca.all,`detail`,e==null?void 0:e.startDate,e==null?void 0:e.endDate]},wa=async e=>_a(await xa((e==null?void 0:e.start_date)||new Date().toISOString().split(`T`)[0]),Sa);function Ta(e){return he({queryKey:Ca.detail(e),queryFn:async()=>await wa(e?{start_date:e.startDate,end_date:e.endDate}:void 0),staleTime:300*1e3,gcTime:600*1e3,placeholderData:e=>e})}function Ea(){return Dt({featureName:`Nutrition`,queryKeyFn:Ca.detail,fetchFn:e=>wa({start_date:e.startDate,end_date:e.endDate})})}function Da(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`}function Oa(e){return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,`0`)}/${String(e.getDate()).padStart(2,`0`)}`}function ka(){let{t:e}=R(),{theme:t}=Pt(),{prefetchPreviousWeeks:n}=Ea(),[r,i]=(0,V.useState)(()=>{let e=new Date,t=new Date;return t.setDate(e.getDate()-6),{start:t,end:e}});(0,V.useEffect)(()=>{n(r.end,3)},[r.end,n]);let a=(0,V.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(r.end);return t.setHours(0,0,0,0),t<e},[r.end]),o=(0,V.useMemo)(()=>({startDate:Da(r.start),endDate:Da(r.end)}),[r]),s=(0,V.useMemo)(()=>({start:Oa(r.start),end:Oa(r.end)}),[r]),c=()=>{i(e=>{let t=new Date(e.start),n=new Date(e.end);return t.setDate(t.getDate()-7),n.setDate(n.getDate()-7),{start:t,end:n}})},l=()=>{a&&i(e=>{let t=new Date(e.start),n=new Date(e.end);t.setDate(t.getDate()+7),n.setDate(n.getDate()+7);let r=new Date;return n>r&&(n.setTime(r.getTime()),t.setTime(r.getTime()),t.setDate(t.getDate()-6)),{start:t,end:n}})},{data:u,isLoading:d,isFetching:f,error:p}=Ta(o);return p?(0,U.jsx)(`div`,{className:`min-h-screen flex items-center justify-center p-4`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`p`,{className:`text-red-500 mb-2`,children:e(`common.error`)}),(0,U.jsx)(`p`,{className:`text-sm`,style:{color:t.textSecondary},children:String(p)})]})}):(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:t.background},children:(0,U.jsxs)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:[(0,U.jsx)(`div`,{className:`sticky top-0 z-20 py-3 px-4`,style:{backgroundColor:t.background},children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Re,{startDate:s.start,endDate:s.end,onPrevious:c,onNext:l,disableNext:!a})})}),(0,U.jsx)(`div`,{className:`px-4 space-y-4`,children:!u&&!d?(0,U.jsx)(`div`,{className:`text-center py-12`,children:(0,U.jsx)(`p`,{className:`text-slate-500`,children:e(`common.noData`)})}):(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(Zi,{data:u==null?void 0:u.weeklyManagement}),(0,U.jsx)($i,{data:u==null?void 0:u.metabolismTrend}),(0,U.jsx)(ea,{data:u==null?void 0:u.analysis}),(0,U.jsx)(ra,{data:u==null?void 0:u.nutrientStructure}),(0,U.jsx)(ia,{data:u==null?void 0:u.microElements}),(0,U.jsx)(la,{data:u==null?void 0:u.recipes}),(0,U.jsx)(ua,{data:u}),(0,U.jsx)(Ft,{})]})})]})})}var Aa=({percentage:e,color:t,size:n=80,strokeWidth:r=6,icon:i})=>{let a=(n-r)/2,o=2*Math.PI*a,s=o-e/100*o;return(0,U.jsxs)(`div`,{className:`relative`,style:{width:n,height:n},children:[(0,U.jsxs)(`svg`,{width:n,height:n,className:`transform -rotate-90`,children:[(0,U.jsx)(`circle`,{cx:n/2,cy:n/2,r:a,fill:`none`,stroke:`rgba(255,255,255,0.3)`,strokeWidth:r}),(0,U.jsx)(`circle`,{cx:n/2,cy:n/2,r:a,fill:`none`,stroke:`white`,strokeWidth:r,strokeLinecap:`round`,strokeDasharray:o,strokeDashoffset:s,style:{transition:`stroke-dashoffset 0.5s ease-in-out`}})]}),i&&(0,U.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:i})]})};const ja=(0,V.memo)(({score:e,maxScore:t=100,levelLabel:n,percentile:r,percentileMessage:i,aiTags:a=[],themeColor:o,gradientEndColor:s,tagBgColor:c,icon:l,title:u,className:d=``})=>{let{t:f}=R(),p=e===null?0:e/t*100,m=o||`#FB923D`,h=s||(m.startsWith(`rgb(`)?m.replace(`rgb(`,`rgba(`).replace(`)`,`, 0.8)`):m+`cc`);return(0,U.jsxs)(`div`,{className:`py-5 shadow-sm ${d}`,style:{background:`linear-gradient(135deg, ${m} 0%, ${h} 100%)`,borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsxs)(`div`,{className:`flex items-stretch gap-3 mb-4`,children:[(0,U.jsxs)(`div`,{className:`flex-1 flex flex-col justify-center`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 mb-2`,children:[(0,U.jsx)(se,{className:`w-4 h-4 text-white`}),(0,U.jsx)(`span`,{className:`text-white text-sm font-medium`,children:u})]}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-5xl font-bold text-white drop-shadow-sm`,children:e===null?`--`:e}),(0,U.jsxs)(`span`,{className:`text-white/80 text-lg`,children:[`/`,t]})]})]}),(0,U.jsx)(`div`,{className:`flex items-center justify-center`,children:(0,U.jsx)(Aa,{percentage:p,color:o,size:80,strokeWidth:6,icon:l})})]}),i&&(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 bg-white/20 backdrop-blur-md rounded-full px-3 py-2 mb-4`,children:[(0,U.jsx)(me,{className:`w-3.5 h-3.5 text-white`}),(0,U.jsx)(`span`,{className:`text-white text-xs font-medium`,children:i})]}),a.length>0&&(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 mb-2`,children:[(0,U.jsx)(se,{className:`w-3.5 h-3.5 text-white/90`}),(0,U.jsx)(`span`,{className:`text-white text-xs font-medium`,children:f(`daily.aiAnalysis`,`AI Analysis`)})]}),(0,U.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:a.map((e,t)=>(0,U.jsx)(`span`,{className:`px-3 py-1.5 rounded-full text-xs font-medium border border-white/40 bg-white/10`,style:{color:`white`},children:e},t))})]})]})}),Ma=(0,V.memo)(({insights:e,themeColor:t=`#FB923D`,className:n=``})=>{let{t:r}=R();return!e||e.length===0?null:(t.replace(`rgb(`,`rgba(`).replace(`)`,`, 0.8)`),(0,U.jsxs)(`div`,{className:`${n} py-6`,style:{backgroundColor:`#ffddb8ff`,borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsx)(`div`,{className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-full text-white text-sm font-medium mb-4`,style:{background:`#FE760C`},children:(0,U.jsx)(`span`,{children:r(`daily.aiHealthInsights`,`AI health related insights`)})}),(0,U.jsx)(`div`,{className:`space-y-3`,children:e.map((e,t)=>(0,U.jsx)(`div`,{className:`bg-white rounded-xl p-4 shadow-sm border border-slate-100`,children:(0,U.jsx)(`p`,{className:`text-sm text-slate-700 leading-relaxed`,children:e})},t))})]}))}),Na=(0,V.memo)(({suggestions:e,onAdd:t,className:n=``})=>{let{t:r}=R();if(!e||e.length===0)return null;let i=n=>{t?t(n):alert(`Added suggestion: ${e[n].title}`)};return(0,U.jsxs)(`div`,{className:`${n}`,children:[(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800 mb-4`,children:r(`daily.personalizedSuggestions`,`Personalized suggestions`)}),(0,U.jsx)(`div`,{className:`space-y-3`,children:e.map((e,t)=>(0,U.jsxs)(`div`,{className:`bg-white py-4 shadow-sm border border-slate-100 flex items-center gap-4`,style:{borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsx)(`div`,{className:`w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center flex-shrink-0 overflow-hidden`,children:(0,U.jsx)(`img`,{src:e.icon,alt:``,className:`w-8 h-8 object-contain`,onError:e=>{e.currentTarget.style.display=`none`}})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`h4`,{className:`text-sm font-medium text-slate-800 truncate`,children:e.title}),(0,U.jsx)(`p`,{className:`text-xs text-slate-500 truncate`,children:e.description})]}),(0,U.jsx)(`button`,{onClick:()=>i(t),className:`px-4 py-1.5 text-xs font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors flex-shrink-0`,children:r(`common.add`,`Add`)})]},t))})]})});function Pa(){return{score:88,level:`good`,levelLabel:`Good`,percentile:95,percentileMessage:`Exceeding 95% people with same age!`,aiTags:[`Strong self-regulation`,`Large mood swings`,`Afternoon Anxiety`],chart:[{hour:`08:00`,label:`8ç‚¹-9ç‚¹`,positive:60,neutral:30,negative:10},{hour:`10:00`,label:`10ç‚¹-11ç‚¹`,positive:50,neutral:40,negative:10},{hour:`12:00`,label:`12ç‚¹-13ç‚¹`,positive:40,neutral:60,negative:0},{hour:`14:00`,label:`14ç‚¹-15ç‚¹`,positive:30,neutral:50,negative:20},{hour:`16:00`,label:`16ç‚¹-17ç‚¹`,positive:20,neutral:65,negative:15},{hour:`18:00`,label:`18ç‚¹-19ç‚¹`,positive:35,neutral:50,negative:15},{hour:`20:00`,label:`20ç‚¹-21ç‚¹`,positive:45,neutral:45,negative:10},{hour:`22:00`,label:`22ç‚¹-23ç‚¹`,positive:55,neutral:40,negative:5}],distribution:{mainEmotion:`HAPPY`,mainEmotionLabel:`Happy`,items:[{type:`HAPPY`,label:`Happy`,count:42,percent:42},{type:`CALM`,label:`Calm`,count:30,percent:30},{type:`SURPRISED`,label:`Surprise`,count:10,percent:10},{type:`SAD`,label:`Sad`,count:8,percent:8},{type:`ANGRY`,label:`Angry`,count:5,percent:5},{type:`FEARFUL`,label:`Fear`,count:2,percent:2},{type:`DISGUSTED`,label:`Hate`,count:3,percent:3}]},aiInsights:[`The average blood oxygen saturation this week was 94.9%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`4-6-4 breathing method`,description:`Relieve current anxiety and lower heart rate.`}]}}var Fa=`emotion_daily_demo_mode`;function Ia(){try{return localStorage.getItem(Fa)===`true`}catch(e){return!1}}function La(){try{localStorage.setItem(Fa,`true`),console.log(`âœ… [Emotion Daily Demo Mode] Enabled`)}catch(e){console.error(`[Demo Mode] Failed to enable:`,e)}}function Ra(){try{localStorage.setItem(Fa,`false`),console.log(`âœ… [Emotion Daily Demo Mode] Disabled`)}catch(e){console.error(`[Demo Mode] Failed to disable:`,e)}}function za(){let e=!Ia();return e?La():Ra(),e}const Ba=e=>{let t=e.toUpperCase();return{HAPPY:Y.happy,CALM:Y.calm,NEUTRAL:Y.neutral,SURPRISED:Y.surprised,SAD:Y.sad,ANGRY:Y.angry,FEARFUL:Y.fearful,DISGUSTED:Y.disgusted}[t]||`#94a3b8`},Va=e=>e.map(e=>({type:e.type,label:e.label,percent:e.percent,count:e.count,color:Ba(e.type)})),Ha=(0,V.memo)(({mainEmotion:e,mainEmotionLabel:t,items:n,className:r=``,isLoading:i=!1})=>{let{t:a}=R(),o=(0,V.useMemo)(()=>Va(n),[n]),s=(0,U.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`});return(0,U.jsx)(tt,{title:a(`daily.emotionDistribution`,`Emotion distribution`),iconElement:s,themeColor:Y.primary,items:o,donutThickness:12,centerValue:t,centerLabel:a(`daily.asMain`,`as main`),centerValueColor:Ba(e),itemLayout:`grid-2col`,pieChartSize:`medium`,showInfo:!0,className:r,isLoading:i})});var Ua=e=>{let[t]=e.split(`:`).map(Number);return t},Wa=(0,V.memo)(({active:e,payload:t,layers:n})=>{var r;if(!e||!t||t.length===0)return null;let i=(r=t[0])==null?void 0:r.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:i.label||i.hour}),n.map(e=>(0,U.jsxs)(`p`,{style:{color:e.color},children:[e.label,`: `,i[e.dataKey],`%`]},e.dataKey))]}):null}),Ga=(0,V.memo)(e=>{let{fill:t,x:n,y:r,width:i,height:a,payload:o,dataKey:s,layers:l,barRadius:u}=e,d=null;for(let e=l.length-1;e>=0;e--){let t=l[e].dataKey;if(o[t]&&o[t]>0){d=t;break}}let f=s===d?u:[0,0,0,0];return(0,U.jsx)(c,{...e,radius:f})});Ga.displayName=`RoundedTopBar`;const Ka=(0,V.memo)(({data:e,layers:t,height:n=200,yAxisDomain:r=[0,100],showLegend:i=!0,renderTooltip:a,maxBarSize:o=20,barRadius:s=[4,4,0,0],barGap:c,barCategoryGap:l,className:f=``})=>{let p=qe(),h=Je(),g=(0,V.useMemo)(()=>e.map(e=>({...e,position:Ua(e.hour)})),[e]);return(0,U.jsxs)(`div`,{className:`transform-gpu will-change-transform ${f}`,children:[i&&(0,U.jsx)(`div`,{className:`flex items-center gap-4 mb-3 flex-wrap`,children:t.map(e=>(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-sm`,style:{backgroundColor:e.color}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:e.label})]},e.dataKey))}),(0,U.jsx)(`div`,{ref:h,style:{height:n},className:`-mx-2`,children:(0,U.jsx)(T,{width:`100%`,height:`100%`,children:(0,U.jsxs)(C,{data:g,margin:{top:10,right:10,left:-15,bottom:0},barGap:c,barCategoryGap:l,children:[(0,U.jsx)(d,{strokeDasharray:`3 3`,stroke:`#e2e8f0`,vertical:!1}),(0,U.jsx)(S,{dataKey:`hour`,type:`category`,tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,ticks:[`00:00`,`06:00`,`12:00`,`18:00`,`24:00`]}),(0,U.jsx)(y,{tick:{fontSize:11,fill:`#94a3b8`},tickLine:!1,axisLine:!1,domain:r,tickFormatter:e=>`${e}`}),(0,U.jsx)(m,{content:a||(e=>(0,U.jsx)(Wa,{...e,layers:t})),wrapperStyle:{outline:`none`,pointerEvents:`none`},allowEscapeViewBox:{x:!1,y:!1}}),t.map(e=>(0,U.jsx)(u,{dataKey:e.dataKey,stackId:`stack`,fill:e.color,maxBarSize:o,shape:(0,U.jsx)(Ga,{layers:t,barRadius:s}),...p},e.dataKey))]})})})]})}),qa=(0,V.memo)(({data:e,className:t=``})=>{let{t:n}=R(),r=[{dataKey:`positive`,color:Y.positive,label:n(`page.emotion.positive`,`Positive`)},{dataKey:`neutral`,color:Y.neutral,label:n(`page.emotion.neutral`,`Neutral`)},{dataKey:`negative`,color:Y.negative,label:n(`page.emotion.negative`,`Negative`)}];return(0,U.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-orange-400`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`daily.emotionProportion`,`Emotional proportion analysis`)})]}),(0,U.jsx)(Ka,{data:e,layers:r,height:200,yAxisDomain:[0,100],showLegend:!0,maxBarSize:10})]})});function Ja(){let{t:e}=R(),[t,n]=(0,V.useState)(()=>Pa()),[r,i]=(0,V.useState)(Ia());return(0,V.useEffect)(()=>{n(Pa())},[r]),t?(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,U.jsx)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:(0,U.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Demo Mode`}),(0,U.jsx)(`button`,{onClick:()=>{i(za())},className:`w-10 h-5 rounded-full transition-colors ${r?`bg-orange-400`:`bg-slate-300`}`,children:(0,U.jsx)(`span`,{className:`block w-4 h-4 bg-white rounded-full shadow transform transition-transform ${r?`translate-x-5`:`translate-x-0.5`}`})})]}),(0,U.jsx)(ja,{score:t.score,maxScore:100,levelLabel:t.levelLabel,percentile:t.percentile,percentileMessage:t.percentileMessage,aiTags:t.aiTags,themeColor:`#FFD12D`,gradientEndColor:`#FF9D03`,title:e(`daily.todayEmotionScore`,`Today's emotion score`),icon:(0,U.jsx)(le,{className:`w-6 h-6 text-white`})}),(0,U.jsx)(qa,{data:t.chart}),(0,U.jsx)(Ha,{mainEmotion:t.distribution.mainEmotion,mainEmotionLabel:t.distribution.mainEmotionLabel,items:t.distribution.items}),t.aiInsights.length>0&&(0,U.jsx)(Ma,{insights:t.aiInsights,themeColor:Y.primary}),t.suggestions.length>0&&(0,U.jsx)(Na,{suggestions:t.suggestions}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`)})]})})}):null}function Ya(){return{score:88,level:`fair`,levelLabel:`Fair`,percentile:85,percentileMessage:`Your rating is lower than 85% of users`,aiTags:[`Excellent deep sleep`,`Time to bed late`,`Normal fragmented sleep`],structureChart:{totalDuration:`7h 11min`,totalMinutes:431,deepDuration:`4h 8min`,deepMinutes:248,segments:[{stage:`light`,start:`23:30`,end:`00:30`},{stage:`deep`,start:`00:30`,end:`02:00`},{stage:`light`,start:`02:00`,end:`03:00`},{stage:`rem`,start:`03:00`,end:`04:00`},{stage:`deep`,start:`04:00`,end:`05:30`},{stage:`light`,start:`05:30`,end:`06:30`},{stage:`awake`,start:`06:30`,end:`06:45`},{stage:`light`,start:`06:45`,end:`07:30`}]},structureAnalysis:[{type:`awake`,label:`Awake`,percent:4,duration:`2 times`,status:`Good`},{type:`rem`,label:`REM`,percent:19,duration:`0 times`,status:`Good`},{type:`light`,label:`Light sleep`,percent:62,duration:`0 times`,status:`Good`},{type:`deep`,label:`Deep sleep`,percent:4,duration:`0 times`,status:`Good`}],qualityIndicators:{bedTime:{value:`20:55`,reference:`22:00`,label:`Bed rest time`},sleepTime:{value:`23:42`,reference:`23:00`,label:`Time to fall asleep`},wakeTime:{value:`07:15`,reference:`7:00`,label:`Post-awake time`},getUpTime:{value:`09:03`,reference:`8:00`,label:`Wake-up time`},sleepLatency:{value:`45`,reference:`<30min`,label:`Falling asleep takes time`,unit:`min`},sleepEfficiency:{value:`85`,reference:`>85%`,label:`Sleep efficiency`,unit:`%`}},aiInsights:[`The average blood oxygen saturation this week was 94.0%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`Soaking feet before bed`,description:`Relieve current anxiety and lower heart rate.`},{icon:`/images/daily_report/2.webp`,title:`Today's nap suggestion`,description:`Relieve current anxiety and lower heart rate.`}]}}var Xa=`sleep_daily_demo_mode`;function Za(){try{return localStorage.getItem(Xa)===`true`}catch(e){return!1}}function Qa(){try{localStorage.setItem(Xa,`true`),console.log(`âœ… [Sleep Daily Demo Mode] Enabled`)}catch(e){console.error(`[Demo Mode] Failed:`,e)}}function $a(){try{localStorage.setItem(Xa,`false`),console.log(`âœ… [Sleep Daily Demo Mode] Disabled`)}catch(e){console.error(`[Demo Mode] Failed:`,e)}}function eo(){let e=!Za();return e?Qa():$a(),e}var to=e=>Ve[e.toLowerCase()]||`#94a3b8`;const no=e=>e.map(e=>({type:e.type,label:e.label,percent:e.percent,color:to(e.type),duration:e.duration,status:e.status})),ro=(0,V.memo)(({items:e,totalMinutes:t,className:n=``,isLoading:r=!1})=>{let{t:i}=R(),a=(0,V.useMemo)(()=>no(e),[e]),o=t?Math.floor(t/60):`--`,s=(0,U.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`});return(0,U.jsx)(tt,{title:i(`daily.sleepDistribution`,`Sleep distribution`),iconElement:s,themeColor:W.sleep,items:a,centerValue:o,centerLabel:i(`daily.totalHours`,`Total hours`),centerValueColor:`#1e293b`,itemLayout:`with-duration`,pieChartSize:`medium`,showInfo:!0,className:n,isLoading:r})});var io=({label:e,value:t,unit:n,reference:r,t:i})=>(0,U.jsxs)(`div`,{className:`bg-slate-50 rounded-xl p-3`,children:[(0,U.jsx)(`div`,{className:`text-xs text-slate-500 mb-1`,children:e}),(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1`,children:[(0,U.jsx)(`span`,{className:`text-xl font-bold text-slate-800`,children:t==null?`--`:t}),n&&(0,U.jsx)(`span`,{className:`text-sm text-slate-500`,children:n})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1 mt-1`,children:[(0,U.jsx)(be,{className:`w-3 h-3 text-slate-400`}),(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[i(`daily.reference`,`Reference`),`: `,r]})]})]});const ao=(0,V.memo)(({indicators:e,className:t=``})=>{let{t:n}=R();return(0,U.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${t}`,style:{borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:n(`daily.sleepQuality`,`Sleep quality indicators`)}),(0,U.jsx)(be,{className:`w-4 h-4 text-slate-400 cursor-pointer`})]}),(0,U.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,U.jsx)(io,{label:e.bedTime.label,value:e.bedTime.value,reference:e.bedTime.reference,t:n}),(0,U.jsx)(io,{label:e.sleepTime.label,value:e.sleepTime.value,reference:e.sleepTime.reference,t:n}),(0,U.jsx)(io,{label:e.wakeTime.label,value:e.wakeTime.value,reference:e.wakeTime.reference,t:n}),(0,U.jsx)(io,{label:e.getUpTime.label,value:e.getUpTime.value,reference:e.getUpTime.reference,t:n}),(0,U.jsx)(io,{label:e.sleepLatency.label,value:e.sleepLatency.value,unit:e.sleepLatency.unit,reference:e.sleepLatency.reference,t:n}),(0,U.jsx)(io,{label:e.sleepEfficiency.label,value:e.sleepEfficiency.value,unit:e.sleepEfficiency.unit,reference:e.sleepEfficiency.reference,t:n})]})]})});var oo=E(),so={deep:`#6366f1`,light:`#a5b4fc`,rem:`#e0e7ff`,awake:`#f97316`},$={paddingTop:20,paddingBottom:30,paddingLeft:60,paddingRight:20,blockHeight:40,baseRadius:12,lineWidth:6,bufferLong:5,bufferShort:1},co=[{key:`awake`,label:`Awake`,order:0},{key:`rem`,label:`REM`,order:1},{key:`light`,label:`Light`,order:2},{key:`deep`,label:`Deep`,order:3}],lo=(e,t=new Date(`2024-01-01`))=>{let[n,r]=e.split(`:`).map(Number),i=new Date(t);return i.setHours(n,r,0,0),n<12&&i.setDate(i.getDate()+1),i.getTime()},uo=(e,t,n,r,i)=>{let a=$.baseRadius,o={tl:a,tr:a,br:a,bl:a};return r&&t!==null&&(t<e?o.tl=0:t>e&&(o.bl=0)),i&&n!==null&&(n<e?o.tr=0:n>e&&(o.br=0)),o};const fo=({data:e,height:t=320,colors:n=Ve||so,className:r=``})=>{let i=(0,V.useRef)(null),a=(0,V.useRef)(null),[o,s]=(0,V.useState)({x:0,y:0,visible:!1,segment:null,duration:0}),[c,l]=(0,V.useState)({width:0,height:0}),u=(0,V.useMemo)(()=>{if(!e||e.length===0)return[];let t=new Date(`2024-01-01`),n=[...e].sort((e,n)=>lo(e.start,t)-lo(n.start,t));return n.map((e,r)=>{var i,a;let o=lo(e.start,t),s=lo(e.end,t),c=co.find(t=>t.key===e.stage),l=r>0?n[r-1]:null,u=r<n.length-1?n[r+1]:null,d=l?co.find(e=>e.key===l.stage):null,f=u?co.find(e=>e.key===u.stage):null,p=!!(l&&d&&l.stage!==e.stage&&lo(l.end,t)===o),m=!!(u&&f&&u.stage!==e.stage&&lo(u.start,t)===s),h=uo(c.order,(i=d==null?void 0:d.order)==null?null:i,(a=f==null?void 0:f.order)==null?null:a,p,m);return{...e,startTime:o,endTime:s,duration:Math.round((s-o)/1e3/60),stageInfo:c,prevStageInfo:d,prevConnected:p,nextConnected:m,radii:h}})},[e]),d=(0,V.useCallback)(()=>{let e=i.current;if(!e||!u.length)return;let t=e.getContext(`2d`);if(!t)return;let r=window.devicePixelRatio||1,{width:a,height:o}=c;e.width=a*r,e.height=o*r,t.scale(r,r),t.clearRect(0,0,a,o);let s=a-$.paddingLeft-$.paddingRight,l=u[0].startTime,d=u[u.length-1].endTime,f=d-l,p=e=>$.paddingLeft+(e-l)/f*s,m=(o-$.paddingTop-$.paddingBottom)/co.length,h=e=>$.paddingTop+e*m+m/2;t.font=`12px sans-serif`,t.textBaseline=`middle`,t.beginPath(),t.strokeStyle=`#e2e8f0`,t.setLineDash([4,4]),t.lineWidth=1;for(let e=0;e<=co.length;e++){let n=$.paddingTop+e*m;t.moveTo($.paddingLeft,n),t.lineTo(a-$.paddingRight,n)}t.stroke(),t.setLineDash([]),co.forEach(e=>{let n=h(e.order);t.fillStyle=`#64748b`,t.textAlign=`right`,t.fillText(e.label,$.paddingLeft-15,n)}),u.forEach(e=>{if(e.prevConnected&&e.prevStageInfo){let r=p(e.startTime),i=h(e.stageInfo.order),a=h(e.prevStageInfo.order),o=n[e.stage]||n.light,s=n[e.prevStageInfo.key]||n.light,c=Math.abs(i-a),l=$.blockHeight/2;if(c>1){let n=l+(Math.abs(e.stageInfo.order-e.prevStageInfo.order)===1?$.bufferShort:$.bufferLong);n*2>c&&(n=c*.45);let u=i>a,d=Math.min(a,i),f=Math.max(a,i),p=u?s:o,m=u?o:s,h=t.createLinearGradient(0,d,0,f),g=n/c,_=1-g;h.addColorStop(0,p),h.addColorStop(g,p),h.addColorStop(_,m),h.addColorStop(1,m),t.fillStyle=h,t.fillRect(r-$.lineWidth/2,d,$.lineWidth,f-d)}}}),u.forEach(e=>{let r=p(e.startTime),i=p(e.endTime),a=h(e.stageInfo.order),o=Math.max(i-r,1),s=r,c=o,l=$.lineWidth/2;e.prevConnected&&(e.radii.tl===0||e.radii.bl===0)&&(s-=l,c+=l),e.nextConnected&&(e.radii.tr===0||e.radii.br===0)&&(c+=l);let u=a-$.blockHeight/2;t.fillStyle=n[e.stage]||n.light,t.beginPath();let{tl:d,tr:f,br:m,bl:g}=e.radii,_=s,v=u,y=c,b=$.blockHeight;t.moveTo(_+d,v),t.lineTo(_+y-f,v),t.quadraticCurveTo(_+y,v,_+y,v+f),t.lineTo(_+y,v+b-m),t.quadraticCurveTo(_+y,v+b,_+y-m,v+b),t.lineTo(_+g,v+b),t.quadraticCurveTo(_,v+b,_,v+b-g),t.lineTo(_,v+d),t.quadraticCurveTo(_,v,_+d,v),t.closePath(),t.fill()});let g=new Date(l).getHours(),_=new Date(d).getHours()+(new Date(d).getDate()===new Date(l).getDate()?0:24);t.textAlign=`center`,t.fillStyle=`#94a3b8`,t.font=`11px sans-serif`;for(let e=g;e<=_;e++){let n=new Date(l);n.setHours(e,0,0,0),n.getTime()<l&&n.setDate(n.getDate()+1);let r=p(n.getTime());if(r>=$.paddingLeft&&r<=a-$.paddingRight){let n=`${e%24}`.padStart(2,`0`)+`:00`;t.fillText(n,r,o-10),t.beginPath(),t.moveTo(r,o-25),t.lineTo(r,o-20),t.stroke()}}},[c,n,u]);return(0,V.useEffect)(()=>{let e=new ResizeObserver(e=>{let{width:t,height:n}=e[0].contentRect;l({width:t,height:n})});return a.current&&e.observe(a.current),()=>e.disconnect()},[]),(0,V.useEffect)(()=>{d()},[d]),(0,V.useEffect)(()=>{let e=()=>{s(e=>({...e,visible:!1}))};return window.addEventListener(`scroll`,e,!0),()=>window.removeEventListener(`scroll`,e,!0)},[]),(0,U.jsxs)(`div`,{ref:a,className:`relative w-full transform-gpu will-change-transform ${r}`,style:{height:`${t}px`},children:[(0,U.jsx)(`canvas`,{ref:i,className:`w-full h-full block`,onMouseMove:e=>{let t=i.current.getBoundingClientRect(),n=e.clientX-t.left,{width:r}=c,a=r-$.paddingLeft-$.paddingRight;if(a<=0||!u.length)return;if(n<$.paddingLeft||n>r-$.paddingRight){s(e=>({...e,visible:!1}));return}let o=u[0].startTime,l=u[u.length-1].endTime-o,d=o+(n-$.paddingLeft)/a*l,f=u.find(e=>d>=e.startTime&&d<=e.endTime);s(f?{x:e.clientX,y:e.clientY,visible:!0,segment:f,duration:f.duration}:e=>({...e,visible:!1}))},onMouseLeave:()=>s(e=>({...e,visible:!1}))}),typeof document<`u`&&(0,oo.createPortal)((()=>{var e;let{x:t,y:r,visible:i,segment:a,duration:s}=o;if(!a)return null;let c=typeof window<`u`?window.innerWidth:1e3,l=typeof window<`u`?window.innerHeight:800,u=t>c/2,d=r>l/2;return(0,U.jsxs)(`div`,{className:`fixed z-50 pointer-events-none bg-white/95 backdrop-blur-sm border border-slate-200 shadow-xl rounded-lg p-3 text-sm transition-all duration-200 ease-out ${i?`opacity-100 scale-100`:`opacity-0 scale-95`}`,style:{left:0,top:0,transform:`translate3d(${t}px, ${r}px, 0) translate(${u?-15:15}px, ${d?-15:15}px) translate(${u?`-100%`:`0%`}, ${d?`-100%`:`0%`})`},children:[(0,U.jsx)(`div`,{className:`font-semibold text-slate-800 mb-1`,children:(e=co.find(e=>e.key===a.stage))==null?void 0:e.label}),(0,U.jsxs)(`div`,{className:`text-slate-500 text-xs tabular-nums`,children:[a.start,` - `,a.end]}),(0,U.jsxs)(`div`,{className:`text-slate-500 text-xs mt-1`,children:[`Duration: `,s,` min`]}),(0,U.jsx)(`div`,{className:`absolute left-0 top-3 w-1 h-4 rounded-r`,style:{backgroundColor:n[a.stage]}})]})})(),document.body)]})},po=(0,V.memo)(({totalDuration:e,deepDuration:t,segments:n,className:r=``})=>{let{t:i}=R();return(0,U.jsxs)(`div`,{className:`bg-white py-5 shadow-sm ${r}`,style:{borderRadius:q.cardBorderRadius,paddingLeft:q.cardPaddingX,paddingRight:q.cardPaddingX},children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4`,children:[(0,U.jsx)(`span`,{className:`w-1.5 h-4 rounded-full bg-violet-400`}),(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800`,children:i(`daily.sleepStructure`,`Sleep structure diagram`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-8 mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`div`,{className:`text-2xl font-bold text-slate-800`,children:e}),(0,U.jsx)(`div`,{className:`text-xs text-slate-400`,children:i(`daily.totalDuration`,`Total sleep duration`)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`div`,{className:`text-2xl font-bold text-violet-500`,children:t}),(0,U.jsx)(`div`,{className:`text-xs text-slate-400`,children:i(`daily.deepSleep`,`Deep sleep`)})]})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:Ve.deep}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.deep`,`Deep sleep`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:Ve.light}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.light`,`Light sleep`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:Ve.rem}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.rem`,`REM`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded`,style:{backgroundColor:Ve.awake}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:i(`sleep.awake`,`Awake`)})]})]}),(0,U.jsx)(fo,{data:n,height:240})]})});function mo(){let{t:e}=R(),[t,n]=(0,V.useState)(()=>Ya()),[r,i]=(0,V.useState)(Za());return(0,V.useEffect)(()=>{n(Ya())},[r]),t?(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,U.jsx)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:(0,U.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Demo Mode`}),(0,U.jsx)(`button`,{onClick:()=>{i(eo())},className:`w-10 h-5 rounded-full transition-colors ${r?`bg-violet-400`:`bg-slate-300`}`,children:(0,U.jsx)(`span`,{className:`block w-4 h-4 bg-white rounded-full shadow transform transition-transform ${r?`translate-x-5`:`translate-x-0.5`}`})})]}),(0,U.jsx)(ja,{score:t.score,maxScore:200,levelLabel:t.levelLabel,percentile:t.percentile,percentileMessage:t.percentileMessage,aiTags:t.aiTags,themeColor:`#A37EFE`,title:e(`daily.todayScore`,`Today's score`),icon:(0,U.jsx)(le,{className:`w-6 h-6 text-white`})}),(0,U.jsx)(po,{totalDuration:t.structureChart.totalDuration,deepDuration:t.structureChart.deepDuration,segments:t.structureChart.segments}),(0,U.jsx)(ro,{items:t.structureAnalysis,totalMinutes:t.structureChart.totalMinutes}),(0,U.jsx)(ao,{indicators:t.qualityIndicators}),t.aiInsights.length>0&&(0,U.jsx)(Ma,{insights:t.aiInsights,themeColor:W.sleep}),t.suggestions.length>0&&(0,U.jsx)(Na,{suggestions:t.suggestions}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only.`)})]})})}):null}function ho(){return{score:82,level:`good`,percentile:99,percentileMessage:`Exceeding 99% people with same age!`,aiTags:[`Physical health`,`Needs attention`,`Maintain schedule`],indicators:{bloodPressure:{latest:{systolic:136,diastolic:95},avg:{systolic:126,diastolic:76},max:{systolic:140,diastolic:98},min:{systolic:118,diastolic:70},reference:{systolic:`90-129`,diastolic:`60-89`},status:`high_normal`,chart:[{time:`01:00`,systolic:136,diastolic:95},{time:`08:00`,systolic:125,diastolic:78},{time:`14:00`,systolic:130,diastolic:82},{time:`20:00`,systolic:128,diastolic:80}]},heartRate:{latest:84,avg:73,max:111,min:63,reference:`60-100`,status:`normal`,chart:[{time:`01:00`,value:84},{time:`08:00`,value:72},{time:`12:00`,value:88},{time:`18:00`,value:75}]},bloodGlucose:{latest:8.5,avg:5.4,max:4.6,min:7.8,reference:`3.9-6.1`,status:`high`,chart:[{time:`08:00`,value:5.2},{time:`12:00`,value:7.8},{time:`18:00`,value:6.1}]},bloodOxygen:{latest:94,avg:96,max:99,min:96,reference:`93-100`,status:`normal`,chart:[{time:`01:00`,value:98},{time:`08:00`,value:97},{time:`14:00`,value:96},{time:`20:00`,value:97}]}},aiInsights:[`The average blood oxygen saturation this week was 94.9%, the same as last week.`,`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`],suggestions:[{icon:`/images/daily_report/1.webp`,title:`Deep breath for 5 minutes`,description:`Relieve current anxiety and lower heart rate.`},{icon:`/images/daily_report/2.webp`,title:`Today's nap suggestion`,description:`Rest and recover with a short nap.`},{icon:`/images/daily_report/3.webp`,title:`Drink water`,description:`The recent water intake is lower than usual.`}]}}var go=`healthy_daily_demo_mode`;function _o(){try{return localStorage.getItem(go)===`true`}catch(e){return console.warn(`[Demo Mode] Failed to read from localStorage:`,e),!1}}function vo(){try{localStorage.setItem(go,`true`),console.log(`âœ… [Healthy Daily Demo Mode] Enabled - Using dummy data`)}catch(e){console.error(`[Demo Mode] Failed to enable:`,e)}}function yo(){try{localStorage.setItem(go,`false`),console.log(`âœ… [Healthy Daily Demo Mode] Disabled - Using backend data`)}catch(e){console.error(`[Demo Mode] Failed to disable:`,e)}}function bo(){let e=!_o();return e?vo():yo(),e}var xo=(0,V.memo)(({active:e,payload:t})=>{var n;if(!e||!t||t.length===0)return null;let r=(n=t[0])==null?void 0:n.payload;return r?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:r.time}),(0,U.jsxs)(`p`,{className:`text-orange-300`,children:[`SBP: `,r.systolic]}),(0,U.jsxs)(`p`,{className:`text-emerald-300`,children:[`DBP: `,r.diastolic]})]}):null});xo.displayName=`BPCustomTooltip`;const So=(0,V.memo)(({latest:e,avg:t,max:n,min:r,reference:i,status:a,chart:o,className:s=``})=>{let{t:c}=R(),l=W.bp,u=`#10B981`,d=(0,V.useMemo)(()=>!o||o.length===0?[{time:`00:00`,systolic:120,diastolic:80},{time:`04:00`,systolic:118,diastolic:78},{time:`08:00`,systolic:125,diastolic:82},{time:`12:00`,systolic:130,diastolic:85},{time:`16:00`,systolic:128,diastolic:84},{time:`20:00`,systolic:122,diastolic:80}]:o.map(e=>{var t,n;return{time:e.time,systolic:(t=e.systolic)==null?0:t,diastolic:(n=e.diastolic)==null?0:n}}),[o]),f=()=>{if(!e||!t)return null;let n=e.systolic-t.systolic;if(n===0)return null;let r=n>0?L:A;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:n>0?J.trend.up:J.trend.down},children:[(0,U.jsx)(r,{className:`w-3 h-3`}),Math.abs(n)]})},p=`${i.systolic}/${i.diastolic}`;return(0,U.jsxs)(X,{className:s,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:l}}),(0,U.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.bloodPressure`,`Blood pressure`)}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:`mmHg`})]}),(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[c(`daily.standard`,`Standard`),`: `,p]})]}),(0,U.jsxs)(`div`,{className:`flex gap-6 mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:l},children:e?`${e.systolic}/${e.diastolic}`:`--`}),f()]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.newestValue`,`Newest value`)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`text-2xl font-semibold text-slate-700`,children:t?`${t.systolic}/${t.diastolic}`:`--`}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.average`,`Average`)})]})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-4 mb-2`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:l}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:`SBP`})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{className:`w-3 h-3 rounded-full`,style:{backgroundColor:u}}),(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:`DBP`})]})]}),(0,U.jsx)(Ze,{data:d,lines:[{dataKey:`systolic`,color:l,label:`SBP`,showArea:!0,gradientId:`bpSbpGradient`,legendShape:`circle`},{dataKey:`diastolic`,color:u,label:`DBP`,showArea:!0,gradientId:`bpDbpGradient`,legendShape:`circle`}],xAxisKey:`time`,yAxisDomain:[50,180],renderTooltip:e=>(0,U.jsx)(xo,{...e}),height:180,showLegend:!1})]})});var Co=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:i.time}),(0,U.jsxs)(`p`,{className:`text-red-300`,children:[r(`vitals.heartRate`,`Heart Rate`),`: `,i.value,` `,r(`units.bpm`,`bpm`)]})]}):null});Co.displayName=`HRCustomTooltip`;const wo=(0,V.memo)(({latest:e,avg:t,max:n,min:r,reference:i,status:a,chart:o,className:s=``})=>{let{t:c}=R(),l=W.heartRate,u=(0,V.useMemo)(()=>!o||o.length===0?[{time:`00:00`,value:65,range:[60,70]},{time:`04:00`,value:62,range:[58,68]},{time:`08:00`,value:75,range:[70,85]},{time:`12:00`,value:82,range:[75,90]},{time:`16:00`,value:78,range:[72,88]},{time:`20:00`,value:70,range:[65,78]}]:o.map(e=>{var t,n,r;return{time:e.time,value:(t=e.value)==null?0:t,range:[Math.max(0,((n=e.value)==null?70:n)-10),((r=e.value)==null?70:r)+10]}}),[o]);return(0,U.jsxs)(X,{className:s,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:l}}),(0,U.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.heartRate`,`Heart rate`)}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:`bpm`})]}),(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[c(`daily.standard`,`Standard`),`: `,i]})]}),(0,U.jsxs)(`div`,{className:`flex gap-6 mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:l},children:e==null?`--`:e}),(()=>{if(e===null||t===null)return null;let n=e-t;if(n===0)return null;let r=n>0?L:A;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:n>0?J.trend.up:J.trend.down},children:[(0,U.jsx)(r,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.newestValue`,`Newest value`)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`text-2xl font-semibold text-slate-700`,children:t==null?`--`:t}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.average`,`Average`)})]})]}),(0,U.jsx)(Ze,{data:u,lines:[{dataKey:`value`,areaDataKey:`range`,color:l,label:c(`vitals.heartRate`,`Heart Rate`),showArea:!0,gradientId:`hrGradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:[40,120],renderTooltip:e=>(0,U.jsx)(Co,{...e}),height:180,showLegend:!1})]})});var To=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:i.time}),(0,U.jsxs)(`p`,{className:`text-amber-300`,children:[r(`vitals.bloodGlucose`,`Blood Glucose`),`: `,i.value.toFixed(1),` `,r(`units.mmolL`,`mmol/L`)]})]}):null});To.displayName=`GlucoseCustomTooltip`;const Eo=(0,V.memo)(({latest:e,avg:t,max:n,min:r,reference:i,status:a,chart:o,className:s=``})=>{let{t:c}=R(),l=W.glucose,u=(0,V.useMemo)(()=>!o||o.length===0?[{time:`06:00`,value:5.2,range:[4.5,6]},{time:`08:00`,value:7.5,range:[6.5,8.5]},{time:`10:00`,value:6.2,range:[5.5,7]},{time:`12:00`,value:7.8,range:[7,8.5]},{time:`14:00`,value:6.5,range:[5.8,7.2]},{time:`18:00`,value:5.8,range:[5,6.5]}]:o.map(e=>{var t,n,r;return{time:e.time,value:(t=e.value)==null?0:t,range:[Math.max(0,((n=e.value)==null?5.5:n)-1),((r=e.value)==null?5.5:r)+1]}}),[o]);return(0,U.jsxs)(X,{className:s,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:l}}),(0,U.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.bloodGlucose`,`POCT`)}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:`mmol/L`})]}),(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[c(`daily.standard`,`Standard`),`: `,i]})]}),(0,U.jsxs)(`div`,{className:`flex gap-6 mb-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:l},children:e===null?`--`:e.toFixed(1)}),(()=>{if(e===null||t===null)return null;let n=e-t;return Math.abs(n)<.1?null:(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:n>0?`#EF4444`:`#10B981`},children:[(0,U.jsx)(n>0?L:A,{className:`w-3 h-3`}),Math.abs(n).toFixed(1)]})})()]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.newestValue`,`Newest value`)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`text-2xl font-semibold text-slate-700`,children:t===null?`--`:t.toFixed(1)}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.average`,`Average`)})]})]}),(0,U.jsx)(Ze,{data:u,lines:[{dataKey:`value`,areaDataKey:`range`,color:l,label:c(`vitals.bloodGlucose`,`Blood Glucose`),showArea:!0,gradientId:`glucoseGradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:[3,12],renderTooltip:e=>(0,U.jsx)(To,{...e}),height:180,showLegend:!1})]})});var Do=(0,V.memo)(({active:e,payload:t})=>{var n;let{t:r}=R();if(!e||!t||t.length===0)return null;let i=(n=t[0])==null?void 0:n.payload;return i?(0,U.jsxs)(`div`,{className:`bg-slate-700 text-white px-3 py-2 rounded-lg text-sm shadow-lg`,children:[(0,U.jsx)(`p`,{className:`font-medium mb-1`,children:i.time}),(0,U.jsxs)(`p`,{className:`text-cyan-300`,children:[`SpO2: `,i.value,`%`]})]}):null});Do.displayName=`SpO2CustomTooltip`;const Oo=(0,V.memo)(({latest:e,avg:t,max:n,min:r,reference:i,status:a,chart:o,className:s=``})=>{let{t:c}=R(),l=W.spo2,u=(0,V.useMemo)(()=>!o||o.length===0?[{time:`00:00`,value:97,range:[95,98]},{time:`04:00`,value:96,range:[94,98]},{time:`08:00`,value:98,range:[96,99]},{time:`12:00`,value:97,range:[95,99]},{time:`16:00`,value:98,range:[96,99]},{time:`20:00`,value:97,range:[95,98]}]:o.map(e=>{var t,n,r;return{time:e.time,value:(t=e.value)==null?0:t,range:[Math.max(90,((n=e.value)==null?97:n)-2),Math.min(100,((r=e.value)==null?97:r)+2)]}}),[o]);return(0,U.jsxs)(X,{className:s,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(z,{className:`w-5 h-5`,style:{color:l}}),(0,U.jsx)(`span`,{className:`text-base font-semibold text-slate-800`,children:c(`vitals.spo2`,`SpO2`)}),(0,U.jsx)(`span`,{className:`text-xs text-slate-400`,children:`%`})]}),(0,U.jsxs)(`span`,{className:`text-xs text-slate-400`,children:[c(`daily.standard`,`Standard`),`: `,i]})]}),(0,U.jsx)(`div`,{className:`bg-slate-50 rounded-xl px-4 py-3 mb-4`,children:(0,U.jsxs)(`div`,{className:`flex gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-baseline gap-1.5`,children:[(0,U.jsx)(`span`,{className:`text-3xl font-bold`,style:{color:l},children:e==null?`--`:e}),(()=>{if(e===null||t===null)return null;let n=e-t;if(n===0)return null;let r=n>0?L:A;return(0,U.jsxs)(`span`,{className:`flex items-center gap-0.5 text-sm`,style:{color:n>0?J.trend.down:J.trend.up},children:[(0,U.jsx)(r,{className:`w-3 h-3`}),Math.abs(n)]})})()]}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.newestValue`,`Newest value`)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`span`,{className:`text-2xl font-semibold text-slate-700`,children:t==null?`--`:t}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 mt-0.5`,children:c(`daily.average`,`Average`)})]})]})}),(0,U.jsx)(Ze,{data:u,lines:[{dataKey:`value`,areaDataKey:`range`,color:l,label:`SpO2`,showArea:!0,gradientId:`spo2Gradient`,legendShape:`line`}],xAxisKey:`time`,yAxisDomain:[90,100],renderTooltip:e=>(0,U.jsx)(Do,{...e}),height:180,showLegend:!1})]})});function ko(){let{t:e}=R(),[t,n]=(0,V.useState)(()=>ho()),[r,i]=(0,V.useState)(_o());return(0,V.useEffect)(()=>{n(ho())},[r]),t?(0,U.jsx)(`div`,{className:`min-h-screen pb-20`,style:{backgroundColor:`#F1EFEE`},children:(0,U.jsx)(`div`,{className:`${q.pageMaxWidth} mx-auto`,children:(0,U.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,U.jsx)(`span`,{className:`text-xs text-slate-500`,children:`Demo Mode`}),(0,U.jsx)(`button`,{onClick:()=>{i(bo())},className:`w-10 h-5 rounded-full transition-colors ${r?`bg-orange-400`:`bg-slate-300`}`,children:(0,U.jsx)(`span`,{className:`block w-4 h-4 bg-white rounded-full shadow transform transition-transform ${r?`translate-x-5`:`translate-x-0.5`}`})})]}),(0,U.jsx)(ja,{score:t.score,maxScore:100,percentile:t.percentile,percentileMessage:t.percentileMessage,aiTags:t.aiTags,themeColor:`#FB923D`,title:e(`daily.todayScore`,`Today's score`),icon:(0,U.jsx)(F,{className:`w-6 h-6 text-white`})}),(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsx)(`h3`,{className:`text-base font-semibold text-slate-800 px-1`,children:e(`daily.coreIndicators`,`Core indicator Analysis`)}),(0,U.jsx)(So,{latest:t.indicators.bloodPressure.latest,avg:t.indicators.bloodPressure.avg,max:t.indicators.bloodPressure.max,min:t.indicators.bloodPressure.min,reference:t.indicators.bloodPressure.reference,status:t.indicators.bloodPressure.status,chart:t.indicators.bloodPressure.chart}),(0,U.jsx)(wo,{latest:t.indicators.heartRate.latest,avg:t.indicators.heartRate.avg,max:t.indicators.heartRate.max,min:t.indicators.heartRate.min,reference:t.indicators.heartRate.reference,status:t.indicators.heartRate.status,chart:t.indicators.heartRate.chart}),(0,U.jsx)(Eo,{latest:t.indicators.bloodGlucose.latest,avg:t.indicators.bloodGlucose.avg,max:t.indicators.bloodGlucose.max,min:t.indicators.bloodGlucose.min,reference:t.indicators.bloodGlucose.reference,status:t.indicators.bloodGlucose.status,chart:t.indicators.bloodGlucose.chart}),(0,U.jsx)(Oo,{latest:t.indicators.bloodOxygen.latest,avg:t.indicators.bloodOxygen.avg,max:t.indicators.bloodOxygen.max,min:t.indicators.bloodOxygen.min,reference:t.indicators.bloodOxygen.reference,status:t.indicators.bloodOxygen.status,chart:t.indicators.bloodOxygen.chart})]}),t.aiInsights.length>0&&(0,U.jsx)(Ma,{insights:t.aiInsights,themeColor:He.primary}),t.suggestions.length>0&&(0,U.jsx)(Na,{suggestions:t.suggestions}),(0,U.jsx)(`p`,{className:`text-xs text-slate-400 text-center px-4 py-2`,children:e(`common.disclaimer`,`The monitoring results of this product are for reference only.`)})]})})}):null}var Ao=`rgb(251, 146, 61)`,jo=`rgba(251, 146, 61, 0.125)`;function Mo(){let{t:e,i18n:t}=R(),n=()=>{t.changeLanguage(t.language.startsWith(`en`)?`zh`:`en`)},r=[{category:e(`home.detailPages`),items:[{path:`/details/healthy`,label:e(`nav.healthyDashboard`),icon:de,color:ze.primary,alphaColor:ze.alpha},{path:`/details/blood-pressure`,label:e(`nav.bloodPressure`),icon:_e,color:W.bp,alphaColor:G.bp},{path:`/details/spo2`,label:e(`nav.spo2`),icon:Ce,color:W.spo2,alphaColor:G.spo2},{path:`/details/heart-rate`,label:e(`nav.heartRate`),icon:F,color:W.heartRate,alphaColor:G.heartRate},{path:`/details/glucose`,label:e(`nav.glucose`),icon:xe,color:W.glucose,alphaColor:G.glucose},{path:`/details/sleep`,label:e(`vitals.sleep`),icon:le,color:W.sleep,alphaColor:G.sleep},{path:`/details/emotion`,label:e(`vitals.emotion`),icon:ye,color:Ao,alphaColor:jo},{path:`/details/nutrition`,label:e(`vitals.nutrition`),icon:ve,color:W.nutrition,alphaColor:G.nutrition}]},{category:e(`home.dailyReportPages`),items:[{path:`/daily/healthy`,label:e(`nav.healthyDailyReport`),icon:de,color:ze.primary,alphaColor:ze.alpha},{path:`/daily/emotion`,label:e(`nav.emotionDailyReport`),icon:ye,color:Ao,alphaColor:jo},{path:`/daily/sleep`,label:e(`nav.sleepDailyReport`),icon:le,color:W.sleep,alphaColor:G.sleep}]},{category:e(`home.widgetPages`),items:[{path:`/widget/blood-pressure/trend`,label:e(`nav.bpTrendWidget`),icon:_e,color:W.bp,alphaColor:G.bp},{path:`/widget/spo2/trend`,label:e(`nav.spo2TrendWidget`),icon:Ce,color:W.spo2,alphaColor:G.spo2},{path:`/widget/heart-rate/trend`,label:e(`nav.hrTrendWidget`),icon:F,color:W.heartRate,alphaColor:G.heartRate},{path:`/widget/glucose/trend`,label:e(`nav.glucoseTrendWidget`),icon:xe,color:W.glucose,alphaColor:G.glucose}]}];return(0,U.jsx)(`div`,{className:`min-h-screen bg-[#F1EFEE] p-6`,children:(0,U.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold text-slate-800`,children:e(`home.title`)}),(0,U.jsx)(`p`,{className:`text-slate-500 mt-1`,children:e(`home.subtitle`)})]}),(0,U.jsx)(`button`,{onClick:n,className:`px-4 py-2 bg-white rounded-xl shadow-sm text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors`,children:t.language.startsWith(`en`)?`ä¸­æ–‡`:`English`})]}),r.map(e=>(0,U.jsxs)(`div`,{className:`mb-8`,children:[(0,U.jsx)(`h2`,{className:`text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4`,children:e.category}),(0,U.jsx)(`div`,{className:`grid gap-3`,children:e.items.map(e=>{let t=e.icon;return(0,U.jsxs)(j,{to:e.path,className:`flex items-center gap-4 p-4 bg-white rounded-2xl shadow-sm hover:shadow-md transition-all group`,children:[(0,U.jsx)(`div`,{className:`w-12 h-12 rounded-xl flex items-center justify-center`,style:{backgroundColor:e.alphaColor},children:(0,U.jsx)(t,{className:`w-6 h-6`,style:{color:e.color}})}),(0,U.jsxs)(`div`,{className:`flex-1`,children:[(0,U.jsx)(`p`,{className:`font-medium text-slate-800 group-hover:text-slate-900`,children:e.label}),(0,U.jsx)(`p`,{className:`text-sm text-slate-400 font-mono`,children:e.path})]}),(0,U.jsx)(`svg`,{className:`w-5 h-5 text-slate-300 group-hover:text-slate-400 transition-colors`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,U.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})})]},e.path)})})]},e.category)),(0,U.jsxs)(`div`,{className:`p-4 bg-white/50 rounded-2xl border border-slate-200`,children:[(0,U.jsx)(`h3`,{className:`text-sm font-semibold text-slate-600 mb-2`,children:e(`home.urlParameters`)}),(0,U.jsxs)(`div`,{className:`text-sm text-slate-500 space-y-1 font-mono`,children:[(0,U.jsx)(`p`,{children:`?lang=en | ?lang=zh`}),(0,U.jsx)(`p`,{children:`?theme=light | ?theme=dark`})]})]})]})})}n.use(o).use(D).init({resources:{en:{translation:{nav:{bloodPressure:`Blood Pressure`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`,healthyDashboard:`Healthy Dashboard`,healthyDailyReport:`Healthy Daily Report`,emotionDailyReport:`Emotion Daily Report`,sleepDailyReport:`Sleep Daily Report`,bpTrendWidget:`BP Trend Widget`,spo2TrendWidget:`SpO2 Trend Widget`,hrTrendWidget:`HR Trend Widget`,glucoseTrendWidget:`Glucose Trend Widget`},home:{title:`Health Vitals`,subtitle:`Visualization Library`,detailPages:`Details Pages`,widgetPages:`Widget Pages (for iframe embedding)`,dailyReportPages:`Daily Report Pages`,urlParameters:`URL Parameters`},common:{loading:`Loading...`,error:`An error occurred`,retry:`Retry`,noData:`No data available`,add:`Add`,average:`Average`,max:`Max`,min:`Min`,value:`Value`,times:`times`,time:`time`,good:`Good`,inAverage:`in average`,daily:`Daily`,weekly:`Weekly`,illustrate:`Illustrate`,close:`Close`,disclaimer:`The monitoring results of this product are for reference only. Some content is generated by AI, so please verify carefully. It should not be used for medical diagnosis. If you feel unwell, please seek medical attention promptly.`},vitals:{bloodPressure:`Blood Pressure`,systolic:`Systolic`,diastolic:`Diastolic`,sbp:`SBP`,dbp:`DBP`,pulse:`Pulse`,spo2:`Blood Oxygen`,heartRate:`Heart Rate`,glucose:`Blood Glucose`,fasting:`Fasting`,postMeal:`Post-meal`,bloodSugar:`Blood Sugar`,bloodOxygen:`Blood Oxygen`,sleep:`Sleep`,emotion:`Emotion`,nutrition:`Nutrition`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`bpm`,minute:`minute`,hour:`hours`},status:{normal:`Normal`,elevated:`Elevated`,high:`High`,low:`Low`,slow:`Slow`,good:`Good`,warning:`Warning`,danger:`Danger`,normalHighValue:`Normal high value`,tooLow:`Too low`,tooHigh:`Too High`},trend:{up:`Increased`,down:`Decreased`,stable:`Stable`},time:{week:`Week`,month:`Month`,year:`Year`,today:`Today`,yesterday:`Yesterday`,lastWeek:`Last week`},weekdays:{mon:`Mon`,tue:`Tue`,wed:`Wed`,thu:`Thu`,fri:`Fri`,sat:`Sat`,sun:`Sun`},page:{bloodPressure:{title:`Blood Pressure Details`,trendyReport:`Trendy Report`,weeksAverageSBP:`Week's average SBP`,weeksAverageDBP:`Week's average DBP`,bpStatistics:`BP Statistics`,normalResults:`normal blood pressure results`,compareWithLastWeek:`Compare With Last Week`,averageSBP:`Average SBP`,averageDBP:`Average diastolic blood pressure`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your blood pressure is generally within the ideal range. Although your systolic blood pressure has risen slightly compared to last week, it remains within the normal fluctuation range.`,bpClassification:`Blood Pressure Classification (unit: mmHg)

Low blood pressure: systolic pressure <90 / diastolic pressure <60

Normal blood pressure: systolic pressure <120 / diastolic pressure <80

High normal values (caution advised): systolic blood pressure 120-129 / diastolic blood pressure 80-89

Grade 1 hypertension: systolic blood pressure â‰¥130 mmHg`},spo2:{title:`Blood Oxygen Details`,trendTitle:`SpO2 Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average SpO2`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`SpO2 Statistics`,totalTests:`times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,rangeToday:`Today's Range`,defaultAnalysis1:`The average blood oxygen saturation this week was {{avg}}%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level ({{max}}%) from {{maxDay}}.`,defaultAnalysis3:`On {{minDay}}, a blood oxygen level of {{min}}% was recorded, slightly below the lower limit of the normal range.`,defaultOverview:`Your blood oxygen is generally within the ideal range. Although it has fluctuated slightly compared to last week, it remains within the normal fluctuation range.`,defaultHighlights:`The trend chart shows that your blood oxygen fluctuated significantly during the week. Meanwhile, the statistics show that your blood oxygen measurements varied across different levels. We will continue to monitor your condition and help you identify any possible causes for the low blood oxygen.`},heartRate:{title:`Heart Rate Details`,trendTitle:`Heart Rate Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average heart rate`,range:`Range`,mean:`Mean`,statistics:`Heart Rate Distribution`,totalTests:`times`,dataAnalysis:`Data analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,anomalyAlert:`Anomaly alert`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,restingHR:`Resting HR`,maxHR:`Max HR`,defaultAnalysis1:`The average heart rate this week was {{avg}} bpm.`,defaultAnalysis2:`Your heart rate reached a peak of {{max}} bpm on {{maxDay}}.`,defaultAnalysis3:`The lowest heart rate of {{min}} bpm was recorded on {{minDay}}.`,defaultOverview:`Your heart rate is generally within the normal range this week. Keep up with your regular exercise routine!`,defaultHighlights:`The trend chart shows some fluctuations in your heart rate during the week. This is normal and can be influenced by physical activity, stress levels, and sleep quality.`},glucose:{title:`Blood Glucose Details`,trendTitle:`Blood Glucose Trend`,trendyReport:`Trendy Report`,weeksAverage:`Week's average glucose`,normalRange:`Normal range`,range:`Range`,mean:`Mean`,statistics:`Glucose Statistics`,normalResults:`normal glucose results`,compareWithLastWeek:`Compare With Last Week`,averageGlucose:`Average glucose`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,weeklyComparison:`Weekly Comparison`,averageReading:`Average Reading`,lastReading:`Last Reading`,fastingLevel:`Fasting Level`,postMealLevel:`Post-meal Level`,fastingNormal:`Fasting normal`,postMealNormal:`Post-meal normal`,defaultInsight:`Your blood glucose is generally within the normal range. Keep maintaining a balanced diet and regular exercise habits for stable blood sugar levels.`,defaultOverview:`Your blood glucose levels are generally within the normal range this week. Keep up the good work with your diet and exercise habits!`,defaultHighlights:`The trend chart shows some fluctuations in your blood glucose levels during the week. Pay attention to your diet, especially after meals, to maintain stable blood sugar levels.`},sleep:{title:`Sleep Details`,trendyReport:`Trendy Report`,weeksAverageSleep:`Week's average sleep`,sleepStructure:`Sleep Structure`,deepSleep:`Deep Sleep`,lightSleep:`Light Sleep`,remSleep:`REM Sleep`,awake:`Awake`,standard:`Standard`,dataAnalysis:`Data Analysis`,compareWithLastWeek:`Compare With Last Week`,avgSleepTime:`Avg. sleep time`,avgWakeTime:`Avg. wake time`,sameAsLastWeek:`Same as last week`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,defaultInsight:`Your sleep schedule has been consistent this week. Maintaining a regular sleep routine is beneficial for your overall health and well-being.`,defaultOverview:`Your sleep quality this week has been generally good. You have maintained a consistent sleep schedule, which is beneficial for your overall health.`,defaultHighlights:`The trend chart shows your sleep patterns have been relatively stable throughout the week. However, pay attention to your REM sleep ratio as it may affect your sleep quality and dream patterns.`,defaultAnalysis1:`The average blood oxygen saturation this week was 97%, the same as last week.`,defaultAnalysis2:`Your blood oxygen level remained at a high level (98%) from Tuesday to Thursday this week.`,defaultAnalysis3:`On Friday, a blood oxygen level of 94% was recorded, slightly below the lower limit of the normal range.`,highest:`Highest`,lowest:`Lowest`},emotion:{title:`Emotion Details`,trendyReport:`Trendy Report`,weeksAverage:`Week's average emotion`,points:`pts`,score:`Emotion score`,statistics:`Emotion Statistics`,distribution:`Emotion Distribution`,dataAnalysis:`Data Analysis`,weeklyOverview:`Weekly Overview`,overallSituation:`Overall situation`,needsAttention:`Needs attention`,diary:`Emotion Diary`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,defaultOverview:`Your emotional state has been generally positive this week. Keep maintaining a good mindset and healthy lifestyle habits!`,defaultHighlights:`The trend chart shows some fluctuations in your emotions during the week. This is normal and can be influenced by work stress, sleep quality, and social activities.`,defaultAnalysis1:`Your emotions are predominantly positive, with an overall good state`,defaultAnalysis2:`Emotional fluctuations are within normal range, showing good emotional regulation ability`,defaultAnalysis3:`It is recommended to continue maintaining a positive attitude and practice relaxation techniques`,demoMode:`Demo Mode`,toggleDemoMode:`Toggle demo mode`,demoModeOn:`Using dummy data`,demoModeOff:`Using backend data`},nutrition:{weeklyOverview:`Weekly Overview`,defaultOverview:`Your nutritional intake is generally balanced. Total calorie intake fluctuates slightly but remains within the target range.`,defaultHighlights:`The analysis shows that your protein intake has been consistent, but there was a slight excess in fat consumption over the weekend. We recommend increasing vegetable intake to balance the micronutrients.`,anomalyAlert:`Anomaly alert`}},healthy:{comprehensiveHealth:`Comprehensive health data`,aiGenerated:`AI Generated`,bpDescription:`Your average systolic blood pressure over the past {{period}} was `,bpDescriptionCont:`, and your average diastolic blood pressure was `,hrDescription:`Your average heart rate over the past {{period}} was `,hrDescriptionCont:`, with normal resting heart rate patterns.`,heartRateLabel:`Heart rate`,bsDescription:`Your average blood sugar over the past {{period}} was `,bsDescriptionCont:`, within the normal range.`,spo2Description:`Your average blood oxygen over the past {{period}} was `,spo2DescriptionCont:`, maintaining healthy oxygen levels.`,sleepDescription:`Your average sleep duration over the past {{period}} was `,sleepDescriptionCont:`, with good sleep quality.`,sleepTime:`Sleep time`,emotionDescription:`Your emotional state over the past {{period}} was `,emotionDescriptionCont:`, showing positive trends.`,positive:`Positive`,neutral:`Neutral`,negative:`Negative`,nutritionDescription:`Your nutrition intake over the past {{period}} was `,nutritionDescriptionCont:`, within recommended levels.`,demoMode:`Demo Mode`,toggleDemoMode:`Toggle demo mode`,demoModeOn:`Using dummy data`,demoModeOff:`Using backend data`},daily:{todayScore:`Today's score`,todayEmotionScore:`Today's emotion score`,aiAnalysis:`AI Analysis`,aiHealthInsights:`AI health related insights`,personalizedSuggestions:`Personalized suggestions`,emotionProportion:`Emotional proportion analysis`,emotionDistribution:`Emotion distribution`,asMain:`as main`,sleepStructure:`Sleep structure diagram`,sleepDistribution:`Sleep distribution`,sleepQuality:`Sleep quality indicators`,totalDuration:`Total sleep duration`,deepSleep:`Deep sleep`,totalHours:`Total hours`,coreIndicators:`Core indicator Analysis`,reference:`Reference`,latest:`Latest`,weekAvg:`7d Avg`,newestValue:`Latest`,average:`Average`,standard:`Reference`},sleep:{deep:`Deep sleep`,light:`Light sleep`,rem:`REM`,awake:`Awake`},nutrition:{dataAnalysis:`Data Analysis`,dietAnalysis:`Diet analysis`,healthScore:`Health Score`,basalMetabolismTrend:`Basal metabolism trend`,avg:`Avg`,meet:`Meet`,insufficient:`Insufficient`,excess:`Excess`,microElementStatus:`Micro-element status`,normal:`Normal`,range:`Range`,viewAllElements:`View all elements`,weeklyAverageReport:`Weekly average report`,weeklyIntakeReport:`Weekly intake report`,excessiveIntake:`Excessive intake`,target:`Target`,calorieIntake:`Calorie intake`,averageConsumption:`Average consumption`,microElementStructure:`Micro-element structure`,balancedIntakeSummary:`Your intake of carbohydrates, protein, and fat is relatively balanced. Keep focusing on Vitamin intake.`,complicatedRecipes:`Complicated recipes`,kcal:`kcal`,goal:`Goal`,exceed:`Exceed`}}},zh:{translation:{nav:{bloodPressure:`è¡€åŽ‹`,spo2:`è¡€æ°§`,heartRate:`å¿ƒçŽ‡`,glucose:`è¡€ç³–`,healthyDashboard:`å¥åº·çœ‹æ¿`,healthyDailyReport:`å¥åº·æ—¥æŠ¥`,emotionDailyReport:`æƒ…ç»ªæ—¥æŠ¥`,sleepDailyReport:`ç¡çœ æ—¥æŠ¥`,bpTrendWidget:`è¡€åŽ‹è¶‹åŠ¿ç»„ä»¶`,spo2TrendWidget:`è¡€æ°§è¶‹åŠ¿ç»„ä»¶`,hrTrendWidget:`å¿ƒçŽ‡è¶‹åŠ¿ç»„ä»¶`,glucoseTrendWidget:`è¡€ç³–è¶‹åŠ¿ç»„ä»¶`},home:{title:`å¥åº·æŒ‡æ ‡`,subtitle:`å¯è§†åŒ–å›¾è¡¨åº“`,detailPages:`è¯¦æƒ…é¡µé¢`,widgetPages:`Widget ç»„ä»¶é¡µ (ç”¨äºŽ iframe åµŒå…¥)`,dailyReportPages:`æ—¥æŠ¥é¡µé¢`,urlParameters:`URL å‚æ•°`},common:{loading:`åŠ è½½ä¸­...`,error:`å‘ç”Ÿé”™è¯¯`,retry:`é‡è¯•`,noData:`æš‚æ— æ•°æ®`,add:`æ·»åŠ `,average:`å¹³å‡`,max:`æœ€é«˜`,min:`æœ€ä½Ž`,value:`æ•°å€¼`,times:`æ¬¡`,time:`æ¬¡`,good:`è‰¯å¥½`,inAverage:`å¹³å‡`,daily:`æ¯æ—¥`,weekly:`æ¯å‘¨`,illustrate:`è¯´æ˜Ž`,close:`å…³é—­`,disclaimer:`æœ¬äº§å“çš„ç›‘æµ‹ç»“æžœä»…ä¾›å‚è€ƒã€‚éƒ¨åˆ†å†…å®¹ç”± AI ç”Ÿæˆï¼Œè¯·ä»”ç»†æ ¸å®žã€‚ä¸åº”ç”¨äºŽåŒ»ç–—è¯Šæ–­ã€‚å¦‚æžœæ‚¨æ„Ÿåˆ°ä¸é€‚ï¼Œè¯·åŠæ—¶å°±åŒ»ã€‚`},vitals:{bloodPressure:`è¡€åŽ‹`,systolic:`æ”¶ç¼©åŽ‹`,diastolic:`èˆ’å¼ åŽ‹`,sbp:`é«˜åŽ‹`,dbp:`ä½ŽåŽ‹`,pulse:`è„‰æ`,spo2:`è¡€æ°§`,heartRate:`å¿ƒçŽ‡`,glucose:`è¡€ç³–`,fasting:`ç©ºè…¹`,postMeal:`é¤åŽ`,bloodSugar:`è¡€ç³–`,bloodOxygen:`è¡€æ°§`,sleep:`ç¡çœ `,emotion:`æƒ…ç»ª`,nutrition:`è¥å…»`},units:{mmHg:`mmHg`,percent:`%`,mgDl:`mg/dL`,mmolL:`mmol/L`,bpm:`æ¬¡/åˆ†`,minute:`åˆ†é’Ÿ`,hour:`å°æ—¶`},status:{normal:`æ­£å¸¸`,elevated:`åé«˜`,high:`è¿‡é«˜`,low:`åä½Ž`,slow:`è¿‡ç¼“`,good:`è‰¯å¥½`,warning:`è­¦å‘Š`,danger:`å±é™©`,normalHighValue:`æ­£å¸¸é«˜å€¼`,tooLow:`è¿‡ä½Ž`,tooHigh:`è¿‡é«˜`},trend:{up:`ä¸Šå‡`,down:`ä¸‹é™`,stable:`å¹³ç¨³`},time:{week:`å‘¨`,month:`æœˆ`,year:`å¹´`,today:`ä»Šå¤©`,yesterday:`æ˜¨å¤©`,lastWeek:`ä¸Šå‘¨`},weekdays:{mon:`å‘¨ä¸€`,tue:`å‘¨äºŒ`,wed:`å‘¨ä¸‰`,thu:`å‘¨å››`,fri:`å‘¨äº”`,sat:`å‘¨å…­`,sun:`å‘¨æ—¥`},page:{bloodPressure:{title:`è¡€åŽ‹è¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverageSBP:`æœ¬å‘¨å¹³å‡é«˜åŽ‹`,weeksAverageDBP:`æœ¬å‘¨å¹³å‡ä½ŽåŽ‹`,bpStatistics:`è¡€åŽ‹ç»Ÿè®¡`,normalResults:`æ¬¡æ­£å¸¸è¡€åŽ‹ç»“æžœ`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,averageSBP:`å¹³å‡é«˜åŽ‹`,averageDBP:`å¹³å‡èˆ’å¼ åŽ‹`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,defaultInsight:`æ‚¨çš„è¡€åŽ‹æ•´ä½“å¤„äºŽç†æƒ³èŒƒå›´å†…ã€‚è™½ç„¶ä¸Žä¸Šå‘¨ç›¸æ¯”ï¼Œæ”¶ç¼©åŽ‹ç•¥æœ‰ä¸Šå‡ï¼Œä½†ä»å¤„äºŽæ­£å¸¸æ³¢åŠ¨èŒƒå›´å†…ã€‚`,bpClassification:`è¡€åŽ‹åˆ†ç±»æ ‡å‡†ï¼ˆå•ä½ï¼šmmHgï¼‰

ä½Žè¡€åŽ‹ï¼šæ”¶ç¼©åŽ‹ <90 / èˆ’å¼ åŽ‹ <60

æ­£å¸¸è¡€åŽ‹ï¼šæ”¶ç¼©åŽ‹ <120 / èˆ’å¼ åŽ‹ <80

æ­£å¸¸é«˜å€¼ï¼ˆéœ€æ³¨æ„ï¼‰ï¼šæ”¶ç¼©åŽ‹ 120-129 / èˆ’å¼ åŽ‹ 80-89

é«˜è¡€åŽ‹ï¼ˆ1çº§ï¼‰ï¼šæ”¶ç¼©åŽ‹ â‰¥130 mmHg`},spo2:{title:`è¡€æ°§è¯¦æƒ…`,trendTitle:`è¡€æ°§è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡è¡€æ°§`,normalRange:`æ­£å¸¸èŒƒå›´`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`è¡€æ°§ç»Ÿè®¡`,totalTests:`æ¬¡æ•°`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡è¡€æ°§`,lastReading:`æœ€è¿‘è¯»æ•°`,rangeToday:`ä»Šæ—¥èŒƒå›´`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡è¡€æ°§é¥±å’Œåº¦ä¸º {{avg}}%ï¼Œä¸Žä¸Šå‘¨æŒå¹³ã€‚`,defaultAnalysis2:`è¡€æ°§æ°´å¹³åœ¨{{maxDay}}ä¿æŒè¾ƒé«˜æ°´å¹³ï¼ˆ{{max}}%ï¼‰ã€‚`,defaultAnalysis3:`{{minDay}}è®°å½•åˆ°è¡€æ°§æ°´å¹³ä¸º {{min}}%ï¼Œç•¥ä½ŽäºŽæ­£å¸¸èŒƒå›´ä¸‹é™ã€‚`,defaultOverview:`æ‚¨çš„è¡€æ°§æ•´ä½“å¤„äºŽç†æƒ³èŒƒå›´å†…ã€‚è™½ç„¶ä¸Žä¸Šå‘¨ç›¸æ¯”ç•¥æœ‰æ³¢åŠ¨ï¼Œä½†ä»å¤„äºŽæ­£å¸¸æ³¢åŠ¨èŒƒå›´å†…ã€‚`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„è¡€æ°§åœ¨æœ¬å‘¨ä¸­æœ‰æ˜Žæ˜¾æ³¢åŠ¨ã€‚ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºæ‚¨çš„è¡€æ°§æµ‹é‡å€¼åœ¨ä¸åŒæ°´å¹³é—´æœ‰ä¸€å®šå˜åŒ–ã€‚æˆ‘ä»¬å°†ç»§ç»­ç›‘æµ‹æ‚¨çš„çŠ¶å†µï¼Œå¹¶å¸®åŠ©æ‚¨è¯†åˆ«ä»»ä½•å¯èƒ½å¯¼è‡´è¡€æ°§åä½Žçš„åŽŸå› ã€‚`},heartRate:{title:`å¿ƒçŽ‡è¯¦æƒ…`,trendTitle:`å¿ƒçŽ‡è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡å¿ƒçŽ‡`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`å¿ƒçŽ‡ç»Ÿè®¡`,totalTests:`æ¬¡æ•°`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡å¿ƒçŽ‡`,lastReading:`æœ€è¿‘è¯»æ•°`,restingHR:`é™æ¯å¿ƒçŽ‡`,maxHR:`æœ€é«˜å¿ƒçŽ‡`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡å¿ƒçŽ‡ä¸º {{avg}} æ¬¡/åˆ†ã€‚`,defaultAnalysis2:`å¿ƒçŽ‡åœ¨{{maxDay}}è¾¾åˆ°å³°å€¼ {{max}} æ¬¡/åˆ†ã€‚`,defaultAnalysis3:`{{minDay}}è®°å½•åˆ°æœ€ä½Žå¿ƒçŽ‡ {{min}} æ¬¡/åˆ†ã€‚`,defaultOverview:`æ‚¨çš„å¿ƒçŽ‡æœ¬å‘¨æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚ç»§ç»­ä¿æŒå¸¸è§„çš„è¿åŠ¨ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„å¿ƒçŽ‡åœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°ä½“åŠ›æ´»åŠ¨ã€åŽ‹åŠ›æ°´å¹³å’Œç¡çœ è´¨é‡çš„å½±å“ã€‚`},glucose:{title:`è¡€ç³–è¯¦æƒ…`,trendTitle:`è¡€ç³–è¶‹åŠ¿`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡è¡€ç³–`,normalRange:`æ­£å¸¸èŒƒå›´`,range:`èŒƒå›´`,mean:`å‡å€¼`,statistics:`è¡€ç³–ç»Ÿè®¡`,normalResults:`æ¬¡æ­£å¸¸è¡€ç³–ç»“æžœ`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,averageGlucose:`å¹³å‡è¡€ç³–`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,weeklyComparison:`æœ¬å‘¨å¯¹æ¯”`,averageReading:`å¹³å‡è¡€ç³–`,lastReading:`æœ€è¿‘è¯»æ•°`,fastingLevel:`ç©ºè…¹è¡€ç³–`,postMealLevel:`é¤åŽè¡€ç³–`,fastingNormal:`ç©ºè…¹æ­£å¸¸å€¼`,postMealNormal:`é¤åŽæ­£å¸¸å€¼`,defaultInsight:`æ‚¨çš„è¡€ç³–æ°´å¹³æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚è¯·ç»§ç»­ä¿æŒå‡è¡¡çš„é¥®é£Ÿå’Œè§„å¾‹çš„è¿åŠ¨ä¹ æƒ¯ï¼Œä»¥ç»´æŒç¨³å®šçš„è¡€ç³–æ°´å¹³ã€‚`,defaultOverview:`æœ¬å‘¨æ‚¨çš„è¡€ç³–æ°´å¹³æ•´ä½“å¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„é¥®é£Ÿå’Œè¿åŠ¨ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„è¡€ç³–åœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¯·æ³¨æ„é¥®é£Ÿï¼Œå°¤å…¶æ˜¯é¤åŽï¼Œä»¥ä¿æŒè¡€ç³–æ°´å¹³ç¨³å®šã€‚`},sleep:{title:`ç¡çœ è¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverageSleep:`æœ¬å‘¨å¹³å‡ç¡çœ `,sleepStructure:`ç¡çœ ç»“æž„`,deepSleep:`æ·±åº¦ç¡çœ `,lightSleep:`æµ…ç¡çœ `,remSleep:`å¿«é€Ÿçœ¼åŠ¨`,awake:`æ¸…é†’`,standard:`æ ‡å‡†`,dataAnalysis:`æ•°æ®åˆ†æž`,compareWithLastWeek:`ä¸Žä¸Šå‘¨å¯¹æ¯”`,avgSleepTime:`å¹³å‡å…¥ç¡æ—¶é—´`,avgWakeTime:`å¹³å‡èµ·åºŠæ—¶é—´`,sameAsLastWeek:`ä¸Žä¸Šå‘¨æŒå¹³`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,defaultInsight:`æœ¬å‘¨æ‚¨çš„ç¡çœ ä½œæ¯æ¯”è¾ƒè§„å¾‹ã€‚ä¿æŒè§„å¾‹çš„ç¡çœ ä¹ æƒ¯å¯¹æ‚¨çš„æ•´ä½“å¥åº·éžå¸¸æœ‰ç›Šã€‚`,defaultOverview:`æœ¬å‘¨æ‚¨çš„ç¡çœ è´¨é‡æ•´ä½“è‰¯å¥½ã€‚æ‚¨ä¿æŒäº†è¾ƒä¸ºè§„å¾‹çš„ç¡çœ ä½œæ¯ï¼Œè¿™å¯¹æ‚¨çš„æ•´ä½“å¥åº·éžå¸¸æœ‰ç›Šã€‚`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨æœ¬å‘¨çš„ç¡çœ æ¨¡å¼ç›¸å¯¹ç¨³å®šã€‚ä½†è¯·æ³¨æ„æ‚¨çš„å¿«é€Ÿçœ¼åŠ¨ç¡çœ æ¯”ä¾‹ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ‚¨çš„ç¡çœ è´¨é‡å’Œæ¢¦å¢ƒæ¨¡å¼ã€‚`,defaultAnalysis1:`æœ¬å‘¨å¹³å‡è¡€æ°§é¥±å’Œåº¦ä¸º 97%ï¼Œä¸Žä¸Šå‘¨æŒå¹³ã€‚`,defaultAnalysis2:`è¡€æ°§æ°´å¹³åœ¨æœ¬å‘¨äºŒè‡³å‘¨å››ä¿æŒè¾ƒé«˜æ°´å¹³ï¼ˆ98%ï¼‰ã€‚`,defaultAnalysis3:`å‘¨äº”è®°å½•åˆ°è¡€æ°§æ°´å¹³ä¸º 94%ï¼Œç•¥ä½ŽäºŽæ­£å¸¸èŒƒå›´ä¸‹é™ã€‚`,highest:`æœ€é«˜`,lowest:`æœ€ä½Ž`},emotion:{title:`æƒ…ç»ªè¯¦æƒ…`,trendyReport:`è¶‹åŠ¿æŠ¥å‘Š`,weeksAverage:`æœ¬å‘¨å¹³å‡æƒ…ç»ª`,points:`åˆ†`,score:`æƒ…ç»ªåˆ†æ•°`,statistics:`æƒ…ç»ªç»Ÿè®¡`,distribution:`æƒ…ç»ªåˆ†å¸ƒ`,dataAnalysis:`æ•°æ®åˆ†æž`,weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,overallSituation:`æ•´ä½“æƒ…å†µ`,needsAttention:`éœ€è¦æ³¨æ„`,diary:`æƒ…ç»ªæ—¥è®°`,positive:`ç§¯æž`,neutral:`ä¸­æ€§`,negative:`æ¶ˆæž`,defaultOverview:`æœ¬å‘¨æ‚¨çš„æƒ…ç»ªæ•´ä½“å¤„äºŽç§¯æžçŠ¶æ€ã€‚ç»§ç»­ä¿æŒè‰¯å¥½çš„å¿ƒæ€å’Œç”Ÿæ´»ä¹ æƒ¯ï¼`,defaultHighlights:`è¶‹åŠ¿å›¾æ˜¾ç¤ºæ‚¨çš„æƒ…ç»ªåœ¨æœ¬å‘¨ä¸­æœ‰ä¸€äº›æ³¢åŠ¨ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½ä¼šå—åˆ°å·¥ä½œåŽ‹åŠ›ã€ç¡çœ è´¨é‡å’Œç¤¾äº¤æ´»åŠ¨çš„å½±å“ã€‚`,defaultAnalysis1:`æ‚¨çš„æƒ…ç»ªä»¥ç§¯æžä¸ºä¸»ï¼Œæ•´ä½“çŠ¶æ€è‰¯å¥½`,defaultAnalysis2:`æƒ…ç»ªæ³¢åŠ¨åœ¨æ­£å¸¸èŒƒå›´å†…ï¼Œæƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›è¾ƒå¼º`,defaultAnalysis3:`å»ºè®®ç»§ç»­ä¿æŒç§¯æžçš„ç”Ÿæ´»æ€åº¦ï¼Œé€‚å½“è¿›è¡Œæ”¾æ¾è®­ç»ƒ`},nutrition:{weeklyOverview:`å‘¨æŠ¥æ¦‚è§ˆ`,defaultOverview:`æœ¬å‘¨æ‚¨çš„è¥å…»æ‘„å…¥æ•´ä½“å‡è¡¡ã€‚æ€»çƒ­é‡æ‘„å…¥ç•¥æœ‰æ³¢åŠ¨ï¼Œä½†ä¿æŒåœ¨ç›®æ ‡èŒƒå›´å†…ã€‚`,defaultHighlights:`åˆ†æžæ˜¾ç¤ºæ‚¨çš„è›‹ç™½è´¨æ‘„å…¥ä¿æŒç¨³å®šï¼Œä½†å‘¨æœ«è„‚è‚ªæ‘„å…¥ç•¥æœ‰è¶…æ ‡ã€‚å»ºè®®å¢žåŠ è”¬èœæ‘„å…¥ä»¥å¹³è¡¡å¾®é‡å…ƒç´ ã€‚`,anomalyAlert:`å¼‚å¸¸è­¦æŠ¥`}},daily:{todayScore:`ä»Šæ—¥è¯„åˆ†`,todayEmotionScore:`ä»Šæ—¥æƒ…ç»ªè¯„åˆ†`,aiAnalysis:`AI åˆ†æž`,aiHealthInsights:`AI å¥åº·ç›¸å…³è§è§£`,personalizedSuggestions:`ä¸ªæ€§åŒ–å»ºè®®`,emotionProportion:`æƒ…ç»ªæ¯”ä¾‹åˆ†æž`,emotionDistribution:`æƒ…ç»ªåˆ†å¸ƒ`,asMain:`ä¸ºä¸»`,sleepStructure:`ç¡çœ ç»“æž„å›¾`,sleepDistribution:`ç¡çœ åˆ†å¸ƒ`,sleepQuality:`ç¡çœ è´¨é‡æŒ‡æ ‡`,totalDuration:`æ€»ç¡çœ æ—¶é•¿`,deepSleep:`æ·±åº¦ç¡çœ `,totalHours:`æ€»æ—¶é•¿`,coreIndicators:`æ ¸å¿ƒæŒ‡æ ‡åˆ†æž`,reference:`å‚è€ƒå€¼`,latest:`æœ€æ–°å€¼`,weekAvg:`7æ—¥å‡å€¼`,newestValue:`æœ€æ–°å€¼`,average:`å¹³å‡å€¼`,standard:`å‚è€ƒå€¼`,demoMode:`æ¼”ç¤ºæ¨¡å¼`,toggleDemoMode:`åˆ‡æ¢æ¼”ç¤ºæ¨¡å¼`,demoModeOn:`ä½¿ç”¨å‡æ•°æ®`,demoModeOff:`ä½¿ç”¨åŽç«¯æ•°æ®`},healthy:{comprehensiveHealth:`ç»¼åˆå¥åº·æ•°æ®`,aiGenerated:`AI ç”Ÿæˆ`,bpDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡æ”¶ç¼©åŽ‹ä¸º `,bpDescriptionCont:`ï¼Œå¹³å‡èˆ’å¼ åŽ‹ä¸º `,hrDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡å¿ƒçŽ‡ä¸º `,hrDescriptionCont:`ï¼Œé™æ¯å¿ƒçŽ‡æ¨¡å¼æ­£å¸¸ã€‚`,heartRateLabel:`å¿ƒçŽ‡`,bsDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡è¡€ç³–ä¸º `,bsDescriptionCont:`ï¼Œå¤„äºŽæ­£å¸¸èŒƒå›´å†…ã€‚`,spo2Description:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡è¡€æ°§ä¸º `,spo2DescriptionCont:`ï¼Œä¿æŒå¥åº·çš„æ°§æ°”æ°´å¹³ã€‚`,sleepDescription:`è¿‡åŽ»{{period}}æ‚¨çš„å¹³å‡ç¡çœ æ—¶é•¿ä¸º `,sleepDescriptionCont:`ï¼Œç¡çœ è´¨é‡è‰¯å¥½ã€‚`,sleepTime:`ç¡çœ æ—¶é•¿`,emotionDescription:`è¿‡åŽ»{{period}}æ‚¨çš„æƒ…ç»ªçŠ¶æ€ä¸º `,emotionDescriptionCont:`ï¼Œå‘ˆçŽ°ç§¯æžè¶‹åŠ¿ã€‚`,positive:`ç§¯æž`,neutral:`ä¸­æ€§`,negative:`æ¶ˆæž`,nutritionDescription:`è¿‡åŽ»{{period}}æ‚¨çš„è¥å…»æ‘„å…¥ä¸º `,nutritionDescriptionCont:`ï¼Œå¤„äºŽæŽ¨èæ°´å¹³å†…ã€‚`,demoMode:`æ¼”ç¤ºæ¨¡å¼`,toggleDemoMode:`åˆ‡æ¢æ¼”ç¤ºæ¨¡å¼`,demoModeOn:`ä½¿ç”¨å‡æ•°æ®`,demoModeOff:`ä½¿ç”¨åŽç«¯æ•°æ®`},nutrition:{dataAnalysis:`æ•°æ®åˆ†æž`,dietAnalysis:`é¥®é£Ÿåˆ†æž`,healthScore:`å¥åº·è¯„åˆ†`,basalMetabolismTrend:`åŸºç¡€ä»£è°¢è¶‹åŠ¿`,avg:`å¹³å‡`,meet:`è¾¾æ ‡`,insufficient:`ä¸è¶³`,excess:`è¶…æ ‡`,microElementStatus:`å¾®é‡å…ƒç´ çŠ¶æ€`,normal:`æ­£å¸¸`,range:`èŒƒå›´`,viewAllElements:`æŸ¥çœ‹æ‰€æœ‰å…ƒç´ `,weeklyAverageReport:`å‘¨å¹³å‡æŠ¥å‘Š`,weeklyIntakeReport:`å‘¨æ‘„å…¥æŠ¥å‘Š`,excessiveIntake:`æ‘„å…¥è¿‡é‡`,target:`ç›®æ ‡`,calorieIntake:`çƒ­é‡æ‘„å…¥`,averageConsumption:`å¹³å‡æ¶ˆè€—`,microElementStructure:`å¾®é‡å…ƒç´ ç»“æž„`,balancedIntakeSummary:`æ‚¨çš„ç¢³æ°´åŒ–åˆç‰©ã€è›‹ç™½è´¨å’Œè„‚è‚ªæ‘„å…¥ç›¸å¯¹å‡è¡¡ã€‚ç»§ç»­å…³æ³¨ç»´ç”Ÿç´ æ‘„å…¥ã€‚`,complicatedRecipes:`æŽ¨èé£Ÿè°±`,kcal:`åƒå¡`,goal:`è¾¾æ ‡`,exceed:`è¶…æ ‡`}}}},fallbackLng:`zh`,debug:!1,interpolation:{escapeValue:!1},detection:{order:[`querystring`,`localStorage`,`navigator`],lookupQuerystring:`lang`,lookupLocalStorage:`i18nextLng`,caches:[`localStorage`]}});var No=new Oe({defaultOptions:{queries:{retry:2,refetchOnWindowFocus:!1}}}),Po=()=>(0,U.jsx)(`div`,{className:`flex items-center justify-center h-screen bg-slate-50`,children:(0,U.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-2 border-orange-400 border-t-transparent`})});function Fo(){return(0,U.jsx)(N,{client:No,children:(0,U.jsx)(te,{children:(0,U.jsx)(V.Suspense,{fallback:(0,U.jsx)(Po,{}),children:(0,U.jsxs)(De,{children:[(0,U.jsx)(I,{path:`/`,element:(0,U.jsx)(Mo,{})}),(0,U.jsx)(I,{path:`/details/blood-pressure`,element:(0,U.jsx)(Rt,{})}),(0,U.jsx)(I,{path:`/details/spo2`,element:(0,U.jsx)(fn,{})}),(0,U.jsx)(I,{path:`/details/heart-rate`,element:(0,U.jsx)(Nn,{})}),(0,U.jsx)(I,{path:`/details/glucose`,element:(0,U.jsx)(tr,{})}),(0,U.jsx)(I,{path:`/details/healthy`,element:(0,U.jsx)(Ur,{})}),(0,U.jsx)(I,{path:`/details/sleep`,element:(0,U.jsx)(gi,{})}),(0,U.jsx)(I,{path:`/details/emotion`,element:(0,U.jsx)(Xi,{})}),(0,U.jsx)(I,{path:`/details/nutrition`,element:(0,U.jsx)(ka,{})}),(0,U.jsx)(I,{path:`/daily/emotion`,element:(0,U.jsx)(Ja,{})}),(0,U.jsx)(I,{path:`/daily/sleep`,element:(0,U.jsx)(mo,{})}),(0,U.jsx)(I,{path:`/daily/healthy`,element:(0,U.jsx)(ko,{})}),(0,U.jsx)(I,{path:`/widget/blood-pressure/trend`,element:(0,U.jsx)(Gt,{})}),(0,U.jsx)(I,{path:`/widget/spo2/trend`,element:(0,U.jsx)(hn,{})}),(0,U.jsx)(I,{path:`/widget/heart-rate/trend`,element:(0,U.jsx)(In,{})}),(0,U.jsx)(I,{path:`/widget/glucose/trend`,element:(0,U.jsx)(ir,{})}),(0,U.jsx)(I,{path:`*`,element:(0,U.jsx)(M,{to:`/`,replace:!0})})]})})})})}var Io=Fo;(0,ke.createRoot)(document.getElementById(`root`)).render((0,U.jsx)(Io,{}));